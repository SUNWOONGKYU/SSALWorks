# 토스 페이먼트 빌링키 설정

## 질문
정기결제(구독) 기능을 구현하려면 어떻게 해야 하나요?

## 답변

### 프로토타입 vs 본개발

**현재 프로토타입 상태**
- 더미 빌링키(`test_billing_key_001`) 사용
- 실제 결제 없이 UI/UX 테스트만 가능

**본개발 시 필요한 작업**

1. **토스 페이먼트 가맹점 등록**
   - 심사 기간: 1-2주 소요
   - https://developers.tosspayments.com/

2. **빌링키 발급 API 연동**
   ```javascript
   // 카드 등록 → 빌링키 발급
   const response = await fetch('https://api.tosspayments.com/v1/billing/authorizations/card', {
       method: 'POST',
       headers: {
           'Authorization': 'Basic ' + btoa(secretKey + ':'),
           'Content-Type': 'application/json'
       },
       body: JSON.stringify({
           customerKey: userId,
           cardNumber: '...',
           cardExpirationYear: '...',
           cardExpirationMonth: '...',
           // ...
       })
   });
   ```

3. **자동결제 API 연동**
   - 매월 결제일에 빌링키로 자동 결제

4. **웹훅 처리**
   - 결제 성공/실패 콜백 처리

### 주의사항
- PG 이용약관 동의 체크박스 필수
- 개인정보 제3자 제공 동의 필수

### 관련 문서
- 토스 페이먼트 개발자 문서: https://docs.tosspayments.com/
- 빌링키 발급 가이드: https://docs.tosspayments.com/guides/billing
