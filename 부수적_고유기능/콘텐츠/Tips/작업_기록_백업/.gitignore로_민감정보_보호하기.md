# .gitignore로 민감정보 보호하기

## 핵심 요약

GitHub 사용 시 비밀번호, API 키 등 민감정보가 담긴 파일은 `.gitignore`에 추가하세요. `.env`, `credentials.json` 등 공개되면 안 되는 파일은 절대 커밋하지 마세요.

## .gitignore란?

Git이 **추적하지 않을 파일을 지정하는 설정 파일**입니다. 여기에 등록된 파일은 `git add .`를 해도 커밋되지 않습니다.

### 왜 필요한가?

```
.gitignore 없이:
.env 파일 (API_KEY=secret123) → GitHub에 업로드
→ 전 세계 누구나 볼 수 있음
→ API 키 유출 → 해킹, 과금 폭탄

.gitignore 사용:
.env 파일 → .gitignore에 등록
→ 커밋되지 않음
→ 안전
```

## 민감정보란?

### 절대 커밋하면 안 되는 것들

| 유형 | 파일 예시 | 위험도 |
|------|----------|--------|
| API 키 | `.env`, `config.json` | 매우 높음 |
| 데이터베이스 | `database.sqlite`, `*.db` | 매우 높음 |
| 인증 정보 | `credentials.json`, `*.pem` | 매우 높음 |
| 개인 키 | `id_rsa`, `*.key` | 매우 높음 |
| 토큰 | `token.json`, `auth.json` | 높음 |

### 실제 유출 사례

```
❌ 실수로 .env 커밋
→ GitHub에 AWS 키 노출
→ 봇이 자동 탐지
→ 수백만원 클라우드 비용 청구

❌ credentials.json 커밋
→ Google API 키 노출
→ 악용 후 서비스 정지
```

## .gitignore 작성 방법

### 파일 위치

프로젝트 루트 디렉토리에 `.gitignore` 파일 생성:

```
프로젝트/
├── .gitignore    ← 여기
├── .env          ← 무시됨
├── src/
└── ...
```

### 기본 문법

```gitignore
# 특정 파일 무시
.env
credentials.json

# 특정 확장자 무시
*.log
*.db
*.sqlite

# 특정 폴더 무시
node_modules/
dist/
.cache/

# 폴더 내 특정 파일 무시
config/*.secret

# 예외 처리 (무시하지 않음)
!important.log
```

## 프로젝트별 권장 .gitignore

### 웹 개발 프로젝트

```gitignore
# 환경 변수
.env
.env.local
.env.*.local

# 의존성
node_modules/

# 빌드 결과물
dist/
build/
.next/

# 로그
*.log
npm-debug.log*

# 운영체제
.DS_Store
Thumbs.db

# IDE
.vscode/
.idea/

# 민감정보
*.pem
*.key
credentials.json
service-account.json
```

### SSALWorks 프로젝트

```gitignore
# 환경 변수
.env
.env.local
supabase/.env

# 민감정보
credentials/
*.secret
*_secret.json

# 빌드/캐시
node_modules/
.cache/
dist/

# 로그
*.log
work_logs/archive/*.md

# 개인 설정
.vscode/settings.json
```

## .gitignore 적용하기

### 새 프로젝트에서

```bash
# 1. .gitignore 파일 생성
# 2. 무시할 파일 패턴 추가
# 3. git init
git init
```

### 기존 프로젝트에서

이미 커밋된 파일은 .gitignore에 추가해도 계속 추적됩니다.

```bash
# 1. .gitignore에 파일 추가
# 2. 캐시에서 제거
git rm --cached .env
git rm --cached credentials.json

# 3. 커밋
git commit -m "chore: 민감정보 파일 추적 제거"
```

## 실수로 커밋했을 때

### 아직 푸시 안 했을 때

```bash
# 마지막 커밋 취소
git reset --soft HEAD~1

# .gitignore에 추가
echo ".env" >> .gitignore

# 다시 커밋
git add .
git commit -m "chore: 민감정보 제외하고 재커밋"
```

### 이미 푸시했을 때

```bash
# 1. .gitignore에 추가
# 2. 파일 삭제
git rm --cached .env

# 3. 커밋 & 푸시
git commit -m "chore: 민감정보 파일 제거"
git push

# 4. 히스토리에서 완전 제거 (선택)
# BFG Repo-Cleaner 또는 git filter-branch 사용
```

**중요**: 한 번이라도 GitHub에 올라간 키는 **즉시 폐기하고 새로 발급**하세요.

## .env.example 활용

### 패턴

```
실제 환경변수 파일:
.env (gitignore에 추가, 실제 값 포함)

템플릿 파일:
.env.example (커밋됨, 빈 값 또는 예시)
```

### .env.example 예시

```env
# Supabase
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_KEY=your-service-key-here

# 외부 서비스
RESEND_API_KEY=re_xxxxxxxxxx
OPENAI_API_KEY=sk-xxxxxxxxxx
```

### 새 팀원 온보딩

```bash
# 1. .env.example 복사
cp .env.example .env

# 2. 실제 값 입력
# (별도로 전달받은 키 값 입력)
```

## 체크리스트

### 커밋 전 확인

- [ ] `.env` 파일이 .gitignore에 있는가?
- [ ] API 키가 코드에 하드코딩되어 있지 않은가?
- [ ] `credentials.json` 등 인증 파일이 제외되어 있는가?
- [ ] `git status`에서 민감정보 파일이 보이지 않는가?

### 정기 점검

- [ ] .gitignore 파일이 최신 상태인가?
- [ ] 새로 추가된 민감정보 파일이 있는가?
- [ ] 팀원들이 .gitignore 규칙을 알고 있는가?

## 주의사항

- 민감정보는 환경 변수로 관리
- 코드에 API 키 직접 작성 금지
- 한 번 노출된 키는 폐기 후 재발급
- .gitignore는 프로젝트 시작 시 바로 설정
- 정기적으로 .gitignore 점검
