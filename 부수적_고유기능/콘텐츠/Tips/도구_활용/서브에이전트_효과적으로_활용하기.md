# 서브에이전트 효과적으로 활용하기

## 핵심 요약

복잡한 작업은 서브에이전트에게 맡기세요. `backend-developer`, `frontend-developer`, `code-reviewer` 등 작업 유형에 맞는 서브에이전트를 지정하면 효율이 높아집니다. 작업자(Task Agent)와 검증자(Verification Agent)는 반드시 분리하세요.

## 서브에이전트란?

Claude Code가 복잡한 작업을 수행할 때 **전문 역할을 맡는 독립적인 실행 단위**입니다. 메인 에이전트가 직접 모든 작업을 하는 것보다, 전문 서브에이전트에게 위임하면 더 정확하고 효율적입니다.

### 비유로 이해하기

```
메인 에이전트 = 프로젝트 매니저
서브에이전트 = 전문 개발자

PM이 직접 코딩하는 것보다
전문 개발자에게 맡기는 것이 효율적
```

## 서브에이전트의 종류

### 작업 수행 에이전트 (Task Agents)

| 에이전트 | 역할 | 적합한 작업 |
|---------|------|------------|
| `frontend-developer` | 프론트엔드 개발 | HTML, CSS, JavaScript, React |
| `backend-developer` | 백엔드 개발 | API, 서버 로직, 인증 |
| `database-specialist` | 데이터베이스 | SQL, 스키마 설계, 쿼리 최적화 |
| `devops-troubleshooter` | 인프라/배포 | Vercel, 환경설정, CI/CD |
| `documentation-specialist` | 문서화 | README, API 문서, 가이드 |
| `security-specialist` | 보안 | RLS, 인증, 권한 관리 |
| `content-specialist` | 콘텐츠 | 학습 자료, 도움말 |

### 검증 에이전트 (Verification Agents)

| 에이전트 | 역할 | 검증 항목 |
|---------|------|----------|
| `code-reviewer` | 코드 리뷰 | 코드 품질, 가독성, 버그 |
| `test-engineer` | 테스트 | 단위/통합 테스트, 엣지 케이스 |
| `qa-specialist` | 품질 보증 | 전체 품질, 요구사항 충족 |
| `security-auditor` | 보안 감사 | 취약점, 보안 정책 준수 |

## 작업자-검증자 분리 원칙

**가장 중요한 규칙**: Task Agent와 Verification Agent는 반드시 다른 에이전트를 사용하세요.

### 왜 분리해야 하는가?

```
❌ 잘못된 예:
backend-developer가 API 작성 → backend-developer가 검증
(자기가 만든 것을 자기가 검증 = 맹점 발생)

✅ 올바른 예:
backend-developer가 API 작성 → code-reviewer가 검증
(다른 시각으로 검증 = 품질 향상)
```

### 역할별 권장 검증자

| Task Agent | 권장 Verification Agent |
|------------|------------------------|
| `frontend-developer` | `code-reviewer`, `test-engineer` |
| `backend-developer` | `code-reviewer`, `test-engineer` |
| `database-specialist` | `code-reviewer`, `qa-specialist` |
| `devops-troubleshooter` | `qa-specialist` |
| `documentation-specialist` | `code-reviewer` |

## 서브에이전트 사용 방법

### 기본 요청 방식

```
"backend-developer 서브에이전트를 사용해서
로그인 API를 만들어줘"
```

### 검증 포함 요청

```
"frontend-developer로 회원가입 폼을 만들고,
code-reviewer로 검증까지 해줘"
```

### 복잡한 작업 분업

```
"이 기능을 다음과 같이 나눠서 작업해줘:

1. database-specialist: 테이블 스키마 설계
2. backend-developer: API 엔드포인트 구현
3. frontend-developer: UI 컴포넌트 작성
4. test-engineer: 전체 테스트

각 단계마다 code-reviewer로 검증"
```

## 서브에이전트 정의 파일

### 위치

```
.claude/subagents/
├── backend-developer.md
├── frontend-developer.md
├── database-specialist.md
├── code-reviewer.md
├── test-engineer.md
└── ...
```

### 기본 구조

```markdown
# backend-developer

## 역할
백엔드 API 및 서버 로직 개발

## 전문 분야
- RESTful API 설계 및 구현
- Supabase Edge Functions
- 인증/인가 로직
- 데이터 검증

## 사용 도구
- TypeScript
- Supabase SDK
- JWT

## 작업 지침
- API 응답은 일관된 형식 사용
- 에러 핸들링 필수
- 입력 검증 철저히
```

## 효과적인 활용 패턴

### 패턴 1: 단순 작업 위임

```
작업: 버튼 스타일 수정
→ frontend-developer 단독 투입
→ 검증 생략 가능 (간단한 작업)
```

### 패턴 2: 개발 + 검증

```
작업: 새 API 엔드포인트 개발
→ backend-developer 투입 (구현)
→ code-reviewer 투입 (검증)
→ test-engineer 투입 (테스트)
```

### 패턴 3: 복수 에이전트 협업

```
작업: 새 기능 전체 구현
→ database-specialist (DB 설계)
→ backend-developer (API)
→ frontend-developer (UI)
→ test-engineer (통합 테스트)
→ qa-specialist (최종 검증)
```

## 주의사항

### 1. 과도한 분업 피하기

```
❌ 버튼 색상 변경에 3개 서브에이전트 투입
✅ 간단한 작업은 직접 처리하거나 1개 에이전트로
```

### 2. 명확한 작업 범위 지정

```
❌ "코드 좀 수정해줘"
✅ "login.js의 validateEmail 함수에서
   이메일 형식 검증 로직을 수정해줘"
```

### 3. 검증 단계 생략 금지

복잡한 작업에서 검증 단계를 생략하면 품질 문제가 발생합니다.

### 4. 적합한 에이전트 선택

```
❌ database-specialist에게 UI 작업 요청
✅ 작업 유형에 맞는 에이전트 선택
```

## 서브에이전트 활용의 이점

| 이점 | 설명 |
|------|------|
| 전문성 | 각 분야에 특화된 작업 수행 |
| 품질 | 작업자-검증자 분리로 품질 향상 |
| 일관성 | 정의된 지침에 따른 일관된 결과 |
| 추적성 | 누가 무엇을 했는지 명확 |
| 효율성 | 병렬 작업 가능 |
