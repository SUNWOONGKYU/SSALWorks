# 로컬 서버 실행 방법

## 핵심 요약

HTML 파일을 테스트하려면 로컬 서버가 필요합니다. `npx serve`, `python -m http.server`, VS Code Live Server 등을 사용하세요. 포트 충돌 시 다른 포트 번호를 지정하면 됩니다.

## 왜 로컬 서버가 필요한가?

### 파일 직접 열기 vs 서버 실행

```
❌ 파일 직접 열기 (file:// 프로토콜):
- CORS 오류 발생
- ES 모듈 import 불가
- fetch API 제한
- 쿠키/세션 동작 안 함
- 실제 배포 환경과 다름

✅ 로컬 서버 (http:// 프로토콜):
- CORS 정상 동작
- 모든 JavaScript 기능 사용 가능
- API 호출 정상 동작
- 실제 배포 환경과 유사
```

### 서버가 필요한 경우

| 상황 | 서버 필요 |
|------|----------|
| 정적 HTML만 보기 | 선택사항 |
| Supabase SDK 사용 | ✅ 필요 |
| API 호출 (fetch) | ✅ 필요 |
| ES 모듈 import | ✅ 필요 |
| 이미지/폰트 로드 | 권장 |

## 로컬 서버 실행 방법

### 1. npx serve (권장)

```bash
# 현재 폴더에서 서버 실행
npx serve

# 특정 폴더에서 실행
npx serve Production/Frontend

# 특정 포트 지정
npx serve -l 3000

# 특정 폴더 + 포트
npx serve Production/Frontend -l 8080
```

**장점:**
- Node.js만 있으면 설치 불필요 (npx 사용)
- 간단한 명령어
- 자동으로 사용 가능한 포트 찾기

### 2. Python http.server

```bash
# Python 3
python -m http.server

# 특정 포트
python -m http.server 8080

# 특정 폴더에서 실행
cd Production/Frontend && python -m http.server
```

**장점:**
- Python 설치된 경우 추가 설치 불필요
- 대부분의 시스템에 Python 기본 설치

### 3. VS Code Live Server

```
1. VS Code Extensions에서 "Live Server" 설치
2. HTML 파일 열기
3. 우클릭 → "Open with Live Server"
   또는 하단 상태바의 "Go Live" 클릭
```

**장점:**
- 파일 변경 시 자동 새로고침
- GUI로 간편하게 사용
- 브라우저 자동 열림

### 4. Node.js http-server

```bash
# 전역 설치
npm install -g http-server

# 실행
http-server

# 포트 지정
http-server -p 8080

# CORS 허용
http-server --cors
```

## 방법별 비교

| 방법 | 설치 | 자동 새로고침 | CORS | 추천 상황 |
|------|------|-------------|------|----------|
| npx serve | 불필요 | ❌ | ✅ | 빠른 테스트 |
| Python | 불필요 | ❌ | ❌ | Python 환경 |
| Live Server | 확장 설치 | ✅ | ✅ | VS Code 사용 시 |
| http-server | npm 설치 | ❌ | 옵션 | 반복 사용 시 |

## 포트 충돌 해결

### 문제 상황

```
Error: listen EADDRINUSE: address already in use :::3000
```

### 해결 방법

**방법 1: 다른 포트 사용**
```bash
# 다른 포트 번호 지정
npx serve -l 8080
python -m http.server 8888
```

**방법 2: 사용 중인 프로세스 종료**
```bash
# Windows - 포트 사용 프로세스 확인
netstat -ano | findstr :3000

# 프로세스 종료 (PID 확인 후)
taskkill /PID [PID번호] /F

# Mac/Linux
lsof -i :3000
kill -9 [PID]
```

**방법 3: VS Code 터미널 모두 종료**
```
Ctrl+Shift+` → 터미널 패널 열기
휴지통 아이콘 클릭하여 모든 터미널 종료
새 터미널에서 다시 실행
```

## 자주 사용하는 포트

| 포트 | 일반적 용도 |
|------|-------------|
| 3000 | React, Node.js 기본 |
| 5000 | Flask, 일부 Node 앱 |
| 5173 | Vite 기본 |
| 5500 | Live Server 기본 |
| 8000 | Django, Python 기본 |
| 8080 | 대체 HTTP 포트 |

## 서버 실행 후 확인

### 브라우저에서 접속

```
서버 실행 후 표시되는 URL로 접속:

Local:    http://localhost:3000
Network:  http://192.168.1.100:3000  (같은 네트워크에서 접속)
```

### 올바르게 동작하는지 확인

```
1. 브라우저에서 URL 접속
2. 개발자 도구 열기 (F12)
3. Console 탭에서 에러 확인
4. Network 탭에서 요청 확인
```

## Claude Code에게 요청하기

### 서버 실행 요청

```
"Production/Frontend 폴더에서 로컬 서버 실행해줘"

"포트 8080으로 서버 띄워줘"
```

### 포트 충돌 해결 요청

```
"3000번 포트 사용 중인데 어떻게 해?"

"포트 충돌 해결해줘"
```

### 특정 페이지 테스트 요청

```
"로그인 페이지 로컬에서 테스트해줘.
서버 실행하고 접속 URL 알려줘."
```

## 서버 실행 패턴

### 프로젝트 구조에 따른 실행

```bash
# 전체 프로젝트 루트에서
npx serve

# Production 폴더만
npx serve Production

# Frontend만
npx serve Production/Frontend
```

### 여러 서버 동시 실행

```bash
# 터미널 1: 프론트엔드
npx serve Production/Frontend -l 3000

# 터미널 2: 백엔드 API (있는 경우)
node server.js  # 또는 npm run dev
```

## 트러블슈팅

### CORS 오류 발생 시

```
문제: Access-Control-Allow-Origin 오류

해결:
1. Supabase URL이 올바른지 확인
2. http-server --cors 옵션 사용
3. 브라우저 캐시 삭제 후 재시도
```

### 페이지가 표시되지 않을 때

```
문제: Cannot GET /

해결:
1. 서버 실행 폴더 확인 (index.html 있는 곳?)
2. URL 경로 확인 (http://localhost:3000/pages/auth/login.html)
3. 파일명 대소문자 확인
```

### 변경사항이 반영되지 않을 때

```
문제: 코드 수정했는데 안 바뀜

해결:
1. 브라우저 강력 새로고침 (Ctrl+Shift+R)
2. 캐시 삭제 (개발자도구 → Network → Disable cache)
3. Live Server 사용 (자동 새로고침)
```

## 체크리스트

### 서버 실행 전

- [ ] Node.js 또는 Python 설치 확인
- [ ] 실행할 폴더 경로 확인
- [ ] 포트 충돌 가능성 확인

### 서버 실행 후

- [ ] 브라우저에서 접속 확인
- [ ] 콘솔 에러 없는지 확인
- [ ] API 호출 정상 동작 확인
- [ ] 페이지 이동 정상 동작 확인

## 주의사항

- 개발 서버는 프로덕션용이 아님
- 터미널을 닫으면 서버도 종료됨
- 같은 포트에 여러 서버 실행 불가
- 방화벽이 포트 차단할 수 있음
- 공용 네트워크에서 Network URL 접속 주의

