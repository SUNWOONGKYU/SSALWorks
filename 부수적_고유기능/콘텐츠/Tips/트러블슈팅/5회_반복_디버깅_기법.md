# AI에게 "5회 반복 검토/수정" 지시로 근본 원인 찾기

> 빠른 수정이 실패할 때, AI에게 반복 검토를 강제하면 숨겨진 버그를 찾아냅니다.

---

## 언제 사용하나

| 상황 | 증상 |
|------|------|
| 표면적 수정 실패 | "수정했는데 안 돼요" 반복 |
| 원인 불명 | AI가 추측성 수정만 시도 |
| 복합 버그 | 한 가지 수정으로 해결 안 됨 |

---

## 핵심 지시문

```
안 되는 근본 원인을 신중하게 심각하게 찾아봐.
될 때까지 5번 반복해서 검토 → 수정 → 검토 → 수정 해봐.
그리고 나서 나한테 얘기해.
```

---

## 왜 효과가 있나

| 일반 디버깅 | 5회 반복 디버깅 |
|------------|----------------|
| "아마 이거겠지" 추측 | 실제 코드 흐름 추적 |
| 한 가지 원인만 찾음 | 숨겨진 원인 여러 개 발견 |
| 표면적 수정 (null 체크 등) | 구조적 문제 해결 |
| 빠르지만 실패 가능성 높음 | 느리지만 확실한 해결 |

---

## 실제 사례: P0~S0 진행률 미표시 문제

### 1-2차 시도 (실패)
```javascript
// 표면적 수정: null 체크 추가
if (!supabaseClient) {
    setTimeout(loadPhaseProgressFromDB, 500);
    return;
}
```
→ 여전히 작동 안 함

### 3차 시도 (구조 분석)
```bash
# 스크립트 블록 구조 분석
grep -n "</script>\|<script" index.html
```
**발견**: `let supabaseClient`가 다른 스크립트 블록에서 접근 불가

### 4차 시도 (추가 버그 발견)
```bash
# 함수 정의 확인
grep -n "updatePrepProgress" index.html
```
**발견**: `updatePrepProgress()` 함수 호출만 있고 정의 없음

### 5차 시도 (완료)
- 2개의 근본 원인 수정
- 문법 검증 완료
- 배포 성공

---

## 5회 반복 중 권장 분석 방법

| 회차 | 분석 내용 | 명령어 예시 |
|------|----------|------------|
| 1차 | 에러 메시지 확인 | 콘솔 로그 |
| 2차 | 코드 흐름 추적 | `grep -n "함수명"` |
| 3차 | 파일/블록 구조 | `grep -n "<script"` |
| 4차 | 함수 정의 확인 | `grep -n "function 함수명"` |
| 5차 | 전체 검증 | 문법 체크 + 테스트 |

---

## 효과 비교

```
일반 디버깅:
  시도 1 → 실패 → 시도 2 → 실패 → 포기 또는 질문

5회 반복 디버깅:
  분석 1 → 분석 2 → 분석 3 (원인 A 발견)
       → 분석 4 (원인 B 발견) → 분석 5 (완료)
```

---

## 핵심 포인트

1. **숫자를 명시**: "5번 반복"처럼 구체적 횟수 지정
2. **보고 시점 명시**: "다 하고 나서 얘기해"
3. **심각성 강조**: "신중하게 심각하게"
4. **검토와 수정 구분**: 검토(분석) → 수정 → 다시 검토

---

## 주의사항

- 간단한 오타나 경로 오류에는 과한 방법
- 복잡한 버그, 반복 실패 시에만 사용
- AI가 중간에 "해결됐다"고 하면 직접 테스트 후 판단

---

*관련 문서: `브라우저_콘솔_에러_확인하기.md`, `에러_핸들링_패턴.md`*
