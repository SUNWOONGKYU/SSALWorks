# Claude Codeë¡œ Supabase CRUD (ë°ì´í„° ìƒì„±/ì¡°íšŒ/ìˆ˜ì •/ì‚­ì œ) í•˜ëŠ” ë°©ë²•

## ìš”ì•½
Claude Codeê°€ Supabaseì— ì§ì ‘ ë°ì´í„°ë¥¼ ë„£ê³ , ì½ê³ , ìˆ˜ì •í•˜ê³ , ì‚­ì œí•˜ëŠ” ë°©ë²•ì€ 4ê°€ì§€. ê°ê° ì‚¬ì „ ì„¤ì •ì´ í•„ìš”í•˜ê³ , ì„¤ì • ì•ˆ ë˜ì–´ ìˆìœ¼ë©´ ë‹¤ìŒ ë°©ë²•ìœ¼ë¡œ ë„˜ì–´ê°„ë‹¤. ì‹¤ìˆ˜ë¡œ ì‚­ì œí•´ë„ ë³µêµ¬ ê°€ëŠ¥í•˜ë‹ˆ ë‹¹í™©í•˜ì§€ ë§ ê²ƒ.

## ìƒì„¸

### CRUD (í¬ë£¨ë“œ) ë€?

| ì˜ì–´ | í•œê¸€ | SQL | ì˜ˆì‹œ |
|------|------|-----|------|
| **C**reate | ìƒì„± | INSERT | ìƒˆ íšŒì› ë“±ë¡ |
| **R**ead | ì¡°íšŒ | SELECT | íšŒì› ëª©ë¡ ë³´ê¸° |
| **U**pdate | ìˆ˜ì • | UPDATE | íšŒì› ì •ë³´ ë³€ê²½ |
| **D**elete | ì‚­ì œ | DELETE | íšŒì› íƒˆí‡´ |

---

### ë°©ë²• 4ê°€ì§€ ë¹„êµ

| ìˆœìœ„ | ë°©ë²• | ì™œ ì•ˆ ë  ìˆ˜ ìˆë‚˜? |
|:----:|------|------------------|
| 1 | Supabase MCP | MCP ì„œë²„ ì„¤ì • ì•ˆ í–ˆìœ¼ë©´ ì‚¬ìš© ë¶ˆê°€ |
| 2 | Supabase CLI | CLI ì„¤ì¹˜ ì•ˆ í–ˆê±°ë‚˜ í”„ë¡œì íŠ¸ ì—°ê²° ì•ˆ ëìœ¼ë©´ ì‚¬ìš© ë¶ˆê°€ |
| 3 | psql | PostgreSQL í´ë¼ì´ì–¸íŠ¸ ë¯¸ì„¤ì¹˜ ë˜ëŠ” ì—°ê²° ì •ë³´ ì—†ìœ¼ë©´ ì‚¬ìš© ë¶ˆê°€ |
| 4 | JSON+Node.js | ìŠ¤í¬ë¦½íŠ¸ë§Œ ìˆìœ¼ë©´ í•­ìƒ ê°€ëŠ¥ (ìµœí›„ì˜ ë°©ë²•) |

---

### ë°©ë²• 1: Supabase MCP (ê¶Œì¥)

**ì™œ ì•ˆ ë  ìˆ˜ ìˆë‚˜?**
- `claude mcp add supabase` ëª…ë ¹ìœ¼ë¡œ MCP ì„œë²„ë¥¼ ì¶”ê°€í•´ì•¼ í•¨
- ì¶”ê°€ ì•ˆ í–ˆìœ¼ë©´ Claude Codeê°€ Supabaseì— ì ‘ê·¼ ìì²´ê°€ ì•ˆ ë¨

**ì„¤ì • ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸:**
```bash
claude mcp list
# â†’ supabase ë³´ì´ë©´ ì‚¬ìš© ê°€ëŠ¥
```

**ì‚¬ìš© ì˜ˆì‹œ:**
```
"MCPë¡œ users í…Œì´ë¸”ì— ìƒˆ ì‚¬ìš©ì INSERT í•´ì¤˜"
"Supabase MCP ì¨ì„œ ì´ SQL ì‹¤í–‰í•´ì¤˜"
```

---

### ë°©ë²• 2: Supabase CLI

**ì™œ ì•ˆ ë  ìˆ˜ ìˆë‚˜?**
- `npm install -g supabase` ë¡œ CLI ì„¤ì¹˜í•´ì•¼ í•¨
- `supabase login` + `supabase link`ë¡œ í”„ë¡œì íŠ¸ ì—°ê²°í•´ì•¼ í•¨
- ì„¤ì¹˜/ì—°ê²° ì•ˆ í–ˆìœ¼ë©´ ëª…ë ¹ì–´ ìì²´ê°€ ì•ˆ ë¨

**ì„¤ì • ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸:**
```bash
supabase status
# â†’ í”„ë¡œì íŠ¸ ì •ë³´ ë³´ì´ë©´ ì‚¬ìš© ê°€ëŠ¥
```

**ì‚¬ìš© ì˜ˆì‹œ:**
```bash
supabase db execute "INSERT INTO users (name) VALUES ('í™ê¸¸ë™')"
```

---

### ë°©ë²• 3: psql (PostgreSQL ì§ì ‘ ì—°ê²°)

**ì™œ ì•ˆ ë  ìˆ˜ ìˆë‚˜?**
- PostgreSQL í´ë¼ì´ì–¸íŠ¸(psql)ê°€ ì»´í“¨í„°ì— ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•¨
- Supabase ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ë¬¸ìì—´(ë¹„ë°€ë²ˆí˜¸ í¬í•¨)ì„ ì•Œì•„ì•¼ í•¨
- ë³´ì•ˆìƒ ì—°ê²° ë¬¸ìì—´ì„ ê³µìœ  ì•ˆ í•˜ëŠ” ê²½ìš° ë§ìŒ

**ì„¤ì • ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸:**
```bash
psql --version
# â†’ ë²„ì „ ë³´ì´ë©´ ì„¤ì¹˜ë¨
```

**ì‚¬ìš© ì˜ˆì‹œ:**
```bash
psql "postgresql://postgres:ë¹„ë°€ë²ˆí˜¸@db.xxx.supabase.co:5432/postgres" \
  -c "INSERT INTO users (name) VALUES ('í™ê¸¸ë™')"
```

---

### ë°©ë²• 4: JSON + Node.js (ëŒ€ì•ˆ - í•­ìƒ ê°€ëŠ¥)

**ì™œ ë‹¤ë¥¸ ë°©ë²•ì´ ì•ˆ ë˜ë‚˜?**

| ë°©ë²• | ë¬¸ì œì  |
|------|--------|
| curl | Windowsì—ì„œ í•œê¸€ ì¸ì½”ë”© ê¹¨ì§ |
| MCP | ì—°ê²° ì•ˆ ë¨ |
| ì§ì ‘ API í˜¸ì¶œ | ì¸ì¦ ë¬¸ì œ |
| **Node.js fetch** | âœ… UTF-8 ì •ìƒ ì²˜ë¦¬ |

**í”„ë¡œì„¸ìŠ¤:**
```
[1ë‹¨ê³„] Claude Codeê°€ JSON íŒŒì¼ ìƒì„±
    â†“
[2ë‹¨ê³„] Node.js ìŠ¤í¬ë¦½íŠ¸ë¡œ DBì— ë°˜ì˜
```

**1ë‹¨ê³„: JSON íŒŒì¼ ìƒì„±**

```
ìœ„ì¹˜: S0_Project-SAL-Grid_ìƒì„±/sal-grid/task-results/
íŒŒì¼ëª…: {TaskID}_result.json
```

```json
{
  "task_id": "S4BA3",
  "task_status": "Completed",
  "generated_files": ["payment.js"]
}
```

**2ë‹¨ê³„: ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰**

```bash
cd S0_Project-SAL-Grid_ìƒì„±/supabase
node sync_task_results_to_db.js
```

**ìŠ¤í¬ë¦½íŠ¸ ìœ„ì¹˜:** `S0_Project-SAL-Grid_ìƒì„±/supabase/sync_task_results_to_db.js`

---

### ì–´ë–¤ ë°©ë²•ì„ ì¨ì•¼ í•˜ë‚˜?

```
[í™•ì¸] claude mcp list â†’ supabase ìˆìŒ?
   â”œâ”€ ìˆìŒ â†’ ë°©ë²• 1 (MCP) ì‚¬ìš©
   â””â”€ ì—†ìŒ â†“

[í™•ì¸] supabase status â†’ ì—°ê²°ë¨?
   â”œâ”€ ì—°ê²°ë¨ â†’ ë°©ë²• 2 (CLI) ì‚¬ìš©
   â””â”€ ì•ˆ ë¨ â†“

[í™•ì¸] psql --version â†’ ì„¤ì¹˜ë¨?
   â”œâ”€ ì„¤ì¹˜ë¨ + ì—°ê²°ì •ë³´ ìˆìŒ â†’ ë°©ë²• 3 (psql) ì‚¬ìš©
   â””â”€ ì—†ìŒ â†“

ë°©ë²• 4 (JSON + Node.js) ì‚¬ìš©
```

---

### ë‹¤ ì•ˆ ë˜ë©´? ì‚¬ìš©ìê°€ ì§ì ‘ ì‹¤í–‰

MCP/CLI/psql ë‹¤ ì•ˆ ë˜ê³ , ìŠ¤í¬ë¦½íŠ¸ë„ ì—†ìœ¼ë©´:
1. Claude Codeì—ê²Œ SQL ì‘ì„± ìš”ì²­
2. `.sql` íŒŒì¼ ìƒì„±ë¨
3. Supabase Dashboard â†’ SQL Editorì—ì„œ ë¶™ì—¬ë„£ê¸° â†’ Run
4. "SQL ì‹¤í–‰ ì™„ë£Œëì–´" ì•Œë ¤ì£¼ê¸°

---

### ì‹¤ìˆ˜ë¡œ ì‚­ì œí–ˆì„ ë•Œ ë³µêµ¬ ë°©ë²•

**ë‹¹í™©í•˜ì§€ ë§ˆì„¸ìš”.** SupabaseëŠ” ë°±ì—… ê¸°ëŠ¥ì´ ìˆìŠµë‹ˆë‹¤.

**ì¦‰ì‹œ í–‰ë™:**
1. ì¶”ê°€ ì‘ì—… ì¤‘ë‹¨ (ë” ì´ìƒ DELETE/DROP ê¸ˆì§€)
2. ë¬´ì—‡ì´, ì–¸ì œ ì‚­ì œëëŠ”ì§€ íŒŒì•…
3. ë³µêµ¬ ë°©ë²• ì„ íƒ

**ë³µêµ¬ ë°©ë²•:**

| ë°©ë²• | ì‚¬ìš© ì¡°ê±´ | íŠ¹ì§• |
|------|----------|------|
| PITR | Pro í”Œëœ ì´ìƒ | 7ì¼ ë‚´ ë¶„ ë‹¨ìœ„ ë³µì› |
| Daily Backup | ëª¨ë“  í”Œëœ | ë§¤ì¼ ë°±ì—…, 7ì¼ ë³´ê´€ |
| ìˆ˜ë™ ë°±ì—… | ì‚¬ì „ ë°±ì—… ìˆì„ ë•Œ | SQL dump íŒŒì¼ ë³µì› |

**ë³µêµ¬ ìš”ì²­ ì˜ˆì‹œ:**
```
"users í…Œì´ë¸”ì„ ì‹¤ìˆ˜ë¡œ DROPí–ˆì–´.
10ë¶„ ì „ì— ì‚­ì œí–ˆê³  Pro í”Œëœì´ì•¼.
ë³µêµ¬ ë°©ë²• ì•Œë ¤ì¤˜"
```

**ì˜ˆë°© ì¡°ì¹˜:**
- DELETE ì „ SELECTë¡œ ì‚­ì œ ëŒ€ìƒ í™•ì¸
- ì¤‘ìš” ì‘ì—… ì „ ë°±ì—…: `supabase db dump > backup.sql`

---
ğŸ“š ë” ìì„¸íˆ: `ì™¸ë¶€_ì—°ë™_ì„¤ì •_Guide/MCP_ì„¤ì •_ê°€ì´ë“œ.md`
