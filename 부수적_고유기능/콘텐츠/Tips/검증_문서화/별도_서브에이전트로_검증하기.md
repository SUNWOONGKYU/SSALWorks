# 별도 서브에이전트로 검증하기

## 핵심 요약

작업 후에는 반드시 별도의 검증용 서브에이전트(`code-reviewer`, `test-engineer` 등)를 투입해서 검증하세요. 작성자와 검증자를 분리하면 오류를 더 잘 발견할 수 있습니다. 테스트까지 한 다음 결과를 outbox에 저장하세요.

## 왜 별도 검증이 필요한가?

### 작성자-검증자 분리 원칙

```
❌ 작성자가 직접 검증:
backend-developer가 API 작성
→ backend-developer가 검증
→ 자기 코드의 문제를 못 봄 (맹점)

✅ 별도 검증자 투입:
backend-developer가 API 작성
→ code-reviewer가 검증
→ 다른 시각으로 문제 발견
```

### 실제 효과

| 검증 방식 | 오류 발견율 | 품질 |
|----------|-----------|------|
| 자체 검증 | 60~70% | 보통 |
| 별도 검증자 | 85~95% | 높음 |

## 검증용 서브에이전트

### 주요 검증 에이전트

| 에이전트 | 역할 | 검증 항목 |
|---------|------|----------|
| `code-reviewer` | 코드 리뷰 | 품질, 가독성, 버그 |
| `test-engineer` | 테스트 | 단위/통합 테스트, 엣지 케이스 |
| `qa-specialist` | 품질 보증 | 전체 품질, 요구사항 충족 |
| `security-auditor` | 보안 감사 | 취약점, 보안 정책 |

### 작업 유형별 권장 검증자

| 작업 유형 | 작업 에이전트 | 검증 에이전트 |
|----------|-------------|--------------|
| API 개발 | backend-developer | code-reviewer, test-engineer |
| UI 개발 | frontend-developer | code-reviewer, qa-specialist |
| DB 설계 | database-specialist | code-reviewer |
| 보안 설정 | security-specialist | security-auditor |

## 검증 요청 방법

### 기본 요청

```
"code-reviewer로 방금 작성한 코드 검증해줘"
```

### 상세 요청

```
"backend-developer가 작성한 login API를
code-reviewer와 test-engineer로 검증해줘.
결과는 outbox에 저장해줘."
```

### 전체 흐름 요청

```
"다음 순서로 작업해줘:
1. backend-developer로 회원가입 API 구현
2. code-reviewer로 코드 리뷰
3. test-engineer로 테스트 작성 및 실행
4. 검증 결과 outbox에 저장"
```

## 검증 절차

### 1단계: 작업 완료

```
Task Agent(예: backend-developer)가 작업 완료
→ 코드 작성됨
→ 기본 동작 확인됨
```

### 2단계: 검증 에이전트 투입

```
Verification Agent(예: code-reviewer) 투입
→ 코드 품질 검토
→ 잠재적 버그 확인
→ 개선점 제안
```

### 3단계: 테스트 실행

```
test-engineer 투입 (필요시)
→ 단위 테스트 작성/실행
→ 통합 테스트 확인
→ 엣지 케이스 테스트
```

### 4단계: 결과 저장

```
outbox에 검증 결과 저장
→ task_[ID]_verification.json
→ 검증 항목, 결과, 이슈 기록
```

## 검증 결과 저장

### 저장 위치

```
Web_ClaudeCode_Bridge/outbox/
├── task_S2F1_completed.json      # 작업 완료
└── task_S2F1_verification.json   # 검증 결과
```

### 검증 결과 형식

```json
{
  "task_id": "S2F1",
  "verification_agent": "code-reviewer",
  "verified_at": "2025-01-15T14:45:00Z",
  "result": "passed",
  "checks": {
    "code_quality": "✅ 통과",
    "naming_convention": "✅ 통과",
    "error_handling": "✅ 통과",
    "potential_bugs": "⚠️ 1개 발견"
  },
  "issues": [
    {
      "severity": "medium",
      "description": "null 체크 누락",
      "location": "login.js:42",
      "status": "fixed"
    }
  ],
  "final_result": "✅ 검증 통과"
}
```

## 검증 체크리스트

### code-reviewer 검증 항목

- [ ] 코드 가독성
- [ ] 네이밍 규칙 준수
- [ ] 에러 핸들링
- [ ] 중복 코드 여부
- [ ] 주석 및 문서화
- [ ] 보안 취약점

### test-engineer 검증 항목

- [ ] 단위 테스트 존재 여부
- [ ] 테스트 커버리지
- [ ] 엣지 케이스 처리
- [ ] 통합 테스트
- [ ] 에러 시나리오 테스트

## 주의사항

- 작업 에이전트 ≠ 검증 에이전트 (분리 필수)
- 검증 결과는 반드시 기록
- 이슈 발견 시 수정 후 재검증
- 검증 생략하면 품질 문제 발생
- outbox 저장으로 이력 관리
