# Task Plan 작성 전 User Flow 먼저

## 핵심 요약

Task Plan을 세우기 전에 User Flow를 치밀하게 작성하고, 프로토타입을 최대한 만들어야 합니다. 그래야 "어? 이 기능이 없네?" 하는 상황을 방지할 수 있습니다.

## 왜 User Flow를 먼저 해야 하나?

### 1. Task Plan부터 세우면 생기는 문제

```
❌ 잘못된 순서:
Task Plan 작성 → 개발 시작 → User Flow 분석 → 누락 발견 → Task 추가 → 연쇄 수정
```

- Task가 누락됨 (회원가입, 크레딧 충전 등 필수 기능)
- 나중에 Task 추가하면 연쇄 수정 필요
- Task Plan 1줄 수정 = 최소 4개 문서 수정

### 2. User Flow부터 하면 좋은 점

```
✅ 올바른 순서:
User Flow 작성 → 프로토타입 제작 → Task Plan 작성 → 개발 시작
```

- 처음부터 완전한 Task 목록 도출
- 누락 없이 End-to-End 기능 커버
- 수정 비용 최소화

## 실제 사례: 52개 Task 중 48% 불일치

SSALWorks 프로젝트에서 Task Plan을 먼저 작성한 후, 나중에 User Flow를 분석했더니:

| 문제 유형 | 개수 | 예시 |
|----------|------|------|
| Task 완전 누락 | 12개 | 회원가입 UI/API, 크레딧 충전 UI/API |
| Task Name 불일치 | 10개 | "결제 보안" → "관리자 권한 체크" |
| 불필요 파일 잔존 | 2개 | Stage 이동된 Task의 구버전 |

### 회원가입 기능 누락 사례

초기 Task Plan:
- S2F1: 로그인/로그아웃 UI
- S2BA1: OAuth 인증 API

"OAuth 있으니까 회원가입은 필요 없겠지?" → **잘못된 가정!**

User Flow 분석 후:
```
신규 사용자 → 회원가입 → 이메일 인증 → 로그인
```

누락된 Task:
- S2F3: 회원가입 UI
- S2BA4: 회원가입 API

### 크레딧 충전 기능 누락 사례

초기 Task Plan:
- S4BA1: 결제 웹훅 API
- S4BA2: 관리자 API

"결제 웹훅이면 충전 되겠지?" → **잘못된 가정!**

User Flow 분석 후:
```
크레딧 충전 클릭 → 금액 선택 → 결제 수단 선택 → 토스 결제 → 크레딧 적립
```

누락된 Task: **6개!**
- S4F3: 크레딧 충전 UI
- S4F4: 결제 수단 등록 UI
- S4BA3: 결제 수단 등록 API
- S4BA4: 크레딧 충전 API
- S4BA5: 설치비 입금 확인 API
- S4D1: 결제/크레딧 테이블

## 올바른 순서

```
1. User Flow 다이어그램 완성
   │
   │  - 신규 사용자 플로우
   │  - 기존 사용자 플로우
   │  - 결제 플로우
   │  - 관리자 플로우
   │
   ▼
2. 프로토타입 제작
   │
   │  - 모든 화면 UI 구현
   │  - 버튼 클릭 시 어디로 가는지 확인
   │  - 빠진 기능 발견 → User Flow 업데이트
   │
   ▼
3. Task Plan 작성
   │
   │  - User Flow의 각 단계를 Task로 변환
   │  - 프로토타입에서 확인된 기능 목록 기반
   │
   ▼
4. 개발 시작
```

## 체크리스트

### Task Plan 작성 전 확인

- [ ] 모든 사용자 시나리오가 User Flow로 문서화되었는가?
- [ ] 프로토타입에서 모든 화면이 구현되었는가?
- [ ] 처음부터 끝까지 플로우를 따라가 봤는가?
- [ ] "이 다음에 사용자가 뭘 하지?" 질문을 했는가?

### User Flow 작성 시 확인

- [ ] 신규 사용자는 어떻게 시작하나?
- [ ] 기존 사용자는 어떻게 돌아오나?
- [ ] 돈을 내는 과정은 어떻게 되나?
- [ ] 실패했을 때는 어떻게 하나?
- [ ] 관리자는 뭘 해야 하나?

## 핵심 교훈

### "당연히 있겠지" 가정 금지

```
❌ 잘못된 생각:
"OAuth 있으니까 회원가입은 당연히 되겠지"
"결제 웹훅 있으니까 충전은 당연히 되겠지"

✅ 올바른 접근:
"회원가입 UI는 어떤 필드가 필요하지?"
"크레딧 충전 전에 결제 수단 등록은 어떻게 하지?"
```

### Task Plan 변경 비용

```
Task Plan 1줄 수정 = 최소 4개 문서 수정

- Task Instruction
- Seed SQL
- Verification Instruction
- Order Sheet

처음에 제대로 하는 게 나중에 고치는 것보다 100배 쉽다!
```

## 주의사항

- User Flow 완성 전에 Task Plan 작성하지 말 것
- 프로토타입 없이 Task 목록 확정하지 말 것
- "당연히 있겠지" 가정하지 말고 직접 확인할 것
- Task Plan 변경 시 연쇄 수정 비용 인식할 것
