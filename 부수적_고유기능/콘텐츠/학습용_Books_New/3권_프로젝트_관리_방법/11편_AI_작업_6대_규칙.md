# 11편 | AI 작업 6대 규칙

---

SAL Grid 시스템에서 AI가 따라야 할 6개의 핵심 규칙이 있다. 이 규칙들은 `.claude/rules/` 폴더에 파일로 정의되어 있으며, 모든 작업에 일관되게 적용된다. 이 편에서는 6대 규칙의 내용과 적용 방법을 살펴본다.

## 1. 규칙 파일 구조

### 위치

```
.claude/rules/
├── 01_file-naming.md      # 파일 명명 규칙
├── 02_save-location.md    # 저장 위치 규칙
├── 03_area-stage.md       # Area/Stage 매핑
├── 04_grid-writing.md     # Grid 작성 규칙
├── 05_execution-process.md # 실행 프로세스
└── 06_verification.md     # 검증 규칙
```

### 적용 우선순위

```
1순위: 절대 불변 규칙 (CLAUDE.md)
2순위: AI 12대 준수사항
3순위: .claude/rules/ 6대 규칙 ← 여기
4순위: Order Sheet 지시사항
5순위: PROJECT_SAL_GRID_MANUAL.md
```

---

## 2. 규칙 1: 파일 명명 규칙 (01_file-naming.md)

### 적용 대상

Production에 저장되는 5개 Area: F, BA, S, BI, E

### 핵심 규칙

**kebab-case 사용 (소문자 + 하이픈)**

```
✅ 올바른 형식:
- google-login.js
- subscription-cancel.js
- forgot-password.html

❌ 잘못된 형식:
- googleLogin.js        (camelCase 금지)
- google_login.js       (snake_case 금지)
- GoogleLogin.js        (PascalCase 금지)
```

### 파일명 구성

**[기능]-[동작].확장자**

| 구성 | 설명 | 예시 |
|------|------|------|
| 기능 | 무엇에 관한 것인지 | google, email, subscription |
| 동작 | 무엇을 하는지 | login, send, cancel |

### Task ID 반영 방법

**파일명에 Task ID 안 넣음 → 파일 상단 주석에 넣음**

```javascript
/**
 * @task S2BA1
 * @description 구독 취소 API
 */
export default async function handler(req, res) {
  // ...
}
```

---

## 3. 규칙 2: 저장 위치 규칙 (02_save-location.md)

### 이중 저장 대상 (5개 Area)

| Area | Stage 폴더 | Production 폴더 |
|------|------------|-----------------|
| F | `S?_*/Frontend/` | `Production/Frontend/` |
| BA | `S?_*/Backend_APIs/` | `Production/api/Backend_APIs/` |
| S | `S?_*/Security/` | `Production/api/Security/` |
| BI | `S?_*/Backend_Infra/` | `Production/api/Backend_Infra/` |
| E | `S?_*/External/` | `Production/api/External/` |

### 저장 안 하는 Area (6개)

| Area | 이유 |
|------|------|
| M | 문서 - 배포 불필요 |
| U | 디자인 파일 - 배포 불필요 |
| D | SQL - Supabase에서 직접 실행 |
| T | 테스트 코드 - 배포 불필요 |
| O | 설정/스크립트 - 별도 관리 |
| C | 콘텐츠 - DB에 저장 |

### 저장 예시

```
Task: S2BA1
파일: subscription-cancel.js

저장 위치:
1. S2_개발-1차/Backend_APIs/subscription-cancel.js    ← Stage
2. Production/api/Backend_APIs/subscription-cancel.js ← Production
```

---

## 4. 규칙 3: Area/Stage 매핑 (03_area-stage.md)

### 11개 Area

| 코드 | 영문명 | 한글명 |
|------|--------|--------|
| M | Documentation | 문서화 |
| U | Design | UI/UX 디자인 |
| F | Frontend | 프론트엔드 |
| BI | Backend Infrastructure | 백엔드 기반 |
| BA | Backend APIs | 백엔드 API |
| D | Database | 데이터베이스 |
| S | Security | 보안/인증/인가 |
| T | Testing | 테스트 |
| O | DevOps | 운영/배포 |
| E | External | 외부 연동 |
| C | Content System | 콘텐츠 시스템 |

### 5개 Stage

| 코드 | 한글명 | 폴더명 |
|------|--------|--------|
| S1 | 개발 준비 | `S1_개발_준비/` |
| S2 | 개발 1차 | `S2_개발-1차/` |
| S3 | 개발 2차 | `S3_개발-2차/` |
| S4 | 개발 3차 | `S4_개발-3차/` |
| S5 | 운영 | `S5_운영/` |

### Task ID 구조

```
S2BA1
│ │ └─ Level: 1번째 Task
│ └─── Area: BA (Backend APIs)
└───── Stage: S2 (개발 1차)
```

---

## 5. 규칙 4: Grid 작성 규칙 (04_grid-writing.md)

### 22개 속성 작성자 구분

| # | 필드명 | 작성자 |
|---|--------|--------|
| 1-5 | 기본 정보 | 설계 시 |
| 6-9 | Task 정의 | 설계 시 |
| 10-13 | Task 실행 | Main Agent |
| 14-15 | 검증 정의 | 설계 시 |
| 16-21 | 검증 실행 | Main Agent |
| 22 | Stage Gate | PO |

### Agent 매핑 규칙

**Task Agent ≠ Verification Agent (작성자와 검증자 분리)**

| Area | Task Agent | Verification Agent |
|------|------------|-------------------|
| F | frontend-developer | code-reviewer |
| BA | backend-developer | code-reviewer |
| S | security-specialist | security-auditor |
| D | database-specialist | database-specialist |
| T | test-engineer | qa-specialist |

### Verification 필드 JSON 형식

```json
{
  "test_result": {
    "unit_test": "✅ 5/5 통과",
    "integration_test": "✅ 3/3 통과"
  },
  "comprehensive_verification": {
    "final": "✅ Passed"
  }
}
```

---

## 6. 규칙 5: 실행 프로세스 (05_execution-process.md)

### 6단계 프로세스

```
┌─────────────────────────────────────────────────────────────────┐
│                      6단계 실행 프로세스                         │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  [1단계] Task 실행 ─────────────── 서브에이전트                  │
│      ↓                                                          │
│  [2단계] PO 도움 요청 (필요 시) ─── AI → PO                      │
│      ↓                                                          │
│  [3단계] Task 검증 ─────────────── 서브에이전트                  │
│      ↓                                                          │
│  [4단계] Stage Gate 검증 ───────── Main Agent                   │
│      ↓                                                          │
│  [5단계] PO 테스트 가이드 제공 ─── Main Agent → PO              │
│      ↓                                                          │
│  [6단계] PO 최종 승인 ──────────── PO                           │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 핵심 원칙

**서브에이전트 투입 필수:**
- Main Agent가 직접 Task 작업 수행 금지
- Task Agent 서브에이전트 투입
- Verification Agent 서브에이전트 투입

**PO 협력:**
- 외부 서비스 설정 필요 시 즉시 요청
- Stage Gate 검증 후 PO 테스트 가이드 제공
- PO 승인 후에만 다음 Stage 진행

---

## 7. 규칙 6: 검증 규칙 (06_verification.md)

### Task 검증 항목

| 검증 유형 | 항목 | 속성 |
|----------|------|------|
| 테스트 | unit_test, integration_test, edge_cases | #16 |
| 빌드 | compile, lint, deploy, runtime | #17 |
| 통합 | dependency_propagation, cross_task, data_flow | #18 |
| 차단 | dependency, environment, external_api | #19 |
| 종합 | final (Passed/Failed) | #20 |

### Stage Gate 검증 기준

```
□ Stage 내 모든 Task가 '완료' 상태인가?
□ 모든 Task의 comprehensive_verification이 'Passed'인가?
□ Blocker가 0개인가?
□ 전체 빌드가 성공하는가?
□ 의존성 체인이 완결되었는가?
```

### Human-AI Task 완료 기준

| 단계 | 수행자 | 필수 |
|------|--------|:----:|
| 설정 가이드 작성 | AI | ✅ |
| PO에게 설정 요청 | AI | ✅ |
| 외부 서비스 설정 | **PO** | ✅ |
| 실제 작동 테스트 | AI + PO | ✅ |

---

## 8. 규칙 반영 방법

### Order Sheet에 규칙 참조

모든 Order Sheet에 `rules_reference` 필드를 포함한다.

```json
{
  "task_id": "S2BA1",
  "rules_reference": [
    ".claude/rules/01_file-naming.md",
    ".claude/rules/02_save-location.md",
    ".claude/rules/05_execution-process.md"
  ]
}
```

### Task 유형별 필수 규칙

| Task Area | 필수 규칙 파일 |
|-----------|---------------|
| 모든 Task | `01`, `02`, `05` |
| F, BA, D (이중 저장) | + `03` |
| 검증 관련 | + `04`, `06` |

### AI가 규칙을 적용하는 방법

```
1. Order Sheet 받음
      ↓
2. rules_reference 필드 확인
      ↓
3. 해당 규칙 파일 읽기
      ↓
4. 규칙에 따라 작업 수행
      ↓
5. 결과물이 규칙 준수하는지 확인
```

---

## 9. 체크리스트 요약

### 파일 생성 시

- [ ] kebab-case 파일명 사용
- [ ] Task ID를 파일 상단 주석에 포함
- [ ] Stage 폴더 + Production 폴더 이중 저장 (해당 Area만)

### Task 실행 시

- [ ] Task Agent 서브에이전트 투입
- [ ] PO 도움 필요 시 작업 전에 요청
- [ ] Verification Agent로 검증

### Stage Gate 시

- [ ] 모든 Task 완료 확인
- [ ] 모든 검증 통과 확인
- [ ] PO 테스트 가이드 제공
- [ ] PO 승인 후 다음 Stage 진행

---

## 10. 다음 단계

11편에서는 AI 작업 6대 규칙을 살펴봤다.

- 6개 규칙 파일: file-naming, save-location, area-stage, grid-writing, execution-process, verification
- Order Sheet에 rules_reference로 연결
- 일관된 품질을 위한 체크리스트

다음 편에서는 Orders/Reports JSON 시스템의 상세 구조를 살펴본다.

---

*다음 편: 12편 | Orders/Reports JSON 시스템*

---

**작성일: 2025-12-20 / 글자수: 약 4,600자 / 작성자: Claude / 프롬프터: 써니**
