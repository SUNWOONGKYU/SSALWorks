# 02. ì´ë©”ì¼ ì‹œìŠ¤í…œ ì„¤ì • ê°€ì´ë“œ

> Resend + Supabase SMTP + ì´ë©”ì¼ í…œí”Œë¦¿ í†µí•© ì„¤ì •

**ì‘ì„±ì¼**: 2025-12-17
**ë²„ì „**: 1.0
**ë‚œì´ë„**: â­â­â­â­ (ìƒê¸‰)

---

## ëª©ì°¨

1. [ê°œìš”](#1-ê°œìš”)
2. [ì „ì²´ êµ¬ì¡°ë„](#2-ì „ì²´-êµ¬ì¡°ë„)
3. [Phase 1: Resend ì„¤ì •](#3-phase-1-resend-ì„¤ì •)
4. [Phase 2: DKIM DNS ì„¤ì • (Whois)](#4-phase-2-dkim-dns-ì„¤ì •-whois)
5. [Phase 3: Supabase SMTP ì—°ë™](#5-phase-3-supabase-smtp-ì—°ë™)
6. [Phase 4: ì´ë©”ì¼ í…œí”Œë¦¿ ìˆ˜ì • (ì¤‘ìš”!)](#6-phase-4-ì´ë©”ì¼-í…œí”Œë¦¿-ìˆ˜ì •-ì¤‘ìš”)
7. [Phase 5: í™˜ê²½ë³€ìˆ˜ ì„¤ì •](#7-phase-5-í™˜ê²½ë³€ìˆ˜-ì„¤ì •)
8. [Phase 6: auth.users â†” users í…Œì´ë¸” ë™ê¸°í™”](#8-phase-6-authusers--users-í…Œì´ë¸”-ë™ê¸°í™”)
9. [íŠ¸ëŸ¬ë¸”ìŠˆíŒ… (ì‹¤ì „ ê²½í—˜)](#9-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…-ì‹¤ì „-ê²½í—˜)
10. [ì²´í¬ë¦¬ìŠ¤íŠ¸](#10-ì²´í¬ë¦¬ìŠ¤íŠ¸)

---

## 1. ê°œìš”

### ëª©í‘œ
- íšŒì›ê°€ì… ì‹œ ì¸ì¦ ì´ë©”ì¼ ë°œì†¡
- ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ì´ë©”ì¼ ë°œì†¡
- DKIM ì¸ì¦ìœ¼ë¡œ ìŠ¤íŒ¸ ë°©ì§€
- í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ì•ˆì •ì  ë™ì‘

### ê´€ë ¨ ì„œë¹„ìŠ¤
| ì„œë¹„ìŠ¤ | ì—­í•  |
|--------|------|
| **Resend** | SMTP ì„œë²„, ì´ë©”ì¼ ë°œì†¡ |
| **Supabase** | Auth ì‹œìŠ¤í…œ, ì´ë©”ì¼ í…œí”Œë¦¿ |
| **Whois** | DKIM DNS ë ˆì½”ë“œ ë“±ë¡ |

---

## 2. ì „ì²´ êµ¬ì¡°ë„

```
ì‚¬ìš©ì (ë¸Œë¼ìš°ì €)
    â†“ íšŒì›ê°€ì…
Next.js/ì•± (Vercel)
    â†“ API ìš”ì²­
Supabase Auth
    â†“ SMTP ìš”ì²­
Resend (SMTP)
    â†“ DKIM ê²€ì¦ (DNS)
Whois (ë„ë©”ì¸ DNS)
    â†“ ì´ë©”ì¼ ë°œì†¡
ì‚¬ìš©ì ì´ë©”ì¼
    â†“ ë§í¬ í´ë¦­
ì•± (/auth/callback)
    â†“ ì„¸ì…˜ ìƒì„±
ë¡œê·¸ì¸ ì™„ë£Œ
```

---

## 3. Phase 1: Resend ì„¤ì •

### 3.1 ê³„ì • ìƒì„±
1. https://resend.com ì ‘ì†
2. "Sign up" í´ë¦­
3. Google ë˜ëŠ” ì´ë©”ì¼ë¡œ ê°€ì…

### 3.2 API Key ë°œê¸‰
```
Resend Dashboard â†’ API Keys â†’ Create API Key

- Name: ssalworks-production (ë˜ëŠ” ssalworks-dev)
- Permission: Full access
- Copy API Key ì¦‰ì‹œ! (í•œ ë²ˆë§Œ í‘œì‹œë¨)
```

**API Key í˜•ì‹**:
```
re_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

### 3.3 ë„ë©”ì¸ ë“±ë¡
```
Resend Dashboard â†’ Domains â†’ Add Domain

- Domain: ssalworks.ai.kr (ë³¸ì¸ ë„ë©”ì¸)
- ìƒíƒœ: Pending (DKIM ì¸ì¦ ëŒ€ê¸°)
```

---

## 4. Phase 2: DKIM DNS ì„¤ì • (Whois)

### 4.1 Resendì—ì„œ DKIM ì •ë³´ í™•ì¸

Resend Dashboardì—ì„œ ë„ë©”ì¸ í´ë¦­ â†’ DNS Records í™•ì¸:

```
Type: TXT
Name: resend._domainkey
Value: p=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC... (Resend ì œê³µ)
```

### 4.2 Whois DNSì— TXT ë ˆì½”ë“œ ì¶”ê°€

**ê²½ë¡œ**:
```
Whois ë¡œê·¸ì¸
  â†“
ë„ë©”ì¸ ê´€ë¦¬
  â†“
ë¶€ê°€ì„œë¹„ìŠ¤ â†’ ë„¤ì„ì„œë²„ ë³€ê²½/ë¶€ê°€ì„œë¹„ìŠ¤
  â†“
ë„¤ì„ì„œë²„ ê³ ê¸‰ì„¤ì •
  â†“
SPF(TXT) ë ˆì½”ë“œ ê´€ë¦¬ â†’ ê´€ë¦¬í˜ì´ì§€ ì—´ê¸°
```

**ì…ë ¥**:
```
í˜¸ìŠ¤íŠ¸ëª…: resend._domainkey
TXT ê°’: p=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC... (Resendì—ì„œ ë³µì‚¬)
```

**âš ï¸ ì¤‘ìš”**: ì¼ë°˜ DNS ê´€ë¦¬ í™”ë©´ì—ì„œëŠ” `_domainkey` ê°™ì€ íŠ¹ìˆ˜ë¬¸ì ì…ë ¥ ë¶ˆê°€!
ë°˜ë“œì‹œ **ë„¤ì„ì„œë²„ ê³ ê¸‰ì„¤ì •** ì‚¬ìš©

### 4.3 DNS ì „íŒŒ ëŒ€ê¸°

- **ì†Œìš” ì‹œê°„**: 1-48ì‹œê°„ (ë³´í†µ 1-2ì‹œê°„)
- **í™•ì¸ ë°©ë²•**: Resend Dashboardì—ì„œ "Verify" í´ë¦­

### 4.4 DKIM ì¸ì¦ í™•ì¸

```
Resend Dashboard â†’ Domains â†’ ssalworks.ai.kr
Status: âœ… Verified
```

---

## 5. Phase 3: Supabase SMTP ì—°ë™

### 5.1 Supabaseì— Resend SMTP ì„¤ì •

**âš ï¸ ì´ ë‹¨ê³„ê°€ Resendì™€ Supabaseë¥¼ ì—°ê²°í•˜ëŠ” í•µì‹¬!**

```
Supabase Dashboard â†’ Settings â†’ Auth â†’ SMTP Settings

Enable Custom SMTP: ON

SMTP Host: smtp.resend.com
SMTP Port: 587
SMTP Username: resend
SMTP Password: [Resend API Key] â† re_xxxx... ì…ë ¥
Sender Email: noreply@ssalworks.ai.kr
Sender Name: SSALWorks
```

### 5.2 Site URL ì„¤ì •

```
Supabase Dashboard â†’ Settings â†’ Auth â†’ URL Configuration

Site URL: https://www.ssalworks.ai.kr â† í”„ë¡œë•ì…˜ URL

Redirect URLs:
  - http://localhost:3000/**
  - http://localhost:8888/**
  - https://www.ssalworks.ai.kr/**
  - https://*.vercel.app/**
```

---

## 6. Phase 4: ì´ë©”ì¼ í…œí”Œë¦¿ ìˆ˜ì • (ì¤‘ìš”!)

### ğŸš¨ ì´ ë‹¨ê³„ë¥¼ ë†“ì¹˜ë©´ 6ì‹œê°„ ì‚½ì§ˆ!

### 6.1 ë¬¸ì œ: {{ .SiteURL }} ë³€ìˆ˜ì˜ í•¨ì •

Supabase ê¸°ë³¸ í…œí”Œë¦¿:
```html
<a href="{{ .SiteURL }}/auth/confirm?token_hash={{ .TokenHash }}&type=signup">
  ì´ë©”ì¼ ì¸ì¦í•˜ê¸°
</a>
```

**ë¬¸ì œì **:
- `{{ .SiteURL }}`ì€ Site URL ì„¤ì •ê°’ì„ **ê·¸ëŒ€ë¡œ** ì‚¬ìš©
- `emailRedirectTo` íŒŒë¼ë¯¸í„°ë¥¼ **ë¬´ì‹œí•¨**
- www ì„œë¸Œë„ë©”ì¸ì´ ë¹ ì§€ê±°ë‚˜ ì˜ëª»ëœ URL ìƒì„±

**ì‹¤ì œ ë°œìƒí•œ ì˜¤ë¥˜**:
```
ì´ë©”ì¼ ë§í¬: https://ssalworks.ai.kr/auth/callback?...
ì—ëŸ¬: DNS_PROBE_FINISHED_NXDOMAIN (www ì—†ìŒ)
```

### 6.2 í•´ê²°: URL í•˜ë“œì½”ë”©

```
Supabase Dashboard â†’ Authentication â†’ Email Templates â†’ Confirm signup
```

**ë³€ê²½ ì „**:
```html
<a href="{{ .SiteURL }}/auth/confirm?token_hash={{ .TokenHash }}&type=signup">
```

**ë³€ê²½ í›„** (ë„ë©”ì¸ ì§ì ‘ ì…ë ¥):
```html
<a href="https://www.ssalworks.ai.kr/auth/callback?token_hash={{ .TokenHash }}&type=signup">
  ì´ë©”ì¼ ì¸ì¦í•˜ê¸°
</a>
```

### 6.3 ë‹¤ë¥¸ í…œí”Œë¦¿ë„ ë™ì¼í•˜ê²Œ ìˆ˜ì •

| í…œí”Œë¦¿ | ìˆ˜ì • í•„ìš” |
|--------|----------|
| Confirm signup | âœ… URL í•˜ë“œì½”ë”© |
| Magic Link | âœ… URL í•˜ë“œì½”ë”© |
| Change Email | âœ… URL í•˜ë“œì½”ë”© |
| Reset Password | âœ… URL í•˜ë“œì½”ë”© |

### 6.4 í…œí”Œë¦¿ ë³€ìˆ˜ ë¹„êµ

| ë³€ìˆ˜ | ë™ì‘ | emailRedirectTo ë°˜ì˜ |
|------|------|---------------------|
| `{{ .SiteURL }}` | Dashboard ì„¤ì •ê°’ ê·¸ëŒ€ë¡œ | âŒ ë¬´ì‹œí•¨ |
| `{{ .ConfirmationURL }}` | Supabase ìë™ ìƒì„± | âœ… ë°˜ì˜ë¨ |
| `{{ .RedirectTo }}` | emailRedirectTo ê°’ | âœ… ë°˜ì˜ë¨ |
| **í•˜ë“œì½”ë”©** | ì§ì ‘ ì…ë ¥í•œ URL | N/A (ê°€ì¥ í™•ì‹¤) |

**Best Practice**: ë„ë©”ì¸ì´ í™•ì •ë˜ë©´ **í•˜ë“œì½”ë”©**ì´ ê°€ì¥ ì•ˆì „

---

## 7. Phase 5: í™˜ê²½ë³€ìˆ˜ ì„¤ì •

### 7.1 ë¡œì»¬ ê°œë°œ (.env.local)

```bash
# Supabase
SUPABASE_URL=https://[í”„ë¡œì íŠ¸ID].supabase.co
SUPABASE_ANON_KEY=eyJhbGci...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGci...

# Resend
RESEND_API_KEY=re_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Site URL
NEXT_PUBLIC_SITE_URL=http://localhost:3000
```

### 7.2 Vercel í™˜ê²½ë³€ìˆ˜

```
Vercel Dashboard â†’ Project â†’ Settings â†’ Environment Variables

| Key | Value | Environment |
|-----|-------|-------------|
| SUPABASE_URL | https://xxx.supabase.co | All |
| SUPABASE_ANON_KEY | eyJxxx... | All |
| SUPABASE_SERVICE_ROLE_KEY | eyJxxx... | All |
| RESEND_API_KEY | re_xxx... | All |
| NEXT_PUBLIC_SITE_URL | https://www.ssalworks.ai.kr | Production |
```

### 7.3 í™˜ê²½ë³€ìˆ˜ í™•ì¸ í…ŒìŠ¤íŠ¸

```javascript
// test-env.js
console.log('SUPABASE_URL:', process.env.SUPABASE_URL ? 'SET' : 'NOT SET');
console.log('RESEND_API_KEY:', process.env.RESEND_API_KEY ? 'SET' : 'NOT SET');
```

---

## 8. Phase 6: auth.users â†” users í…Œì´ë¸” ë™ê¸°í™”

### 8.1 ë¬¸ì œ: ë¡œê·¸ì¸ ì‹¤íŒ¨

**ì¦ìƒ**:
```
- ì´ë©”ì¼ ì¸ì¦ ì™„ë£Œ (auth.usersì— email_confirmed_at ìˆìŒ)
- ì˜¬ë°”ë¥¸ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥
- ë¡œê·¸ì¸ ì‹¤íŒ¨: "ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤"
```

**ì›ì¸**:
```sql
-- auth.usersì—ëŠ” ì¡´ì¬
SELECT * FROM auth.users WHERE email = 'test@test.com';
-- âœ… 1 row

-- users í…Œì´ë¸”ì—ëŠ” ì—†ìŒ!
SELECT * FROM users WHERE email = 'test@test.com';
-- âŒ 0 rows
```

### 8.2 í•´ê²°: íšŒì›ê°€ì… APIì—ì„œ ë™ê¸°í™”

```typescript
// íšŒì›ê°€ì… API
export async function POST(request: NextRequest) {
  const { email, password, nickname } = await request.json();

  // 1. Supabase Authì— ì‚¬ìš©ì ìƒì„±
  const { data: authData, error: authError } = await supabase.auth.signUp({
    email,
    password,
    options: {
      data: { name: nickname },
      emailRedirectTo: 'https://www.ssalworks.ai.kr/auth/callback',
    },
  });

  if (authError) {
    return NextResponse.json({ error: authError.message }, { status: 400 });
  }

  // 2. users í…Œì´ë¸”ì— í”„ë¡œí•„ ìƒì„± (ì¤‘ìš”!)
  const adminClient = createAdminClient();
  const { error: profileError } = await adminClient
    .from('users')
    .insert({
      user_id: authData.user.id,  // âš ï¸ ì»¬ëŸ¼ëª… í™•ì¸! (idê°€ ì•„ë‹ˆë¼ user_id)
      email,
      nickname,
      role: 'user',
      is_active: true,
    });

  // 3. users í…Œì´ë¸” ì‚½ì… ì‹¤íŒ¨ ì‹œ ë¡¤ë°± (í•„ìˆ˜!)
  if (profileError) {
    await adminClient.auth.admin.deleteUser(authData.user.id);
    return NextResponse.json({ error: 'íšŒì›ê°€ì… ì‹¤íŒ¨' }, { status: 500 });
  }

  return NextResponse.json({ success: true });
}
```

### 8.3 ë¡œê·¸ì¸ APIì—ì„œ ì´ì¤‘ ì•ˆì „ì¥ì¹˜

```typescript
// ë¡œê·¸ì¸ API
export async function POST(request: NextRequest) {
  const { email, password } = await request.json();

  // 1. Supabase Auth ë¡œê·¸ì¸
  const { data: authData, error } = await supabase.auth.signInWithPassword({
    email,
    password,
  });

  // 2. users í…Œì´ë¸”ì—ì„œ í”„ë¡œí•„ ì¡°íšŒ
  const { data: userProfile } = await supabase
    .from('users')
    .select('*')
    .eq('user_id', authData.user.id)  // âš ï¸ user_idë¡œ ì¡°íšŒ!
    .single();

  // 3. í”„ë¡œí•„ ì—†ìœ¼ë©´ ìë™ ìƒì„± (ì´ì¤‘ ì•ˆì „ì¥ì¹˜)
  if (!userProfile) {
    await supabase.from('users').insert({
      user_id: authData.user.id,
      email: authData.user.email,
      nickname: authData.user.email.split('@')[0],
      role: 'user',
      is_active: true,
    });
  }

  return NextResponse.json({ success: true, user: authData.user });
}
```

### 8.4 ìŠ¤í‚¤ë§ˆ í™•ì¸ ë°©ë²•

```sql
-- users í…Œì´ë¸” ì»¬ëŸ¼ëª… í™•ì¸
SELECT column_name FROM information_schema.columns
WHERE table_name = 'users';

-- ê²°ê³¼: user_id, email, nickname, ... (idê°€ ì•„ë‹˜!)
```

---

## 9. íŠ¸ëŸ¬ë¸”ìŠˆíŒ… (ì‹¤ì „ ê²½í—˜)

### ğŸ”´ ë¬¸ì œ 1: ì´ë©”ì¼ ë§í¬ê°€ ì˜ëª»ëœ ë„ë©”ì¸ìœ¼ë¡œ ìƒì„±

**ì¦ìƒ**:
```
ì´ë©”ì¼ ë§í¬: https://ssalworks.ai.kr/auth/callback?...
ì—ëŸ¬: DNS_PROBE_FINISHED_NXDOMAIN
```

**ì‹œë„í•œ í•´ê²°ì±… (ëª¨ë‘ ì‹¤íŒ¨)**:
1. âŒ `NEXT_PUBLIC_SITE_URL` í™˜ê²½ë³€ìˆ˜ ë³€ê²½ â†’ í…œí”Œë¦¿ì— ì˜í–¥ ì—†ìŒ
2. âŒ Supabase Site URL ì„¤ì • ë³€ê²½ â†’ ë³€ìˆ˜ê°€ ê·¸ëŒ€ë¡œ ì‚¬ìš©ë¨
3. âŒ `emailRedirectTo` í•˜ë“œì½”ë”© â†’ `{{ .SiteURL }}`ì´ ìš°ì„ 
4. âŒ Send Email Hook êµ¬í˜„ â†’ "Hook requires authorization token" ì—ëŸ¬

**ìµœì¢… í•´ê²°**:
```html
<!-- í…œí”Œë¦¿ì—ì„œ ì§ì ‘ í•˜ë“œì½”ë”© -->
<a href="https://www.ssalworks.ai.kr/auth/callback?token_hash={{ .TokenHash }}&type=signup">
```

**ì†Œìš” ì‹œê°„**: ì•½ 6ì‹œê°„

---

### ğŸ”´ ë¬¸ì œ 2: ì´ë©”ì¼ ì¸ì¦ í›„ ë¡œê·¸ì¸ ì‹¤íŒ¨

**ì¦ìƒ**: ì¸ì¦ ì™„ë£Œ í›„ì—ë„ "ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤"

**ê·¼ë³¸ ì›ì¸**: íšŒì›ê°€ì… APIì—ì„œ ì˜ëª»ëœ ì»¬ëŸ¼ëª… ì‚¬ìš©
```typescript
// âŒ ì˜ëª»ëœ ì½”ë“œ
.insert({ id: authData.user.id, ... })

// âœ… ì˜¬ë°”ë¥¸ ì½”ë“œ
.insert({ user_id: authData.user.id, ... })
```

**í•´ê²°**: ìŠ¤í‚¤ë§ˆ í™•ì¸ í›„ ì»¬ëŸ¼ëª… ìˆ˜ì •

**ì†Œìš” ì‹œê°„**: ì•½ 2ì‹œê°„

---

### ğŸ”´ ë¬¸ì œ 3: ì´ë©”ì¼ì´ ìŠ¤íŒ¸ìœ¼ë¡œ ë¶„ë¥˜

**ì¦ìƒ**: Gmailì—ì„œ "ë°œì‹ ì ì¸ì¦ ì•ˆë¨" ê²½ê³ 

**ì›ì¸**: DKIM ì¸ì¦ ë¯¸ì™„ë£Œ

**í•´ê²°**:
1. Resendì—ì„œ DKIM TXT ë ˆì½”ë“œ ë³µì‚¬
2. Whois DNS ê³ ê¸‰ì„¤ì •ì—ì„œ TXT ë ˆì½”ë“œ ì¶”ê°€
3. DNS ì „íŒŒ ëŒ€ê¸° (1-2ì‹œê°„)
4. Resendì—ì„œ "Verify" í´ë¦­

---

### ğŸ”´ ë¬¸ì œ 4: RESEND_API_KEY not set

**ì¦ìƒ**: ì´ë©”ì¼ ë°œì†¡ ì‹œ API í‚¤ ì˜¤ë¥˜

**í•´ê²°**:
1. `.env.local` íŒŒì¼ ì¡´ì¬ í™•ì¸
2. API í‚¤ ë³µì‚¬ ì‹œ ê³µë°± ì—†ëŠ”ì§€ í™•ì¸
3. ê°œë°œ ì„œë²„ ì¬ì‹œì‘

---

### ğŸ”´ ë¬¸ì œ 5: Send Email Hookì€ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”

**ì‹œë„í–ˆìœ¼ë‚˜ ì‹¤íŒ¨í•œ ì´ìœ **:
- webhook ì¸ì¦ ë¬¸ì œ
- ë³µì¡ë„ ì¦ê°€
- ë””ë²„ê¹… ì–´ë ¤ì›€

**ìµœì¢… ì„ íƒ**:
- âœ… SMTP (Resend) + í…œí”Œë¦¿ ìˆ˜ì • = ê°€ì¥ ê°„ë‹¨í•˜ê³  ì•ˆì •ì 

---

## 10. ì²´í¬ë¦¬ìŠ¤íŠ¸

### Phase 1: Resend
- [ ] Resend ê³„ì • ìƒì„±
- [ ] API Key ë°œê¸‰ ë° ì €ì¥
- [ ] ë„ë©”ì¸ ë“±ë¡

### Phase 2: DKIM DNS
- [ ] Whois ë„¤ì„ì„œë²„ ê³ ê¸‰ì„¤ì • ì ‘ì†
- [ ] TXT ë ˆì½”ë“œ ì¶”ê°€ (resend._domainkey)
- [ ] DNS ì „íŒŒ ëŒ€ê¸° (1-48ì‹œê°„)
- [ ] Resendì—ì„œ Verified í™•ì¸

### Phase 3: Supabase SMTP
- [ ] Custom SMTP í™œì„±í™”
- [ ] Resend SMTP ì •ë³´ ì…ë ¥ (Host, Port, Password)
- [ ] Sender Email, Sender Name ì„¤ì •
- [ ] Site URL ì„¤ì •
- [ ] Redirect URLs ë“±ë¡

### Phase 4: ì´ë©”ì¼ í…œí”Œë¦¿ â­
- [ ] Confirm signup í…œí”Œë¦¿ URL í•˜ë“œì½”ë”©
- [ ] Magic Link í…œí”Œë¦¿ URL í•˜ë“œì½”ë”©
- [ ] Reset Password í…œí”Œë¦¿ URL í•˜ë“œì½”ë”©
- [ ] Send Email Hook ë¹„í™œì„±í™” í™•ì¸

### Phase 5: í™˜ê²½ë³€ìˆ˜
- [ ] ë¡œì»¬ .env.local ì„¤ì •
- [ ] Vercel í™˜ê²½ë³€ìˆ˜ ì„¤ì •

### Phase 6: í…Œì´ë¸” ë™ê¸°í™”
- [ ] users í…Œì´ë¸” ì»¬ëŸ¼ëª… í™•ì¸ (user_id vs id)
- [ ] íšŒì›ê°€ì… API: users í…Œì´ë¸” ì‚½ì… + ë¡¤ë°± ë¡œì§
- [ ] ë¡œê·¸ì¸ API: users í…Œì´ë¸” ì¡°íšŒ + ìë™ ìƒì„±

### ìµœì¢… í…ŒìŠ¤íŠ¸
- [ ] íšŒì›ê°€ì… â†’ ì´ë©”ì¼ ë°œì†¡ í™•ì¸
- [ ] ì´ë©”ì¼ ë§í¬ í´ë¦­ â†’ ì¸ì¦ ì™„ë£Œ
- [ ] ë¡œê·¸ì¸ ì„±ê³µ
- [ ] users í…Œì´ë¸”ì— ë°ì´í„° ìƒì„± í™•ì¸
- [ ] ìŠ¤íŒ¸ í´ë” ì•„ë‹Œ ë°›ì€í¸ì§€í•¨ ë„ì°© í™•ì¸

---

## í•µì‹¬ êµí›ˆ 3ê°€ì§€

1. **ì´ë©”ì¼ í…œí”Œë¦¿ì€ í•˜ë“œì½”ë”©í•˜ë¼** (`{{ .SiteURL }}` í•¨ì • ì¡°ì‹¬)
2. **auth.usersì™€ users í…Œì´ë¸”ì„ í•­ìƒ ë™ê¸°í™”í•˜ë¼** (ë¡¤ë°± ë¡œì§ í•„ìˆ˜)
3. **Send Email Hookì€ ë³µì¡ë„ë§Œ ë†’ì¸ë‹¤** (SMTP + í…œí”Œë¦¿ìœ¼ë¡œ ì¶©ë¶„)

---

## ì°¸ê³  ë¬¸ì„œ

- [Supabase SMTP Configuration](https://supabase.com/docs/guides/auth/auth-smtp)
- [Supabase Email Templates](https://supabase.com/docs/guides/auth/auth-email-templates)
- [Resend Documentation](https://resend.com/docs)
- [Resend DKIM Setup](https://resend.com/docs/dashboard/domains/introduction)

---

**Last Updated**: 2025-12-17
