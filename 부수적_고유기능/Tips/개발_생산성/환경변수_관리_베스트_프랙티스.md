# 환경변수 관리 베스트 프랙티스

## 💡 Tip

환경변수를 체계적으로 관리하면 보안 사고를 예방하고 배포가 쉬워집니다.

## 환경별 파일 구조

```
project/
├── .env.example     # 템플릿 (Git에 커밋)
├── .env.local       # 로컬 개발용 (Git 무시)
├── .env.development # 개발 서버용
├── .env.production  # 프로덕션용
└── .gitignore       # .env* 무시 설정
```

## .env.example 템플릿

```env
# Supabase
SUPABASE_URL=https://xxx.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# Google OAuth
GOOGLE_CLIENT_ID=xxx.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-client-secret

# 결제 (토스)
TOSS_CLIENT_KEY=test_ck_xxx
TOSS_SECRET_KEY=test_sk_xxx

# 이메일 (Resend)
RESEND_API_KEY=re_xxx
```

## .gitignore 설정

```gitignore
# 환경변수
.env
.env.local
.env.*.local
.env.development
.env.production

# 실수 방지
*.pem
*.key
credentials.json
```

## Vercel 환경변수 설정

```
1. Vercel Dashboard 접속
2. Project Settings → Environment Variables
3. 각 환경별로 설정:
   - Production: 프로덕션 키
   - Preview: 테스트 키
   - Development: 개발 키
```

## 환경변수 로드 확인

```javascript
// 환경변수 존재 확인
function checkEnvVars() {
    const required = [
        'SUPABASE_URL',
        'SUPABASE_ANON_KEY'
    ];

    const missing = required.filter(key => !process.env[key]);

    if (missing.length > 0) {
        console.error('Missing env vars:', missing);
        process.exit(1);
    }
}
```

## 보안 체크리스트

- [ ] .env 파일이 .gitignore에 있는가?
- [ ] SECRET_KEY가 클라이언트에 노출되지 않는가?
- [ ] .env.example에 실제 키가 들어있지 않은가?
- [ ] Vercel 환경변수가 올바르게 설정되었는가?

## 관련 문서
- `S1_개발_준비/Backend_Infra/Environment/ENV_SETUP.md`
