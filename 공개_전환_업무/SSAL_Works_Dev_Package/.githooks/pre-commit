#!/bin/sh
#
# Git Pre-commit Hook
# μ»¤λ°‹ μ „μ— λ§¤λ‰΄μ–Ό μλ™ λΉλ“ μν–‰
# (rules/ νμΌ λ‚΄μ©μ„ λ§¤λ‰΄μ–Όμ— μλ™ ν¬ν•¨)
#
# μ„¤μΉ λ°©λ²•:
#   λ°©λ²• 1: cp .githooks/pre-commit .git/hooks/pre-commit && chmod +x .git/hooks/pre-commit
#   λ°©λ²• 2: git config core.hooksPath .githooks
#

PROJECT_ROOT="$(git rev-parse --show-toplevel)"

# === λ§¤λ‰΄μ–Ό λΉλ“ (rules/ μλ™ ν¬ν•¨) ===
echo "π“– λ§¤λ‰΄μ–Ό λΉλ“ μ¤‘..."
node "$PROJECT_ROOT/S0_Project-SAL-Grid_μƒμ„±/manual/build-manual.js"

if [ $? -ne 0 ]; then
    echo "β λ§¤λ‰΄μ–Ό λΉλ“ μ‹¤ν¨! μ»¤λ°‹μ„ μ¤‘λ‹¨ν•©λ‹λ‹¤."
    exit 1
fi

# λ§¤λ‰΄μ–Ό νμΌ μ¤ν…μ΄μ§•μ— μ¶”κ°€
git add "$PROJECT_ROOT/S0_Project-SAL-Grid_μƒμ„±/manual/PROJECT_SAL_GRID_MANUAL.md" 2>/dev/null

echo "β… λ§¤λ‰΄μ–Ό λΉλ“ μ™„λ£! μ»¤λ°‹μ„ μ§„ν–‰ν•©λ‹λ‹¤."
exit 0
