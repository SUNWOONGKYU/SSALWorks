# 25편 | 클라우드와 서버리스

---

24편에서 웹 애플리케이션 아키텍처를 배웠습니다. 이제 현대 웹 개발에서 빠질 수 없는 **클라우드 컴퓨팅**과 **서버리스 아키텍처**에 대해 알아보겠습니다. 클라우드는 **인터넷을 통해 컴퓨터 자원을 빌려 쓰는 것**입니다. 마치 전기를 직접 발전하지 않고 전력회사에서 공급받듯이, 서버와 컴퓨팅 자원을 클라우드 업체에서 제공받습니다.

## 1. 클라우드 컴퓨팅이란?

### 1-1. 클라우드의 개념

**클라우드 컴퓨팅**은 인터넷을 통해 컴퓨팅 자원(서버, 스토리지, 데이터베이스 등)을 필요한 만큼 빌려 쓰는 서비스입니다.

**전통적 방식 vs 클라우드**:
```
전통적 방식:                    클라우드:
┌─────────────────┐            ┌─────────────────┐
│ 자체 서버 구매   │            │ 필요할 때 빌림   │
│ 직접 관리       │      →     │ 사용한 만큼 지불 │
│ 확장 시 추가 구매│            │ 즉시 확장/축소   │
└─────────────────┘            └─────────────────┘
```

### 1-2. 클라우드의 장점

| 장점 | 설명 |
|------|------|
| **탄력성** | 트래픽에 따라 자원을 즉시 조절 |
| **비용 효율** | 사용한 만큼만 비용 지불 |
| **안정성** | 데이터 복제, 백업 자동화 |
| **글로벌 배포** | 전 세계 데이터센터 활용 |

### 1-3. 주요 클라우드 서비스 제공자

| 제공자 | 특징 |
|--------|------|
| **AWS (Amazon)** | 가장 큰 시장 점유율, 다양한 서비스 |
| **Azure (Microsoft)** | 기업용에 강점, MS 제품 통합 |
| **GCP (Google)** | 머신러닝, 데이터 분석에 강점 |
| **Vercel/Netlify** | 프론트엔드 특화, 간편한 배포 |

## 2. 클라우드 서비스 모델

### 2-1. IaaS (Infrastructure as a Service)

**인프라**를 제공합니다. 가상 서버, 네트워크, 스토리지 등을 빌려 씁니다.

```
사용자 관리: OS, 미들웨어, 앱, 데이터
클라우드 제공: 가상화, 서버, 스토리지, 네트워크
```

**예시**: AWS EC2, Google Compute Engine, Azure VMs

### 2-2. PaaS (Platform as a Service)

**플랫폼**을 제공합니다. 개발자는 코드만 작성하면 됩니다.

```
사용자 관리: 앱, 데이터
클라우드 제공: OS, 미들웨어, 런타임, 가상화, 서버
```

**예시**: Heroku, Google App Engine, Vercel

### 2-3. SaaS (Software as a Service)

**완성된 소프트웨어**를 제공합니다. 사용자는 그냥 사용합니다.

```
사용자 관리: 데이터 입력만
클라우드 제공: 모든 것
```

**예시**: Gmail, Slack, Salesforce, Notion

### 2-4. 비교 요약

```
          IaaS        PaaS        SaaS
앱        사용자      사용자      제공
데이터    사용자      사용자      제공
런타임    사용자      제공        제공
미들웨어  사용자      제공        제공
OS        사용자      제공        제공
가상화    제공        제공        제공
서버      제공        제공        제공
```

## 3. 서버리스란?

### 3-1. 서버리스의 개념

**서버리스(Serverless)**는 서버 관리 없이 코드를 실행하는 방식입니다. 서버가 없는 것이 아니라, **서버 관리를 클라우드가 담당**하는 것입니다.

```
전통적:                        서버리스:
┌───────────────┐             ┌───────────────┐
│ 서버 프로비저닝 │             │ 함수 작성     │
│ OS 설치/관리   │      →     │ 업로드       │
│ 보안 패치      │             │ 끝!          │
│ 스케일링 설정  │             │              │
└───────────────┘             └───────────────┘
```

### 3-2. 서버리스의 특징

- **이벤트 기반 실행**: 요청이 있을 때만 함수 실행
- **자동 스케일링**: 요청량에 따라 자동으로 확장/축소
- **사용량 기반 과금**: 실제 실행 시간만큼만 비용 지불
- **무상태(Stateless)**: 각 함수 호출은 독립적

### 3-3. 서버리스 함수 (FaaS)

**FaaS (Function as a Service)**는 함수 단위로 코드를 실행합니다.

```javascript
// AWS Lambda 함수 예시
exports.handler = async (event) => {
    const name = event.queryStringParameters?.name || 'World';

    return {
        statusCode: 200,
        body: JSON.stringify({
            message: `Hello, ${name}!`
        })
    };
};
```

**주요 FaaS 서비스**:
- AWS Lambda
- Google Cloud Functions
- Azure Functions
- Vercel Functions
- Netlify Functions

## 4. 서버리스 실전 활용

### 4-1. Vercel에서 API 만들기

```javascript
// api/hello.js
export default function handler(req, res) {
    const { name = 'World' } = req.query;
    res.status(200).json({ message: `Hello, ${name}!` });
}
```

배포 후 자동으로 `/api/hello` 엔드포인트가 생성됩니다.

### 4-2. Supabase Edge Functions

```typescript
// supabase/functions/hello/index.ts
import { serve } from "https://deno.land/std@0.168.0/http/server.ts"

serve(async (req) => {
    const { name } = await req.json()
    const data = {
        message: `Hello ${name}!`,
    }
    return new Response(JSON.stringify(data), {
        headers: { "Content-Type": "application/json" },
    })
})
```

### 4-3. 서버리스 사용 사례

| 사용 사례 | 설명 |
|----------|------|
| API 엔드포인트 | REST API, GraphQL 서버 |
| 이미지 처리 | 썸네일 생성, 리사이징 |
| 알림 발송 | 이메일, SMS, 푸시 알림 |
| 데이터 처리 | ETL, 배치 작업 |
| 인증/인가 | OAuth 콜백 처리 |

## 5. BaaS (Backend as a Service)

### 5-1. BaaS란?

**BaaS**는 백엔드 기능을 즉시 사용할 수 있게 제공하는 서비스입니다.

제공 기능:
- 데이터베이스
- 인증/인가
- 파일 스토리지
- 실시간 동기화
- 푸시 알림

### 5-2. 주요 BaaS 서비스

| 서비스 | 특징 |
|--------|------|
| **Firebase** | Google, 실시간 DB, 모바일 특화 |
| **Supabase** | PostgreSQL, 오픈소스, Firebase 대안 |
| **AWS Amplify** | AWS 서비스 통합 |
| **Appwrite** | 오픈소스, 셀프 호스팅 가능 |

### 5-3. Supabase 사용 예시

```javascript
import { createClient } from '@supabase/supabase-js'

const supabase = createClient(
    'https://your-project.supabase.co',
    'your-anon-key'
)

// 데이터 조회
const { data, error } = await supabase
    .from('users')
    .select('*')

// 데이터 삽입
await supabase
    .from('users')
    .insert({ name: '홍길동', email: 'hong@example.com' })

// 인증
await supabase.auth.signInWithOAuth({
    provider: 'google'
})
```

## 6. CDN과 엣지 컴퓨팅

### 6-1. CDN (Content Delivery Network)

**CDN**은 전 세계에 분산된 서버 네트워크로, 콘텐츠를 사용자와 가까운 곳에서 제공합니다.

```
            ┌──── 한국 사용자 ←── 서울 엣지
            │
오리진 서버 ─┼──── 미국 사용자 ←── 미국 엣지
(원본)      │
            └──── 유럽 사용자 ←── 유럽 엣지
```

**CDN의 장점**:
- 응답 속도 향상
- 서버 부하 분산
- DDoS 방어

### 6-2. 엣지 컴퓨팅

**엣지**에서 코드를 실행하여 지연 시간을 최소화합니다.

```javascript
// Vercel Edge Function
export const config = {
    runtime: 'edge',
};

export default function handler(request) {
    return new Response('Hello from the Edge!');
}
```

**특징**:
- 매우 빠른 콜드 스타트
- 전 세계 분산 실행
- 제한된 Node.js API

## 7. 서버리스의 장단점

### 7-1. 장점

| 장점 | 설명 |
|------|------|
| **서버 관리 불필요** | 인프라 운영에 신경 쓸 필요 없음 |
| **자동 스케일링** | 트래픽에 자동 대응 |
| **비용 효율** | 실행 시간만 과금 |
| **빠른 배포** | 코드만 업로드하면 끝 |

### 7-2. 단점

| 단점 | 설명 |
|------|------|
| **콜드 스타트** | 첫 요청 시 지연 발생 가능 |
| **실행 시간 제한** | 보통 10~15분으로 제한 |
| **상태 유지 어려움** | 무상태 특성으로 복잡한 로직 제한 |
| **벤더 종속** | 특정 클라우드에 의존 |

### 7-3. 적합한 경우 vs 부적합한 경우

**적합**:
- API 엔드포인트
- 이벤트 기반 처리
- 간헐적 트래픽
- 빠른 프로토타이핑

**부적합**:
- 장시간 실행 작업
- 복잡한 상태 관리
- 예측 가능한 지속적 트래픽

## 8. 실전 아키텍처 예시

### 8-1. JAMstack 아키텍처

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│  Frontend   │────►│   CDN       │────►│   User      │
│  (React)    │     │  (Vercel)   │     │             │
└──────┬──────┘     └─────────────┘     └─────────────┘
       │
       ▼
┌─────────────┐     ┌─────────────┐
│  API        │────►│   BaaS      │
│  (Functions)│     │  (Supabase) │
└─────────────┘     └─────────────┘
```

### 8-2. 풀스택 서버리스

```
Vercel (프론트엔드 + API)
         │
    ┌────┴────┐
    ▼         ▼
Supabase   외부 API
(DB/Auth)  (결제 등)
```

## 핵심 정리

| 개념 | 설명 | 예시 |
|------|------|------|
| IaaS | 인프라 제공 | AWS EC2 |
| PaaS | 플랫폼 제공 | Heroku, Vercel |
| SaaS | 소프트웨어 제공 | Gmail, Slack |
| FaaS | 함수 실행 | AWS Lambda |
| BaaS | 백엔드 기능 | Supabase, Firebase |

클라우드와 서버리스는 현대 웹 개발의 **핵심 인프라**입니다. 서버 관리에 시간을 쓰기보다 **비즈니스 로직에 집중**할 수 있게 해줍니다. 다음 편에서는 실시간 웹과 WebSocket에 대해 알아보겠습니다.

---

**작성일: 2025-01-01 / 수정일: 2025-12-20 / 글자수: 약 5,600자 / 작성자: Claude / 프롬프터: 써니**
