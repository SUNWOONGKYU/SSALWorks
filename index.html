<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Permissions-Policy" content="notifications()">
    <title>SSALWorks Dashboard - 프로젝트 관리</title>
    <!-- 외부 CSS 제거: 인라인 CSS 우선 -->
    <!-- <link rel="stylesheet" href="/assets/css/responsive.css?v=20251224"> -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* ===== 4-Layer Color System v3.1 ===== */

            /* Layer 1: Core (4색) */
            --color-navy: #2C4A8A;
            --color-navy-dark: #1F3563;
            --color-amber: #F59E0B;
            --color-amber-dark: #D97706;
            --color-emerald: #10B981;
            --color-emerald-dark: #059669;
            --color-blue: #3B82F6;
            --color-blue-dark: #2563EB;

            /* Layer 2: Accent (2색) */
            --color-violet: #8B5CF6;
            --color-violet-dark: #7C3AED;
            --color-indigo: #667eea;
            --color-indigo-dark: #764ba2;

            /* Layer 3: Semantic (2색) */
            --color-warning: #ffc107;
            --color-error: #EF4444;

            /* Layer 4: Neutral */
            --text-primary: #212529;
            --text-secondary: #495057;
            --text-muted: #6c757d;
            --border-color: #dee2e6;
            --bg-page: #f8f9fa;
            --bg-surface: #ffffff;

            /* 호환성 Alias (기존 코드 지원) */
            --primary: var(--color-emerald);
            --primary-dark: var(--color-emerald-dark);
            --secondary: var(--color-amber);
            --secondary-dark: var(--color-amber-dark);
            --tertiary: var(--color-navy);
            --tertiary-dark: var(--color-navy-dark);
            --success: var(--color-emerald);
            --warning: var(--color-warning);
            --danger: var(--color-error);
            --info: var(--color-blue);
            --neutral: var(--text-muted);
            --bg-light: var(--bg-page);
            --bg-white: var(--bg-surface);

/* Border Radius */
            --radius-sm: 4px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --border-radius: 8px;

            /* Box Shadow */
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.15);
            --shadow-lg: 0 10px 40px rgba(0, 0, 0, 0.2);

            /* Transition */
            --transition-fast: 0.15s ease;
            --transition-normal: 0.2s ease;
            --transition-slow: 0.3s ease;
        }

        /* Footer Styles */
        .footer {
            width: 100%;
            background: white;
            border-top: 1px solid var(--border-color);
            font-size: 11px;
            color: #495057;
            z-index: 10;
        }

        .footer-inner {
            max-width: 1400px;
            width: 100%;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 32px;
        }

        .footer-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .footer-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            background: #f1f3f5;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            color: #495057;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
        }

        .footer-btn:hover {
            background: #e9ecef;
            color: var(--primary);
            border-color: var(--primary);
        }

        .footer-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        body {
            font-family: 'Malgun Gothic', '맑은 고딕', 'Apple SD Gothic Neo', 'Noto Sans KR', sans-serif;
            font-size: 14px;
            line-height: 1.6;
            color: #212529;
            background: var(--bg-light);
            margin: 0;
            padding: 0;
        }

        /* ========== Typography Hierarchy ========== */
        /* H1: 로고 (SSAL Works) - 최상위 등급 */
        h1 {
            font-size: 26px;
            font-weight: 800;
            line-height: 1.2;
            color: white;
            margin: 0;
            letter-spacing: -0.5px;
        }

        /* H2: 워크스페이스, 프로젝트, SAL Grid 등 주요 섹션 타이틀 */
        h2 {
            font-size: 20px;
            font-weight: 700;
            line-height: 1.3;
            color: var(--primary-dark);
            margin-bottom: 13px;  /* 1단계: Section spacing */
            letter-spacing: -0.3px;
        }

        /* H3: 사이드바 1단계 (Project, 진행 프로세스, 학습용 콘텐츠 등), 헤더 태그라인 */
        h3 {
            font-size: 14px;
            font-weight: 700;
            line-height: 1.3;
            color: #495057;
            margin-bottom: 10px;  /* 2단계: Group spacing */
        }

        /* H4: 사이드바 2단계 (사업계획, 기획 등), 헤더/푸터 버튼 */
        h4 {
            font-size: 13px;
            font-weight: 700;
            line-height: 1.5;
            color: #495057;
            margin-bottom: 6px;  /* 3단계: Item spacing */
        }

        /* H5: 사이드바 3단계, 강조 텍스트 */
        h5 {
            font-size: 11px;
            font-weight: 700;
            line-height: 1.5;
            color: #495057;
            margin-bottom: 4px;  /* 4단계: Detail spacing */
        }

        /* H6: 사이드바 4단계, 설명 텍스트, 워크스페이스 버튼, 프로세스 퍼센트 */
        h6 {
            font-size: 11px;
            font-weight: 500;
            line-height: 1.5;
            color: #495057;
            margin-bottom: 4px;
        }

        /* ========== Layout Grid ========== */
        .page-wrapper {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .layout-container {
            display: grid;
            grid-template-columns: 280px minmax(500px, 870px) 280px;
            flex: 1;
            gap: 0;
            width: 100%;
            justify-content: center;
        }

        /* ========== Header ========== */
        .header {
            width: 100%;
            background: linear-gradient(135deg, var(--tertiary) 0%, var(--tertiary-dark) 100%);
            color: white;
            box-shadow: var(--shadow-md);
            z-index: 100;
            position: relative;
        }

        .header-inner {
            max-width: 1400px;
            width: 100%;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 32px;
            height: 70px;
        }

        .logo {
            font-size: 28px;
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 12px;
            font-family: 'Segoe UI', 'Arial', sans-serif;
            letter-spacing: -0.5px;
        }

        .rice-logo {
            display: flex;
            align-items: center;
            gap: 3px;
            transform: rotate(-15deg);
        }

        .rice-grain {
            width: 10px;
            height: 18px;
            background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);
            border-radius: 40%;
            box-shadow: 0 2px 4px rgba(217, 119, 6, 0.4), inset 0 1px 2px rgba(255, 255, 255, 0.3);
            display: inline-block;
        }

        .rice-grain:nth-child(1) {
            transform: rotate(-5deg);
        }

        .rice-grain:nth-child(2) {
            transform: rotate(5deg);
            margin-top: 2px;
        }

        .rice-grain:nth-child(3) {
            transform: rotate(-3deg);
            margin-top: -1px;
        }

        .header-center {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .header-tagline {
            font-size: 16px;
            font-weight: 700;
            letter-spacing: 0.3px;
            opacity: 0.95;
            white-space: nowrap;
            color: white;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .header-btn {
            padding: 7px 18px;
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-radius: 8px;
            color: rgba(255, 255, 255, 0.9);
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .header-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.6);
            color: white;
        }

        .header-btn:last-child {
            border-color: rgba(255, 255, 255, 0.5);
            font-weight: 600;
        }

        .header-btn:last-child:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.7);
        }

        .notification-btn {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 50%;
            cursor: pointer;
            position: relative;
            transition: all 0.2s;
        }

        .notification-btn:hover {
            background: rgba(255, 255, 255, 0.25);
        }

        .notification-badge {
            position: absolute;
            top: 2px;
            right: 2px;
            width: 8px;
            height: 8px;
            background: #ef4444;
            border-radius: 50%;
            border: 2px solid var(--primary);
        }

        /* ========== Left Sidebar: Process ========== */
        .left-sidebar {
            grid-column: 1;
            grid-row: 2;
            overflow-y: auto;
            background: var(--bg-white);
            border-right: 1px solid var(--border-color);
            padding: 16px 8px 16px 12px;
            display: flex;
            flex-direction: column;
        }

        .sidebar-title {
            /* H3 스타일 적용 */
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 12px;
            color: #495057;
        }

        .project-menu {
            margin-bottom: 8px;
        }

        .project-menu-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            margin-bottom: 4px;
            background: white;
            border: 1px solid #dee2e6;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: all 0.2s;
            font-size: 11px;
            font-weight: 600;
            color: #495057;
        }

        .project-menu-item:hover {
            background: rgba(16, 185, 129, 0.15);
            border-color: var(--primary);
            color: var(--primary);
            transform: translateX(3px);
        }

        .project-list {
            display: flex;
            flex-direction: column;
            gap: 6px;
            margin-bottom: 10px;  /* 2단계: Group spacing */
        }

        .project-list-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 8px;
            background: #f8f9fa;
            border-left: 3px solid var(--primary);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 11px;
        }

        .project-list-item:hover {
            background: #e9ecef;
            transform: translateX(2px);
        }

        .project-list-item.selected {
            background: rgba(16, 185, 129, 0.05);
            border-left-color: var(--primary);
            border-left-width: 4px;
        }

        .project-list-item .project-icon {
            font-size: 14px;
        }

        .project-list-item .project-name {
            flex: 1;
            font-size: 12px;
            font-weight: 600;
            color: #212529;
        }

        .project-list-item .project-status {
            font-size: 11px;
            padding: 3px 7px;
            border-radius: 8px;
            background: var(--success);
            color: white;
            font-weight: 600;
            letter-spacing: -0.3px;
        }

        .project-menu-item span:first-child {
            font-size: 11px;
            color: var(--success);
            font-weight: 600;
        }

        .process-list {
            flex: 1;
        }

        .process-item {
            margin-bottom: 2px;
        }

        /* P1~S5 기본 스타일 */
        .process-major {
            display: flex;
            flex-direction: column;
            gap: 1px;
            padding: 3px 10px;
            background: rgba(16, 185, 129, 0.05);
            border: 1px solid rgba(16, 185, 129, 0.15);
            border-radius: 8px;
            transition: all 0.2s;
            cursor: pointer;
            margin-bottom: 3px;
        }

        /* P1~S5 0% 상태: 아주 연한 녹색 */
        .process-major[data-progress="0"] {
            background: rgba(16, 185, 129, 0.05) !important;
            border: 1px solid rgba(16, 185, 129, 0.15) !important;
        }

        /* P1~S5 진행 중 (1-99%): 좀 더 진한 녹색 */
        .process-major[data-progress]:not([data-progress="0"]):not(.completed) {
            background: rgba(16, 185, 129, 0.12) !important;
            border: 1px solid rgba(16, 185, 129, 0.3) !important;
        }

        /* 호버 시 진한 초록색 (가장 높은 우선순위) */
        .process-major:hover {
            background: var(--success) !important;
            color: white !important;
        }

        .process-major:hover .process-icon,
        .process-major:hover .process-status {
            filter: brightness(2);
        }

        /* P1~S5 완료 (100%): 더 진한 녹색 */
        .process-major.completed {
            background: rgba(16, 185, 129, 0.20) !important;
            border: 1px solid rgba(16, 185, 129, 0.45) !important;
        }

        .process-header {
            display: flex;
            align-items: center;
            gap: 8px;
            width: 100%;
        }

        .process-icon {
            font-size: 11px;
            min-width: 18px;
            text-align: center;
        }

        .process-name {
            flex: 1;
            font-size: 12px;
            font-weight: 600;
            color: #212529;
        }

        .process-progress-container {
            display: flex;
            align-items: center;
            gap: 8px;
            width: 100%;
        }

        .process-percent {
            font-size: 12px;
            font-weight: 500;
            color: #495057;
            min-width: 35px;
            text-align: right;
        }

        /* 진행률 > 0%일 때 퍼센티지 진한 녹색 */
        .process-major[data-progress]:not([data-progress="0"]):not(.completed) .process-percent {
            color: var(--success);
            font-weight: 600;
        }

        .process-major.completed .process-percent {
            color: var(--success);
        }

        .process-arrow {
            
            transition: transform 0.3s;
            margin-right: 4px;
        }

        .process-arrow.expanded {
            transform: rotate(90deg);
        }

        .process-small-list {
            margin-left: 4px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .process-small-list.expanded {
            max-height: 600px;
        }

        .process-small {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 4px 8px;
            font-size: 11px;
            font-weight: 700;
            color: #495057;
            margin-bottom: 2px;
            border-radius: 4px;
            transition: all 0.2s;
            cursor: pointer;
        }

        .process-small:hover {
            background: rgba(16, 185, 129, 0.15);
            color: #333;
        }

        .process-small-content {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .process-small-bullet {
            
            color: var(--primary);
        }

        .process-small-arrow {
            
            transition: transform 0.3s;
            opacity: 0.5;
        }

        .process-small-arrow.expanded {
            transform: rotate(90deg);
        }

        .process-tiny-list {
            margin-left: 6px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .process-tiny-list.expanded {
            max-height: 200px;
        }

        .process-tiny {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 4px 8px;
            font-size: 11px;
            font-weight: 500;
            color: #495057;
            cursor: pointer;
            border-radius: 4px;
            margin-bottom: 1px;
            transition: all 0.2s;
        }

        .process-tiny:hover {
            background: rgba(16, 185, 129, 0.15);
            color: #333;
        }
        .process-tiny-bullet {
            
            color: var(--primary);
        }

        /* Process Progress Bar */
        .process-progress {
            flex: 1;
            height: 5px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }

        .process-progress-fill {
            height: 100%;
            background: #34D399;
            transition: width 0.3s ease;
        }

        /* 진행률 > 0%일 때 진행률 바 진한 녹색 */
        .process-major[data-progress]:not([data-progress="0"]):not(.completed) .process-progress-fill {
            background: var(--success);
        }

        .process-major.completed .process-progress-fill {
            background: var(--success);
        }

        /* ========== 특별단계/준비단계 스타일 ========== */
        /* ☆ 특별단계: 파란색 계열 */
        .process-special {
            display: flex;
            flex-direction: column;
            gap: 1px;
            padding: 3px 6px;
            background: #dbeafe;
            border: 1px solid #60a5fa;
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 4px;
            transition: all 0.2s;
        }
        .process-special-header {
            display: flex;
            align-items: center;
            gap: 5px;
            width: 100%;
        }
        .process-special-name {
            flex: 1;
            
            font-weight: 600;
            color: #212529;
        }
        .process-special:hover {
            background: #bfdbfe;
        }
        .process-special:hover .process-special-name,
        .process-special:hover .process-special-percent {
            color: #1e40af;
        }
        .process-special-icon {
            font-size: 11px;
            color: #2563eb;
            font-weight: bold;
        }
        .process-special-percent {
            font-size: 11px;
            font-weight: 600;
            color: #2563eb;
        }
        .process-special-progress {
            height: 4px;
            background: rgba(37, 99, 235, 0.2);
            border-radius: 4px;
            overflow: hidden;
        }
        .process-special-progress-fill {
            height: 100%;
            background: #2563eb;
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        /* 특별단계 완료 시에도 파란색 유지 */
        .process-special.completed {
            background: #dbeafe;
            border-color: #2563eb;
        }

        /* ☆ 특별단계 - process-major와 동일한 크기, 파란색 유지 */
        /* P0, S0 기본 상태: 회색 (0%) */
        .process-special-major {
            display: flex;
            flex-direction: column;
            gap: 1px;
            padding: 3px 10px;
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            transition: all 0.2s;
            cursor: pointer;
            margin-bottom: 3px;
        }
        /* P0, S0 기본 상태에서 진행률 텍스트/바 색상 */
        .process-special-major .process-percent {
            color: #6c757d;
        }
        .process-special-major .process-progress-fill {
            background: #dee2e6;
        }
        /* 특별단계 0%일 때도 회색 배경 */
        .process-special-major[data-progress="0"] {
            background: #f8f9fa !important;
            border: 1px solid #dee2e6 !important;
        }
        .process-special-major[data-progress="0"] .process-percent {
            color: #6c757d;
        }
        .process-special-major[data-progress="0"] .process-progress-fill {
            background: #dee2e6;
        }
        .process-special-major[data-progress="0"] .process-icon,
        .process-special-major[data-progress="0"] .process-arrow {
            color: #6c757d;
        }
        /* P0, S0 진행 중 (0% 초과, 100% 미만) 약간의 청색 배경 */
        .process-special-major[data-progress]:not([data-progress="0"]):not(.completed) {
            background: rgba(59, 130, 246, 0.1) !important;
            border: 1px solid rgba(59, 130, 246, 0.3) !important;
        }
        .process-special-major[data-progress]:not([data-progress="0"]):not(.completed) .process-percent {
            color: #3b82f6;
        }
        .process-special-major[data-progress]:not([data-progress="0"]):not(.completed) .process-progress-fill {
            background: #3b82f6;
        }
        /* P0, S0 완료 (100%): 좀 더 진한 청색 */
        .process-special-major.completed {
            background: rgba(59, 130, 246, 0.20) !important;
            border: 1px solid rgba(59, 130, 246, 0.5) !important;
        }
        .process-special-major.completed .process-percent {
            color: #3b82f6;
        }
        .process-special-major.completed .process-progress-fill {
            background: #3b82f6;
        }
        /* P0, S0 호버 시 파란색 (가장 높은 우선순위) */
        .process-special-major:hover {
            background: #2563eb !important;
            color: white !important;
        }
        .process-special-major:hover .process-icon,
        .process-special-major:hover .process-name,
        .process-special-major:hover .process-arrow,
        .process-special-major:hover .process-percent {
            color: white !important;
        }
        .process-special-major .process-header {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .process-special-major .process-icon {
            font-size: 11px;
            color: #212529;
            font-weight: 400;
            min-width: 18px;
            text-align: center;
        }
        .process-special-major .process-name {
            flex: 1;
            font-size: 12px;
            font-weight: 600;
            color: #212529;
        }
        .process-special-major .process-arrow {
            
            color: #2563eb;
            transition: transform 0.2s;
        }
        .process-special-major .process-progress-container {
            display: flex;
            align-items: center;
            gap: 8px;
            width: 100%;
        }
        .process-special-major .process-progress {
            flex: 1;
            height: 5px;
            background: rgba(37, 99, 235, 0.2);
            border-radius: 4px;
            overflow: hidden;
        }
        .process-special-major .process-progress-fill {
            height: 100%;
            background: #2563eb;
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        .process-special-major .process-percent {
            font-size: 12px;
            font-weight: 500;
            color: #2563eb;
            min-width: 35px;
            text-align: right;
        }

        /* ○ 준비단계: 초록색 계열 */
        .process-prep {
            display: flex;
            flex-direction: column;
            gap: 4px;
            padding: 6px 10px;
            background: rgba(16, 185, 129, 0.08);
            border: 1px solid rgba(16, 185, 129, 0.2);
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 6px;
            transition: all 0.2s;
        }
        /* P1, P2 예비단계 완료 스타일 */
        .process-prep.completed {
            background: rgba(16, 185, 129, 0.25); border: 1px solid rgba(16, 185, 129, 0.5);
        }
        .process-prep.completed .process-percent {
            color: var(--success);
        }
        .process-prep.completed .process-progress-fill {
            background: var(--success);
        }
        .process-prep:hover {
            background: var(--success);
            color: white;
        }
        .process-prep:hover .process-prep-icon,
        .process-prep:hover .process-prep-name,
        .process-prep:hover .process-arrow {
            color: white;
        }
        .process-prep-header {
            display: flex;
            align-items: center;
            gap: 8px;
            width: 100%;
        }
        .process-prep-icon {
            font-size: 14px;
            color: var(--success);
            font-weight: bold;
        }
        .process-prep-name {
            flex: 1;
            font-size: 12px;
            font-weight: 600;
            color: #212529;
        }

        /* 구분선: 네이비색 - 더 선명하게 */
        .process-divider {
            height: 0;
            border: none;
            border-top: 2px dashed #94a3b8;
            margin: 12px 0;
        }

        /* ========== Center Workspace ========== */
        .center-workspace {
            grid-column: 2;
            grid-row: 2;
            display: flex;
            flex-direction: column;
            background: var(--bg-light);
            overflow: hidden;
        }

        .workspace-top {
            flex: 1;
            min-height: 0;
            background: white;
            border-bottom: 2px solid var(--border-color);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .workspace-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 24px;
            background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
            border-bottom: 1px solid var(--border-color);
            position: relative;
        }

        /* Outbox 알림 박스 */
        .outbox-notification {
            position: absolute;
            top: 70px;
            right: 24px;
            background: white;
            border: 2px solid var(--success);
            border-radius: 8px;
            box-shadow: 0 4px 16px rgba(40, 167, 69, 0.2);
            z-index: 1000;
            animation: slideInDown 0.3s ease-out;
        }

        @keyframes slideInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .outbox-notification-content {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            min-width: 320px;
        }

        .outbox-notification-icon {
            font-size: 24px;
            flex-shrink: 0;
        }

        .outbox-notification-text {
            flex: 1;
        }

        .outbox-notification-title {
            font-size: 13px;
            font-weight: 700;
            color: var(--success);
            margin-bottom: 2px;
        }

        .outbox-notification-message {
            font-size: 13px;
            color: var(--neutral);
        }

        .outbox-notification-btn {
            padding: 6px 12px;
            background: var(--success);
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .outbox-notification-btn:hover {
            background: #218838;
            transform: scale(1.05);
        }

        .outbox-notification-close {
            background: none;
            border: none;
            font-size: 20px;
            color: var(--neutral);
            cursor: pointer;
            padding: 0 4px;
            line-height: 1;
            transition: color 0.2s;
        }

        .outbox-notification-close:hover {
            color: var(--primary-dark);
        }

        .workspace-title {
            font-size: 24px;
            font-weight: 700;
            color: #2C4A8A;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .workspace-actions {
            display: flex;
            gap: 12px;
        }

        .action-btn {
            padding: 8px 12px;
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid var(--primary);
            color: #333;
            border-radius: var(--border-radius);
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 11px;
            width: 85px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 3px;
            white-space: nowrap;
        }

        .action-btn:hover {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .action-btn.secondary {
            background: rgba(16, 185, 129, 0.1);
            color: #333;
            border: 1px solid var(--primary);
        }

        .action-btn.secondary:hover {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border-color: var(--primary);
        }

        .action-btn.success {
            background: rgba(16, 185, 129, 0.1);
            color: #333;
            border: 1px solid var(--primary);
        }

        .action-btn.success:hover {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border-color: var(--primary);
        }

        .viewer-btn-blue:hover {
            background: linear-gradient(135deg, #2C4A8A 0%, #1F3563 100%) !important;
            color: white !important;
            border-color: #2C4A8A !important;
        }

        .viewer-btn-green:hover {
            background: linear-gradient(135deg, #10B981 0%, #059669 100%) !important;
            color: white !important;
            border-color: #10B981 !important;
        }

        .workspace-content {
            display: flex;
            flex-direction: column;
            gap: 8px;
            padding: 12px;
            overflow-y: auto;
            flex: 1;
            max-height: 100%;
            font-family: 'Malgun Gothic', '맑은 고딕', 'Apple SD Gothic Neo', 'Noto Sans KR', sans-serif;
            font-size: 11px;
        }

        .translation-section {
            display: flex;
            flex-direction: column;
            gap: 4px;
            padding: 8px 12px;
            margin-bottom: 6px;
            background: #f8f9fa;
            border-radius: var(--border-radius);
            border-left: 3px solid var(--tertiary);
            flex-shrink: 0;
        }

        .translation-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 8px;
        }

        .translation-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--tertiary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .translation-toggle {
            font-size: 13px;
            color: var(--neutral);
            cursor: pointer;
            padding: 4px 8px;
            background: white;
            border-radius: 4px;
            transition: all 0.2s;
        }

        .translation-toggle:hover {
            background: var(--secondary);
            color: white;
        }

        .translation-preview {
            background: white;
            padding: 6px 8px;
            border-radius: 8px;
            font-size: 11px;
            line-height: 1.3;
            color: #495057;
            max-height: 70px;
            overflow-y: auto;
            display: none;
        }

        .translation-preview.expanded {
            max-height: 150px;
            overflow-y: auto;
        }

        .translation-preview pre {
            margin: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .translation-info {
            font-size: 13px;
            color: #868e96;
            padding: 6px 0;
            line-height: 1.3;
        }

        .text-editor {
            width: 100%;
            flex: 1;
            min-height: 300px;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            font-family: 'Malgun Gothic', '맑은 고딕', 'Apple SD Gothic Neo', 'Noto Sans KR', sans-serif;
            font-size: 13px;
            font-weight: 400;
            line-height: 1.6;
            resize: none;
            outline: none;
            transition: border-color 0.2s;
        }

        .text-editor:focus {
            border-color: #495057;
        }

        .text-editor::placeholder {
            color: #adb5bd;
        }

        .workspace-bottom {
            flex: none;
            background: white;
            padding-bottom: 24px;
        }

        .grid-viewer-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 24px;
            background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
            border-bottom: 1px solid var(--border-color);
        }

        .grid-viewer-title {
            /* H2 스타일 적용 */
            font-size: 24px;
            font-weight: 700;
            color: #2C4A8A;
        }

        .view-toggle {
            display: flex;
            gap: 8px;
        }

        .view-btn {
            padding: 6px 14px;
            border: 1px solid var(--border-color);
            background: white;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 11px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .view-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .view-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .grid-content {
            padding: 15px;
        }

        .stats-bar {
            display: flex;
            gap: 12px;
            padding: 12px;
            background: #f8f9fa;
            border-radius: var(--border-radius);
            margin-bottom: 13px;  /* 1단계: Section spacing */
        }

        .stat-item {
            flex: 1;
            text-align: center;
            padding: 10px;
            background: white;
            border-radius: 8px;
            box-shadow: var(--shadow-sm);
        }

        .stat-label {
            display: block;
            font-size: 12px;
            color: var(--neutral);
            margin-bottom: 4px;
        }

        .stat-value {
            display: block;
            font-size: 14px;
            font-weight: 600;
        }

        .stat-value.completed {
            color: var(--success);
        }

        .stat-value.in-progress {
            color: var(--warning);
        }

        .stat-value.pending {
            color: var(--neutral);
        }

        .grid-area {
            margin-bottom: 13px;  /* 1단계: Section spacing */
        }

        .area-header {
            background: var(--success);
            color: white;
            padding: 10px 14px;
            border-radius: var(--border-radius);
            font-weight: 600;
            margin-bottom: 10px;  /* 2단계: Group spacing */
            font-size: 13px;
        }

        .task-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 12px;
        }

        .task-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 14px;
            box-shadow: var(--shadow-sm);
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
            border-left: 4px solid;
        }

        .task-card.completed {
            border-left-color: var(--success);
        }

        .task-card.in-progress {
            border-left-color: var(--warning);
        }

        .task-card.pending {
            border-left-color: var(--neutral);
        }

        .task-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        .task-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .task-id {
            font-weight: 700;
            color: var(--secondary);
            font-size: 12px;
        }

        .status-badge {
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }

        .status-badge.completed {
            background: #d4edda;
            color: #155724;
        }

        .status-badge.in-progress {
            background: #fff3cd;
            color: #856404;
        }

        .status-badge.pending {
            background: #e2e3e5;
            color: #383d41;
        }

        .task-title {
            font-weight: 600;
            margin-bottom: 6px;  /* 3단계: Item spacing */
            color: #212529;
            font-size: 11px;
            word-wrap: break-word;
            overflow-wrap: break-word;
            line-height: 1.3;
        }

        .task-progress {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .progress-bar {
            flex: 1;
            height: 5px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--success);
            transition: width 0.3s ease;
        }

        .progress-text {
            font-size: 12px;
            font-weight: 600;
            color: var(--neutral);
        }

        /* ========== Right Sidebar ========== */
        .right-sidebar {
            grid-column: 3;
            grid-row: 2;
            overflow-y: auto;
            background: var(--bg-white);
            border-left: 1px solid var(--border-color);
            padding: 14px 15px;
        }

        .sidebar-section {
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-color);
        }

        .sidebar-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        /* 좌측 사이드바 섹션 간격 */
        .left-sidebar-section {
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid var(--border-color);
        }

        .left-sidebar-section:first-child {
            margin-top: 0;
            padding-top: 0;
            border-top: none;
        }

        .sidebar-section h3 {
            /* H3 스타일 적용 */
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 8px;
            color: #495057;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .knowledge-item {
            margin-bottom: 4px;
        }

        .knowledge-major {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 8px;
            background: rgba(245, 158, 11, 0.08); border: 1px solid rgba(245, 158, 11, 0.2);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .knowledge-major:hover {
            background: var(--secondary); border-color: var(--secondary);
            color: white;
        }

        .knowledge-icon {
            font-size: 14px;
        }

        .knowledge-name {
            flex: 1;
            /* H5 스타일 적용 (사용자 요청: 2단계 크기 축소) */
            font-size: 12px;
            font-weight: 600;
            color: #212529;
        }

        .knowledge-arrow {
            
            transition: transform 0.3s;
        }

        .knowledge-arrow.expanded {
            transform: rotate(90deg);
        }

        .knowledge-medium-list {
            margin-left: 12px;
            margin-top: 4px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .knowledge-medium-list.expanded {
            max-height: 400px;
        }

        .knowledge-medium {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 4px 8px;
            /* H5 스타일 적용 */
            font-size: 11px;
            font-weight: 700;
            color: #495057;
            cursor: pointer;
            border-radius: 4px;
            margin-bottom: 2px;
            transition: all 0.2s;
        }

        .knowledge-medium:hover {
            background: rgba(245, 158, 11, 0.15);
            color: #333;
        }

        .knowledge-medium-content {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .knowledge-medium-bullet {
            
            color: var(--primary);
        }

        .knowledge-medium-arrow {
            
            transition: transform 0.3s;
            opacity: 0.5;
        }

        .knowledge-medium-arrow.expanded {
            transform: rotate(90deg);
        }

        .knowledge-small-list {
            margin-left: 12px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .knowledge-small-list.expanded {
            max-height: 300px;
        }

        .knowledge-small {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 4px 8px;
            /* H6 스타일 적용 */
            font-size: 11px;
            font-weight: 500;
            color: #495057;
            cursor: pointer;
            border-radius: 4px;
            margin-bottom: 1px;
            transition: all 0.2s;
        }

        .knowledge-small:hover {
            background: rgba(245, 158, 11, 0.15);
            color: #333;
        }

        .knowledge-small-bullet {
            
            color: var(--primary);
        }

        /* ========== Quick Links Section ========== */
        .quick-links {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .quick-link-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 12px;
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            text-decoration: none;
            color: #495057;
            font-size: 11px;
            font-weight: 500;
            transition: all 0.2s;
            cursor: pointer;
        }

        .quick-link-btn:hover {
            background: var(--bg-light);
            border-color: var(--success);
            transform: translateX(2px);
            box-shadow: var(--shadow-sm);
        }

        .quick-link-btn.vscode:hover {
            border-color: #007ACC;
            background: rgba(0, 122, 204, 0.05);
        }

        .quick-link-btn.github:hover {
            border-color: #24292e;
            background: rgba(36, 41, 46, 0.05);
        }

        .quick-link-btn.vercel:hover {
            border-color: #000;
            background: rgba(0, 0, 0, 0.05);
        }

        .quick-link-btn.supabase:hover {
            border-color: #3ECF8E;
            background: rgba(62, 207, 142, 0.05);
        }

        .quick-link-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* AI Selector 버튼 스타일 */
        .ai-selector-btn {
            flex: 1;
            min-width: 60px;
            padding: 5px 8px;
            border: 1px solid #999;
            border-radius: var(--border-radius);
            background: rgba(245, 158, 11, 0.08);
            color: #333;
            font-size: 11px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .ai-selector-btn:hover {
            border-color: var(--secondary);
            background: rgba(245, 158, 11, 0.05);
            transform: translateY(-1px);
        }

        .ai-selector-btn.active {
            border-color: var(--secondary);
            background: var(--secondary);
            color: white;
            box-shadow: 0 2px 8px rgba(245, 158, 11, 0.3);
        }

        /* 외부 연동 설정 Guide 스타일 */
        .service-guide-item {
            margin-bottom: 6px;
            border: 1px solid #E5E7EB;
            border-radius: 8px;
            overflow: hidden;
            transition: all 0.2s;
            cursor: pointer;
        }
        .service-guide-item:hover {
            border-color: #F59E0B;
            background: #FFFBEB;
        }
        .service-guide-header {
            padding: 10px 12px;
            background: #FAFAFA;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .service-guide-icon {
            font-size: 16px;
        }
        .service-guide-title {
            flex: 1;
            font-size: 12px;
            font-weight: 600;
            color: #374151;
        }
        .service-guide-arrow {
            
            color: #F59E0B;
            transition: transform 0.2s;
        }

        /* 서비스 가이드 마크다운 콘텐츠 스타일 */
        .service-guide-content {
            font-family: 'Malgun Gothic', '맑은 고딕', 'Apple SD Gothic Neo', sans-serif;
            font-size: 14px;
            line-height: 1.7;
            color: #374151;
        }
        .service-guide-content h1 {
            font-size: 22px;
            font-weight: 700;
            color: #1F2937;
            margin: 0 0 16px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #F59E0B;
        }
        .service-guide-content h2 {
            font-size: 18px;
            font-weight: 700;
            color: #374151;
            margin: 28px 0 12px 0;
            padding-bottom: 6px;
            border-bottom: 1px solid #E5E7EB;
        }
        .service-guide-content h3 {
            font-size: 15px;
            font-weight: 600;
            color: #4B5563;
            margin: 20px 0 10px 0;
        }
        .service-guide-content h4 {
            font-size: 14px;
            font-weight: 600;
            color: #6B7280;
            margin: 16px 0 8px 0;
        }
        .service-guide-content p {
            margin: 0 0 12px 0;
        }
        .service-guide-content ul, .service-guide-content ol {
            margin: 0 0 12px 0;
            padding-left: 24px;
        }
        .service-guide-content li {
            margin-bottom: 6px;
        }
        .service-guide-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 12px 0;
            font-size: 13px;
        }
        .service-guide-content th {
            background: #F3F4F6;
            font-weight: 600;
            text-align: left;
            padding: 10px 12px;
            border: 1px solid #E5E7EB;
        }
        .service-guide-content td {
            padding: 10px 12px;
            border: 1px solid #E5E7EB;
            vertical-align: top;
        }
        .service-guide-content code {
            background: #F3F4F6;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 13px;
            color: #D97706;
        }
        .service-guide-content pre {
            background: #4B5563;
            color: #F9FAFB;
            padding: 16px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 12px 0;
        }
        .service-guide-content pre code {
            background: transparent;
            color: inherit;
            padding: 0;
            font-size: 13px;
            line-height: 1.5;
        }
        .service-guide-content blockquote {
            border-left: 4px solid #F59E0B;
            background: #FFFBEB;
            margin: 12px 0;
            padding: 12px 16px;
            color: #92400E;
            font-style: normal;
        }
        .service-guide-content hr {
            border: none;
            border-top: 1px solid #E5E7EB;
            margin: 24px 0;
        }
        .service-guide-content a {
            color: #2563EB;
            text-decoration: none;
        }
        .service-guide-content a:hover {
            text-decoration: underline;
        }
        .service-guide-content strong {
            font-weight: 600;
            color: #1F2937;
        }

        .quick-link-icon img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .quick-link-name {
            flex: 1;
            font-weight: 600;
        }

        .ai-input-area {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .ai-input-area textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            font-family: inherit;
            font-size: 11px;
            resize: vertical;
            line-height: 1.5;
            color: #333;
        }

        .ai-input-area textarea::placeholder {
            color: #999;
            font-size: 12px;
        }

        .ai-input-area button {
            padding: 10px;
            background: var(--secondary);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .ai-input-area button:hover {
            background: var(--secondary-dark);
        }

        .credit-info {
            font-size: 12px;
            color: var(--neutral);
            text-align: center;
        }

        .credit-info span {
            font-weight: 700;
            color: var(--primary);
        }

        .support-input-area {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .support-input-area textarea {
            font-size: 12px;
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            font-family: inherit;
            line-height: 1.5;
            color: #333;
        }

        .support-input-area textarea::placeholder {
            font-size: 10px;
            color: #999;

        }

        .support-placeholder {
            font-size: 12px;
            color: var(--neutral);
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 8px;
            line-height: 1.5;
        }

        .support-input-area button {
            padding: 10px;
            background: var(--secondary);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .support-input-area button:hover {
            background: var(--secondary-dark);
        }

        /* Support Response Area */
        .support-response {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            margin-top: 11px;
        }

        .support-response.show {
            max-height: 400px;
            overflow-y: auto;
        }

        .response-header {
            background: var(--success);
            color: white;
            padding: 8px 12px;
            border-radius: 8px 6px 0 0;
            font-size: 11px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .response-content {
            background: #f8f9fa;
            padding: 12px;
            border: 1px solid #dee2e6;
            border-top: none;
            border-radius: 0 0 6px 6px;
            font-size: 13px;
            line-height: 1.6;
            color: #212529;
        }

        .response-meta {
            font-size: 12px;
            color: #495057;
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid #dee2e6;
        }

        /* ========== Footer ========== */
        .footer {
            width: 100%;
            background: linear-gradient(135deg, var(--tertiary) 0%, var(--tertiary-dark) 100%);
            color: white;
            position: relative;
        }

        .footer-inner {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 44px 32px 44px 32px;
            font-size: 11px;
            gap: 9px;
        }

        .footer-links {
            display: flex;
            align-items: center;
            gap: 32px;
        }

        .footer-link {
            color: rgba(255, 255, 255, 0.95);
            text-decoration: none;
            transition: color 0.2s;
            font-size: 14px;
            font-weight: 600;
        }

        .footer-link:hover {
            color: white;
        }

        .footer-copyright {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 14px;
            opacity: 0.7;
        }

        .admin-link {
            position: absolute;
            right: 32px;
            bottom: 12px;
            opacity: 0.15;
            font-size: 11px;
            transition: opacity 0.3s;
            color: rgba(255, 255, 255, 0.95);
            text-decoration: none;
        }

        .admin-link:hover {
            opacity: 0.6;
        }

        /* ========== Scrollbar ========== */
        ::-webkit-scrollbar {
            width: 12px;
            height: 12px;
        }

        ::-webkit-scrollbar-track {
            background: #e9ecef;
        }

        ::-webkit-scrollbar-thumb {
            background: #adb5bd;
            border-radius: 8px;
            border: 2px solid #e9ecef;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #868e96;
        }

        /* Service Intro Modal - ensure scrollable */
        #serviceIntroModal {
            overflow-y: auto !important;
        }

        /* Service Intro Modal Scrollbar - enlarged for better usability */
        #serviceIntroModal::-webkit-scrollbar,
        #serviceIntroModal .grid-fullscreen-content::-webkit-scrollbar {
            width: 24px;
        }

        #serviceIntroModal::-webkit-scrollbar-track,
        #serviceIntroModal .grid-fullscreen-content::-webkit-scrollbar-track {
            background: #dee2e6;
            border-radius: 12px;
        }

        #serviceIntroModal::-webkit-scrollbar-thumb,
        #serviceIntroModal .grid-fullscreen-content::-webkit-scrollbar-thumb {
            min-height: 200px;
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
            border-radius: 12px;
            border: 4px solid #dee2e6;
            box-shadow: inset 0 0 5px rgba(0,0,0,0.1);
        }

        #serviceIntroModal::-webkit-scrollbar-thumb:hover,
        #serviceIntroModal .grid-fullscreen-content::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #495057 0%, #343a40 100%);
        }

        /* Status Indicator */
        .server-status {
            position: fixed;
            bottom: 20px;
            right: 300px;
            padding: 10px 16px;
            background: var(--secondary);
            color: white;
            border-radius: 8px;
            font-size: 11px;
            z-index: 1000;
            display: none;
        }

        .server-status.show {
            display: block;
        }

        .server-status.success {
            background: var(--success);
        }

        .server-status.error {
            background: var(--danger);
        }

        /* Project Grid Fullscreen Modal */
        .grid-fullscreen-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #F3F4F6;
            z-index: 9999;
            padding: 20px;
        }

        .grid-fullscreen-modal.active {
            display: flex;
            flex-direction: column;
        }

        .grid-fullscreen-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 24px;
            background: linear-gradient(135deg, var(--tertiary) 0%, var(--tertiary-dark) 100%);
            border-radius: 8px 8px 0 0;
            margin-bottom: 13px;  /* 1단계: Section spacing */
        }

        .grid-fullscreen-title {
            font-size: 24px;
            font-weight: 700;
            color: white;
        }

        .grid-fullscreen-close {
            padding: 10px 20px;
            background: #495057;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.2s;
        }

        .grid-fullscreen-close:hover {
            background: #5a6268;
            transform: scale(1.05);
        }

        .grid-fullscreen-content {
            flex: 1;
            background: white;
            border-radius: 8px;
            overflow-y: auto;
            padding: 24px;
        }

        /* Popup Modal (Centered) */
        .popup-modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 9999;
            justify-content: center;
            align-items: center;
        }
        .popup-modal-overlay.active {
            display: flex;
        }
        .popup-modal-box {
            background: white;
            border-radius: 16px;
            box-shadow: var(--shadow-lg);
            width: 600px;
            max-width: 95vw;
            animation: popupIn 0.25s ease;
        }
        @keyframes popupIn {
            from { opacity: 0; transform: scale(0.95) translateY(-10px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }
        .popup-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 18px 24px;
            background: linear-gradient(135deg, var(--tertiary) 0%, var(--tertiary-dark) 100%);
            border-radius: 16px 16px 0 0;
            color: white;
        }
        .popup-modal-header h3 {
            font-size: 18px;
            font-weight: 700;
            margin: 0;
        }
        .popup-modal-close {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 8px;
            font-size: 20px;
            cursor: pointer;
        }
        .popup-modal-close:hover {
            background: rgba(255,255,255,0.3);
        }
        .popup-modal-body {
            padding: 28px;
        }

        .grid-viewer-title-group {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            width: 100%;
        }

        .expand-btn-inline {
            padding: 8px 12px;
            border: 1px solid var(--primary);
            background: rgba(16, 185, 129, 0.1);
            color: #333;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 11px;
            font-weight: 500;
            transition: all 0.2s;
            width: 85px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 3px;
            white-space: nowrap;
        }

        .expand-btn-inline:hover {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .manual-btn-inline {
            padding: 8px 12px;
            border: 1px solid var(--primary);
            background: rgba(16, 185, 129, 0.1);
            color: #333;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 11px;
            font-weight: 500;
            transition: all 0.2s;
            width: 85px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 3px;
            white-space: nowrap;
        }

        .manual-btn-inline:hover {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        /* 공지사항 스타일 */
        .notice-item {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            display: flex;
            REMOVED
            gap: 6px;
            padding: 4px 8px;
            font-size: 11px;
            font-weight: 700;
            color: #495057;
            cursor: pointer;
            border-radius: 4px;
            margin-bottom: 2px;
            transition: all 0.2s;
            background: rgba(245, 158, 11, 0.08);
        }

        .notice-item:hover {
            background: rgba(245, 158, 11, 0.15) !important;
            color: #333;
        }

        .notice-bullet {
            
            color: #D97706;
        }

        .notice-title {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
            line-height: 1.3;
            flex: 1;
        }

        .notice-date {
            font-size: 12px; /* CHANGED from 10px */
            
            color: #868e96;
            font-weight: 400;
            white-space: nowrap;
            margin-left: 4px;
        }


        /* ========== 모바일 반응형 CSS (인라인) ========== */

        /* 모바일 메뉴 버튼 - 좌측 상단 (초록색) */
        .mobile-menu-btn {
            display: none;
            width: 44px;
            height: 44px;
            background: var(--primary);
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 20px;
            cursor: pointer;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.4);
        }

        .mobile-menu-btn:hover {
            background: var(--primary-dark);
            transform: scale(1.05);
        }

        /* 사이드바 닫기 버튼 */
        .sidebar-close-btn {
            display: none;
            position: absolute;
            top: 12px;
            right: 12px;
            width: 36px;
            height: 36px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 50%;
            color: var(--text-secondary);
            font-size: 18px;
            cursor: pointer;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }

        .sidebar-close-btn:hover {
            background: var(--danger);
            color: white;
        }

        /* FAB 컨테이너 */
        .fab-container {
            display: none;
            position: fixed !important;
            bottom: 20px;
            right: 20px;
            flex-direction: column;
            gap: 12px;
            z-index: 1000;
        }

        .fab-btn {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            box-shadow: var(--shadow-md);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s;
        }

        .fab-btn:hover { transform: scale(1.1); }
        .fab-btn.fab-menu { background: var(--primary); display: none; }
        .fab-btn.fab-info { background: var(--secondary); box-shadow: 0 4px 12px rgba(245, 158, 11, 0.4); }

        /* Large Desktop: 1400px+ */
        @media (min-width: 1400px) {
            .layout-container { grid-template-columns: 320px 1fr 320px; }
        }

        /* Desktop: 1024-1399px */
        @media (max-width: 1399px) and (min-width: 1024px) {
            .layout-container { grid-template-columns: 280px 1fr 280px; }
            .header-tagline { font-size: 13px; }
            .logo h1 { font-size: 22px; }
        }

        /* Tablet Landscape: 769-1023px */
        @media (max-width: 1023px) and (min-width: 769px) {
            .layout-container { grid-template-columns: 220px 1fr; }
            .header-inner { padding: 0 16px; }
            .header-tagline { font-size: 12px; }
            .logo h1 { font-size: 20px; }

            .right-sidebar {
                position: fixed !important;
                right: -320px !important;
                top: 0;
                bottom: 0;
                width: 300px;
                z-index: 1001;
                background: #f8f9fa !important;
                box-shadow: -4px 0 20px rgba(0, 0, 0, 0.15);
                transition: right 0.3s ease;
                overflow-y: auto;
                padding-top: 20px;
            }

            .right-sidebar.open { right: 0 !important; }
            .right-sidebar .sidebar-close-btn { display: flex; }
            .fab-container { display: flex; }
            .fab-container .fab-menu { display: none; }

            .left-sidebar { padding: 12px 10px; }
            .workspace-header { padding: 12px 16px; }
            .workspace-title { font-size: 18px; }
            .grid-viewer-title { font-size: 18px; }
            .action-btn { padding: 8px 12px; font-size: 12px; min-height: 44px; }
        }

        /* Tablet Portrait: 768px 이하 */
        @media (max-width: 768px) {
            .layout-container { display: grid !important; grid-template-columns: 1fr !important; grid-template-rows: 1fr !important; }
            .mobile-menu-btn { display: flex; }
            .header-inner { height: 60px; padding: 0 12px; }
            .header-center { display: none; }
            .header-right { display: none; }
            .logo h1 { font-size: 20px; }

            .left-sidebar {
                position: fixed !important;
                left: -320px !important;
                top: 0;
                bottom: 0;
                width: 300px;
                z-index: 1001;
                background: #f8f9fa !important;
                box-shadow: 4px 0 20px rgba(0, 0, 0, 0.15);
                transition: left 0.3s ease;
                overflow-y: auto;
                padding-top: 60px;
                -webkit-overflow-scrolling: touch;
                grid-column: unset !important;
                grid-row: unset !important;
            }

            .left-sidebar.open { left: 0 !important; }
            .left-sidebar .sidebar-close-btn { display: flex; top: 16px; }

            .right-sidebar {
                position: fixed !important;
                right: -320px !important;
                top: 0;
                bottom: 0;
                width: 300px;
                z-index: 1001;
                background: #f8f9fa !important;
                box-shadow: -4px 0 20px rgba(0, 0, 0, 0.15);
                transition: right 0.3s ease;
                overflow-y: auto;
                padding-top: 60px;
                -webkit-overflow-scrolling: touch;
                grid-column: unset !important;
                grid-row: unset !important;
            }

            .right-sidebar.open { right: 0 !important; }
            .right-sidebar .sidebar-close-btn { display: flex; top: 16px; }
            .fab-container { display: flex; }

            .center-workspace { grid-column: 1 !important; grid-row: 1 !important; min-height: calc(100vh - 60px - 50px); display: flex !important; width: 100% !important; overflow-y: auto !important; }
            .workspace-top { height: auto; min-height: 30vh; max-height: 50vh; }
            .workspace-header { flex-direction: column; gap: 12px; align-items: stretch; padding: 12px; }
            .workspace-actions { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; width: 100%; }
            .action-btn { min-height: 44px; padding: 10px 8px; font-size: 12px; justify-content: center; width: 100%; }

            .footer-inner { flex-direction: column; gap: 12px; padding: 12px 16px; }
            .footer-left, .footer-right { width: 100%; justify-content: center; flex-wrap: wrap; }
            .footer-btn { min-height: 44px; }
            .footer-links { flex-direction: column; gap: 8px; align-items: center; }
            .footer-link { min-height: 44px; display: flex; align-items: center; }

            /* 푸터 메타데이터 모바일 스타일 */
            .footer-business {
                text-align: center;
            }
            .footer-business span {
                display: block;
                line-height: 1.8;
            }
        }
        /* 실행 상태 카드 - 모바일에서 숨김 (PC 전용) */
        @media (max-width: 768px) {
            .stats-bar {
                display: none !important;
            }
            /* Project SAL Grid - 타이틀만 보이게 */
            .workspace-top {
                flex: 1 !important;
                min-height: 60vh !important;
                max-height: none !important;
            }
            .workspace-bottom {
                flex: none !important;
                height: auto !important;
                min-height: auto !important;
            }
            .grid-content {
                display: flex !important;
                flex-direction: column;
                gap: 8px;
            }
            /* 안내문 팝업 - 모바일 대응 */
            #guidePopup {
                width: calc(100vw - 20px) !important;
                max-width: none !important;
                left: 10px !important;
                right: 10px !important;
                top: 70px !important;
            }
        }

        @media (max-width: 480px) {
            .footer-business {
                font-size: 11px !important;
            }
        }
            .text-editor { min-height: 200px; }
            /* English Translation - 모바일에서 숨김 (PC Order Sheet 작성용) */
            .translation-section { display: none !important; }
        }



        /* 태그라인 - 기본 숨김, 모바일에서만 표시 */
        .header-tagline-mobile {
            display: none;
        }

        /* 모바일 헤더 개선 */
        .mobile-login-btn {
            display: none;
            width: 44px;
            height: 44px;
            background: rgba(255, 255, 255, 0.15);
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 18px;
            cursor: pointer;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            transition: all 0.2s;
            position: relative;
        }

        .mobile-login-btn:hover {
            background: rgba(255, 255, 255, 0.25);
        }

        /* 모바일 로그인 상태 표시 */
        .mobile-login-btn.logged-in {
            background: rgba(16, 185, 129, 0.4);
            border: 2px solid #10B981;
        }

        .mobile-user-badge {
            position: absolute;
            top: -6px;
            right: -8px;
            background: #10B981;
            color: white;
            padding: 2px 6px;
            border-radius: 8px;
            font-size: 9px;
            font-weight: 600;
            white-space: nowrap;
            z-index: 10;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            max-width: 60px;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .mobile-user-section {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            display: none;
        }

        @media (max-width: 768px) {
            .mobile-user-section {
                display: block;
            }

            .mobile-login-btn {
                display: flex;
            }

            .header-inner {
                flex-wrap: wrap;
                height: auto !important;
                min-height: 60px;
                padding-top: 8px !important;
                padding-bottom: 8px !important;
                position: relative;
            }

            .logo {
                position: absolute;
                left: 50%;
                transform: translateX(-50%);
                flex: none;
            }

            /* 모바일 태그라인 */
            .header-tagline-mobile {
                display: block !important;
                width: 100%;
                text-align: center;
                font-size: 11px;
                color: rgba(255, 255, 255, 0.8);
                margin-top: 4px;
                order: 3;
            }
        }

        @media (max-width: 480px) {
            .mobile-login-btn {
                width: 40px;
                height: 40px;
                font-size: 16px;
                right: 10px;
            }

            .header-tagline-mobile {
                
            }
        }

        @media (max-width: 480px) {
            .header-inner { padding: 0 10px; height: 56px; }
            .logo { gap: 8px; }
            .logo h1 { font-size: 18px; }
            .rice-grain { width: 8px; height: 14px; }
            .mobile-menu-btn { width: 40px; height: 40px; font-size: 18px; }

            .left-sidebar, .right-sidebar { width: 280px; }
            .left-sidebar { left: -290px; }
            .right-sidebar { right: -290px; }

            .sidebar-title, .sidebar-section h3 { font-size: 13px; }
            .process-major, .process-prep, .process-special { padding: 10px 12px; min-height: 44px; }
            .process-name, .process-prep-name, .process-special-name { font-size: 12px; }

            .workspace-header { padding: 10px; }
            .workspace-title { font-size: 16px; }
            .grid-viewer-title { font-size: 16px; }
            .workspace-actions { grid-template-columns: repeat(2, 1fr); gap: 6px; }
            .action-btn { padding: 8px 6px; font-size: 11px; min-height: 44px; }
            .workspace-content { padding: 8px; }
            .text-editor { min-height: 150px; padding: 10px; font-size: 13px; }

            /* English Translation - 모바일에서 숨김 */
            .translation-section { display: none !important; }

            .footer-inner { padding: 10px; }
            .footer-btn { padding: 10px 12px; font-size: 12px; min-height: 44px; }

            .knowledge-major, .knowledge-medium, .knowledge-small { padding: 10px 12px; min-height: 44px; }
            .knowledge-name { font-size: 12px; }
            .quick-link-btn { padding: 12px; min-height: 44px; }
            .project-list-item { padding: 10px 12px; min-height: 44px; }
            .project-name { font-size: 12px; }
            .project-status {  padding: 3px 6px; }

            .fab-btn { width: 52px; height: 52px; font-size: 18px; }

            .outbox-notification { top: auto; right: 10px; left: 10px; bottom: 80px; }
            .outbox-notification-content { min-width: auto; padding: 12px; }
            .outbox-notification-icon { font-size: 20px; }
            .outbox-notification-title { font-size: 13px; }
            .outbox-notification-message { font-size: 12px; }
        }

        /* Touch-friendly */
        @media (hover: none) and (pointer: coarse) {
            .process-major, .process-small, .process-tiny, .process-prep, .process-special,
            .knowledge-major, .knowledge-medium, .knowledge-small,
            .quick-link-btn, .project-menu-item, .project-list-item {
                min-height: 44px;
                display: flex;
                align-items: center;
            }
            .action-btn, .header-btn, .footer-btn, .mobile-menu-btn, .sidebar-close-btn, .fab-btn { min-height: 44px; }
            .left-sidebar, .right-sidebar, .workspace-content { -webkit-overflow-scrolling: touch; }
        }

        /* 텍스트 오버플로우 - 모바일 */
        .process-name, .process-prep-name, .process-special-name,
        .knowledge-name, .project-name, .notice-title {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .workspace-title {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            max-width: 100%;
        }

        /* Print styles */
        @media print {
            .header, .footer, .left-sidebar, .right-sidebar, .fab-container, .sidebar-overlay, .mobile-menu-btn { display: none !important; }
            .layout-container { display: block; }
            .center-workspace { width: 100%; }
        }


    </style>

    <!-- Supabase JS Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- DOMPurify -->
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"></script>

    <!-- Marked.js (Markdown to HTML) -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>

<body>
    <!-- 모바일 사이드바 오버레이 -->
    <div class="sidebar-overlay" onclick="closeAllSidebars()"></div>

    <!-- 비밀번호 재설정/이메일 인증 리다이렉트 처리 -->
    <script>
        (function() {
            const hash = window.location.hash;
            if (hash && hash.includes('type=recovery')) {
                // 비밀번호 재설정 페이지로 리다이렉트
                window.location.href = '/pages/auth/reset-password.html' + hash;
            } else if (hash && hash.includes('type=signup')) {
                // 회원가입 완료 - 로그인 페이지로 리다이렉트
                window.location.href = '/pages/auth/login.html' + hash;
            }
        })();
    </script>
    <div class="page-wrapper">
        <!-- Header -->
        <header class="header">
            <div class="header-inner">
                <!-- 모바일 메뉴 버튼 -->
                <button class="mobile-menu-btn" onclick="toggleLeftSidebar()">≡</button>
                <!-- 모바일 로그인 아이콘 -->
                <div class="mobile-user-section">
                    <a href="/pages/auth/login.html" class="mobile-login-btn" id="mobileLoginBtn">👤</a>
                    <span class="mobile-user-badge" id="mobileUserBadge" style="display:none;"></span>
                </div>
                <div class="logo">
                    <span class="rice-logo">
                        <span class="rice-grain"></span>
                        <span class="rice-grain"></span>
                        <span class="rice-grain"></span>
                    </span>
                    <h1>SSAL Works</h1>
                </div>
                <div class="header-center">
                    <div class="header-tagline">Claude Code를 활용한 3차원 SAL Grid 기반 풀스택
      웹사이트 개발 플랫폼</div>
                </div>
                <div class="header-right">
                    <!-- 로그인 전 -->
                    <div id="headerGuestBtns" style="display: flex; gap: 12px;">
                        <a href="/pages/auth/login.html" class="header-btn" style="text-decoration: none;">로그인</a>
                        <a href="/pages/auth/signup.html" class="header-btn" style="text-decoration: none;">회원가입</a>
                    </div>
                    <!-- 로그인 후 -->
                    <div id="headerUserBtns" style="display: none; align-items: center; gap: 12px;">
                        <span id="userNickname" style="font-weight: 600; color: var(--primary);"></span>
                        <!-- 알림 벨 -->
                        <div class="notification-wrapper" style="position: relative;">
                            <button id="notificationBell" class="header-btn notification-bell" onclick="toggleNotificationDropdown()" style="position: relative; padding: 8px 12px;">
                                🔔
                                <span id="notificationBadge" class="notification-badge" style="display: none; position: absolute; top: 2px; right: 2px; background: #EF4444; color: white; font-size: 10px; font-weight: 700; min-width: 16px; height: 16px; border-radius: 50%; display: none; align-items: center; justify-content: center;">0</span>
                            </button>
                            <!-- 알림 드롭다운 -->
                            <div id="notificationDropdown" class="notification-dropdown" style="display: none; position: absolute; top: 100%; right: 0; width: 320px; max-height: 400px; background: white; border-radius: 12px; box-shadow: var(--shadow-lg); z-index: 1000; margin-top: 8px; overflow: hidden;">
                                <div style="padding: 16px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center;">
                                    <span style="font-weight: 700; color: #333;">🔔 알림</span>
                                    <button onclick="markAllNotificationsRead()" style="background: none; border: none; color: #6c757d; font-size: 12px; cursor: pointer;">모두 읽음</button>
                                </div>
                                <div id="notificationList" style="max-height: 320px; overflow-y: auto;">
                                    <div style="padding: 40px; text-align: center; color: #6c757d;">
                                        알림이 없습니다.
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button id="adminModeBtn" class="header-btn" onclick="showAdminPasswordModal()" style="background: #6c757d; color: white;">관리자 모드 전환</button>
                        <button class="header-btn" onclick="logoutFromMain()">로그아웃</button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content Area -->
        <div class="layout-container">
            <!-- Left Sidebar: Process -->
        <aside class="left-sidebar">
            <!-- 사이드바 닫기 버튼 (모바일) -->
            <button class="sidebar-close-btn" onclick="closeLeftSidebar()">✕</button>
            <!-- My Page 섹션 (최상단) -->
            <div class="left-sidebar-section" id="mypageMenuSection">
                <h2 class="sidebar-title" style="margin-bottom: 8px; display: flex; justify-content: space-between; align-items: center;">
                    👤 My Page
                    <span id="mypageMoreBtn" onclick="toggleMypageMenu()" style="cursor: pointer; font-size: 11px; font-weight: 400; color: #6c757d; transition: color 0.2s;" onmouseover="this.style.color='var(--primary)'" onmouseout="this.style.color='#6c757d'">더보기 →</span>
                </h2>
                <!-- 기본 노출: 내 프로필, 내 프로젝트, 자료 다운로드 -->
                <div style="display: flex; flex-direction: column; gap: 4px;">
                    <a href="pages/mypage/profile.html" style="display: block; padding: 6px 8px; color: #495057; text-decoration: none; font-size: 12px; font-weight: 700; border-radius: 4px; background: rgba(16, 185, 129, 0.08); transition: all 0.2s;" onmouseover="this.style.background='rgba(16, 185, 129, 0.15)'" onmouseout="this.style.background='rgba(16, 185, 129, 0.08)'">
                        내 프로필
                    </a>
                    <a href="pages/mypage/index.html#projects" style="display: block; padding: 6px 8px; color: #495057; text-decoration: none; font-size: 12px; font-weight: 700; border-radius: 4px; background: rgba(16, 185, 129, 0.08); transition: all 0.2s;" onmouseover="this.style.background='rgba(16, 185, 129, 0.15)'" onmouseout="this.style.background='rgba(16, 185, 129, 0.08)'">
                        내 프로젝트
                    </a>
                    <a href="pages/mypage/index.html#resources" style="display: block; padding: 6px 8px; color: #495057; text-decoration: none; font-size: 12px; font-weight: 700; border-radius: 4px; background: rgba(16, 185, 129, 0.08); transition: all 0.2s;" onmouseover="this.style.background='rgba(16, 185, 129, 0.15)'" onmouseout="this.style.background='rgba(16, 185, 129, 0.08)'">
                        자료 다운로드
                    </a>
                </div>
                <!-- 펼쳐지는 추가 메뉴들 -->
                <div id="mypageLinks" style="display: none; margin-top: 4px;">
                    <div style="display: flex; flex-direction: column; gap: 4px;">
                        <a href="pages/mypage/subscription.html" style="display: block; padding: 6px 8px; color: #495057; text-decoration: none; font-size: 12px; font-weight: 700; border-radius: 4px; background: rgba(16, 185, 129, 0.08); transition: all 0.2s;" onmouseover="this.style.background='rgba(16, 185, 129, 0.15)'" onmouseout="this.style.background='rgba(16, 185, 129, 0.08)'">
                            서비스 이용 현황
                        </a>
                        <a href="pages/mypage/credit.html" style="display: block; padding: 6px 8px; color: #495057; text-decoration: none; font-size: 12px; font-weight: 700; border-radius: 4px; background: rgba(16, 185, 129, 0.08); transition: all 0.2s;" onmouseover="this.style.background='rgba(16, 185, 129, 0.15)'" onmouseout="this.style.background='rgba(16, 185, 129, 0.08)'">
                            크레딧 관리
                        </a>
                        <a href="pages/mypage/security.html" style="display: block; padding: 6px 8px; color: #495057; text-decoration: none; font-size: 12px; font-weight: 700; border-radius: 4px; background: rgba(16, 185, 129, 0.08); transition: all 0.2s;" onmouseover="this.style.background='rgba(16, 185, 129, 0.15)'" onmouseout="this.style.background='rgba(16, 185, 129, 0.08)'">
                            보안 설정
                        </a>
                        <a href="#" onclick="event.preventDefault(); openMyInquiriesModal();" style="display: block; padding: 6px 8px; color: #495057; text-decoration: none; font-size: 12px; font-weight: 700; border-radius: 4px; background: rgba(16, 185, 129, 0.08); transition: all 0.2s;" onmouseover="this.style.background='rgba(16, 185, 129, 0.15)'" onmouseout="this.style.background='rgba(16, 185, 129, 0.08)'">
                            내 문의 내역
                        </a>
                    </div>
                </div>
            </div>

            <!-- Project Section -->
            <div class="left-sidebar-section">
                <h2 class="sidebar-title" style="margin-bottom: 13px;">📦 PROJECT</h2>

                <!-- 1. 예시 Project (1개) -->
                <div style="margin-bottom: 6px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; font-size: 12px; font-weight: 600; color: var(--primary); padding: 6px 8px; background: rgba(16, 185, 129, 0.08); border-radius: 4px; cursor: pointer;"
                        onclick="toggleExampleProjects()">
                        <span>예시 Project (1개)</span>
                        <span id="exampleProjectsArrow" style="font-size: 10px;">▶</span>
                    </div>
                    <div id="exampleProjectsList" style="display: none; flex-direction: column; gap: 4px; margin-top: 4px; padding-left: 8px;">
                        <div class="project-list-item" onclick="handleSSALWorksClick();" style="border-left-color: var(--primary); cursor: pointer;">
                            <span class="project-name">SSAL Works</span>
                            <span class="project-status" style="background: rgba(16, 185, 129, 0.15); color: var(--primary);">예시</span>
                        </div>
                    </div>
                </div>

                <!-- 2. 완료 Project -->
                <div style="margin-bottom: 6px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; font-size: 12px; font-weight: 600; color: #495057; padding: 6px 8px; background: rgba(16, 185, 129, 0.05); border-radius: 4px; cursor: pointer;"
                        onclick="toggleCompletedProjects()">
                        <span>완료 Project (<span id="completedProjectsCount">0</span>개)</span>
                        <span id="completedProjectsArrow" style="font-size: 10px;">▶</span>
                    </div>
                    <div id="completedProjectsList" style="display: none; flex-direction: column; gap: 4px; margin-top: 4px; padding-left: 8px; max-height: 200px; overflow-y: auto;">
                        <!-- 완료 프로젝트들 (DB에서 동적 로드) -->
                    </div>
                </div>

                <!-- 3. 진행중 Project (1개만) -->
                <div style="margin-bottom: 6px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; font-size: 12px; font-weight: 600; color: #495057; padding: 6px 8px; background: rgba(16, 185, 129, 0.05); border-radius: 4px; cursor: pointer;"
                        onclick="toggleCurrentProject()">
                        <span>진행중 Project</span>
                        <span id="currentProjectArrow" style="font-size: 10px;">▼</span>
                    </div>
                    <div id="currentProjectList" style="display: flex; flex-direction: column; gap: 4px; margin-top: 4px; padding-left: 8px;">
                        <!-- 진행중 프로젝트 동적 로드 -->
                    </div>
                </div>

                <!-- 4. 새로운 Project 등록 -->
                <div style="margin-top: 8px;">
                    <div style="display: flex; align-items: center; gap: 6px; padding: 6px 8px; background: rgba(16, 185, 129, 0.08); border: 1px dashed var(--primary); border-radius: 4px; cursor: pointer; font-size: 12px; font-weight: 600; color: var(--primary); transition: all 0.2s;"
                        onclick="registerNewProject()"
                        onmouseover="this.style.background='rgba(16, 185, 129, 0.15)'; this.style.borderStyle='solid'"
                        onmouseout="this.style.background='rgba(16, 185, 129, 0.08)'; this.style.borderStyle='dashed'">
                        <span style="font-size: 14px;">+</span>
                        <span>새로운 Project 등록</span>
                    </div>
                </div>
            </div>

            <!-- Process Section -->
            <div class="left-sidebar-section" id="processSectionContainer">
                <h2 class="sidebar-title" style="margin-bottom: 13px;">📊 진행 프로세스</h2>

                <div class="process-list">
                    <!-- P0. 작업 디렉토리 구조 생성 (특별단계) -->
                    <div class="process-item">
                        <div class="process-special-major" onclick="toggleProcess(this)" data-progress="0">
                            <div class="process-header">
                                <span class="process-icon">P0.</span>
                                <span class="process-name">작업 디렉토리 구조 생성</span>
                                <span class="process-arrow">▶</span>
                            </div>
                            <div class="process-progress-container">
                                <div class="process-progress">
                                    <div class="process-progress-fill" style="width: 0%"></div>
                                </div>
                                <span class="process-percent">0%</span>
                            </div>
                        </div>
                        <div class="process-small-list">
                            <div class="process-small" onclick="loadProcessStage('project_directory_structure', 'Project Directory Structure', 'P0')">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Project_Directory_Structure</span>
                                </div>
                            </div>
                            <div class="process-small" onclick="loadProcessStage('project_status', 'Project Status', 'P0')">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Project_Status</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- P1 사업계획 -->
                    <div class="process-item">
                        <div class="process-major" onclick="toggleProcess(this)" data-progress="0">
                            <div class="process-header">
                                <span class="process-icon">P1.</span>
                                <span class="process-name">사업계획</span>
                                <span class="process-arrow">▶</span>
                            </div>
                            <div class="process-progress-container">
                                <div class="process-progress">
                                    <div class="process-progress-fill" style="width: 0%"></div>
                                </div>
                                <span class="process-percent">0%</span>
                            </div>
                        </div>
                        <div class="process-small-list">
                            <div class="process-small" onclick="loadProcessStage('biz_0_1', 'Vision & Mission', 'P1')">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Vision_Mission</span>
                                </div>
                            </div>
                            <div class="process-small" onclick="loadProcessStage('biz_0_2', 'Market Analysis', 'P1')">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Market_Analysis</span>
                                </div>
                            </div>
                            <div class="process-small" onclick="loadProcessStage('biz_0_3', 'Business Model', 'P1')">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Business_Model</span>
                                </div>
                            </div>
                            <div class="process-small" onclick="loadProcessStage('biz_0_1', 'Patent', 'P1')">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Patent</span>
                                </div>
                            </div>
                            <div class="process-small" onclick="loadProcessStage('biz_0_3', 'Business Plan', 'P1')">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>BusenessPlan</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- P2 프로젝트 기획 -->
                    <div class="process-item">
                        <div class="process-major" onclick="toggleProcess(this)" data-progress="0">
                            <div class="process-header">
                                <span class="process-icon">P2.</span>
                                <span class="process-name">프로젝트 기획</span>
                                <span class="process-arrow">▶</span>
                            </div>
                            <div class="process-progress-container">
                                <div class="process-progress">
                                    <div class="process-progress-fill" style="width: 0%"></div>
                                </div>
                                <span class="process-percent">0%</span>
                            </div>
                        </div>
                        <div class="process-small-list">
                            <div class="process-small" onclick="loadProcessStage('plan_1_1', 'Project Plan', 'P2')">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Project_Plan</span>
                                </div>
                            </div>
                            <div class="process-small" onclick="loadProcessStage('plan_1_3', 'User Flows', 'P2')">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>User_Flows</span>
                                </div>
                            </div>
                            <div class="process-small" onclick="loadProcessStage('plan_1_2', 'Requirements', 'P2')">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Requirements</span>
                                </div>
                            </div>
                            <div class="process-small" onclick="loadProcessStage('plan_1_4', 'Design System', 'P2')">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Design_System</span>
                                </div>
                            </div>
                            <div class="process-small" onclick="loadProcessStage('plan_mockup', 'UI/UX Mockup', 'P2')">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>UI_UX_Mockup</span>
                                </div>
                            </div>
                            <div class="process-small" onclick="loadProcessStage('plan_1_5', 'Tech Stack', 'P2')">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Tech_Stack</span>
                                </div>
                            </div>
                            <div class="process-small" onclick="loadProcessStage('plan_1_6', 'Workflows', 'P2')">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Workflows</span>
                                </div>
                            </div>
                            <div class="process-small" onclick="loadProcessStage('service_intro', 'Service Introduction', 'P2')">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Service_Introduction</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- P3. 프로토타입 제작 -->
                    <div class="process-item">
                        <div class="process-major" onclick="toggleProcess(this)" data-progress="0">
                            <div class="process-header">
                                <span class="process-icon">P3.</span>
                                <span class="process-name">프로토타입 제작</span>
                                <span class="process-arrow">▶</span>
                            </div>
                            <div class="process-progress-container">
                                <div class="process-progress">
                                    <div class="process-progress-fill" style="width: 0%"></div>
                                </div>
                                <span class="process-percent">0%</span>
                            </div>
                        </div>
                        <div class="process-small-list">
                            <div class="process-small" onclick="loadProcessStage('proto_scripts', 'Documentation', 'P3')">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Documentation</span>
                                </div>
                            </div>
                            <div class="process-small" onclick="loadProcessStage('proto_pages', 'Frontend', 'P3')">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Frontend</span>
                                </div>
                            </div>
                            <div class="process-small" onclick="loadProcessStage('proto_database', 'Database', 'P3')">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Database</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- S0. Project SAL Grid 생성 -->
                    <div class="process-item">
                        <div class="process-special-major" onclick="toggleProcess(this)" data-progress="0">
                            <div class="process-header">
                                <span class="process-icon">S0.</span>
                                <span class="process-name">Project SAL Grid 생성</span>
                                <span class="process-arrow">▶</span>
                            </div>
                            <div class="process-progress-container">
                                <div class="process-progress">
                                    <div class="process-progress-fill" style="width: 0%"></div>
                                </div>
                                <span class="process-percent">0%</span>
                            </div>
                        </div>
                        <div class="process-small-list">
                            <div class="process-small" onclick="loadProcessStage('sal_grid_manual', 'Manual', 'SAL Grid')">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>manual</span>
                                </div>
                            </div>
                            <div class="process-small" onclick="loadProcessStage('sal_grid', 'sal-grid', 'SAL Grid')">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>sal-grid</span>
                                </div>
                            </div>
                            <div class="process-small" onclick="loadProcessStage('sal_grid_method', 'Method', 'SAL Grid')">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>method</span>
                                </div>
                            </div>
                            <div class="process-small" onclick="loadProcessStage('sal_grid_viewer', 'Viewer', 'SAL Grid')">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>viewer</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- S1. 개발 준비 (Stage Gate 완료) -->
                    <div class="process-item">
                        <div id="process-s1" class="process-major" onclick="loadProcessStage('s2_dev_prep', 'S1. 개발 준비', '개발단계'); toggleProcess(this)" data-progress="0">
                            <div class="process-header">
                                <span class="process-icon">S1.</span>
                                <span class="process-name">개발 준비</span>
                                <span class="process-arrow">▶</span>
                            </div>
                            <div class="process-progress-container">
                                <div class="process-progress">
                                    <div class="process-progress-fill" style="width: 0%"></div>
                                </div>
                                <span class="process-percent">0%</span>
                            </div>
                        </div>
                        <div class="process-small-list">
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Documentation</span>
                                </div>
                            </div>
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Frontend</span>
                                </div>
                            </div>
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Backend_Infra</span>
                                </div>
                            </div>
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Database</span>
                                </div>
                            </div>
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Security</span>
                                </div>
                            </div>
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Testing</span>
                                </div>
                            </div>
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>DevOps</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- S2. 개발 1차 -->
                    <div class="process-item">
                        <div id="process-s2" class="process-major" onclick="loadProcessStage('s3_dev_1', 'S2. 개발 1차', '개발단계'); toggleProcess(this)" data-progress="0">
                            <div class="process-header">
                                <span class="process-icon">S2.</span>
                                <span class="process-name">개발 1차</span>
                                <span class="process-arrow">▶</span>
                            </div>
                            <div class="process-progress-container">
                                <div class="process-progress">
                                    <div class="process-progress-fill" style="width: 0%"></div>
                                </div>
                                <span class="process-percent">0%</span>
                            </div>
                        </div>
                        <div class="process-small-list">
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Documentation</span>
                                </div>
                            </div>
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Frontend</span>
                                </div>
                            </div>
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Backend_Infra</span>
                                </div>
                            </div>
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Backend_APIs</span>
                                </div>
                            </div>
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Database</span>
                                </div>
                            </div>
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Security</span>
                                </div>
                            </div>
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Testing</span>
                                </div>
                            </div>
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Content_System</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- S3. 개발 2차 -->
                    <div class="process-item">
                        <div id="process-s3" class="process-major" onclick="loadProcessStage('s4_dev_2', 'S3. 개발 2차', '개발단계'); toggleProcess(this)" data-progress="0">
                            <div class="process-header">
                                <span class="process-icon">S3.</span>
                                <span class="process-name">개발 2차</span>
                                <span class="process-arrow">▶</span>
                            </div>
                            <div class="process-progress-container">
                                <div class="process-progress">
                                    <div class="process-progress-fill" style="width: 0%"></div>
                                </div>
                                <span class="process-percent">0%</span>
                            </div>
                        </div>
                        <div class="process-small-list">
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Backend_Infra</span>
                                </div>
                            </div>
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Backend_APIs</span>
                                </div>
                            </div>
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Security</span>
                                </div>
                            </div>
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>External</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- S4. 개발 3차 -->
                    <div class="process-item">
                        <div id="process-s4" class="process-major" onclick="loadProcessStage('s5_dev_3', 'S4. 개발 3차', '개발단계'); toggleProcess(this)" data-progress="0">
                            <div class="process-header">
                                <span class="process-icon">S4.</span>
                                <span class="process-name">개발 3차</span>
                                <span class="process-arrow">▶</span>
                            </div>
                            <div class="process-progress-container">
                                <div class="process-progress">
                                    <div class="process-progress-fill" style="width: 0%"></div>
                                </div>
                                <span class="process-percent">0%</span>
                            </div>
                        </div>
                        <div class="process-small-list">
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Documentation</span>
                                </div>
                            </div>
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Frontend</span>
                                </div>
                            </div>
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Backend_Infra</span>
                                </div>
                            </div>
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Backend_APIs</span>
                                </div>
                            </div>
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Database</span>
                                </div>
                            </div>
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Security</span>
                                </div>
                            </div>
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Testing</span>
                                </div>
                            </div>
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>DevOps</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- S5. 개발 마무리 -->
                    <div class="process-item">
                        <div id="process-s5" class="process-major" onclick="loadProcessStage('s6_operation', 'S5. 개발 마무리', '개발단계'); toggleProcess(this)" data-progress="0">
                            <div class="process-header">
                                <span class="process-icon">S5.</span>
                                <span class="process-name">개발 마무리</span>
                                <span class="process-arrow">▶</span>
                            </div>
                            <div class="process-progress-container">
                                <div class="process-progress">
                                    <div class="process-progress-fill" style="width: 0%"></div>
                                </div>
                                <span class="process-percent">0%</span>
                            </div>
                        </div>
                        <div class="process-small-list">
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Documentation</span>
                                </div>
                            </div>
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Frontend</span>
                                </div>
                            </div>
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Backend_APIs</span>
                                </div>
                            </div>
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Database</span>
                                </div>
                            </div>
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>Security</span>
                                </div>
                            </div>
                            <div class="process-small">
                                <div class="process-small-content">
                                    <span class="process-small-bullet">●</span>
                                    <span>DevOps</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Links Section -->
            <div class="left-sidebar-section">
                <h2 class="sidebar-title">🔗 연계 서비스 바로가기</h2>

                <div class="quick-links">
                    <a href="antigravity://" class="quick-link-btn antigravity" title="Antigravity 열기">
                        <span class="quick-link-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <!-- Antigravity Logo - Two legs with thick rounded top cap -->
                                <path d="M8 4 L10 4 C9 10, 8 16, 7 22 L2 22 C4 16, 6 10, 8 4 Z" fill="#1a1a1a"/>
                                <path d="M14 4 L16 4 C18 10, 20 16, 22 22 L17 22 C16 16, 15 10, 14 4 Z" fill="#1a1a1a"/>
                                <ellipse cx="12" cy="3" rx="6" ry="3" fill="#1a1a1a"/>
                            </svg>
                        </span>
                        <span class="quick-link-name">Antigravity</span>
                    </a>

                    <a href="vscode://" class="quick-link-btn vscode" title="VS Code 열기">
                        <span class="quick-link-icon">
                            <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/vscode/vscode-original.svg"
                                alt="VS Code">
                        </span>
                        <span class="quick-link-name">VS Code</span>
                    </a>

                    <a href="https://github.com" target="_blank" class="quick-link-btn github" title="GitHub 열기">
                        <span class="quick-link-icon">
                            <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/github/github-original.svg"
                                alt="GitHub">
                        </span>
                        <span class="quick-link-name">GitHub</span>
                    </a>

                    <a href="https://vercel.com/dashboard" target="_blank" class="quick-link-btn vercel"
                        title="Vercel 대시보드 열기">
                        <span class="quick-link-icon">
                            <svg viewBox="0 0 76 65" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M37.5274 0L75.0548 65H0L37.5274 0Z" fill="#000" />
                            </svg>
                        </span>
                        <span class="quick-link-name">Vercel</span>
                    </a>

                    <a href="https://supabase.com/dashboard" target="_blank" class="quick-link-btn supabase"
                        title="Supabase 대시보드 열기">
                        <span class="quick-link-icon">
                            <svg viewBox="0 0 109 113" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M63.7076 110.284C60.8481 113.885 55.0502 111.912 54.9813 107.314L53.9738 40.0627H99.1935C103.711 40.0627 106.305 45.3117 103.447 48.9134L63.7076 110.284Z"
                                    fill="url(#paint0_linear)" />
                                <path
                                    d="M63.7076 110.284C60.8481 113.885 55.0502 111.912 54.9813 107.314L53.9738 40.0627H99.1935C103.711 40.0627 106.305 45.3117 103.447 48.9134L63.7076 110.284Z"
                                    fill="url(#paint1_linear)" fill-opacity="0.2" />
                                <path
                                    d="M45.317 2.07103C48.1765 -1.53037 53.9745 0.442937 54.0434 5.041L54.4849 72.2922H9.83113C5.31361 72.2922 2.71933 66.6679 5.58119 63.0663L45.317 2.07103Z"
                                    fill="#3ECF8E" />
                                <defs>
                                    <linearGradient id="paint0_linear" x1="53.9738" y1="54.974" x2="94.1635"
                                        y2="71.8295" gradientUnits="userSpaceOnUse">
                                        <stop stop-color="#249361" />
                                        <stop offset="1" stop-color="#3ECF8E" />
                                    </linearGradient>
                                    <linearGradient id="paint1_linear" x1="36.1558" y1="30.578" x2="54.4844"
                                        y2="65.0806" gradientUnits="userSpaceOnUse">
                                        <stop />
                                        <stop offset="1" stop-opacity="0" />
                                    </linearGradient>
                                </defs>
                            </svg>
                        </span>
                        <span class="quick-link-name">Supabase</span>
                    </a>

                    <a href="https://resend.com/emails" target="_blank" class="quick-link-btn resend"
                        title="Resend 대시보드 열기">
                        <span class="quick-link-icon">
                            <img src="https://cdn.resend.com/brand/resend-icon-black.svg" alt="Resend">
                        </span>
                        <span class="quick-link-name">Resend</span>
                    </a>
                </div>
            </div>
        </aside>

        <!-- Center Workspace -->
        <main class="center-workspace">
            <!-- Top: Workspace (75%) -->
            <div class="workspace-top">
                <div class="workspace-header">
                    <div class="workspace-title">
                        <span>Control Desk</span>
                    </div>
                    <!-- Outbox 알림 박스 제거됨 -->
                    <div class="workspace-actions">
                        <button class="action-btn secondary" onclick="clearEditor()">
                            <span style="display: flex; flex-direction: column; line-height: 1.3;">
                                <span>Control Desk</span>
                                <span>지우기</span>
                            </span>
                        </button>
                        <button class="action-btn success" onclick="deliverOrderSheet()">
                            <span style="display: flex; flex-direction: column; line-height: 1.3;">
                                <span>Order Sheet</span>
                                <span>전달하기</span>
                            </span>
                        </button>
                        <button class="action-btn" onclick="loadFromReports()" style="background: #bfdbfe; border: 1px solid #60a5fa; color: #000;">
                            <span style="display: flex; flex-direction: column; line-height: 1.3;">
                                <span>Reports</span>
                                <span>불러오기</span>
                            </span>
                        </button>
                    </div>
                </div>
                <div class="workspace-content">
                    <!-- 안내문 표시 영역 (기본 표시) -->
                    <div id="workspaceGuide" style="padding: 20px; font-size: 13px; line-height: 1.7; color: #212529; overflow-y: auto; height: 100%;"></div>
                    <!-- Order Sheet 작성 영역 (숨김) -->
                    <textarea id="textEditor" class="text-editor" style="display: none;" placeholder="여기에 Order Sheet를 작성하세요...

예시:
# Order Sheet: 회원가입 API 구현

## 요구사항
- Email 중복 확인
- 비밀번호 암호화
- Supabase Auth 연동

## 산출물
- /api/auth/signup.ts
- 테스트 코드

## 참고사항
- 비밀번호 최소 8자, 영문+숫자+특수문자 포함
- Task ID: P1BA1
" oninput="translateToEnglish()"></textarea>

                    <!-- Translation Preview -->
                    <div class="translation-section" id="translationSection">
                        <div class="translation-header">
                            <div class="translation-title" onclick="toggleTranslation()"
                                style="cursor: pointer; user-select: none;">
                                <span>English Translation</span>
                                <span id="toggleText" style="margin-left: 8px; font-size: 11px;">▼</span>
                            </div>
                            <button class="action-btn" onclick="openTranslationFullview()" style="padding: 4px 10px; font-size: 11px;">
                                전체 보기
                            </button>
                        </div>
                        <div class="translation-preview" id="translationPreview" style="display: block; max-height: 65px; overflow: hidden;">
                            <pre id="translatedText" style="margin: 0; font-size: 11px; color: #868e96;">[Claude Code Only] This English translation section is for Claude Code.
The Korean content from the Control Desk above is translated here for Claude Code to read.
────────────────────────────────────────
The content you enter in the Control Desk will be displayed here.</pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bottom: Grid Viewer (25%) -->
            <div class="workspace-bottom">
                <div class="grid-viewer-header">
                    <div class="grid-viewer-title-group">
                        <div class="grid-viewer-title">Project SAL Grid</div>
                    </div>
                </div>

                <div class="grid-content" style="display: flex; gap: 12px; padding: 8px 15px 8px 15px;">
                    <button class="action-btn viewer-btn-blue" onclick="openViewer()" style="flex: 1; width: auto; font-size: 11px; font-weight: 700; background: #bfdbfe; border: 1px solid #60a5fa; color: #000;">
                        SSAL Works(예시) Viewer 열기
                    </button>
                    <button id="myViewerBtn" class="action-btn" onclick="openMyViewer()" style="flex: 1; width: auto; font-size: 11px; font-weight: 700; background: #d1fae5; border: 1px solid #10b981; color: #000;">
                        SSAL Works(진행중) Viewer 열기
                    </button>
                </div>
            </div>
        </main>

        <!-- Right Sidebar: Content & Support -->
        <aside class="right-sidebar">
            <!-- 사이드바 닫기 버튼 (모바일) -->
            <button class="sidebar-close-btn" onclick="closeRightSidebar()">✕</button>
            <!-- Notices Section (공지사항 - 상단 배치) -->
            <div class="sidebar-section">
                <h3 style="display: flex; justify-content: space-between; align-items: center;">
                    📢 공지사항
                    <a href="pages/admin-dashboard.html" style="font-size: 11px; font-weight: 400; color: #6c757d; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#F59E0B'" onmouseout="this.style.color='#6c757d'">더보기 →</a>
                </h3>
                <div id="noticesList">
                    <div style="text-align: center; padding: 20px; color: #6c757d;">
                        공지사항을 불러오는 중...
                    </div>
                </div>
            </div>

            <!-- Knowledge Content -->
            <div class="sidebar-section">
                <h3 style="display: flex; justify-content: space-between; align-items: center;">
                    📚 학습용 Books
                    <button onclick="openLearningViewer()" style="font-size: 11px; padding: 4px 8px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 4px; cursor: pointer;">전체 보기 →</button>
                </h3>
                <!-- 검색창 -->
                <div>
                    <input type="text"
                           id="learningSearchInput"
                           placeholder="학습용 Books 검색하기"
                           oninput="searchLearningContentsLocal(this.value)"
                           style="width: 100%; padding: 8px 12px; border: 1px solid #667eea; border-radius: 8px; font-size: 13px;">
                </div>
                <!-- 검색 결과 -->
                <div id="learningSearchResults" style="max-height: 300px; overflow-y: auto;"></div>
            </div>
            <!-- 학습용 콘텐츠 섹션 끝 -->

            <!-- Tips -->
            <div class="sidebar-section" id="tipsSection">
                <h3 style="display: flex; justify-content: space-between; align-items: center;">
                    💡 Tips
                    <button onclick="openTipsViewer()" style="font-size: 11px; padding: 4px 8px; background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%); color: white; border: none; border-radius: 4px; cursor: pointer;">전체 보기 →</button>
                </h3>

                <!-- Tips 검색창 -->
                <div>
                    <input type="text"
                           id="tipsSearchInput"
                           placeholder="Tips 검색하기"
                           oninput="searchTipsLocal(this.value)"
                           style="width: 100%; padding: 8px 12px; border: 1px solid #8B5CF6; border-radius: 8px; font-size: 13px; font-family: 'Noto Sans KR', sans-serif; transition: all 0.2s;">
                </div>

                <!-- Tips 검색 결과 영역 -->
                <div id="tipsSearchResults" style="max-height: 300px; overflow-y: auto;">
                    <!-- 검색 결과가 여기에 동적으로 추가됨 -->
                </div>

                <!-- 기존 정적 FAQ (백업용 - 삭제 예정) -->
                <div id="faqStaticBackup" style="display: none;">
                <!-- 1. 로그인/회원가입 -->
                <div class="knowledge-item">
                    <div class="knowledge-major" onclick="toggleKnowledge(this)">
                        <span class="knowledge-icon"></span>
                        <span class="knowledge-name">로그인/회원가입</span>
                        <span class="knowledge-arrow">▶</span>
                    </div>
                    <div class="knowledge-medium-list">
                        <!-- Depth 2-1: 계정 관리 -->
                        <div class="knowledge-medium" onclick="toggleKnowledgeSmall(this)">
                            <div class="knowledge-medium-content">
                                <span class="knowledge-medium-bullet">●</span>
                                <span>계정 관리</span>
                            </div>
                            <span class="knowledge-medium-arrow">▶</span>
                        </div>
                        <div class="knowledge-small-list">
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>비밀번호 재설정</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>이메일 인증 오류</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>계정 삭제 방법</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>프로필 수정</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>로그인 오류 해결</span>
                            </div>
                        </div>

                        <!-- Depth 2-2: 회원가입 -->
                        <div class="knowledge-medium" onclick="toggleKnowledgeSmall(this)">
                            <div class="knowledge-medium-content">
                                <span class="knowledge-medium-bullet">●</span>
                                <span>회원가입</span>
                            </div>
                            <span class="knowledge-medium-arrow">▶</span>
                        </div>
                        <div class="knowledge-small-list">
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>가입 절차</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>이메일 인증</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>약관 동의</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>프로필 설정</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>가입 오류</span>
                            </div>
                        </div>

                        <!-- Depth 2-3: 보안 설정 -->
                        <div class="knowledge-medium" onclick="toggleKnowledgeSmall(this)">
                            <div class="knowledge-medium-content">
                                <span class="knowledge-medium-bullet">●</span>
                                <span>보안 설정</span>
                            </div>
                            <span class="knowledge-medium-arrow">▶</span>
                        </div>
                        <div class="knowledge-small-list">
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>2단계 인증</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>비밀번호 정책</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>로그인 기록</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>기기 관리</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>보안 경고</span>
                            </div>
                        </div>

                        <!-- Depth 2-4: 소셜 로그인 -->
                        <div class="knowledge-medium" onclick="toggleKnowledgeSmall(this)">
                            <div class="knowledge-medium-content">
                                <span class="knowledge-medium-bullet">●</span>
                                <span>소셜 로그인</span>
                            </div>
                            <span class="knowledge-medium-arrow">▶</span>
                        </div>
                        <div class="knowledge-small-list">
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>Google 연동</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>GitHub 연동</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>계정 연결 해제</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>연동 오류</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>권한 관리</span>
                            </div>
                        </div>

                        <!-- Depth 2-5: 계정 복구 -->
                        <div class="knowledge-medium" onclick="toggleKnowledgeSmall(this)">
                            <div class="knowledge-medium-content">
                                <span class="knowledge-medium-bullet">●</span>
                                <span>계정 복구</span>
                            </div>
                            <span class="knowledge-medium-arrow">▶</span>
                        </div>
                        <div class="knowledge-small-list">
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>잠긴 계정 복구</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>이메일 분실</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>복구 코드</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>고객 지원 요청</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>본인 인증</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 2. Order 작성 -->
                <div class="knowledge-item">
                    <div class="knowledge-major" onclick="toggleKnowledge(this)">
                        <span class="knowledge-icon"></span>
                        <span class="knowledge-name">Order 작성</span>
                        <span class="knowledge-arrow">▶</span>
                    </div>
                    <div class="knowledge-medium-list">
                        <!-- Depth 2-1: 작성 가이드 -->
                        <div class="knowledge-medium" onclick="toggleKnowledgeSmall(this)">
                            <div class="knowledge-medium-content">
                                <span class="knowledge-medium-bullet">●</span>
                                <span>작성 가이드</span>
                            </div>
                            <span class="knowledge-medium-arrow">▶</span>
                        </div>
                        <div class="knowledge-small-list">
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>Order 작성 기본</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>마크다운 문법</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>템플릿 활용</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>자동 저장 기능</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>저장 오류 해결</span>
                            </div>
                        </div>

                        <!-- Depth 2-2: Order 보내기 -->
                        <div class="knowledge-medium" onclick="toggleKnowledgeSmall(this)">
                            <div class="knowledge-medium-content">
                                <span class="knowledge-medium-bullet">●</span>
                                <span>Order 보내기</span>
                            </div>
                            <span class="knowledge-medium-arrow">▶</span>
                        </div>
                        <div class="knowledge-small-list">
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>전송 방법</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>전송 확인</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>전송 취소</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>재전송</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>전송 오류</span>
                            </div>
                        </div>

                        <!-- Depth 2-3: 템플릿 관리 -->
                        <div class="knowledge-medium" onclick="toggleKnowledgeSmall(this)">
                            <div class="knowledge-medium-content">
                                <span class="knowledge-medium-bullet">●</span>
                                <span>템플릿 관리</span>
                            </div>
                            <span class="knowledge-medium-arrow">▶</span>
                        </div>
                        <div class="knowledge-small-list">
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>기본 템플릿</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>커스텀 템플릿</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>템플릿 저장</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>템플릿 공유</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>템플릿 삭제</span>
                            </div>
                        </div>

                        <!-- Depth 2-4: Order 히스토리 -->
                        <div class="knowledge-medium" onclick="toggleKnowledgeSmall(this)">
                            <div class="knowledge-medium-content">
                                <span class="knowledge-medium-bullet">●</span>
                                <span>Order 히스토리</span>
                            </div>
                            <span class="knowledge-medium-arrow">▶</span>
                        </div>
                        <div class="knowledge-small-list">
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>히스토리 보기</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>히스토리 검색</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>히스토리 필터</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>히스토리 내보내기</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>히스토리 삭제</span>
                            </div>
                        </div>

                        <!-- Depth 2-5: 첨부 파일 -->
                        <div class="knowledge-medium" onclick="toggleKnowledgeSmall(this)">
                            <div class="knowledge-medium-content">
                                <span class="knowledge-medium-bullet">●</span>
                                <span>첨부 파일</span>
                            </div>
                            <span class="knowledge-medium-arrow">▶</span>
                        </div>
                        <div class="knowledge-small-list">
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>파일 업로드</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>파일 크기 제한</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>지원 파일 형식</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>파일 미리보기</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>파일 삭제</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 3. AI 기능 -->
                <div class="knowledge-item">
                    <div class="knowledge-major" onclick="toggleKnowledge(this)">
                        <span class="knowledge-icon"></span>
                        <span class="knowledge-name">AI 기능</span>
                        <span class="knowledge-arrow">▶</span>
                    </div>
                    <div class="knowledge-medium-list">
                        <!-- Depth 2-1: Perplexity -->
                        <div class="knowledge-medium" onclick="toggleKnowledgeSmall(this)">
                            <div class="knowledge-medium-content">
                                <span class="knowledge-medium-bullet">●</span>
                                <span>Perplexity 사용법</span>
                            </div>
                            <span class="knowledge-medium-arrow">▶</span>
                        </div>
                        <div class="knowledge-small-list">
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>사용 방법</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>크레딧 충전</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>답변 품질 개선</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>API 연동</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>오류 해결</span>
                            </div>
                        </div>

                        <!-- Depth 2-2: ChatGPT -->
                        <div class="knowledge-medium" onclick="toggleKnowledgeSmall(this)">
                            <div class="knowledge-medium-content">
                                <span class="knowledge-medium-bullet">●</span>
                                <span>ChatGPT 사용법</span>
                            </div>
                            <span class="knowledge-medium-arrow">▶</span>
                        </div>
                        <div class="knowledge-small-list">
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>기본 사용</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>프롬프트 작성</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>대화 기록</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>모델 선택</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>사용량 확인</span>
                            </div>
                        </div>

                        <!-- Depth 2-3: Gemini -->
                        <div class="knowledge-medium" onclick="toggleKnowledgeSmall(this)">
                            <div class="knowledge-medium-content">
                                <span class="knowledge-medium-bullet">●</span>
                                <span>Gemini 사용법</span>
                            </div>
                            <span class="knowledge-medium-arrow">▶</span>
                        </div>
                        <div class="knowledge-small-list">
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>Gemini 소개</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>이미지 분석</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>코드 생성</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>멀티모달 기능</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>제한 사항</span>
                            </div>
                        </div>

                        <!-- Depth 2-4: AI 비교 -->
                        <div class="knowledge-medium" onclick="toggleKnowledgeSmall(this)">
                            <div class="knowledge-medium-content">
                                <span class="knowledge-medium-bullet">●</span>
                                <span>AI 비교</span>
                            </div>
                            <span class="knowledge-medium-arrow">▶</span>
                        </div>
                        <div class="knowledge-small-list">
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>성능 비교</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>가격 비교</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>특징 비교</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>추천 사용 사례</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>선택 가이드</span>
                            </div>
                        </div>

                        <!-- Depth 2-5: API 설정 -->
                        <div class="knowledge-medium" onclick="toggleKnowledgeSmall(this)">
                            <div class="knowledge-medium-content">
                                <span class="knowledge-medium-bullet">●</span>
                                <span>API 설정</span>
                            </div>
                            <span class="knowledge-medium-arrow">▶</span>
                        </div>
                        <div class="knowledge-small-list">
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>API 키 발급</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>환경 변수 설정</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>보안 설정</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>사용량 모니터링</span>
                            </div>
                            <div class="knowledge-small">
                                <span class="knowledge-small-bullet">●</span>
                                <span>오류 처리</span>
                            </div>
                        </div>
                    </div>
                </div>
                </div>
                <!-- faqStaticBackup 끝 -->
            </div>

            <!-- 외부 연동 설정 Guide -->
            <div class="sidebar-section" id="serviceGuideSection">
                <h3 style="display: flex; justify-content: space-between; align-items: center;">
                    🔗 외부 연동 설정 Guide
                    <span id="serviceGuideMoreBtn" onclick="toggleServiceGuideMenu()" style="cursor: pointer; font-size: 11px; font-weight: 400; color: #6c757d; transition: color 0.2s;" onmouseover="this.style.color='#F59E0B'" onmouseout="this.style.color='#6c757d'">더보기 →</span>
                </h3>
                <!-- 기본 노출: 데이터베이스 설정 (클릭 시 펼침 + 가이드 열기) -->
                <div>
                    <a onclick="toggleServiceGuideMenu(); openServiceGuide('database')" style="display: block; padding: 4px 8px; color: #495057; text-decoration: none; font-size: 12px; font-weight: 700; border-radius: 4px; background: rgba(245, 158, 11, 0.08); transition: all 0.2s; cursor: pointer;" onmouseover="this.style.background='rgba(245, 158, 11, 0.15)'" onmouseout="this.style.background='rgba(245, 158, 11, 0.08)'">
                        데이터베이스 설정
                    </a>
                </div>
                <!-- 펼쳐지는 추가 메뉴들 -->
                <div id="serviceGuideLinks" style="display: none; margin-top: 4px;">
                    <div style="display: flex; flex-direction: column; gap: 4px;">
                        <a onclick="openServiceGuide('auth')" style="display: block; padding: 4px 8px; color: #495057; text-decoration: none; font-size: 12px; font-weight: 700; border-radius: 4px; background: rgba(245, 158, 11, 0.08); transition: all 0.2s; cursor: pointer;" onmouseover="this.style.background='rgba(245, 158, 11, 0.15)'" onmouseout="this.style.background='rgba(245, 158, 11, 0.08)'">
                            회원인증 설정
                        </a>
                        <a onclick="openServiceGuide('email')" style="display: block; padding: 4px 8px; color: #495057; text-decoration: none; font-size: 12px; font-weight: 700; border-radius: 4px; background: rgba(245, 158, 11, 0.08); transition: all 0.2s; cursor: pointer;" onmouseover="this.style.background='rgba(245, 158, 11, 0.15)'" onmouseout="this.style.background='rgba(245, 158, 11, 0.08)'">
                            이메일 시스템 설정
                        </a>
                        <a onclick="openServiceGuide('deploy')" style="display: block; padding: 4px 8px; color: #495057; text-decoration: none; font-size: 12px; font-weight: 700; border-radius: 4px; background: rgba(245, 158, 11, 0.08); transition: all 0.2s; cursor: pointer;" onmouseover="this.style.background='rgba(245, 158, 11, 0.15)'" onmouseout="this.style.background='rgba(245, 158, 11, 0.08)'">
                            배포/도메인 설정
                        </a>
                        <a onclick="openServiceGuide('payment')" style="display: block; padding: 4px 8px; color: #495057; text-decoration: none; font-size: 12px; font-weight: 700; border-radius: 4px; background: rgba(245, 158, 11, 0.08); transition: all 0.2s; cursor: pointer;" onmouseover="this.style.background='rgba(245, 158, 11, 0.15)'" onmouseout="this.style.background='rgba(245, 158, 11, 0.08)'">
                            결제 시스템 설정
                        </a>
                    </div>
                </div>
            </div>

            <!-- Claude Code 업데이트 -->
            <div class="sidebar-section" id="claudeCodeUpdateSection">
                <h3 style="display: flex; justify-content: space-between; align-items: center;">
                    <span>
                        <svg width="18" height="18" viewBox="0 0 12 10" fill="none" xmlns="http://www.w3.org/2000/svg" style="vertical-align: middle; margin-right: 4px;">
                            <rect x="1" y="0" width="2" height="1" fill="#D4926A"/>
                            <rect x="9" y="0" width="2" height="1" fill="#D4926A"/>
                            <rect x="0" y="1" width="3" height="1" fill="#D4926A"/>
                            <rect x="3" y="1" width="6" height="1" fill="#E8A882"/>
                            <rect x="9" y="1" width="3" height="1" fill="#D4926A"/>
                            <rect x="0" y="2" width="1" height="3" fill="#D4926A"/>
                            <rect x="1" y="2" width="10" height="3" fill="#E8A882"/>
                            <rect x="11" y="2" width="1" height="3" fill="#D4926A"/>
                            <rect x="3" y="3" width="1" height="1" fill="#1a1a1a"/>
                            <rect x="8" y="3" width="1" height="1" fill="#1a1a1a"/>
                            <rect x="5" y="4" width="2" height="1" fill="#C4836A"/>
                            <rect x="1" y="5" width="10" height="1" fill="#E8A882"/>
                            <rect x="2" y="6" width="2" height="3" fill="#E8A882"/>
                            <rect x="8" y="6" width="2" height="3" fill="#E8A882"/>
                        </svg>
                        Claude Code 업데이트
                    </span>
                    <span id="claudeCodeMoreBtn" onclick="toggleClaudeCodeMenu()" style="cursor: pointer; font-size: 11px; font-weight: 400; color: #6c757d; transition: color 0.2s;" onmouseover="this.style.color='#F59E0B'" onmouseout="this.style.color='#6c757d'">더보기 →</span>
                </h3>
                <!-- 기본 노출: Anthropic 공식 문서 -->
                <div>
                    <a onclick="window.open('https://docs.anthropic.com/en/docs/claude-code', '_blank')" style="display: block; padding: 4px 8px; color: #495057; text-decoration: none; font-size: 12px; font-weight: 700; border-radius: 4px; background: rgba(245, 158, 11, 0.08); transition: all 0.2s; cursor: pointer;" onmouseover="this.style.background='rgba(245, 158, 11, 0.15)'" onmouseout="this.style.background='rgba(245, 158, 11, 0.08)'">
                        Anthropic 공식 문서
                    </a>
                </div>
                <!-- 펼쳐지는 추가 메뉴들 -->
                <div id="claudeCodeLinks" style="display: none; margin-top: 4px;">
                    <div style="display: flex; flex-direction: column; gap: 4px;">
                        <a onclick="window.open('https://www.anthropic.com/blog', '_blank')" style="display: block; padding: 4px 8px; color: #495057; text-decoration: none; font-size: 12px; font-weight: 700; border-radius: 4px; background: rgba(245, 158, 11, 0.08); transition: all 0.2s; cursor: pointer;" onmouseover="this.style.background='rgba(245, 158, 11, 0.15)'" onmouseout="this.style.background='rgba(245, 158, 11, 0.08)'">
                            Anthropic 뉴스룸
                        </a>
                        <a onclick="window.open('https://github.com/anthropics/claude-code', '_blank')" style="display: block; padding: 4px 8px; color: #495057; text-decoration: none; font-size: 12px; font-weight: 700; border-radius: 4px; background: rgba(245, 158, 11, 0.08); transition: all 0.2s; cursor: pointer;" onmouseover="this.style.background='rgba(245, 158, 11, 0.15)'" onmouseout="this.style.background='rgba(245, 158, 11, 0.08)'">
                            GitHub의 Claude Code 리포지토리
                        </a>
                        <a onclick="window.open('https://www.aitimes.com', '_blank')" style="display: block; padding: 4px 8px; color: #495057; text-decoration: none; font-size: 12px; font-weight: 700; border-radius: 4px; background: rgba(245, 158, 11, 0.08); transition: all 0.2s; cursor: pointer;" onmouseover="this.style.background='rgba(245, 158, 11, 0.15)'" onmouseout="this.style.background='rgba(245, 158, 11, 0.08)'">
                            국내 뉴스 - AI타임즈
                        </a>
                    </div>
                </div>
            </div>

            <!-- 다른 AI에게 질문하기 -->
            <div class="sidebar-section">
                <h3>
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                        style="display: inline-block; vertical-align: middle;">
                        <path d="M12 2L14.5 9.5L22 12L14.5 14.5L12 22L9.5 14.5L2 12L9.5 9.5L12 2Z"
                            fill="var(--secondary)" stroke="var(--secondary)" stroke-width="1"/>
                        <path d="M19 3L20 6L23 7L20 8L19 11L18 8L15 7L18 6L19 3Z"
                            fill="var(--secondary)" opacity="0.7"/>
                    </svg>
                    다른 AI에게 질문하기
                </h3>

                <!-- AI 선택 버튼 -->
                <div style="display: flex; gap: 4px; margin-bottom: 10px; flex-wrap: nowrap;">
                    <button class="ai-selector-btn active" data-ai="chatgpt"
                        onclick="selectAI('chatgpt', event)">ChatGPT</button>
                    <button class="ai-selector-btn" data-ai="gemini" onclick="selectAI('gemini', event)">Gemini</button>
                    <button class="ai-selector-btn" data-ai="perplexity"
                        onclick="selectAI('perplexity', event)">Perplexity</button>
                </div>

                <!-- 로딩 메시지 -->
                <div id="aiLoading"
                    style="display: none; padding: 8px; margin-bottom: 8px; background: #e3f2fd; border-left: 3px solid #2196f3; border-radius: 4px; font-size: 13px; color: #1976d2;">
                    <span style="display: inline-block; margin-right: 6px;">⏳</span>
                    <span id="aiLoadingText">AI에게 질문 중...</span>
                </div>

                <div class="ai-input-area">
                    <textarea id="aiQuestion" placeholder="질문을 입력하세요..." rows="4"></textarea>
                    <button id="askAIButton" onclick="askAI()" style="font-size: 11px;">제출하기</button>
                    <div class="perplexity-credit-display"
                        style="margin-top: 8px; font-size: 11px; color: #666; text-align: center; display: flex; align-items: center; justify-content: center; gap: 10px;">
                        <span>크레딧 잔액: <span style="color: #333;">₩<span
                                    id="perplexityCreditBalance">-</span></span></span>
                        <a href="pages/mypage/credit.html"
                            style="padding: 4px 12px; font-size: 11px; background: #6c757d; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: 600; text-decoration: none; display: inline-block;">충전하기</a>
                    </div>

                    <!-- 질문 이력 버튼 -->
                    <div style="margin-top: 6px;">
                        <button onclick="openQuestionHistoryModal()"
                            style="width: 100%; padding: 9px; font-size: 11px; font-weight: 500; background: rgba(245, 158, 11, 0.08); border: 1px solid #999; border-radius: 8px; cursor: pointer; color: #333; transition: all 0.2s;"
                            onmouseover="this.style.background='rgba(245, 158, 11, 0.15)'; this.style.borderColor='#F59E0B';"
                            onmouseout="this.style.background='rgba(245, 158, 11, 0.08)'; this.style.borderColor='#999';">질문 / 답변 이력 보기</button>
                    </div>
                </div>
            </div>

            <!-- Support -->
            <div class="sidebar-section">
                <h3>☀️ Sunny에게 질문하기</h3>
                <div class="support-input-area">
                    <textarea id="supportQuestion"
                        placeholder="사용법 문의, 문제 해결, 버그 신고, 기능 제안, 사업계획서 검토, 비즈니스 멘토링까지! AI 활용 능력 고수 + 공인회계사 + 엑셀러레이터 인 Sunny에게 자유롭게 문의하세요!"
                        rows="4"></textarea>
                    <div style="display: flex; gap: 8px;">
                        <button onclick="document.getElementById('supportFile').click()"
                            style="flex: 1; padding: 9px; font-size: 11px; background: rgba(245, 158, 11, 0.08); border: 1px solid #999; border-radius: 8px; cursor: pointer; color: #333; font-weight: 500; transition: all 0.2s;"
                            onmouseover="this.style.background='rgba(245, 158, 11, 0.15)'; this.style.borderColor='#F59E0B';"
                            onmouseout="this.style.background='rgba(245, 158, 11, 0.08)'; this.style.borderColor='#999';">파일 첨부</button>
                        <button onclick="submitSupport()"
                            style="flex: 2; padding: 9px; font-size: 11px; background: var(--secondary); color: white; border: none; border-radius: var(--border-radius); font-weight: 600; cursor: pointer; transition: all 0.2s;">제출하기</button>
                    </div>
                    <input type="file" id="supportFile" multiple accept="image/*,.pdf,.doc,.docx,.xls,.xlsx"
                        style="display: none;" onchange="handleSupportFileSelect(event)">
                    <div id="supportFileList" style="font-size: 11px; color: #666; max-height: 60px; overflow-y: auto;">
                    </div>
                </div>
            </div>
        </aside>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-inner">
                <div class="footer-links">
                    <a href="#" class="footer-link" onclick="openServiceIntro(); return false;">서비스 소개</a>
                    <a href="pages/legal/terms.html" class="footer-link">이용약관</a>
                    <a href="pages/legal/privacy.html" class="footer-link">개인정보처리방침</a>
                    <a href="pages/legal/customer_service.html" class="footer-link">고객센터</a>
                </div>
                <div class="footer-business" style="font-size: 12px; color: #ffffff; margin-top: 8px;">
                    <span class="footer-company-info">파인더월드 | 대표: 선웅규 | 사업자등록번호: 354-33-01641</span>
                    <span class="footer-address">서울특별시 강남구 테헤란로63길 9</span>
                </div>
                <div class="footer-copyright" style="font-size: 12px; color: #ffffff;">
                    <span>© 2025 SSAL Works, All Rights Reserved</span>
                    <a href="pages/admin-dashboard.html" class="admin-link" style="margin-left: 16px;">Admin</a>
                </div>
            </div>
        </footer>
    </div>

    <!-- Server Status Indicator -->
    <div id="serverStatus" class="server-status"></div>

    <script>
        // 환경 감지 - 배포 환경에서는 localhost 서버 기능 비활성화
        const IS_PRODUCTION = window.location.hostname !== 'localhost' && window.location.hostname !== '127.0.0.1';
        const BRIDGE_SERVER_URL = 'http://localhost:3030';
        const AI_SERVER_URL = 'http://localhost:3031';

        // 프로젝트별 Orders 경로 설정
        const PROJECT_CONFIGS = {
            'PoliticianFinder': {
                name: 'PoliticianFinder',
                ordersPath: 'C:\\Development_PoliticianFinder_copy\\Human_ClaudeCode_Bridge\\Orders',
                status: '완료'
            },
            'SSAL Works': {
                name: 'SSAL Works',
                ordersPath: 'C:\\!SSAL_Works_Private\\Human_ClaudeCode_Bridge\\Orders',
                status: '진행중'
            }
        };

        // 현재 선택된 프로젝트 (전역 변수)
        // 진행중인 프로젝트를 기본값으로 자동 설정
        let currentSelectedProject = 'SSAL Works';

        // Sidebar structure data (updated 2025-12-12)
        const SIDEBAR_STRUCTURE = {
            "metadata": { "lastUpdate": "2025-12-12", "source": "PROJECT_DIRECTORY_STRUCTURE.md" },
            "specialStages": [
                { "id": "dir_structure", "name": "작업 디렉토리 구조 생성", "icon": "☆", "type": "special" },
                { "id": "sal_grid", "name": "Project SAL GRID 생성", "icon": "☆", "type": "special" }
            ],
            "gridStages": [
                { "id": "SSAL-Grid", "name": "SAL Grid", "icon": "◈", "path": "SSAL-Grid", "categories": ["task-planning", "grid"] },
                { "id": "Project-SSAL-Grid", "name": "Project SAL Grid", "icon": "◈", "path": "Project-SSAL-Grid", "categories": ["manual", "supabase", "viewer"] }
            ],
            "prepStages": [
                { "id": "P1_사업계획", "name": "사업계획", "icon": "○", "path": "P1_사업계획", "categories": ["0-1_Vision_Mission", "0-2_Market_Analysis", "0-3_Business_Model"] },
                { "id": "P2_프로젝트_기획", "name": "프로젝트 기획", "icon": "○", "path": "P2_프로젝트_기획", "categories": ["1-1_Project_Plan", "1-2_Requirements", "1-3_User_Flows", "1-4_Workflows", "1-5_Design_System", "1-6_UI_UX_Mockup"] }
            ],
            "executionStages": [
                { "id": "S1", "name": "프로토타입 제작", "path": "P3_프로토타입_제작", "areas": ["Documentation", "Design", "Frontend", "Database"] },
                { "id": "S2", "name": "개발 준비", "path": "S1_개발_준비", "areas": ["Documentation", "Backend_Infra", "Database", "Security"] },
                { "id": "S3", "name": "개발 1차", "path": "S2_개발-1차", "areas": ["Documentation", "Design", "Frontend", "Backend_Infra", "Backend_APIs", "Database", "Security", "Testing", "DevOps", "External", "Content_System"] },
                { "id": "S4", "name": "개발 2차", "path": "S3_개발-2차", "areas": ["Documentation", "Design", "Frontend", "Backend_Infra", "Backend_APIs", "Database", "Security", "Testing", "DevOps", "External", "Content_System"] },
                { "id": "S5", "name": "개발 3차", "path": "S4_개발-3차", "areas": ["Documentation", "Design", "Frontend", "Backend_Infra", "Backend_APIs", "Database", "Security", "Testing", "DevOps", "External", "Content_System"] },
                { "id": "S6", "name": "개발 마무리", "path": "S5_개발_마무리", "areas": ["Documentation", "Design", "Frontend", "Backend_APIs", "Database", "Security", "Testing", "DevOps", "External", "Content_System"] }
            ]
        };

        // Load sidebar structure
        function loadSidebarStructure() {
            console.log('✅ Sidebar structure loaded from embedded data');
            renderSidebarFromJSON(SIDEBAR_STRUCTURE);
        }

        // Render sidebar from JSON data
        function renderSidebarFromJSON(data) {
            const processListContainer = document.querySelector('.process-list');
            if (!processListContainer) {
                console.error('❌ .process-list container not found');
                return;
            }

            // Clear existing content
            processListContainer.innerHTML = '';

            data.structure.forEach((phase, index) => {
                const phaseHTML = generatePhaseHTML(phase, index);
                processListContainer.insertAdjacentHTML('beforeend', phaseHTML);
            });

            console.log('✅ Sidebar rendered from JSON');
        }

        // Generate HTML for a phase
        function generatePhaseHTML(phase, index) {
            const progress = 0; // Default progress
            const status = index === 0 ? 'completed' : index === 1 ? 'active' : '';

            let html = `
                <div class="process-item">
                    <div class="process-major ${status}" onclick="toggleProcess(this)" data-progress="${progress}">
                        <div class="process-header">
                            <span class="process-name">${phase.name}</span>
                            <span class="process-arrow">▶</span>
                        </div>
                        <div class="process-progress-container">
                            <div class="process-progress">
                                <div class="process-progress-fill" style="width: ${progress}%"></div>
                            </div>
                            <span class="process-percent">${progress}%</span>
                        </div>
                    </div>
                    <div class="process-small-list">`;

            // Direct items (소분류 directly under phase)
            if (phase.items) {
                phase.items.forEach(item => {
                    html += generateDirectItemHTML(item, phase.id);
                });
            }

            // Categories (중분류)
            if (phase.categories) {
                phase.categories.forEach(category => {
                    html += generateCategoryHTML(category, phase.id);
                });
            }

            html += `
                    </div>
                </div>`;

            return html;
        }

        // Generate HTML for direct items (소분류 - phase 직속)
        function generateDirectItemHTML(item, phaseId) {
            return `
                <div class="process-small" onclick="loadTemplate('${item.id}')" ondblclick="openFolder('${phaseId}/${item.id}'); event.stopPropagation();" title="${item.name_ko}">
                    <div class="process-small-content">
                        <span class="process-small-bullet">▪</span>
                        <span>${item.name_en}</span>
                    </div>
                </div>`;
        }

        // Generate HTML for a category (중분류)
        function generateCategoryHTML(category, phaseId) {
            let html = `
                <div class="process-small" onclick="loadTemplate('${category.id}'); toggleProcessTiny(this)" ondblclick="openFolder('${phaseId}/${category.id}'); event.stopPropagation();" title="${category.name_ko}">
                    <div class="process-small-content">
                        <span style="font-weight: 600;">${category.name_en}</span>
                    </div>
                    <span class="process-small-arrow">▼</span>
                </div>
                <div class="process-tiny-list">`;

            if (category.items) {
                category.items.forEach(item => {
                    html += `
                    <div class="process-tiny" title="${item.name_ko}">
                        <span style="opacity: 0.5; margin-right: 4px;">▫</span>
                        <span>${item.name_en}</span>
                    </div>`;
                });
            }

            html += `</div>`;
            return html;
        }

        // Load sidebar on page load
        document.addEventListener('DOMContentLoaded', () => {
            // loadSidebarStructure(); // ❌ 비활성화 - HTML에 직접 작성된 진행률(55%) 사용
            console.log('✅ Using static HTML structure with progress data');
            // updateProgressBackgrounds(); // ❌ 제거 - CSS에서 3단계 색상 처리
        });

        // Toggle process prep sub-items (준비단계 ○)
        function toggleProcessPrep(el) {
            const item = el.parentElement;
            const smallList = item.querySelector('.process-small-list');
            const arrow = el.querySelector('.process-arrow');

            if (smallList) {
                smallList.classList.toggle('expanded');
                if (arrow) {
                    arrow.classList.toggle('expanded');
                }
            }
        }

        // Toggle process sub-items
        function toggleProcess(el) {
            const item = el.parentElement;
            const smallList = item.querySelector('.process-small-list');
            const arrow = el.querySelector('.process-arrow');

            console.log('toggleProcess called', { item, smallList, arrow });

            if (smallList) {
                const wasExpanded = smallList.classList.contains('expanded');
                smallList.classList.toggle('expanded');
                console.log('smallList toggled, now expanded:', !wasExpanded);

                if (arrow) {
                    arrow.classList.toggle('expanded');
                }
            }

            document.querySelectorAll('.process-major').forEach(major => {
                if (major !== el) major.classList.remove('active');
            });
            if (!el.classList.contains('completed')) {
                el.classList.toggle('active');
            }
        }

        // Toggle knowledge sub-items (2nd level)
        function toggleKnowledge(el) {
            const item = el.parentElement;
            const mediumList = item.querySelector('.knowledge-medium-list');
            const arrow = el.querySelector('.knowledge-arrow');

            console.log('toggleKnowledge called', { item, mediumList, arrow });

            if (mediumList) {
                const wasExpanded = mediumList.classList.contains('expanded');
                mediumList.classList.toggle('expanded');
                console.log('mediumList toggled, now expanded:', !wasExpanded);

                if (arrow) {
                    arrow.classList.toggle('expanded');
                }
            }
        }

        // Toggle knowledge small items (3rd level)
        function toggleKnowledgeSmall(el) {
            const nextSibling = el.nextElementSibling;
            const arrow = el.querySelector('.knowledge-medium-arrow');

            if (nextSibling && nextSibling.classList.contains('knowledge-small-list')) {
                nextSibling.classList.toggle('expanded');
                if (arrow) {
                    arrow.classList.toggle('expanded');
                }
            }
        }

        // Toggle process tiny items (3rd level)
        function toggleProcessTiny(el) {
            const nextSibling = el.nextElementSibling;
            const arrow = el.querySelector('.process-small-arrow');

            if (nextSibling && nextSibling.classList.contains('process-tiny-list')) {
                nextSibling.classList.toggle('expanded');
                if (arrow) {
                    arrow.classList.toggle('expanded');
                }
            }
        }

        // Clear editor - textEditor 비우고 Default 안내문 복원
        function clearEditor() {
            if (confirm('Control Desk 내용을 초기화하시겠습니까?')) {
                document.getElementById('textEditor').value = '';
                // Default 안내문 다시 표시
                loadGuideToWorkspace('Default');
            }
        }

        // Show status message
        function showStatus(message, type = 'info', duration = 3000) {
            const status = document.getElementById('serverStatus');
            status.textContent = message;
            status.className = 'server-status show ' + type;

            setTimeout(() => {
                status.className = 'server-status';
            }, duration);
        }

        // Order Sheet Template Loading
        let ordersheetTemplates = null;

        // Load templates on page load
        async function loadOrderSheetTemplates() {
            try {
                const response = await fetch('http://localhost:3030/ordersheet-templates');
                if (!response.ok) {
                    console.error('Failed to load ordersheet templates');
                    return;
                }
                const data = await response.json();
                if (data.success) {
                    ordersheetTemplates = data.templates;
                    console.log('✅ Order Sheet templates loaded:', Object.keys(ordersheetTemplates).length);
                }
            } catch (error) {
                console.error('Error loading ordersheet templates:', error);
            }
        }

        // Load template when category is clicked
        async function loadTemplate(categoryKey) {
            if (!ordersheetTemplates || !ordersheetTemplates[categoryKey]) {
                console.warn('Template not found for:', categoryKey);
                // 템플릿이 없는 경우 안내 메시지 표시
                showStatus(`📂 "${categoryKey}" 폴더를 열려면 더블클릭하세요 (Antigravity 또는 VS Code 선택)`, 'info');
                return;
            }

            const template = ordersheetTemplates[categoryKey];
            const editor = document.getElementById('textEditor');

            // Ask user if they want to replace current content
            if (editor.value.trim() && !(await customConfirm('Replace current Control Desk content with this template?'))) {
                return;
            }

            editor.value = convertMarkdownToPlainText(template.template);
            showStatus(`✅ "${template.name}" 템플릿이 로드되었습니다`, 'success');
        }

        // Load welcome message on page load
        // Load welcome message on page load (서버에서 마크다운 파일 로드)
        async function loadWelcomeMessage() {
            const editor = document.getElementById('textEditor');

            try {
                // Bridge 서버에서 안내문 로드
                const guideName = encodeURIComponent('Welcome_시작안내');
                const response = await fetch(`http://localhost:3030/guide/${guideName}`);

                if (response.ok) {
                    const data = await response.json();
                    if (data.success && data.markdown) {
                        editor.value = convertMarkdownToPlainText(data.markdown);
                        console.log('✅ Welcome 안내문 로드 완료');
                        return;
                    }
                }

                // 서버 연결 실패 시 기본 메시지
                editor.value = `# 🚀 SSAL Works Dashboard

## 환영합니다!

Bridge 서버에 연결할 수 없습니다.
서버가 실행 중인지 확인해주세요.

**서버 시작 방법:**
\`\`\`bash
cd Human_ClaudeCode_Bridge
node inbox_server.js
\`\`\`

서버가 실행되면 새로고침 해주세요.
`;
                console.warn('⚠️ Bridge 서버 연결 실패, 기본 메시지 표시');

            } catch (error) {
                console.error('❌ Welcome 안내문 로드 실패:', error);
                editor.value = `# 🚀 SSAL Works Dashboard

## 서버 연결 오류

Bridge 서버(localhost:3030)에 연결할 수 없습니다.

**해결 방법:**
1. Human_ClaudeCode_Bridge 폴더로 이동
2. \`node inbox_server.js\` 실행
3. 페이지 새로고침
`;
            }
        }


        // 마크다운을 일반 텍스트로 변환하는 함수
        function convertMarkdownToPlainText(md) {
            if (!md) return '';
            let text = md;

            // 코드 블록 제거 (내용만 유지)
            text = text.replace(/```[\s\S]*?```/g, (match) => {
                return match.replace(/```\w*\n?/g, '').replace(/```/g, '');
            });

            // 인라인 코드 제거 (내용만 유지)
            text = text.replace(/`([^`]+)`/g, '$1');

            // 헤딩 기호 제거 (# 제거)
            text = text.replace(/^#{1,6}\s+/gm, '');

            // 굵게 기호 제거 (**text** -> text)
            text = text.replace(/\*\*([^*]+)\*\*/g, '$1');

            // 기울임 기호 제거 (*text* -> text)
            text = text.replace(/\*([^*]+)\*/g, '$1');

            // 밑줄 기울임 제거 (_text_ -> text)
            text = text.replace(/_([^_]+)_/g, '$1');

            // 링크 변환 ([text](url) -> text)
            text = text.replace(/\[([^\]]+)\]\([^)]+\)/g, '$1');

            // 이미지 제거
            text = text.replace(/!\[([^\]]*)\]\([^)]+\)/g, '');

            // 수평선 제거
            text = text.replace(/^[-*_]{3,}$/gm, '');

            // 블록인용 기호 제거 (> 제거)
            text = text.replace(/^>\s?/gm, '');

            // 순서없는 목록 기호 변환 (- 또는 * -> •)
            text = text.replace(/^[\s]*[-*]\s+/gm, '• ');

            return text.trim();
        }

        // 안내문 로드 함수 (다양한 안내문 지원)
        async function loadGuide(guideName) {
            const editor = document.getElementById('textEditor');

            try {
                const encodedName = encodeURIComponent(guideName);
                const response = await fetch(`http://localhost:3030/guide/${encodedName}`);

                if (response.ok) {
                    const data = await response.json();
                    if (data.success && data.markdown) {
                        editor.value = convertMarkdownToPlainText(data.markdown);
                        showStatus(`✅ "${data.name}" 안내문 로드 완료`, 'success');
                        return true;
                    }
                }

                showStatus(`❌ "${guideName}" 안내문을 찾을 수 없습니다`, 'error');
                return false;

            } catch (error) {
                console.error('안내문 로드 실패:', error);
                showStatus('❌ 서버 연결 실패', 'error');
                return false;
            }
        }

        // Order Sheet 템플릿 로드 함수 (서버에서)
        async function loadOrderTemplate(category, templateName) {
            const editor = document.getElementById('textEditor');

            try {
                const encodedCategory = encodeURIComponent(category);
                const encodedTemplate = encodeURIComponent(templateName);
                const response = await fetch(`http://localhost:3030/order-template/${encodedCategory}/${encodedTemplate}`);

                if (response.ok) {
                    const data = await response.json();
                    if (data.success && data.markdown) {
                        // 현재 내용이 있으면 확인
                        if (editor.value.trim() && !(await customConfirm('Replace Control Desk content with template?'))) {
                            return false;
                        }

                        editor.value = convertMarkdownToPlainText(data.markdown);
                        showStatus(`✅ "${data.name}" 템플릿 로드 완료`, 'success');
                        return true;
                    }
                }

                showStatus(`❌ "${templateName}" 템플릿을 찾을 수 없습니다`, 'error');
                return false;

            } catch (error) {
                console.error('템플릿 로드 실패:', error);
                showStatus('❌ 서버 연결 실패', 'error');
                return false;
            }
        }

        // 현재 선택된 단계 데이터 저장
        let currentStageData = null;

        // ========== 전체 Stage 데이터 정의 ==========
        const STAGE_DATA = {
            // ===== 예시 프로젝트 (SSAL Works 예시) =====
            'ssalworks_example': {
                stageId: 'ssalworks_example',
                stageName: 'SSAL Works 예시 프로젝트',
                hasAction: true,
                confirmMessage: 'Google Drive에서 SSAL Works 프로젝트를 열람하시겠습니까?',
                orderSheetAfterExecute: '',
                orderSheet: '',
                guideUrl: 'guides/SSALWORKS_Briefing.html',
                externalUrl: 'https://drive.google.com/drive/folders/1ZQjVjQ5tT9qYQH9p6ZQQj6Zj9Q6ZQQj6'
            },

            // ===== 완료된 프로젝트 수정 =====
            'completed_project_revision': {
                stageId: 'completed_project_revision',
                stageName: '완료 프로젝트 수정',
                hasAction: true,
                confirmMessage: 'Order Sheet를 Control Desk에 로드하시겠습니까?',
                orderSheetAfterExecute: '',
                orderSheet: '',
                guideUrl: 'guides/Completed_Project_Revision_Briefing.html',
                orderSheetUrl: 'templates/Completed_Project_Revision_OrderSheet.md'
            },

            // ===== 포트폴리오: PoliticianFinder =====
            'politician_finder': {
                stageId: 'politician_finder',
                stageName: 'PoliticianFinder 안내',
                hasAction: true,
                confirmMessage: '',
                orderSheetAfterExecute: '',
                orderSheet: '',
                guideUrl: 'guides/Politician_Finder_Briefing.html',
                orderSheetUrl: 'templates/Completed_Project_Revision_OrderSheet.md'
            },

            // ===== ☆ 특별단계: 디렉토리 구조 생성 =====
            'dir_structure': {
                stageId: 'dir_structure',
                stageName: '작업 디렉토리 구조 생성',
                hasAction: true,  // 실제 행위 - [예]/[아니오] 버튼
                confirmMessage: '디렉토리 구조를 위와 같이 생성하시겠습니까?',
                orderSheetAfterExecute: `# 추가 Order Sheet - 디렉토리 구조 생성

## 기본 정보
- **Order ID**: OS-SP-01-A-002
- **작성일**: ${new Date().toISOString().split('T')[0]}
- **관련 작업**: ☆ 디렉토리 구조 생성

---

## ✅ 자동 실행된 항목

- [x] 사업계획 폴더 (0-1 ~ 0-3)
- [x] 프로젝트_기획 폴더 (1-1 ~ 1-6)
- [x] 프로토타입_제작 폴더
- [x] 개발_준비 폴더
- [x] 개발_1차~3차 폴더
- [x] 개발_마무리 폴더
- [x] Human_ClaudeCode_Bridge 폴더

---

## 📝 추가 요청사항

[추가로 필요한 작업을 작성하세요]

`,
                orderSheet: `# Order Sheet - 디렉토리 구조 생성

## 기본 정보
- **Order ID**: OS-SP-01-A-001
- **단계 유형**: ☆ 특별단계
- **작성일**: ${new Date().toISOString().split('T')[0]}

---

## 상세 요구사항

### 프로젝트 기본 정보
- **프로젝트 이름**: [프로젝트명 입력]
- **프로젝트 경로**: [경로 입력]

### 생성할 디렉토리 구조
- [ ] 사업계획 폴더 (0-1 ~ 0-3)
- [ ] 프로젝트_기획 폴더 (1-1 ~ 1-6)
- [ ] 프로토타입_제작 폴더
- [ ] 개발_준비 폴더
- [ ] 개발_1차~3차 폴더
- [ ] 개발_마무리 폴더
- [ ] Human_ClaudeCode_Bridge 폴더

---

## 추가 지시사항

[추가 요구사항이 있으면 여기에 작성]
`,
                guideUrl: 'guides/P0-1_Briefing.html',
                orderSheetUrl: 'templates/P0-1_OrderSheet.md'
            },

            // ===== P0 하위 항목 =====
            'project_directory_structure': {
                stageId: 'project_directory_structure',
                stageName: 'Project Directory Structure',
                hasAction: true,
                confirmMessage: '',
                orderSheetAfterExecute: '',
                orderSheet: '',
                guideUrl: 'guides/P0-1_Briefing.html',
                orderSheetUrl: 'templates/P0-1_OrderSheet.md'
            },

            'project_status': {
                stageId: 'project_status',
                stageName: 'Project Status',
                hasAction: true,
                confirmMessage: '',
                orderSheetAfterExecute: '',
                orderSheet: '',
                guideUrl: 'guides/P0-2_Briefing.html',
                orderSheetUrl: 'templates/P0-2_OrderSheet.md'
            },

            // ===== P2 하위 항목 =====
            'service_intro': {
                stageId: 'service_intro',
                stageName: 'Service Introduction',
                hasAction: false,
                confirmMessage: '',
                orderSheetAfterExecute: '',
                orderSheet: '',
                guideUrl: 'guides/P2-5_Briefing.html'
            },

            // ===== ☆ 특별단계: SAL Grid 생성 =====
            'sal_grid': {
                stageId: 'sal_grid',
                stageName: 'Project SAL Grid 생성',
                hasAction: true,  // 실제 행위 - [예]/[아니오] 버튼
                confirmMessage: 'SAL Grid를 위와 같이 생성하시겠습니까?',
                orderSheetAfterExecute: `# 추가 Order Sheet - SAL Grid 생성

## ✅ 자동 실행된 항목

- [x] SAL Grid 기본 구조 생성
- [x] Stage(단계) 정의
- [x] Area(영역) 정의
- [x] Level(레벨) 정의

---

## 📝 추가 요청사항

[추가로 필요한 작업을 작성하세요]

`,
                orderSheet: `# Order Sheet - SAL Grid 생성

## 기본 정보
- **Order ID**: OS-SP-02-A-001
- **단계 유형**: ☆ 특별단계
- **작성일**: ${new Date().toISOString().split('T')[0]}

---

## SAL Grid 설정

### Stage (단계)
- [ ] S1: 프로토타입 제작
- [ ] S2: 개발 준비
- [ ] S3: 개발 1차
- [ ] S4: 개발 2차
- [ ] S5: 개발 3차
- [ ] S6: 개발 마무리

### Area (영역)
- [ ] Frontend
- [ ] Backend
- [ ] Database
- [ ] DevOps

### Level (레벨)
- [ ] L1: 기본
- [ ] L2: 중급
- [ ] L3: 고급

---

## 추가 지시사항

[추가 요구사항이 있으면 여기에 작성]
`,
                guideUrl: 'guides/S0-2_Briefing.html',
                orderSheetUrl: 'templates/S0-1_OrderSheet.md'
            },

            // ===== SAL Grid 하위 항목 =====
            'sal_grid_manual': {
                stageId: 'sal_grid_manual',
                stageName: 'Manual',
                hasAction: true,
                confirmMessage: 'Manual 업데이트 작업을 진행하시겠습니까?',
                orderSheetAfterExecute: '',
                orderSheet: '',
                guideUrl: 'guides/S0-1_Briefing.html',
                orderSheetUrl: 'templates/S0-1_OrderSheet.md'
            },

            'sal_grid_method': {
                stageId: 'sal_grid_method',
                stageName: 'Method',
                hasAction: true,
                confirmMessage: 'Method 선택 작업을 진행하시겠습니까?',
                orderSheetAfterExecute: '',
                orderSheet: '',
                guideUrl: 'guides/S0-3_Briefing.html',
                orderSheetUrl: 'templates/S0-3_OrderSheet.md'
            },

            'sal_grid_viewer': {
                stageId: 'sal_grid_viewer',
                stageName: 'Viewer',
                hasAction: true,
                confirmMessage: 'Viewer 작업을 진행하시겠습니까?',
                orderSheetAfterExecute: '',
                orderSheet: '',
                guideUrl: 'guides/S0-4_Briefing.html',
                orderSheetUrl: 'templates/S0-4_OrderSheet.md'
            },

            // ===== ◈ SAL Grid (Task 기획 + Grid 생성) =====
            'ssal_grid': {
                stageId: 'ssal_grid',
                stageName: 'SAL Grid',
                hasAction: true,
                confirmMessage: 'SAL Grid 작업을 진행하시겠습니까?',
                orderSheetAfterExecute: '',
                orderSheet: '',
                guideUrl: 'guides/S0-1_Briefing.html',
                orderSheetUrl: 'templates/S0-1_OrderSheet.md'
            },

            // ===== ○ 사업계획: 0-1 시장조사 =====
            'biz_0_1': {
                stageId: 'biz_0_1',
                stageName: '0-1 시장조사',
                hasAction: true,
                confirmMessage: '시장조사를 위와 같이 진행하시겠습니까?',
                orderSheetAfterExecute: `# 추가 Order Sheet - 시장조사

## ✅ 자동 실행된 항목

- [x] 시장 규모 조사
- [x] 타겟 고객 분석
- [x] 트렌드 분석

---

## 📝 추가 요청사항

[추가로 필요한 조사 항목을 작성하세요]

`,
                orderSheet: `# Order Sheet - 시장조사

## 기본 정보
- **Order ID**: OS-0-1-A-001
- **단계 유형**: ○ 사업계획
- **작성일**: ${new Date().toISOString().split('T')[0]}

---

## 조사 항목

- [ ] 시장 규모 조사
- [ ] 타겟 고객 분석
- [ ] 트렌드 분석
- [ ] 진입 장벽 분석

---

## 추가 지시사항

[추가 요구사항이 있으면 여기에 작성]
`,
                guideUrl: 'guides/P1-1_Briefing.html',
                orderSheetUrl: 'templates/P1-1_OrderSheet.md'
            },

            // ===== ○ 사업계획: 0-2 경쟁분석 =====
            'biz_0_2': {
                stageId: 'biz_0_2',
                stageName: '0-2 경쟁분석',
                hasAction: true,
                confirmMessage: '경쟁분석을 위와 같이 진행하시겠습니까?',
                orderSheetAfterExecute: `# 추가 Order Sheet - 경쟁분석

## ✅ 자동 실행된 항목

- [x] 경쟁사 목록 조사
- [x] 경쟁사 강약점 분석
- [x] 차별화 포인트 도출

---

## 📝 추가 요청사항

[추가로 필요한 분석 항목을 작성하세요]

`,
                orderSheet: `# Order Sheet - 경쟁분석

## 기본 정보
- **Order ID**: OS-0-2-A-001
- **단계 유형**: ○ 사업계획
- **작성일**: ${new Date().toISOString().split('T')[0]}

---

## 분석 항목

- [ ] 경쟁사 목록 조사
- [ ] 경쟁사 강약점 분석
- [ ] 차별화 포인트 도출

---

## 추가 지시사항

[추가 요구사항이 있으면 여기에 작성]
`,
                guideUrl: 'guides/P1-2_Briefing.html',
                orderSheetUrl: 'templates/P1-2_OrderSheet.md'
            },

            // ===== ○ 사업계획: 0-3 사업계획서 =====
            'biz_0_3': {
                stageId: 'biz_0_3',
                stageName: '0-3 사업계획서',
                hasAction: true,
                confirmMessage: '사업계획서를 위와 같이 작성하시겠습니까?',
                orderSheetAfterExecute: `# 추가 Order Sheet - 사업계획서

## ✅ 자동 실행된 항목

- [x] 사업 개요 작성
- [x] 수익 모델 정의
- [x] 마케팅 전략 수립

---

## 📝 추가 요청사항

[추가로 필요한 항목을 작성하세요]

`,
                orderSheet: `# Order Sheet - 사업계획서

## 기본 정보
- **Order ID**: OS-0-3-A-001
- **단계 유형**: ○ 사업계획
- **작성일**: ${new Date().toISOString().split('T')[0]}

---

## 작성 항목

- [ ] 사업 개요
- [ ] 수익 모델
- [ ] 마케팅 전략
- [ ] 재무 계획

---

## 추가 지시사항

[추가 요구사항이 있으면 여기에 작성]
`,
                guideUrl: 'guides/P1-3_Briefing.html',
                orderSheetUrl: 'templates/P1-3_OrderSheet.md'
            },

            // ===== ○ 프로젝트 기획: 1-1 ~ 1-6 =====
            'plan_1_1': {
                stageId: 'plan_1_1',
                stageName: '1-1 Project Plan',
                hasAction: true,
                confirmMessage: 'Project Plan을 위와 같이 작성하시겠습니까?',
                orderSheetAfterExecute: `# 추가 Order Sheet - Project Plan

## ✅ 자동 실행된 항목

- [x] 프로젝트 목표 정의
- [x] 범위 설정
- [x] 일정 계획

---

## 📝 추가 요청사항

[추가 요청사항을 작성하세요]

`,
                orderSheet: `# Order Sheet - Project Plan

## 기본 정보
- **Order ID**: OS-1-1-A-001
- **단계 유형**: ○ 프로젝트 기획
- **작성일**: ${new Date().toISOString().split('T')[0]}

---

## 작성 항목

- [ ] 프로젝트 목표
- [ ] 범위 설정
- [ ] 일정 계획
- [ ] 리소스 계획

---

## 추가 지시사항

[추가 요구사항이 있으면 여기에 작성]
`,
                guideUrl: 'guides/P2-1_Briefing.html',
                orderSheetUrl: 'templates/P2-1_OrderSheet.md'
            },

            'plan_1_2': {
                stageId: 'plan_1_2',
                stageName: '1-2 Requirements',
                hasAction: true,
                confirmMessage: '요구사항을 위와 같이 정의하시겠습니까?',
                orderSheetAfterExecute: `# 추가 Order Sheet - Requirements

## ✅ 자동 실행된 항목

- [x] 기능 요구사항 정의
- [x] 비기능 요구사항 정의

---

## 📝 추가 요청사항

[추가 요청사항을 작성하세요]

`,
                orderSheet: `# Order Sheet - Requirements

## 기본 정보
- **Order ID**: OS-1-2-A-001
- **작성일**: ${new Date().toISOString().split('T')[0]}

---

## 기능 요구사항

- [ ] [기능 1]
- [ ] [기능 2]

## 비기능 요구사항

- [ ] 성능
- [ ] 보안

---

## 추가 지시사항

[추가 요구사항이 있으면 여기에 작성]
`,
                guideUrl: 'guides/P2-2-1_Briefing.html',
                orderSheetUrl: 'templates/P2-2-1_OrderSheet.md'
            },

            'plan_1_3': {
                stageId: 'plan_1_3',
                stageName: '1-3 Architecture',
                hasAction: true,
                confirmMessage: '아키텍처를 위와 같이 설계하시겠습니까?',
                orderSheetAfterExecute: `# 추가 Order Sheet - Architecture

## ✅ 자동 실행된 항목

- [x] 시스템 아키텍처 설계
- [x] 기술 스택 선정

---

## 📝 추가 요청사항

[추가 요청사항을 작성하세요]

`,
                orderSheet: `# Order Sheet - Architecture

## 기본 정보
- **Order ID**: OS-1-3-A-001
- **작성일**: ${new Date().toISOString().split('T')[0]}

---

## 설계 항목

- [ ] 시스템 아키텍처
- [ ] 기술 스택 선정
- [ ] 인프라 설계

---

## 추가 지시사항

[추가 요구사항이 있으면 여기에 작성]
`,
                guideUrl: 'guides/P2-2-2_Briefing.html',
                orderSheetUrl: 'templates/P2-2-2_OrderSheet.md'
            },

            'plan_1_4': {
                stageId: 'plan_1_4',
                stageName: '1-4 UI/UX',
                hasAction: true,
                confirmMessage: 'UI/UX를 위와 같이 설계하시겠습니까?',
                orderSheetAfterExecute: `# 추가 Order Sheet - UI/UX

## ✅ 자동 실행된 항목

- [x] 와이어프레임 작성
- [x] UI 디자인

---

## 📝 추가 요청사항

[추가 요청사항을 작성하세요]

`,
                orderSheet: `# Order Sheet - UI/UX

## 기본 정보
- **Order ID**: OS-1-4-A-001
- **작성일**: ${new Date().toISOString().split('T')[0]}

---

## 설계 항목

- [ ] 와이어프레임
- [ ] UI 디자인
- [ ] UX 플로우

---

## 추가 지시사항

[추가 요구사항이 있으면 여기에 작성]
`,
                guideUrl: 'guides/P2-3-1_Briefing.html',
                orderSheetUrl: 'templates/P2-3-1_OrderSheet.md'
            },

            'plan_1_5': {
                stageId: 'plan_1_5',
                stageName: '1-5 DB Design',
                hasAction: true,
                confirmMessage: 'DB를 위와 같이 설계하시겠습니까?',
                orderSheetAfterExecute: `# 추가 Order Sheet - DB Design

## ✅ 자동 실행된 항목

- [x] ERD 작성
- [x] 테이블 설계

---

## 📝 추가 요청사항

[추가 요청사항을 작성하세요]

`,
                orderSheet: `# Order Sheet - DB Design

## 기본 정보
- **Order ID**: OS-1-5-A-001
- **작성일**: ${new Date().toISOString().split('T')[0]}

---

## 설계 항목

- [ ] ERD 작성
- [ ] 테이블 설계
- [ ] 인덱스 설계

---

## 추가 지시사항

[추가 요구사항이 있으면 여기에 작성]
`,
                guideUrl: 'guides/P2-4_Briefing.html',
                orderSheetUrl: 'templates/P2-4_OrderSheet.md'
            },

            'plan_1_6': {
                stageId: 'plan_1_6',
                stageName: '1-6 API Design',
                hasAction: true,
                confirmMessage: 'API를 위와 같이 설계하시겠습니까?',
                orderSheetAfterExecute: `# 추가 Order Sheet - API Design

## ✅ 자동 실행된 항목

- [x] API 엔드포인트 정의
- [x] API 명세서 작성

---

## 📝 추가 요청사항

[추가 요청사항을 작성하세요]

`,
                orderSheet: `# Order Sheet - API Design

## 기본 정보
- **Order ID**: OS-1-6-A-001
- **작성일**: ${new Date().toISOString().split('T')[0]}

---

## 설계 항목

- [ ] API 엔드포인트 정의
- [ ] 요청/응답 형식
- [ ] 인증 방식

---

## 추가 지시사항

[추가 요구사항이 있으면 여기에 작성]
`,
                guideUrl: 'guides/P2-2-3_Briefing.html',
                orderSheetUrl: 'templates/P2-2-3_OrderSheet.md'
            },

            // ===== P2 추가 단계 =====
            'plan_mockup': {
                stageId: 'plan_mockup',
                stageName: '목업 제작',
                hasAction: true,
                confirmMessage: '목업을 위와 같이 제작하시겠습니까?',
                orderSheetAfterExecute: `# 추가 Order Sheet - 목업 제작

## ✅ 자동 실행된 항목

- [x] 화면 목업 디자인
- [x] 레이아웃 구성

---

## 📝 추가 요청사항

[추가 요청사항을 작성하세요]

`,
                orderSheet: `# Order Sheet - 목업 제작

## 기본 정보
- **Order ID**: OS-P2-MK-001
- **작성일**: ${new Date().toISOString().split('T')[0]}

---

## 작업 항목

- [ ] 주요 화면 목업 디자인
- [ ] 레이아웃 구성
- [ ] 반응형 디자인 고려

---

## 추가 지시사항

[추가 요구사항이 있으면 여기에 작성]
`,
                guideUrl: 'guides/P2-3-2_Briefing.html',
                orderSheetUrl: 'templates/P2-3-2_OrderSheet.md'
            },

            'plan_prototype': {
                stageId: 'plan_prototype',
                stageName: '프로토타입 설계',
                hasAction: true,
                confirmMessage: '프로토타입을 위와 같이 설계하시겠습니까?',
                orderSheetAfterExecute: `# 추가 Order Sheet - 프로토타입 설계

## ✅ 자동 실행된 항목

- [x] 인터랙션 정의
- [x] 화면 전환 흐름

---

## 📝 추가 요청사항

[추가 요청사항을 작성하세요]

`,
                orderSheet: `# Order Sheet - 프로토타입 설계

## 기본 정보
- **Order ID**: OS-P2-PT-001
- **작성일**: ${new Date().toISOString().split('T')[0]}

---

## 작업 항목

- [ ] 인터랙션 정의
- [ ] 화면 전환 흐름
- [ ] 사용성 테스트 계획

---

## 추가 지시사항

[추가 요구사항이 있으면 여기에 작성]
`,
                guideUrl: 'guides/P2-3-3_Briefing.html',
                orderSheetUrl: 'templates/P2-3-3_OrderSheet.md'
            },

            // ===== P3 추가 단계 =====
            'proto_pages': {
                stageId: 'proto_pages',
                stageName: '프론트엔드 페이지 개발',
                hasAction: true,
                confirmMessage: '페이지를 위와 같이 개발하시겠습니까?',
                orderSheetAfterExecute: `# 추가 Order Sheet - 프론트엔드 페이지

## ✅ 자동 실행된 항목

- [x] 페이지 컴포넌트 개발
- [x] 상태 관리 구현

---

## 📝 추가 요청사항

[추가 요청사항을 작성하세요]

`,
                orderSheet: `# Order Sheet - 프론트엔드 페이지 개발

## 기본 정보
- **Order ID**: OS-P3-FP-001
- **작성일**: ${new Date().toISOString().split('T')[0]}

---

## 작업 항목

- [ ] 페이지 컴포넌트 개발
- [ ] 상태 관리 구현
- [ ] API 연동 준비

---

## 추가 지시사항

[추가 요구사항이 있으면 여기에 작성]
`,
                guideUrl: 'guides/P3-1-2_Briefing.html',
                orderSheetUrl: 'templates/P3-1-2_OrderSheet.md'
            },

            'proto_database': {
                stageId: 'proto_database',
                stageName: '데이터베이스 구축',
                hasAction: true,
                confirmMessage: '데이터베이스를 위와 같이 구축하시겠습니까?',
                orderSheetAfterExecute: `# 추가 Order Sheet - 데이터베이스 구축

## ✅ 자동 실행된 항목

- [x] 테이블 생성
- [x] RLS 정책 적용

---

## 📝 추가 요청사항

[추가 요청사항을 작성하세요]

`,
                orderSheet: `# Order Sheet - 데이터베이스 구축

## 기본 정보
- **Order ID**: OS-P3-DB-001
- **작성일**: ${new Date().toISOString().split('T')[0]}

---

## 작업 항목

- [ ] 테이블 생성 SQL 작성
- [ ] RLS 정책 적용
- [ ] 초기 데이터 투입

---

## 추가 지시사항

[추가 요구사항이 있으면 여기에 작성]
`,
                guideUrl: 'guides/P3-2_Briefing.html',
                orderSheetUrl: 'templates/P3-2_OrderSheet.md'
            },

            'proto_scripts': {
                stageId: 'proto_scripts',
                stageName: '스크립트 개발',
                hasAction: true,
                confirmMessage: '스크립트를 위와 같이 개발하시겠습니까?',
                orderSheetAfterExecute: `# 추가 Order Sheet - 스크립트 개발

## ✅ 자동 실행된 항목

- [x] 빌드 스크립트 작성
- [x] 유틸리티 함수 개발

---

## 📝 추가 요청사항

[추가 요청사항을 작성하세요]

`,
                orderSheet: `# Order Sheet - 스크립트 개발

## 기본 정보
- **Order ID**: OS-P3-SC-001
- **작성일**: ${new Date().toISOString().split('T')[0]}

---

## 작업 항목

- [ ] 빌드 스크립트 작성
- [ ] 데이터 마이그레이션 스크립트
- [ ] 유틸리티 함수 개발

---

## 추가 지시사항

[추가 요구사항이 있으면 여기에 작성]
`,
                guideUrl: 'guides/P3-3_Briefing.html',
                orderSheetUrl: 'templates/P3-3_OrderSheet.md'
            },

            // ===== S1 ~ S6 개발 단계 =====
            's1_prototype': {
                stageId: 's1_prototype',
                stageName: 'S1. 프로토타입 제작',
                hasAction: true,  // Order Sheet 로딩 버튼 표시
                confirmMessage: '프로토타입 제작을 위와 같이 진행하시겠습니까?',
                orderSheetAfterExecute: `# 추가 Order Sheet - 프로토타입 제작

## ✅ 자동 실행된 항목

- [x] 프로토타입 기본 구조 생성
- [x] 핵심 기능 구현

---

## 📝 추가 요청사항

[추가 요청사항을 작성하세요]

`,
                orderSheet: `# Order Sheet - S1. 프로토타입 제작

## 기본 정보
- **Order ID**: OS-S1-A-001
- **작성일**: ${new Date().toISOString().split('T')[0]}

---

## 작업 항목

- [ ] 프로토타입 기본 구조
- [ ] 핵심 기능 구현
- [ ] UI 프로토타입

---

## 추가 지시사항

[추가 요구사항이 있으면 여기에 작성]
`,
                guideUrl: 'guides/P3-1-1_Briefing.html',
                orderSheetUrl: 'templates/P3-1-1_OrderSheet.md'
            },

            's2_dev_prep': {
                stageId: 's2_dev_prep',
                stageName: 'S2. 개발 준비',
                hasAction: true,
                confirmMessage: '개발 준비를 위와 같이 진행하시겠습니까?',
                orderSheetAfterExecute: `# 추가 Order Sheet - 개발 준비

## ✅ 자동 실행된 항목

- [x] 개발 환경 구축
- [x] 프로젝트 초기 설정

---

## 📝 추가 요청사항

[추가 요청사항을 작성하세요]

`,
                orderSheet: `# Order Sheet - S2. 개발 준비

## 기본 정보
- **Order ID**: OS-S2-A-001
- **작성일**: ${new Date().toISOString().split('T')[0]}

---

## 작업 항목

- [ ] 개발 환경 구축
- [ ] 프로젝트 초기 설정
- [ ] CI/CD 파이프라인 구성

---

## 추가 지시사항

[추가 요구사항이 있으면 여기에 작성]
`,
                guideUrl: 'guides/S1_Briefing.html',
                orderSheetUrl: 'templates/S1_OrderSheet.md'
            },

            's3_dev_1': {
                stageId: 's3_dev_1',
                stageName: 'S2. 개발 1차',
                hasAction: true,
                confirmMessage: '개발 1차를 위와 같이 진행하시겠습니까?',
                orderSheetAfterExecute: `# 추가 Order Sheet - 개발 1차

## ✅ 자동 실행된 항목

- [x] 핵심 기능 개발
- [x] 기본 테스트

---

## 📝 추가 요청사항

[추가 요청사항을 작성하세요]

`,
                orderSheet: `# Order Sheet - S2. 개발 1차

## 기본 정보
- **Order ID**: OS-S2-A-001
- **작성일**: ${new Date().toISOString().split('T')[0]}

---

## 작업 항목

- [ ] 핵심 기능 개발
- [ ] 기본 테스트
- [ ] 코드 리뷰

---

## 추가 지시사항

[추가 요구사항이 있으면 여기에 작성]
`,
                guideUrl: 'guides/S2_Briefing.html',
                orderSheetUrl: 'templates/S2_OrderSheet.md'
            },

            's4_dev_2': {
                stageId: 's4_dev_2',
                stageName: 'S3. 개발 2차',
                hasAction: true,
                confirmMessage: '개발 2차를 위와 같이 진행하시겠습니까?',
                orderSheetAfterExecute: `# 추가 Order Sheet - 개발 2차

## ✅ 자동 실행된 항목

- [x] 추가 기능 개발
- [x] 통합 테스트

---

## 📝 추가 요청사항

[추가 요청사항을 작성하세요]

`,
                orderSheet: `# Order Sheet - S3. 개발 2차

## 기본 정보
- **Order ID**: OS-S3-A-001
- **작성일**: ${new Date().toISOString().split('T')[0]}

---

## 작업 항목

- [ ] 추가 기능 개발
- [ ] 통합 테스트
- [ ] 버그 수정

---

## 추가 지시사항

[추가 요구사항이 있으면 여기에 작성]
`,
                guideUrl: 'guides/S3_Briefing.html',
                orderSheetUrl: 'templates/S3_OrderSheet.md'
            },

            's5_dev_3': {
                stageId: 's5_dev_3',
                stageName: 'S4. 개발 3차',
                hasAction: true,
                confirmMessage: '개발 3차를 위와 같이 진행하시겠습니까?',
                orderSheetAfterExecute: `# 추가 Order Sheet - 개발 3차

## ✅ 자동 실행된 항목

- [x] 최종 기능 완성
- [x] 성능 최적화

---

## 📝 추가 요청사항

[추가 요청사항을 작성하세요]

`,
                orderSheet: `# Order Sheet - S4. 개발 3차

## 기본 정보
- **Order ID**: OS-S4-A-001
- **작성일**: ${new Date().toISOString().split('T')[0]}

---

## 작업 항목

- [ ] 최종 기능 완성
- [ ] 성능 최적화
- [ ] 보안 점검

---

## 추가 지시사항

[추가 요구사항이 있으면 여기에 작성]
`,
                guideUrl: 'guides/S4_Briefing.html',
                orderSheetUrl: 'templates/S4_OrderSheet.md'
            },

            's6_operation': {
                stageId: 's6_operation',
                stageName: 'S5. 개발 마무리',
                hasAction: true,
                confirmMessage: '개발 마무리 단계를 위와 같이 진행하시겠습니까?',
                orderSheetAfterExecute: `# 추가 Order Sheet - 개발 마무리

## ✅ 자동 실행된 항목

- [x] 배포
- [x] QA 점검

---

## 📝 추가 요청사항

[추가 요청사항을 작성하세요]

`,
                orderSheet: `# Order Sheet - S5. 개발 마무리

## 기본 정보
- **Order ID**: OS-S5-A-001
- **작성일**: ${new Date().toISOString().split('T')[0]}

---

## 작업 항목

- [ ] 배포
- [ ] QA 점검
- [ ] 안정화

---

## 추가 지시사항

[추가 요구사항이 있으면 여기에 작성]
`,
                guideUrl: 'guides/S5_Briefing.html',
                orderSheetUrl: 'templates/S5_OrderSheet.md'
            }
        };

        // 프로젝트 진행률 로드 (DB에서)
        // 모든 프로젝트는 project_phase_progress 테이블에서 진행률 로드 (project_id 기준)
        async function loadProjectProgress(projectName) {
            try {
                // 사용자 프로젝트: project_phase_progress 테이블에서 로드
                const { data: { session } } = await window.supabaseClient.auth.getSession();
                if (!session) {
                    resetAllProgressToZero();
                    return;
                }

                const { data: userData } = await window.supabaseClient
                    .from('users')
                    .select('user_id')
                    .eq('id', session.user.id)
                    .single();

                if (!userData) {
                    resetAllProgressToZero();
                    return;
                }

                // 사용자 프로젝트의 project_id 조회
                const { data: project, error } = await window.supabaseClient
                    .from('projects')
                    .select('project_id')
                    .eq('user_id', userData.user_id)
                    .eq('project_name', projectName)
                    .single();

                if (error || !project) {
                    console.log('📊 프로젝트 없음:', projectName);
                    resetAllProgressToZero();
                    return;
                }

                // 사용자 프로젝트의 phase_progress 로드
                await loadPhaseProgressFromDB(project.project_id);
                console.log('📊 사용자 프로젝트 진행률 로드:', project.project_id);

            } catch (error) {
                console.error('진행률 로드 오류:', error);
            }
        }

        // 특정 Stage 진행률 업데이트
        function updateStageProgress(stageId, progress) {
            const processItems = document.querySelectorAll('.process-item');
            processItems.forEach(item => {
                const header = item.querySelector('.process-icon');
                if (header && header.textContent.includes(stageId)) {
                    const progressFill = item.querySelector('.process-progress-fill');
                    const percentText = item.querySelector('.process-percent');
                    const majorDiv = item.querySelector('.process-major, .process-special-major');

                    if (progressFill) progressFill.style.width = progress + '%';
                    if (percentText) percentText.textContent = progress + '%';
                    if (majorDiv) {
                        majorDiv.setAttribute('data-progress', progress);
                        if (progress === 100) {
                            majorDiv.classList.add('completed');
                        } else {
                            majorDiv.classList.remove('completed');
                        }
                    }
                }
            });
        }

        // 모든 진행 프로세스 진행률을 0%로 초기화 (새 사용자용)
        function resetAllProgressToZero() {
            // 모든 progress-fill 너비를 0%로
            const progressFills = document.querySelectorAll('.process-progress-fill');
            progressFills.forEach(fill => {
                fill.style.width = '0%';
            });
            // 모든 percent 텍스트를 0%로
            const percentTexts = document.querySelectorAll('.process-percent');
            percentTexts.forEach(text => {
                text.textContent = '0%';
            });
            // data-progress도 0으로 + inline style 제거 (CSS가 적용되도록)
            const progressItems = document.querySelectorAll('.process-major, .process-special-major');
            progressItems.forEach(item => {
                item.setAttribute('data-progress', '0');
                // 모든 inline style 제거 (background, backgroundColor, border, borderColor)
                item.style.background = '';
                item.style.backgroundColor = '';
                item.style.border = '';
                item.style.borderColor = '';
            });
            // completed 클래스 제거 (색상 원복)
            const completedItems = document.querySelectorAll('.process-major.completed, .process-special-major.completed');
            completedItems.forEach(item => {
                item.classList.remove('completed');
            });
            console.log('📊 진행 프로세스 0%로 초기화됨');
        }

        // 진행 프로세스 단계 클릭 시 호출되는 함수
        // 안내문 팝업 + [예][아니오] 버튼 표시
        function loadProcessStage(stageId, stageName, category) {
            const stageData = STAGE_DATA[stageId];

            if (!stageData) {
                showStatus(`❌ "${stageName}" 단계의 데이터가 없습니다`, 'error');
                return;
            }

            // 현재 단계 데이터 저장
            currentStageData = stageData;

            // guideUrl이 있으면 GUIDE_CONTENTS에서 로드, 없으면 기존 guideContent 사용
            if (stageData.guideUrl) {
                openGuideModalFromUrl(stageName, stageData.guideUrl, stageData.confirmMessage, stageData.hasAction);
            } else if (stageData.guideContent) {
                openGuideModalWithConfirm(stageName, stageData.guideContent, stageData.confirmMessage, stageData.hasAction);
            } else {
                showStatus(`❌ "${stageName}" 안내문이 없습니다`, 'error');
            }
        }

        // 외부 HTML 파일에서 안내문 로드하여 팝업 표시
        // guideUrl 형식: 'guides/S1_개발_준비.html' -> GUIDE_CONTENTS['S1_개발_준비']
        function openGuideModalFromUrl(title, guideUrl, confirmMessage, hasAction = true) {
            const popup = document.getElementById('guidePopup');
            const popupTitle = document.getElementById('guidePopupTitle');
            const popupContent = document.getElementById('guidePopupContent');

            popupTitle.textContent = `📖 ${title} 안내`;

            // guideUrl에서 키 추출: 'guides/S1_개발_준비.html' -> 'S1_개발_준비'
            const guideKey = guideUrl.replace('guides/', '').replace('.html', '');

            // GUIDE_CONTENTS에서 HTML 콘텐츠 가져오기
            const htmlContent = (typeof GUIDE_CONTENTS !== 'undefined') ? GUIDE_CONTENTS[guideKey] : null;

            if (htmlContent) {
                // 버튼 섹션 생성
                let buttonSection = '';
                if (hasAction) {
                    buttonSection = `
                    <div style="margin-top: 24px; padding-top: 16px; border-top: 3px solid #1a3a5c;">
                        <p style="font-weight: 600; color: #333; margin-bottom: 10px; font-size: 15px;">위의 작업을 위하여 준비된 Order Sheet 템플릿을 Control Desk에 로딩하시겠습니까?</p>
                        <div style="display: flex; gap: 12px;">
                            <button onclick="executeStageAction()" style="flex: 1; padding: 10px 16px; background: var(--primary); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 13px;">확인</button>
                            <button onclick="closeGuidePopup()" style="flex: 1; padding: 10px 16px; background: #6c757d; color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 13px;">취소</button>
                        </div>
                    </div>
                    `;
                } else {
                    buttonSection = `
                    <div style="margin-top: 24px; padding-top: 16px; border-top: 1px solid #dee2e6;">
                        <div style="display: flex; justify-content: center;">
                            <button onclick="closeGuidePopup()" style="padding: 10px 32px; background: var(--primary); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 13px;">확인</button>
                        </div>
                    </div>
                    `;
                }

                popupContent.innerHTML = htmlContent + buttonSection;
            } else {
                console.error('안내문 로드 오류: GUIDE_CONTENTS에서 찾을 수 없음 -', guideKey);
                popupContent.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #EF4444;">
                        <p>❌ 안내문을 불러오지 못했습니다.</p>
                        <p style="font-size: 11px; color: #666; margin-top: 8px;">키: ${guideKey}</p>
                    </div>
                    <div style="margin-top: 24px; padding-top: 16px; border-top: 1px solid #dee2e6;">
                        <div style="display: flex; justify-content: center;">
                            <button onclick="closeGuidePopup()" style="padding: 10px 32px; background: #6c757d; color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 13px;">닫기</button>
                        </div>
                    </div>
                `;
            }

            popup.style.display = 'block';
            initDragPopup();
        }

        // [확인] 버튼 클릭 시 - Order Sheet 표준 템플릿을 워크스페이스에 로드 또는 외부 URL 열기
        async function executeStageAction() {
            if (!currentStageData) return;

            // externalUrl이 있으면 외부 링크 열기 (예: Google Drive) - 빌더 계정만 가능
            if (currentStageData.externalUrl) {
                // 빌더 계정 확인
                const { data: { session } } = await window.supabaseClient.auth.getSession();
                if (!session) {
                    alert('로그인이 필요합니다.');
                    closeGuidePopup();
                    return;
                }
                const { data: userData } = await window.supabaseClient
                    .from('users')
                    .select('installation_fee_paid')
                    .eq('id', session.user.id)
                    .single();

                if (!userData || !userData.installation_fee_paid) {
                    alert('빌더 계정 개설 후 이용 가능합니다.\n\n예시 프로젝트 Google Drive 열람은 빌더 계정 개설자만 가능합니다.');
                    closeGuidePopup();
                    return;
                }

                window.open(currentStageData.externalUrl, '_blank');
                showStatus(`✅ 외부 링크를 새 탭에서 열었습니다.`, 'success');
                closeGuidePopup();
                return;
            }

            // orderSheetUrl이 있으면 ORDER_SHEET_TEMPLATES에서 로드
            // 없으면 기존 orderSheetAfterExecute 사용 (하위 호환)
            let templateContent = '';

            if (currentStageData.orderSheetUrl) {
                // orderSheetUrl에서 키 추출: 'templates/P1-1_Vision_Mission.md' -> 'P1-1_Vision_Mission'
                const templateKey = currentStageData.orderSheetUrl.replace('templates/', '').replace('.md', '');
                templateContent = (typeof ORDER_SHEET_TEMPLATES !== 'undefined')
                    ? ORDER_SHEET_TEMPLATES[templateKey]
                    : null;

                if (!templateContent) {
                    console.error('Order Sheet 템플릿 로드 오류:', templateKey);
                    templateContent = currentStageData.orderSheetAfterExecute || '';
                }
            } else {
                templateContent = currentStageData.orderSheetAfterExecute || '';
            }

            // 워크스페이스에 Order Sheet 템플릿 로드 (마크다운 → 일반 텍스트 변환)
            document.getElementById('textEditor').value = convertMarkdownToPlainText(templateContent);

            // workspaceGuide 숨기고 textEditor 표시
            showOrderSheetEditor();

            showStatus(`✅ Order Sheet 템플릿이 워크스페이스에 로드되었습니다.`, 'success');

            closeGuidePopup();
        }

        // 안내문 드래그 가능 팝업 열기 (hasAction에 따라 버튼 표시)
        function openGuideModalWithConfirm(title, content, confirmMessage, hasAction = true) {
            const popup = document.getElementById('guidePopup');
            const popupTitle = document.getElementById('guidePopupTitle');
            const popupContent = document.getElementById('guidePopupContent');

            popupTitle.textContent = `📖 ${title} 안내`;

            // hasAction이 true면 [예]/[아니오] 버튼, false면 [확인] 버튼만
            let buttonSection = '';
            if (hasAction) {
                buttonSection = `
                <div style="margin-top: 24px; padding-top: 16px; border-top: 1px solid #dee2e6;">
                    <p style="font-weight: 600; color: #333; margin-bottom: 10px;">${confirmMessage}</p>
                    <div style="display: flex; gap: 12px;">
                        <button onclick="executeStageAction()" style="flex: 1; padding: 10px 16px; background: var(--primary); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 13px;">예</button>
                        <button onclick="loadOrderSheetToWorkspace()" style="flex: 1; padding: 10px 16px; background: #6c757d; color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 13px;">아니오</button>
                    </div>
                </div>
                `;
            } else {
                buttonSection = `
                <div style="margin-top: 24px; padding-top: 16px; border-top: 1px solid #dee2e6;">
                    <div style="display: flex; justify-content: center;">
                        <button onclick="closeGuidePopup()" style="padding: 10px 32px; background: var(--primary); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 13px;">확인</button>
                    </div>
                </div>
                `;
            }

            popupContent.innerHTML = content + buttonSection;

            popup.style.display = 'block';

            // 드래그 기능 초기화
            initDragPopup();
        }

        // [아니오] 버튼 클릭 시 - Order Sheet를 워크스페이스에 로드
        function loadOrderSheetToWorkspace() {
            if (!currentStageData) return;

            document.getElementById('textEditor').value = currentStageData.orderSheet;

            // workspaceGuide 숨기고 textEditor 표시
            showOrderSheetEditor();

            showStatus(`✅ "${currentStageData.stageName}" Order Sheet를 워크스페이스에 로드했습니다. 수정 후 발행하세요.`, 'info');
            closeGuidePopup();
        }

        // 안내문 팝업 닫기
        function closeGuidePopup() {
            const popup = document.getElementById('guidePopup');
            popup.style.display = 'none';
        }


        // ===== 서약서 관련 함수들 =====
        const SSALWORKS_DRIVE_URL = 'https://drive.google.com/drive/folders/1PoMIExSALUcCHTwkNZDC8sPTW9ZsWVQf?usp=sharing';

        // SSAL Works 클릭 시 호출
        async function handleSSALWorksClick() {
            console.log('handleSSALWorksClick 호출됨');
            try {
            // 로그인 확인
            const { data: { session } } = await window.supabaseClient.auth.getSession();
            console.log('session:', session);
            if (!session) {
                openLoginRequiredModal();
                return;
            }

            // 빌더 계정 확인
            const { data: userData, error: userError } = await window.supabaseClient
                .from('users')
                .select('installation_fee_paid, user_id')
                .eq('id', session.user.id)
                .single();

            if (userError) {
                console.error('사용자 정보 조회 오류:', userError);
                showStatus('❌ 사용자 정보를 확인할 수 없습니다.', 'error');
                return;
            }

            // 빌더 계정이 아닌 경우 (installation_fee_paid가 false이거나 없는 경우)
            if (!userData || !userData.installation_fee_paid) {
                openBuilderRequiredModal();
                return;
            }

            // DB에서 연결 이력 확인
            const { data: agreements, error } = await window.supabaseClient
                .from('download_agreements')
                .select('*')
                .eq('user_id', session.user.id)
                .eq('resource_type', 'ssalworks_example');

            if (error) {
                console.error('서약 이력 조회 오류:', error);
                showStatus('❌ 오류가 발생했습니다.', 'error');
                return;
            }

            if (agreements && agreements.length > 0) {
                // 이미 연결한 경우
                openAlreadyConnectedModal();
            } else {
                // 처음인 경우 - 서약서 모달 표시
                openAgreementModal(session.user);
            }
            } catch (err) {
                console.error('handleSSALWorksClick 오류:', err);
                showStatus('❌ 오류: ' + err.message, 'error');
            }
        }

        // 서약서 모달 열기
        function openAgreementModal(user) {
            const today = new Date();
            const dateStr = today.getFullYear() + '년 ' + (today.getMonth() + 1) + '월 ' + today.getDate() + '일';

            document.getElementById('agreementDate').textContent = dateStr;
            document.getElementById('agreementUserName').textContent = user.user_metadata?.full_name || user.user_metadata?.name || '(이름 없음)';
            document.getElementById('agreementBuilderId').textContent = user.user_metadata?.builder_id || user.email?.split('@')[0] || '(ID 없음)';
            document.getElementById('agreementUserEmail').textContent = user.email || '(이메일 없음)';

            document.getElementById('agreementModal').classList.add('active');
        }

        // 서약서 모달 닫기
        function closeAgreementModal() {
            document.getElementById('agreementModal').classList.remove('active');
        }

        // 서약 제출
        async function submitAgreement() {
            const { data: { session } } = await window.supabaseClient.auth.getSession();
            if (!session) {
                showStatus('❌ 로그인이 필요합니다.', 'error');
                return;
            }

            const user = session.user;
            const userName = user.user_metadata?.full_name || user.user_metadata?.name || '(이름 없음)';
            const builderId = user.user_metadata?.builder_id || user.email?.split('@')[0] || '';

            // DB에 저장
            const { error: insertError } = await window.supabaseClient
                .from('download_agreements')
                .insert({
                    user_id: user.id,
                    user_email: user.email,
                    user_name: userName,
                    builder_account_id: builderId,
                    resource_type: 'ssalworks_example',
                    agreement_version: 'v1'
                });

            if (insertError) {
                console.error('서약 저장 오류:', insertError);
                showStatus('❌ 서약 저장 중 오류가 발생했습니다.', 'error');
                return;
            }

            // 이메일 발송
            try {
                const emailResponse = await fetch('/api/Backend_APIs/send-agreement-email', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        email: user.email,
                        userName: userName,
                        builderId: builderId,
                        date: new Date().toISOString()
                    })
                });

                if (!emailResponse.ok) {
                    console.warn('이메일 발송 실패, 계속 진행');
                }
            } catch (emailErr) {
                console.warn('이메일 발송 오류:', emailErr);
            }

            // 서약서 모달 닫기
            closeAgreementModal();

            // 성공 메시지 표시 (팝업에서 Google Drive 열기 버튼으로 연결)
            document.getElementById('agreementSuccessMessage').textContent =
                '① 동의하신 서약서가 ' + userName + '님의 이메일로 발송되었습니다.';
            document.getElementById('agreementSuccessModal').classList.add('active');
        }

        // 성공 모달 닫기
        function closeAgreementSuccessModal() {
            document.getElementById('agreementSuccessModal').classList.remove('active');
        }

        // 이미 연결됨 모달 열기
        function openAlreadyConnectedModal() {
            document.getElementById('alreadyConnectedModal').classList.add('active');
        }

        // 이미 연결됨 모달 닫기
        function closeAlreadyConnectedModal() {
            document.getElementById('alreadyConnectedModal').classList.remove('active');
        }

        // 로그인 필요 모달 열기
        function openLoginRequiredModal() {
            document.getElementById('loginRequiredModal').classList.add('active');
        }

        // 로그인 필요 모달 닫기
        function closeLoginRequiredModal() {
            document.getElementById('loginRequiredModal').classList.remove('active');
        }

        // 빌더 계정 필요 모달 열기
        function openBuilderRequiredModal() {
            document.getElementById('builderRequiredModal').classList.add('active');
        }

        // 빌더 계정 필요 모달 닫기
        function closeBuilderRequiredModal() {
            document.getElementById('builderRequiredModal').classList.remove('active');
        }

        // 드래그 기능
        function initDragPopup() {
            const popup = document.getElementById('guidePopup');
            const header = document.getElementById('guidePopupHeader');

            let isDragging = false;
            let offsetX, offsetY;

            header.onmousedown = function(e) {
                isDragging = true;
                offsetX = e.clientX - popup.offsetLeft;
                offsetY = e.clientY - popup.offsetTop;

                document.onmousemove = function(e) {
                    if (isDragging) {
                        popup.style.left = (e.clientX - offsetX) + 'px';
                        popup.style.top = (e.clientY - offsetY) + 'px';
                        popup.style.right = 'auto';
                    }
                };

                document.onmouseup = function() {
                    isDragging = false;
                    document.onmousemove = null;
                    document.onmouseup = null;
                };
            };
        }

        // Call this when page loads
        window.addEventListener('DOMContentLoaded', () => {
            loadOrderSheetTemplates();
            // loadWelcomeMessage(); // 제거 - checkAuthStatus에서 로그인 상태에 따른 안내문 로드
        });

        // Translation functionality
        let translationTimeout;

        function toggleTranslation() {
            const preview = document.getElementById('translationPreview');
            const toggleText = document.getElementById('toggleText');

            if (preview.style.display === 'none') {
                preview.style.display = 'block';
                toggleText.textContent = '▲';
            } else {
                preview.style.display = 'none';
                toggleText.textContent = '▼';
            }
        }

        async function translateToEnglish() {
            clearTimeout(translationTimeout);

            const content = document.getElementById('textEditor').value;
            const translationSection = document.getElementById('translationSection');
            const translatedText = document.getElementById('translatedText');

            // 한글이 있는지 확인
            const hasKorean = /[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/.test(content);

            if (!content.trim() || !hasKorean) {
                translationSection.style.display = 'none';
                return;
            }

            translationSection.style.display = 'flex';

            // 즉시 번역 시작 (300ms debounce만 적용)
            translationTimeout = setTimeout(async () => {
                translatedText.textContent = '번역 중...';

                try {
                    // AI 기반 번역 + 문법 교정
                    const translated = await translateWithAI(content);
                    // 병기 마크다운 형식으로 미리보기
                    const bilingualMd = generateBilingualMarkdown(content, translated);
                    translatedText.textContent = bilingualMd;
                } catch (error) {
                    translatedText.textContent = '번역 실패. 다시 시도해주세요.';
                }
            }, 300);
        }

        // AI 기반 번역 + 문법 교정 (Perplexity API 사용)
        async function translateWithAI(text) {
            try {
                const response = await fetch('http://localhost:3030/translate', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        text: text,
                        mode: 'translate_and_fix'  // 번역 + 문법 교정 모드
                    })
                });

                if (!response.ok) {
                    throw new Error('Translation failed');
                }

                const data = await response.json();
                return data.translated;

            } catch (error) {
                console.error('AI 번역 실패, 기본 번역으로 전환:', error);
                // Fallback: 간단한 번역
                return await mockTranslate(text);
            }
        }

        // Mock translation (Fallback용)
        async function mockTranslate(text) {
            // 시뮬레이션: 짧은 딜레이
            await new Promise(resolve => setTimeout(resolve, 200));

            // 간단한 키워드 매핑 (데모용)
            const translations = {
                '회원가입': 'Sign Up',
                '로그인': 'Login',
                '비밀번호': 'Password',
                '이메일': 'Email',
                '요구사항': 'Requirements',
                '산출물': 'Deliverables',
                '참고사항': 'Notes',
                '구현': 'Implementation',
                'API': 'API',
                '연동': 'Integration',
                '중복': 'Duplicate',
                '확인': 'Verification',
                '암호화': 'Encryption',
                '테스트': 'Test',
                '코드': 'Code',
                '최소': 'Minimum',
                '영문': 'English',
                '숫자': 'Number',
                '특수문자': 'Special Character',
                '포함': 'Include'
            };

            let translated = text;
            for (const [kr, en] of Object.entries(translations)) {
                translated = translated.replace(new RegExp(kr, 'g'), en);
            }

            return translated;
        }

        // 한영 병기 마크다운 생성 (Claude Code는 영어만 읽음)
        function generateBilingualMarkdown(koreanText, englishText) {
            const lines = koreanText.split('\n');
            const translatedLines = englishText.split('\n');
            let result = [];

            result.push('<!-- Claude Code: Read English only -->');
            result.push('');

            for (let i = 0; i < lines.length; i++) {
                const korLine = lines[i];
                const engLine = translatedLines[i] || '';

                // 한글이 있는 줄만 처리
                if (/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/.test(korLine)) {
                    // 한글은 HTML 주석으로 감싸기 (Claude Code가 무시)
                    result.push(`<!-- 🇰🇷 ${korLine} -->`);
                    // 영어는 일반 텍스트로 (Claude Code가 읽음)
                    result.push(engLine);
                } else {
                    // 한글이 없으면 그대로
                    result.push(korLine);
                }
            }

            return result.join('\n');
        }

        // Order Sheet 전달하기 (안내 모달 후 저장) - 빌더 계정만 가능
        async function deliverOrderSheet() {
            // 빌더 계정 확인
            const { data: { session } } = await window.supabaseClient.auth.getSession();
            if (!session) {
                alert('로그인이 필요합니다.');
                return;
            }
            const { data: userData } = await window.supabaseClient
                .from('users')
                .select('installation_fee_paid')
                .eq('id', session.user.id)
                .single();

            if (!userData || !userData.installation_fee_paid) {
                alert('빌더 계정 개설 후 이용 가능합니다.\n\nOrder Sheet 전달 기능은 빌더 계정 개설자만 사용할 수 있습니다.\n\n일반 회원은 Order Sheet 템플릿을 열람만 가능합니다.');
                return;
            }

            const content = document.getElementById('textEditor').value;

            if (!content.trim()) {
                alert('작성된 내용이 없습니다!');
                return;
            }

            // 안내 모달 생성
            const overlay = document.createElement('div');
            overlay.className = 'deliver-modal-overlay';
            overlay.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.6); display: flex; align-items: center; justify-content: center; z-index: 10001;';

            const modal = document.createElement('div');
            modal.style.cssText = 'background: white; border-radius: 16px; max-width: 500px; width: 90%; box-shadow: var(--shadow-lg); overflow: hidden;';

            modal.innerHTML = `
                <div style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 20px 24px;">
                    <h3 style="margin: 0; font-size: 18px; font-weight: 600; display: flex; align-items: center; gap: 10px;">
                        <span style="font-size: 24px;">📤</span>
                        Order Sheet 전달하기
                    </h3>
                </div>
                <div style="padding: 24px;">
                    <div style="background: #f0fdf4; border: 1px solid #86efac; border-radius: 12px; padding: 16px;">
                        <div style="display: flex; align-items: flex-start; gap: 12px; margin-bottom: 16px;">
                            <span style="font-size: 20px;">1️⃣</span>
                            <div style="flex: 1;">
                                <div style="font-weight: 600; font-size: 14px; color: #166534;">처음 저장 시</div>
                                <div style="font-size: 13px; color: #4b5563; margin-top: 4px;">아래 경로를 따라 Orders 폴더에 저장하세요:</div>
                                <div style="font-size: 12px; color: #059669; margin-top: 8px; font-family: 'D2Coding', Consolas, monospace; background: #dcfce7; padding: 10px 12px; border-radius: 8px; border: 1px solid #86efac; line-height: 1.8;">
                                    <span style="color: #f59e0b; font-weight: 600;">[프로젝트 폴더]</span> > <span style="color: #166534;">Human_ClaudeCode_Bridge</span> > <span style="color: #166534; font-weight: 600;">Orders</span>
                                </div>
                            </div>
                        </div>
                        <div style="display: flex; align-items: flex-start; gap: 12px;">
                            <span style="font-size: 20px;">2️⃣</span>
                            <div>
                                <div style="font-weight: 600; font-size: 14px; color: #166534;">다음부터</div>
                                <div style="font-size: 13px; color: #4b5563; margin-top: 4px;">지정 폴더가 바로 열립니다.</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="padding: 16px 24px; border-top: 1px solid #e5e7eb; display: flex; justify-content: flex-end; gap: 12px;">
                    <button id="deliverCancelBtn" style="padding: 10px 20px; background: #f3f4f6; border: 1px solid #d1d5db; border-radius: 8px; cursor: pointer; font-size: 14px; color: #4b5563;">
                        취소
                    </button>
                    <button id="deliverSaveBtn" style="padding: 10px 20px; background: #10b981; border: none; border-radius: 8px; cursor: pointer; font-size: 14px; color: white; font-weight: 600;">
                        💾 저장하기
                    </button>
                </div>
            `;

            overlay.appendChild(modal);
            document.body.appendChild(overlay);

            // 저장 버튼 클릭
            document.getElementById('deliverSaveBtn').onclick = async () => {
                overlay.remove();
                await saveToOrders(content);
            };

            // 취소 버튼 클릭
            document.getElementById('deliverCancelBtn').onclick = () => {
                overlay.remove();
            };

            // 오버레이 클릭 시 닫기
            overlay.onclick = (e) => {
                if (e.target === overlay) overlay.remove();
            };
        }

        // Orders 폴더에 저장 (File System Access API 사용)
        async function saveToOrders(content) {
            try {
                // 파일명 생성 (날짜 + 시간 기반)
                const now = new Date();
                const timestamp = now.toISOString().replace(/[:.]/g, '-').slice(0, 19);
                const suggestedName = `ORDER_${timestamp}.json`;

                // Order Sheet를 JSON 형식으로 변환
                const orderData = {
                    type: 'order_sheet',
                    created_at: now.toISOString(),
                    content: content,
                    metadata: {
                        source: 'SSAL Works Dashboard',
                        version: '1.0'
                    }
                };

                const jsonContent = JSON.stringify(orderData, null, 2);

                // File System Access API 지원 확인
                if ('showSaveFilePicker' in window) {
                    try {
                        // 파일 저장 다이얼로그 열기 (사용자가 경로 선택)
                        const handle = await window.showSaveFilePicker({
                            suggestedName: suggestedName,
                            types: [{
                                description: 'JSON Files',
                                accept: { 'application/json': ['.json'] }
                            }]
                        });

                        // 파일에 쓰기
                        const writable = await handle.createWritable();
                        await writable.write(jsonContent);
                        await writable.close();

                        showStatus('✅ Order Sheet 저장 완료', 'success');

                        // Claude Code에게 전달할 메시지 생성 및 클립보드 복사
                        const claudeMessage = `Order Sheet 보냈어. Human_ClaudeCode_Bridge/Orders/${suggestedName} 파일 확인하고 작업 시작해.`;
                        await navigator.clipboard.writeText(claudeMessage);

                        // 복사된 메시지를 모달로 표시
                        showCopiedContentModal(claudeMessage, { type: 'claudeMessage' });
                    } catch (err) {
                        // 사용자가 취소한 경우
                        if (err.name === 'AbortError') {
                            showStatus('ℹ️ 저장 취소됨', 'info');
                            return;
                        }
                        throw err;
                    }
                } else {
                    // File System Access API 미지원 시 대체 방법
                    const blob = new Blob([jsonContent], { type: 'application/json' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = suggestedName;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);

                    showStatus('✅ Order Sheet 다운로드 완료', 'success');

                    // Claude Code에게 전달할 메시지 생성 및 클립보드 복사
                    const claudeMessage = `Order Sheet 보냈어. Human_ClaudeCode_Bridge/Orders/${suggestedName} 파일 확인하고 작업 시작해.\n\n⚠️ 참고: 다운로드된 파일을 Human_ClaudeCode_Bridge/Orders/ 폴더로 이동해주세요.`;
                    await navigator.clipboard.writeText(claudeMessage);

                    // 복사된 메시지를 모달로 표시
                    showCopiedContentModal(claudeMessage, { type: 'claudeMessage' });
                }
            } catch (e) {
                console.error('저장 실패:', e);
                showStatus('❌ 저장 실패', 'error');
                alert('저장에 실패했습니다. 다시 시도해주세요.');
            }
        }

        // 클립보드에 복사 (복사 후 내용 표시)
        async function copyToClipboard(content) {
            try {
                await navigator.clipboard.writeText(content);
                showStatus('✅ Order Sheet 복사 완료', 'success');

                // 복사된 내용을 보여주는 모달 표시
                showCopiedContentModal(content, { type: 'orderSheet' });
            } catch (e) {
                console.error('복사 실패:', e);
                showStatus('❌ 복사 실패', 'error');
                // 복사 실패 시에도 내용을 표시해서 수동 복사 가능하게
                showCopiedContentModal(content, { type: 'orderSheet', copyFailed: true });
            }
        }

        // 복사된 내용을 보여주는 모달
        // type: 'orderSheet' (Order Sheet 내용), 'claudeMessage' (Claude Code 전달 메시지)
        function showCopiedContentModal(content, options = {}) {
            const { type = 'orderSheet', copyFailed = false } = options;

            const overlay = document.createElement('div');
            overlay.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.6); display: flex; align-items: center; justify-content: center; z-index: 10002;';

            const modal = document.createElement('div');
            modal.style.cssText = 'background: white; border-radius: 16px; max-width: 700px; width: 95%; max-height: 85vh; overflow: hidden; box-shadow: var(--shadow-lg);';

            let headerColor, headerIcon, headerText, subText, contentLabel;

            if (type === 'claudeMessage') {
                // Orders 폴더 저장 후 Claude Code 전달 메시지
                headerColor = '#22c55e';
                headerIcon = '✅';
                headerText = 'Order Sheet가 Orders 폴더에 저장되었습니다!';
                subText = '이제 Claude Code에게 전달할 메시지를 Claude Code CLI 대화창에 붙여넣기 하세요.';
                contentLabel = '📋 전달할 메시지 (클립보드에 이미 복사되었으니 바로 붙여넣기 하면 됩니다)';
            } else {
                // 클립보드 복사 (Order Sheet 내용)
                if (copyFailed) {
                    headerColor = '#dc2626';
                    headerIcon = '⚠️';
                    headerText = '복사 실패 - 아래 내용을 직접 복사하세요';
                    subText = '';
                } else {
                    headerColor = '#22c55e';
                    headerIcon = '✅';
                    headerText = 'Order Sheet가 클립보드에 복사되었습니다.';
                    subText = '이제 Claude Code CLI 대화창에 붙여넣기 하세요.';
                }
                contentLabel = '📋 Order Sheet 내용 (클립보드에 이미 복사되었으니 바로 붙여넣기 하면 됩니다)';
            }

            const textareaHeight = type === 'claudeMessage' ? '100px' : '300px';

            modal.innerHTML = `
                <div style="padding: 20px 24px; background: ${headerColor}; color: white;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 28px;">${headerIcon}</span>
                        <div>
                            <p style="margin: 0; font-size: 15px; font-weight: 500;">${headerText}</p>
                            <p style="margin: 4px 0 0 0; font-size: 15px; font-weight: 500;">${subText}</p>
                        </div>
                    </div>
                </div>
                <div style="padding: 20px 24px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                        <span style="font-size: 13px; color: #6b7280; font-weight: 500;">${contentLabel}</span>
                        <button id="reCopyBtn" style="padding: 6px 12px; background: #3b82f6; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 12px; font-weight: 500;">
                            다시 복사
                        </button>
                    </div>
                    <textarea id="copiedContent" readonly style="width: 100%; height: ${textareaHeight}; padding: 16px; border: 2px solid #e5e7eb; border-radius: 8px; font-family: 'D2Coding', 'Consolas', monospace; font-size: 12px; line-height: 1.5; resize: none; background: #f9fafb; color: #374151;">${content.replace(/</g, '&lt;').replace(/>/g, '&gt;')}</textarea>
                </div>
                <div style="padding: 16px 24px; border-top: 1px solid #e5e7eb; display: flex; justify-content: flex-end; gap: 12px;">
                    <button id="closeModalBtn" style="padding: 10px 24px; background: #6b7280; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 500;">
                        닫기
                    </button>
                </div>
            `;

            overlay.appendChild(modal);
            document.body.appendChild(overlay);

            // 다시 복사 버튼
            document.getElementById('reCopyBtn').onclick = async () => {
                try {
                    await navigator.clipboard.writeText(content);
                    document.getElementById('reCopyBtn').textContent = '✅ 복사됨!';
                    document.getElementById('reCopyBtn').style.background = '#22c55e';
                    setTimeout(() => {
                        document.getElementById('reCopyBtn').textContent = '다시 복사';
                        document.getElementById('reCopyBtn').style.background = '#3b82f6';
                    }, 2000);
                } catch (e) {
                    alert('복사에 실패했습니다. 텍스트를 직접 선택해서 복사해주세요.');
                }
            };

            // 닫기 버튼
            document.getElementById('closeModalBtn').onclick = () => overlay.remove();

            // 오버레이 클릭 시 닫기
            overlay.onclick = (e) => {
                if (e.target === overlay) overlay.remove();
            };

            // 텍스트 영역 클릭 시 전체 선택
            document.getElementById('copiedContent').onclick = function() {
                this.select();
            };
        }

        // Report 내용을 HTML 모달로 표시
        function showReportModal(title, htmlContent) {
            const overlay = document.createElement('div');
            overlay.className = 'report-modal-overlay';
            overlay.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.6); display: flex; align-items: center; justify-content: center; z-index: 10001;';

            const modal = document.createElement('div');
            modal.style.cssText = 'background: white; border-radius: 12px; max-width: 900px; width: 95%; max-height: 90vh; overflow: hidden; box-shadow: var(--shadow-lg);';

            modal.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 16px 24px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                    <h3 style="margin: 0; font-size: 18px; font-weight: 600;">📄 ${title}</h3>
                    <button onclick="this.closest('.report-modal-overlay').remove()"
                            style="background: rgba(255, 255, 255, 0.2); border: none; color: white; font-size: 20px; cursor: pointer; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                        ×
                    </button>
                </div>
                <div class="report-content" style="padding: 24px; line-height: 1.7; color: #495057; font-size: 14px; overflow-y: auto; max-height: calc(90vh - 140px);">
                    ${htmlContent}
                </div>
                <div style="padding: 16px 24px; border-top: 1px solid #e9ecef; display: flex; justify-content: flex-end;">
                    <button onclick="this.closest('.report-modal-overlay').remove()"
                            style="padding: 8px 20px; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 13px; font-weight: 500;">
                        닫기
                    </button>
                </div>
            `;

            overlay.appendChild(modal);
            overlay.onclick = (e) => {
                if (e.target === overlay) {
                    overlay.remove();
                }
            };
            document.body.appendChild(overlay);
        }

        // JSON을 보기 좋은 HTML로 변환
        function renderJsonAsHtml(data, filename) {
            const escapeHtml = (str) => {
                if (typeof str !== 'string') return str;
                return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
            };

            const renderValue = (value, depth = 0) => {
                if (value === null) return '<span style="color: #999;">null</span>';
                if (typeof value === 'boolean') return `<span style="color: #d73a49;">${value}</span>`;
                if (typeof value === 'number') return `<span style="color: #005cc5;">${value}</span>`;
                if (typeof value === 'string') {
                    if (value.startsWith('✅') || value.startsWith('❌') || value.startsWith('⚠️') || value.startsWith('📄')) {
                        return `<span style="font-size: 14px;">${escapeHtml(value)}</span>`;
                    }
                    return `<span style="color: #22863a;">"${escapeHtml(value)}"</span>`;
                }
                if (Array.isArray(value)) {
                    if (value.length === 0) return '<span style="color: #999;">[]</span>';
                    const items = value.map((v, i) => `<li style="margin: 4px 0;">${renderValue(v, depth + 1)}</li>`).join('');
                    return `<ul style="margin: 8px 0 8px 16px; padding: 0; list-style: disc;">${items}</ul>`;
                }
                if (typeof value === 'object') {
                    const entries = Object.entries(value);
                    if (entries.length === 0) return '<span style="color: #999;">{}</span>';
                    const rows = entries.map(([k, v]) => `
                        <tr>
                            <td style="padding: 8px 12px; font-weight: 600; color: #24292e; vertical-align: top; white-space: nowrap; border-bottom: 1px solid #e9ecef;">${escapeHtml(k)}</td>
                            <td style="padding: 8px 12px; color: #586069; border-bottom: 1px solid #e9ecef;">${renderValue(v, depth + 1)}</td>
                        </tr>
                    `).join('');
                    return `<table style="width: 100%; border-collapse: collapse; background: #f8f9fa; border-radius: 8px; overflow: hidden; margin: 8px 0;">${rows}</table>`;
                }
                return escapeHtml(String(value));
            };

            // 메인 카드 생성
            let html = `
                <div style="margin-bottom: 16px; padding: 16px; background: linear-gradient(135deg, #f5f7fa 0%, #e9ecef 100%); border-radius: 8px;">
                    <div style="font-size: 12px; color: #6c757d; margin-bottom: 4px;">파일명</div>
                    <div style="font-size: 16px; font-weight: 600; color: #212529;">${escapeHtml(filename)}</div>
                </div>
            `;

            // task_id, status 등 주요 필드가 있으면 상단에 표시
            if (data.task_id || data.status || data.task_name) {
                html += `<div style="display: flex; gap: 12px; flex-wrap: wrap; margin-bottom: 16px;">`;
                if (data.task_id) {
                    html += `<div style="padding: 8px 16px; background: #667eea; color: white; border-radius: 12px; font-weight: 500;">${escapeHtml(data.task_id)}</div>`;
                }
                if (data.task_name) {
                    html += `<div style="padding: 8px 16px; background: #10B981; color: white; border-radius: 12px; font-weight: 500;">${escapeHtml(data.task_name)}</div>`;
                }
                if (data.status) {
                    const statusColor = data.status === '완료' ? '#10B981' : data.status === '진행중' ? '#ffc107' : '#6c757d';
                    html += `<div style="padding: 8px 16px; background: ${statusColor}; color: white; border-radius: 12px; font-weight: 500;">${escapeHtml(data.status)}</div>`;
                }
                html += `</div>`;
            }

            // 나머지 데이터 표시
            html += renderValue(data);

            return html;
        }

        // File System Access API로 Reports 불러오기 (프로덕션용) - 빌더 계정만 가능
        async function loadFromReportsWithFileAPI() {
            try {
                // 빌더 계정 확인
                const { data: { session } } = await window.supabaseClient.auth.getSession();
                if (!session) {
                    alert('로그인이 필요합니다.');
                    return;
                }
                const { data: userData } = await window.supabaseClient
                    .from('users')
                    .select('installation_fee_paid')
                    .eq('id', session.user.id)
                    .single();

                if (!userData || !userData.installation_fee_paid) {
                    alert('빌더 계정 개설 후 이용 가능합니다.\n\nReports 불러오기 기능은 빌더 계정 개설자만 사용할 수 있습니다.');
                    return;
                }

                // File System Access API 지원 확인
                if (!('showOpenFilePicker' in window)) {
                    alert('이 브라우저는 파일 선택 기능을 지원하지 않습니다.\n\nChrome, Edge 등 최신 브라우저를 사용해주세요.');
                    return;
                }

                alert('📂 Report 파일 선택 안내\n\n경로: [프로젝트폴더]/Human_ClaudeCode_Bridge/Reports/\n\n위 폴더에서 Report 파일(.json 또는 .md)을 선택하시면\nHTML 파일로 보기 좋게 변환하여 볼 수 있습니다.');

                // 파일 선택 다이얼로그 열기
                const [fileHandle] = await window.showOpenFilePicker({
                    types: [
                        {
                            description: 'Report 파일',
                            accept: {
                                'application/json': ['.json'],
                                'text/markdown': ['.md']
                            }
                        }
                    ],
                    multiple: false
                });

                showStatus(`📄 ${fileHandle.name} 로딩 중...`, 'info');

                // 파일 내용 읽기
                const file = await fileHandle.getFile();
                const content = await file.text();
                const filename = fileHandle.name;

                if (filename.endsWith('.json')) {
                    // JSON 파일: HTML 카드로 렌더링하여 모달에 표시
                    try {
                        const data = JSON.parse(content);
                        const htmlContent = renderJsonAsHtml(data, filename);
                        showReportModal(filename, htmlContent);
                    } catch (e) {
                        // JSON 파싱 실패 시 원본 텍스트 표시
                        showReportModal(filename, `<pre style="background: #f8f9fa; padding: 16px; border-radius: 8px; overflow-x: auto; white-space: pre-wrap;">${content.replace(/</g, '&lt;').replace(/>/g, '&gt;')}</pre>`);
                    }
                } else if (filename.endsWith('.md')) {
                    // MD 파일: marked.js로 HTML 변환하여 모달에 표시
                    try {
                        const htmlContent = marked.parse(content);
                        const styledHtml = `
                            <style>
                                .report-content h1 { font-size: 24px; margin: 0 0 16px 0; color: #212529; border-bottom: 2px solid #e9ecef; padding-bottom: 8px; }
                                .report-content h2 { font-size: 20px; margin: 24px 0 12px 0; color: #212529; }
                                .report-content h3 { font-size: 16px; margin: 20px 0 10px 0; color: #495057; }
                                .report-content p { margin: 12px 0; }
                                .report-content ul, .report-content ol { margin: 12px 0; padding-left: 24px; }
                                .report-content li { margin: 6px 0; }
                                .report-content code { background: #f1f3f4; padding: 2px 6px; border-radius: 4px; font-family: 'Consolas', monospace; font-size: 13px; }
                                .report-content pre { background: #1e1e1e; color: #d4d4d4; padding: 16px; border-radius: 8px; overflow-x: auto; }
                                .report-content pre code { background: transparent; padding: 0; color: inherit; }
                                .report-content blockquote { border-left: 4px solid #667eea; margin: 16px 0; padding: 12px 16px; background: #f8f9fa; }
                                .report-content table { width: 100%; border-collapse: collapse; margin: 16px 0; }
                                .report-content th, .report-content td { border: 1px solid #e9ecef; padding: 10px 12px; text-align: left; }
                                .report-content th { background: #f8f9fa; font-weight: 600; }
                            </style>
                            ${htmlContent}
                        `;
                        showReportModal(filename, styledHtml);
                    } catch (e) {
                        // Markdown 파싱 실패 시 원본 텍스트 표시
                        showReportModal(filename, `<pre style="background: #f8f9fa; padding: 16px; border-radius: 8px; overflow-x: auto; white-space: pre-wrap;">${content.replace(/</g, '&lt;').replace(/>/g, '&gt;')}</pre>`);
                    }
                } else {
                    // 기타 파일: 원본 텍스트로 표시
                    showReportModal(filename, `<pre style="background: #f8f9fa; padding: 16px; border-radius: 8px; overflow-x: auto; white-space: pre-wrap;">${content.replace(/</g, '&lt;').replace(/>/g, '&gt;')}</pre>`);
                }

                showStatus(`✅ ${filename} 로드 완료`, 'success');

            } catch (error) {
                if (error.name === 'AbortError') {
                    // 사용자가 취소함
                    showStatus('파일 선택 취소됨', 'info');
                    return;
                }
                console.error('파일 로드 실패:', error);
                showStatus('❌ 파일 로드 실패', 'error');
                alert('❌ 파일 로드에 실패했습니다.\n\n잠시 후 다시 시도해주세요.');
            }
        }

        // Load from Reports (Claude Code 작업 결과 가져오기)
        // 프로덕션: File System Access API 사용
        // 로컬: Bridge 서버 사용
        async function loadFromReports() {
            // 프로덕션 환경에서는 File System Access API 사용
            if (IS_PRODUCTION) {
                await loadFromReportsWithFileAPI();
                return;
            }

            showStatus('Reports 확인 중...', 'info');

            try {
                // Reports 파일 목록 가져오기 (백엔드는 /outbox/files 유지)
                const response = await fetch(BRIDGE_SERVER_URL + '/outbox/files');
                const result = await response.json();

                if (!result.success || result.files.length === 0) {
                    alert('📭 Reports가 비어있습니다.\n\nClaude Code가 작업을 완료하면 결과물이 Human_ClaudeCode_Bridge/Reports/에 저장됩니다.');
                    showStatus('📭 Reports 비어있음', 'info');
                    return;
                }

                // 모달에 파일 목록 표시
                const filesList = document.getElementById('outboxFilesList');
                filesList.innerHTML = '';

                // JSON 파일들의 내용을 미리 읽어서 매핑
                const jsonData = {};
                for (const file of result.files) {
                    if (file.filename.endsWith('.json')) {
                        try {
                            const contentRes = await fetch(`${BRIDGE_SERVER_URL}/outbox/read/${file.filename}`);
                            const contentResult = await contentRes.json();
                            if (contentResult.success) {
                                const data = JSON.parse(contentResult.content);
                                jsonData[file.filename] = data;
                            }
                        } catch (e) {
                            // 무시
                        }
                    }
                }

                // 파일 목록을 처리하여 배열에 저장
                const fileItems = [];

                result.files.forEach((file) => {
                    // _ack.json 파일은 숨기기
                    if (file.filename.includes('_ack.json')) return;

                    // 파일 유형에 따른 아이콘 및 표시 정보 설정
                    const fileExt = file.filename.split('.').pop().toLowerCase();
                    let displayIcon = '📄';
                    let displayName = file.filename;
                    let displayMeta = '';
                    let badgeClass = '';

                    // JSON 파일 처리
                    if (fileExt === 'json') {
                        const data = jsonData[file.filename];
                        if (data) {
                            displayIcon = data.response_type === 'final' ? '✅' : '📋';
                            displayName = data.order_name || data.task_name || file.filename;
                            displayMeta = data.status || '';
                        }
                        badgeClass = 'json';
                    }
                    // MD 파일 처리
                    else if (fileExt === 'md') {
                        displayIcon = '📝';
                        displayName = file.filename.replace('.md', '');
                        badgeClass = 'markdown';
                    }

                    // 시간 정보 추가
                    const modDate = new Date(file.modified);
                    const timeStr = modDate.toLocaleString('ko-KR', {
                        month: 'short', day: 'numeric',
                        hour: '2-digit', minute: '2-digit'
                    });
                    displayMeta = displayMeta ? `${displayMeta} · ${timeStr}` : timeStr;

                    fileItems.push({
                        file: file,
                        displayIcon,
                        displayName,
                        displayMeta,
                        fileExt,
                        badgeClass,
                        modified: file.modified
                    });
                });

                // 최신순 정렬
                fileItems.sort((a, b) => new Date(b.modified) - new Date(a.modified));

                // HTML 생성
                fileItems.forEach(item => {
                    const fileItem = document.createElement('div');
                    fileItem.className = 'outbox-file-item';
                    fileItem.onclick = () => selectReportFile(item.file);
                    fileItem.innerHTML = `
                        <div class="outbox-file-icon">${item.displayIcon}</div>
                        <div class="outbox-file-info">
                            <div class="outbox-file-name">${item.displayName}</div>
                            <div class="outbox-file-meta">${item.displayMeta}</div>
                        </div>
                        <div class="outbox-file-badge ${item.badgeClass}">${item.fileExt.toUpperCase()}</div>
                    `;
                    filesList.appendChild(fileItem);
                });

                // 모달 열기
                const modal = document.getElementById('outboxFilesModal');
                modal.style.display = 'flex';
                modal.querySelector('.grid-fullscreen-title').textContent = '📤 Reports - 파일 선택';

                showStatus('📤 Reports 파일 목록 표시', 'info');

            } catch (error) {
                console.error('Reports 로드 실패:', error);
                showStatus('❌ Reports 로드 실패', 'error');
                alert(`❌ Bridge 서버에 연결할 수 없습니다.\n\n서버가 실행 중인지 확인하세요:\ncd Human_ClaudeCode_Bridge\nnode inbox_server.js`);
            }
        }

        // Reports 파일 선택
        async function selectReportFile(file) {
            closeOutboxModal();

            showStatus(`📄 ${file.filename} 로딩 중...`, 'info');

            try {
                // 파일 내용 가져오기
                const contentResponse = await fetch(`${BRIDGE_SERVER_URL}/outbox/read/${file.filename}`);
                const contentResult = await contentResponse.json();

                if (!contentResult.success) {
                    throw new Error(contentResult.error || '파일 로드 실패');
                }

                // 에디터에 표시
                const editor = document.getElementById('textEditor');

                if (file.filename.endsWith('.md')) {
                    // MD 파일: 원본 마크다운을 가져오기 위해 다시 파싱
                    const data = JSON.parse(contentResult.content);
                    editor.value = `# ${data.title}\n\n${data.content}`;
                } else {
                    // JSON 파일: 보기 좋게 포맷팅
                    const data = JSON.parse(contentResult.content);
                    editor.value = JSON.stringify(data, null, 2);
                }

                showStatus(`✅ ${file.filename} 로드 완료`, 'success');

            } catch (error) {
                console.error('파일 로드 실패:', error);
                showStatus('❌ 파일 로드 실패', 'error');
                alert('❌ 파일 로드에 실패했습니다.\n\n잠시 후 다시 시도해주세요.');
            }
        }

        // 기존 함수 유지 (호환성)
        // Load from Outbox (Claude Code 작업 결과 가져오기)
        async function loadFromOutbox() {
            // 배포 환경에서는 로컬 서버 기능 비활성화
            if (IS_PRODUCTION) {
                alert('이 기능은 로컬 개발 환경에서만 사용 가능합니다.\n\n로컬에서 Bridge 서버를 실행한 후 사용해주세요.');
                return;
            }

            showStatus('Outbox 확인 중...', 'info');

            try {
                // Outbox 파일 목록 가져오기
                const response = await fetch(BRIDGE_SERVER_URL + '/outbox/files');
                const result = await response.json();

                if (!result.success || result.files.length === 0) {
                    alert('📭 Outbox가 비어있습니다.\n\nClaude Code가 작업을 완료하면 결과물이 Outbox/에 저장됩니다.');
                    showStatus('📭 Outbox 비어있음', 'info');
                    return;
                }

                // 모달에 파일 목록 표시
                const filesList = document.getElementById('outboxFilesList');
                filesList.innerHTML = '';

                // JSON 파일들의 내용을 미리 읽어서 매핑
                const jsonData = {};
                for (const file of result.files) {
                    if (file.filename.endsWith('.json')) {
                        try {
                            const contentRes = await fetch(`http://localhost:3030/outbox/read/${file.filename}`);
                            const contentResult = await contentRes.json();
                            if (contentResult.success) {
                                const data = JSON.parse(contentResult.content);
                                jsonData[file.filename] = data;
                            }
                        } catch (e) {
                            // 무시
                        }
                    }
                }

                // 파일 목록을 처리하여 배열에 저장 (최신순 정렬을 위해)
                const fileItems = [];

                result.files.forEach((file) => {
                    // _ack.json 파일은 숨기기
                    if (file.filename.includes('_ack.json')) return;

                    const fileExt = file.filename.split('.').pop();

                    // JSON과 MD 파일만 표시
                    if (fileExt !== 'json' && fileExt !== 'md') return;

                    let displayName = file.filename;
                    let displayMeta = `수정: ${new Date(file.modified).toLocaleString('ko-KR')}`;
                    let displayIcon = fileExt === 'md' ? '📄' : '📋';
                    let badgeClass = fileExt === 'md' ? 'markdown' : 'json';

                    // JSON 파일의 질문 내용 표시
                    if (fileExt === 'json' && jsonData[file.filename]) {
                        const data = jsonData[file.filename];
                        const question = data.question || data.content_korean || data.content || '';
                        if (question) {
                            const questionPreview = question.length > 60 ? question.substring(0, 60) + '...' : question;
                            displayName = `📋 ${questionPreview}`;
                            displayMeta = `${data.order_id || 'N/A'} | ${new Date(file.modified).toLocaleString('ko-KR')}`;
                        }
                    }

                    // MD 파일의 제목 추출 (파일명에서)
                    if (fileExt === 'md') {
                        const title = file.filename.replace('.md', '').replace(/_/g, ' ');
                        displayName = `📄 ${title}`;
                        displayMeta = `Markdown | ${new Date(file.modified).toLocaleString('ko-KR')}`;
                    }

                    fileItems.push({
                        file,
                        displayIcon,
                        displayName,
                        displayMeta,
                        badgeClass,
                        fileExt,
                        modified: file.modified
                    });
                });

                // 최신순으로 정렬 (modified 날짜 기준 내림차순)
                fileItems.sort((a, b) => new Date(b.modified) - new Date(a.modified));

                // 정렬된 순서대로 DOM에 추가
                fileItems.forEach(item => {
                    const fileItem = document.createElement('div');
                    fileItem.className = 'outbox-file-item';
                    fileItem.onclick = () => selectOutboxFile(item.file);

                    fileItem.innerHTML = `
                        <div class="outbox-file-icon">${item.displayIcon}</div>
                        <div class="outbox-file-info">
                            <div class="outbox-file-name">${item.displayName}</div>
                            <div class="outbox-file-meta">${item.displayMeta}</div>
                        </div>
                        <div class="outbox-file-badge ${item.badgeClass}">${item.fileExt.toUpperCase()}</div>
                    `;

                    filesList.appendChild(fileItem);
                });

                // 모달 열기
                const modal = document.getElementById('outboxFilesModal');
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
                showStatus('📤 Outbox 파일 목록 표시', 'info');

            } catch (error) {
                console.error('Outbox 로드 실패:', error);
                showStatus('❌ Outbox 로드 실패', 'error');
                alert(`❌ Outbox 서버에 연결할 수 없습니다.\n\n서버가 실행 중인지 확인하세요:\ncd Human_ClaudeCode_Bridge\nnode inbox_server.js`);
            }
        }

        // Outbox 모달 닫기
        function closeOutboxModal() {
            const modal = document.getElementById('outboxFilesModal');
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // JSON 데이터로 HTML 생성
        function generateHTMLFromJSON(data) {
            const question = data.question || '질문 없음';
            const answer = data.answer || '답변 없음';
            const orderId = data.order_id || 'Unknown';
            const orderName = data.order_name || '제목 없음';
            const respondedAt = data.responded_at ? new Date(data.responded_at).toLocaleString('ko-KR') : '시간 정보 없음';

            return `<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${orderName} - 답변</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans KR', sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: var(--shadow-lg);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 8px 16px;
            border-radius: 12px;
            margin-top: 15px;
            font-size: 0.9em;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 35px;
        }

        .section-title {
            font-size: 1.8em;
            color: #667eea;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
            font-weight: 600;
        }

        .question-box {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 20px;
            border-left: 5px solid #667eea;
        }

        .answer-box {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 20px;
            border-left: 5px solid #764ba2;
            white-space: pre-wrap;
            line-height: 1.8;
        }

        .footer {
            background: #f8f9fa;
            padding: 30px;
            text-align: center;
            color: #666;
            border-top: 1px solid #e0e0e0;
        }

        .footer .meta {
            display: inline-block;
            margin: 0 15px;
            font-size: 0.9em;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📝 ${orderName}</h1>
            <span class="badge">Order ID: ${orderId}</span>
        </div>

        <div class="content">
            <div class="section">
                <h2 class="section-title">❓ 질문</h2>
                <div class="question-box">
                    ${question}
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">💡 답변</h2>
                <div class="answer-box">${answer}</div>
            </div>
        </div>

        <div class="footer">
            <div class="meta">📅 답변 시간: ${respondedAt}</div>
            <div class="meta">✅ 처리: Claude Code</div>
        </div>
    </div>

    <!-- FAB 버튼 (모바일용) -->
    <!-- FAB 버튼 - 우측 하단 (앰버/골드, 우측 사이드바 전용) -->
    <div class="fab-container">
        <button class="fab-btn fab-info" onclick="toggleRightSidebar()" title="우측 정보 패널">≡</button>
    </div>
</body>
</html>`;
        }

        // Outbox 파일 선택
        async function selectOutboxFile(file) {
            closeOutboxModal();

            const fileExt = file.filename.split('.').pop();

            try {
                showStatus(`📄 ${file.filename} 읽는 중...`, 'info');

                const contentResponse = await fetch(`http://localhost:3030/outbox/read/${file.filename}`);
                const contentResult = await contentResponse.json();

                if (!contentResult.success) {
                    throw new Error(contentResult.error || '파일 읽기 실패');
                }

                // MD 파일 처리
                if (fileExt === 'md') {
                    const mdData = JSON.parse(contentResult.content);

                    // 새 창에서 Markdown을 HTML로 렌더링
                    const newWindow = window.open('', '_blank');
                    newWindow.document.write(`
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${mdData.title || file.filename}</title>
    <style>
        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
            background: #f9fafb;
        }
        .markdown-body {
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: var(--shadow-sm);
        }
        h1 { color: #1f2937; border-bottom: 3px solid #10B981; padding-bottom: 10px; }
        h2 { color: #374151; margin-top: 30px; border-left: 4px solid #10B981; padding-left: 12px; }
        h3 { color: #4b5563; }
        pre { background: #1e1e1e; color: #d4d4d4; padding: 15px; border-radius: 8px; overflow-x: auto; }
        code { background: #f3f4f6; padding: 2px 6px; border-radius: 4px; font-family: 'Consolas', monospace; }
        pre code { background: transparent; padding: 0; }
        table { border-collapse: collapse; width: 100%; margin: 20px 0; }
        th, td { border: 1px solid #e5e7eb; padding: 12px; text-align: left; }
        th { background: #f3f4f6; font-weight: 600; }
        blockquote { border-left: 4px solid #10B981; padding-left: 16px; color: #6b7280; margin: 20px 0; }
        a { color: #10B981; text-decoration: none; }
        a:hover { text-decoration: underline; }
        .meta { text-align: right; color: #6b7280; font-size: 14px; margin-top: 40px; padding-top: 20px; border-top: 1px solid #e5e7eb; }
    </style>
</head>
<body>
    <div class="markdown-body">
        ${mdData.content}
        <div class="meta">📅 ${mdData.date} | 📄 Markdown Document</div>
    </div>

    <!-- FAB 버튼 (모바일용) -->
    <!-- FAB 버튼 - 우측 하단 (앰버/골드, 우측 사이드바 전용) -->
    <div class="fab-container">
        <button class="fab-btn fab-info" onclick="toggleRightSidebar()" title="우측 정보 패널">≡</button>
    </div>
</body>
</html>
                    `);
                    newWindow.document.close();
                    showStatus(`✅ ${file.filename} 렌더링 완료!`, 'success');
                    return;
                }

                // JSON 파일 처리
                const data = JSON.parse(contentResult.content);
                const htmlContent = generateHTMLFromJSON(data);

                // 새 창에서 열기
                const newWindow = window.open('', '_blank');
                newWindow.document.write(htmlContent);
                newWindow.document.close();

                showStatus(`✅ ${file.filename} HTML로 렌더링 완료!`, 'success');

            } catch (error) {
                console.error('파일 읽기 실패:', error);
                showStatus('❌ 파일 읽기 실패', 'error');
                alert(`❌ 파일을 읽을 수 없습니다: ${file.filename}`);
            }
        }

        // Perplexity에 질문 보내기
        async function askPerplexity() {
            const question = document.getElementById('perplexityQuestion').value;
            const workspace = document.getElementById('textEditor');

            if (!question.trim()) {
                alert('질문을 입력하세요!');
                return;
            }

            // Workspace에 로딩 표시
            workspace.value = '🔮 Perplexity가 생각 중입니다...\n\n';

            try {
                // TODO: 실제 API 연결 시 아래 코드 활성화
                // const response = await fetch('http://localhost:3030/perplexity/ask', {
                //     method: 'POST',
                //     headers: { 'Content-Type': 'application/json' },
                //     body: JSON.stringify({ question })
                // });
                // const result = await response.json();

                // 임시 응답 (테스트용)
                setTimeout(() => {
                    workspace.value = `📝 질문: ${question}\n\n`;
                    workspace.value += `🔮 Perplexity의 답변:\n\n`;
                    workspace.value += `[여기에 Perplexity의 실제 답변이 표시됩니다]\n\n`;
                    workspace.value += `이 기능을 사용하려면 Perplexity API를 연결하세요.\n`;
                    workspace.value += `자세한 내용은 'PERPLEXITY_API_연결_가이드.md'를 참고하세요.\n\n`;
                    workspace.value += `---\n`;
                    workspace.value += `시간: ${new Date().toLocaleString('ko-KR')}`;

                    // 질문창 초기화
                    document.getElementById('perplexityQuestion').value = '';
                }, 1000);

            } catch (error) {
                console.error('Perplexity 요청 실패:', error);
                alert('Perplexity API 연결 실패!');
                workspace.value = '';
            }
        }

        // 파일 선택 핸들러
        let supportFiles = [];
        function handleSupportFileSelect(event) {
            const files = Array.from(event.target.files);
            supportFiles = files;

            const fileList = document.getElementById('supportFileList');
            if (files.length > 0) {
                fileList.innerHTML = files.map((file, idx) => {
                    const sizeKB = (file.size / 1024).toFixed(1);
                    return '<div style="padding: 2px 0;">📎 ' + file.name + ' (' + sizeKB + 'KB) <span onclick="removeSupportFile(' + idx + ')" style="cursor: pointer; color: #EF4444;">✕</span></div>';
                }).join('');
            } else {
                fileList.innerHTML = '';
            }
        }

        function removeSupportFile(index) {
            supportFiles.splice(index, 1);
            const dt = new DataTransfer();
            supportFiles.forEach(file => dt.items.add(file));
            document.getElementById('supportFile').files = dt.files;
            handleSupportFileSelect({ target: { files: dt.files } });
        }

        // 써니에게 문의 제출
        async function submitSupport() {
            console.log('submitSupport 함수 실행됨');
            const question = document.getElementById('supportQuestion').value;
            const workspace = document.getElementById('textEditor');

            console.log('질문 내용:', question);
            console.log('workspace 요소:', workspace);

            if (!question.trim()) {
                alert('문의 내용을 입력하세요!');
                return;
            }

            try {
                // Workspace에 접수 확인 표시
                let fileInfo = supportFiles.length > 0 ? '\n📎 첨부 파일: ' + supportFiles.map(f => f.name).join(', ') : '';
                const currentContent = workspace.value;
                const newContent = '☀️ 써니에게 문의\n\n📝 문의 내용:\n' + question + fileInfo + '\n\n✅ 문의가 접수되었습니다!\n관리자가 확인 후 답변을 드립니다.\n\n접수 시간: ' + new Date().toLocaleString('ko-KR') + '\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\n' + currentContent;

                workspace.value = newContent;
                console.log('workspace에 내용 추가됨');

                // 문의창 및 파일 초기화
                document.getElementById('supportQuestion').value = '';
                document.getElementById('supportFile').value = '';
                supportFiles = [];
                document.getElementById('supportFileList').innerHTML = '';

                showStatus('✅ 문의가 접수되었습니다!', 'success');
                console.log('제출 완료');

            } catch (error) {
                console.error('문의 제출 실패:', error);
                alert('문의 제출 중 오류가 발생했습니다. 잠시 후 다시 시도해주세요.');
            }
        }

        // 푸터에서 써니에게 묻기 클릭
        function openSunnySupport(event) {
            event.preventDefault();
            // 우측 사이드바로 스크롤
            const supportSection = document.querySelector('.sidebar-section');
            if (supportSection) {
                supportSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                // 문의 입력창 포커스
                setTimeout(() => {
                    document.getElementById('supportQuestion').focus();
                }, 500);
            }
        }

        // Supabase Realtime으로 답변 도착 감지 및 표시
        // TODO: 실제 구현 시 활성화
        /*
        const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);

        // 답변 실시간 구독
        const channel = supabase
            .channel('support-answers')
            .on(
                'postgres_changes',
                {
                    event: 'UPDATE',
                    schema: 'public',
                    table: 'support_requests',
                    filter: `user_id=eq.${currentUser.id}`
                },
                (payload) => {
                    if (payload.new.answered_at) {
                        displaySupportResponse(
                            payload.new.question_text,
                            payload.new.answer_text,
                            payload.new.answered_at
                        );
                    }
                }
            )
            .subscribe();
        */

        // 관리자 답변 표시 (Realtime으로 자동 호출됨)
        function displaySupportResponse(question, answer, answeredAt) {
            const workspace = document.getElementById('textEditor');

            // AI Q&A와 동일한 형식으로 답변 표시
            workspace.value = `☀️ 써니의 답변\n\n📝 질문:\n${question}\n\n✅ 답변:\n${answer}\n\n답변 시간: ${new Date(answeredAt).toLocaleString('ko-KR')}\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\n${workspace.value}`;

            // 알림 표시
            showStatus('☀️ 써니님의 답변이 도착했습니다!', 'success', 3000);
        }

        // ESC 키로 모달 닫기
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                const gridModal = document.getElementById('gridFullscreenModal');
                const translationModal = document.getElementById('translationFullviewModal');
                const addProjectModal = document.getElementById('addProjectModal');

                if (gridModal.classList.contains('active')) {
                    closeGridFullscreen();
                }
                if (translationModal.classList.contains('active')) {
                    closeTranslationFullview();
                }
                if (addProjectModal.classList.contains('active')) {
                    closeAddProjectModal();
                }
            }
        });

        // 프로젝트 그리드 전체화면 열기
        function openGridFullscreen() {
            const modal = document.getElementById('gridFullscreenModal');
            const gridContent = document.querySelector('.workspace-bottom .grid-content');
            const fullscreenContent = document.getElementById('fullscreenGridContent');

            // 그리드 콘텐츠 복사
            fullscreenContent.innerHTML = gridContent.innerHTML;

            // 모달 표시
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // 프로젝트 그리드 전체화면 닫기
        function closeGridFullscreen() {
            const modal = document.getElementById('gridFullscreenModal');
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // 번역 전체보기 열기
        function openTranslationFullview() {
            const modal = document.getElementById('translationFullviewModal');
            const translatedText = document.getElementById('translatedText').textContent;
            const fullviewText = document.getElementById('fullviewTranslatedText');

            fullviewText.textContent = translatedText || '번역된 내용이 없습니다.';

            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // 번역 전체보기 닫기
        function closeTranslationFullview() {
            const modal = document.getElementById('translationFullviewModal');
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // 2D/3D 뷰 전환
        function switchView(viewType) {
            const buttons = document.querySelectorAll('.view-btn');
            buttons.forEach(btn => {
                btn.classList.remove('active');
            });
            event.currentTarget.classList.add('active');

            // TODO: 실제 2D/3D 뷰 전환 로직 구현
            console.log('View switched to:', viewType);
        }

        // 매뉴얼 보기
        function openManual() {
            // 모바일이면 모바일 버전으로
            const isMobile = window.innerWidth <= 768;
            const url = isMobile ? '/S0_Project-SAL-Grid_%EC%83%9D%EC%84%B1/manual/manual_mobile.html' : '/S0_Project-SAL-Grid_%EC%83%9D%EC%84%B1/manual/manual.html';
            window.open(url, '_blank');
        }

        function openLearningViewer() {
            // 학습용 콘텐츠 뷰어 열기
            window.open('/%EB%B6%80%EC%88%98%EC%A0%81_%EA%B3%A0%EC%9C%A0%EA%B8%B0%EB%8A%A5/%EC%BD%98%ED%85%90%EC%B8%A0/%ED%95%99%EC%8A%B5%EC%9A%A9_Books_New/viewer.html', '_blank');
        }

        // 학습용 콘텐츠 목록 (로컬 검색용)
        const LEARNING_CONTENTS = [
            { category: 'Claude & Claude Code 사용법', title: '1편 - Claude란 무엇인가', path: '부수적_고유기능/콘텐츠/학습용_Books/1. Claude&ClaudeCode사용법/1편_Claude란_무엇인가.md' },
            { category: 'Claude & Claude Code 사용법', title: '2편 - 프롬프트 엔지니어링 기초', path: '부수적_고유기능/콘텐츠/학습용_Books/1. Claude&ClaudeCode사용법/2편_프롬프트_엔지니어링_기초편_보강.md' },
            { category: 'Claude & Claude Code 사용법', title: '3편 - 프롬프트 엔지니어링 고급', path: '부수적_고유기능/콘텐츠/학습용_Books/1. Claude&ClaudeCode사용법/3편_프롬프트_엔지니어링_고급편_10개.md' },
            { category: 'Claude & Claude Code 사용법', title: '4편 - Claude Code 첫 만남', path: '부수적_고유기능/콘텐츠/학습용_Books/1. Claude&ClaudeCode사용법/4편_Claude_Code_첫_만남_수정.md' },
            { category: 'Claude & Claude Code 사용법', title: '5편 - Claude Code 직접 실행 기능', path: '부수적_고유기능/콘텐츠/학습용_Books/1. Claude&ClaudeCode사용법/5편_Claude_Code의_직접_실행_기능.md' },
            { category: 'Claude & Claude Code 사용법', title: '6편 - 자동화 워크플로우 구축', path: '부수적_고유기능/콘텐츠/학습용_Books/1. Claude&ClaudeCode사용법/6편_Claude_Code의_자동화_워크플로우_구축용_코드_생성_기능.md' },
            { category: 'Claude & Claude Code 사용법', title: '7편 - 서브 에이전트 이해', path: '부수적_고유기능/콘텐츠/학습용_Books/1. Claude&ClaudeCode사용법/7편_Claude_Code_서브_에이전트_이해.md' },
            { category: 'Claude & Claude Code 사용법', title: '8편 - 서브 에이전트 생성과 관리', path: '부수적_고유기능/콘텐츠/학습용_Books/1. Claude&ClaudeCode사용법/8편_Claude_Code_서브_에이전트_생성과_관리.md' },
            { category: 'Claude & Claude Code 사용법', title: '9편 - 서브 에이전트 기본 활용 패턴', path: '부수적_고유기능/콘텐츠/학습용_Books/1. Claude&ClaudeCode사용법/9편_Claude_Code_서브_에이전트의_기본_활용_패턴.md' },
            { category: 'Claude & Claude Code 사용법', title: '10편 - 서브 에이전트 개발분야 활용법', path: '부수적_고유기능/콘텐츠/학습용_Books/1. Claude&ClaudeCode사용법/10편_Claude Code 서브 에이전트의 개발분야 활용법.md' },
            { category: 'Claude & Claude Code 사용법', title: '11편 - 서브 에이전트 비개발분야 활용법', path: '부수적_고유기능/콘텐츠/학습용_Books/1. Claude&ClaudeCode사용법/11편_Claude Code 서브 에이전트의 비개발분야 활용법.md' },
            { category: 'Claude & Claude Code 사용법', title: '12편 - MCP 기초', path: '부수적_고유기능/콘텐츠/학습용_Books/1. Claude&ClaudeCode사용법/12편_MCP_기초_외부_서비스와_연결하기.md' },
            { category: 'Claude & Claude Code 사용법', title: '13편 - MCP 실전 활용법', path: '부수적_고유기능/콘텐츠/학습용_Books/1. Claude&ClaudeCode사용법/13편_MCP_실전_활용법_및_다른_AI_확장_시스템과의_비교.md' },
            { category: 'Claude & Claude Code 사용법', title: '14편 - API를 통한 AI 연동', path: '부수적_고유기능/콘텐츠/학습용_Books/1. Claude&ClaudeCode사용법/14편_API를_통한_AI_연동과_협업_여러_AI를_조화롭게_활용하기.md' },
            { category: 'Claude & Claude Code 사용법', title: '15편 - VS Code 완전 정복', path: '부수적_고유기능/콘텐츠/학습용_Books/1. Claude&ClaudeCode사용법/15편_VS_Code_완전_정복_초보자_필수_가이드.md' },
            { category: 'Claude & Claude Code 사용법', title: '16편 - Claude Code와 VS Code 결합 기초', path: '부수적_고유기능/콘텐츠/학습용_Books/1. Claude&ClaudeCode사용법/16편_Claude_Code와_VS_Code_결합_기초.md' },
            { category: 'Claude & Claude Code 사용법', title: '17편 - Claude Code와 VS Code 결합 심화', path: '부수적_고유기능/콘텐츠/학습용_Books/1. Claude&ClaudeCode사용법/17편_Claude_Code와_VS_Code_결합_심화.md' },
            { category: 'Claude & Claude Code 사용법', title: '18편 - Claude 토큰 사용료 구조', path: '부수적_고유기능/콘텐츠/학습용_Books/1. Claude&ClaudeCode사용법/18편_Claude 토큰 사용료 구조 및 최적화 방안.md' },
            { category: 'Claude & Claude Code 사용법', title: '19편 - 작업환경 최적화', path: '부수적_고유기능/콘텐츠/학습용_Books/1. Claude&ClaudeCode사용법/19편_작업환경_최적화_3개_최종.md' },
            { category: 'Claude & Claude Code 사용법', title: '20편 - 세션 기억 관리 완벽 가이드', path: '부수적_고유기능/콘텐츠/학습용_Books/1. Claude&ClaudeCode사용법/20편_Claude_Code_세션_기억_관리_완벽_가이드.md' },
            { category: 'Claude & Claude Code 사용법', title: 'Claude Code 설치 가이드', path: '부수적_고유기능/콘텐츠/학습용_Books/1. Claude&ClaudeCode사용법/Claude_Code_설치_단계별_가이드.md' },
            { category: 'Claude & Claude Code 사용법', title: 'Claude 파일 생성 기능 핵심 정리', path: '부수적_고유기능/콘텐츠/학습용_Books/1. Claude&ClaudeCode사용법/Claude 파일 생성 기능 - 혁신적 업데이트 핵심 정리.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '1편 - 웹사이트 개발 핵심 개념', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/01편_웹사이트_개발_핵심_개념.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '2편 - 웹사이트 작동 원리와 구조', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/02편_웹사이트_작동_원리와_구조.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '3편 - CLI 명령줄', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/03편_CLI_명령줄.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '4편 - 코드 에디터와 IDE', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/04편_코드_에디터와_IDE.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '5편 - Git과 GitHub', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/05편_Git과_GitHub.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '6편 - 분류체계 (1)', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/06편_분류체계(1).md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '7편 - 분류체계 (2)', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/07편_분류체계(2).md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '8편 - 기술스택: Language', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/08편_기술스택_-_Language.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '9편 - 기술스택: Runtime', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/09편_기술스택_-_Runtime.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '10편 - 기술스택: PackageManager', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/10편_기술스택_-_PackageManager.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '11편 - 기술스택: Tools', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/11편_기술스택_-_Tools.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '12편 - 기술스택: Library', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/12편_기술스택_-_Library.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '13편 - 기술스택: Framework', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/13편_기술스택_-_Framework.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '14편 - 기술스택: ExternalService', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/14편_기술스택_-_ExternalService.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '15편 - 개발영역: Frontend', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/15편_개발영역_-_Frontend.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '16편 - 개발영역: BackendInfra', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/16편_개발영역_-_BackendInfra.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '17편 - 개발영역: BackendAPI', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/17편_개발영역_-_BackendAPI.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '18편 - 개발영역: Database', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/18편_개발영역_-_Database.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '19편 - 개발영역: Security', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/19편_개발영역_-_Security.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '20편 - 개발영역: Testing', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/20편_개발영역_-_Testing.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '21편 - 개발영역: DevOps', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/21편_개발영역_-_DevOps.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '22편 - 최적화: SEO', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/22편_최적화_SEO.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '23편 - 최적화: 웹접근성', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/23편_최적화_웹접근성.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '24편 - 최적화: 성능', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/24편_최적화_성능.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '25편 - 심화: HTML', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/25편_심화_-_HTML.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '26편 - 심화: CSS', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/26편_심화_-_CSS.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '27편 - 심화: JavaScript', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/27편_심화_-_JavaScript.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '28편 - 심화: TypeScript', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/28편_심화_-_TypeScript.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '29편 - 심화: SQL', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/29편_심화_-_SQL.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '30편 - 심화: Supabase', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/30편_심화_-_Supabase.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '31편 - 심화: 도메인과 호스팅', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/31편_심화_-_도메인과_호스팅.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '32편 - 심화: Vercel', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/32편_심화_-_Vercel.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '33편 - 심화: Resend', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/33편_심화_-_Resend.md' },
            { category: '풀스택 웹사이트 개발 기초지식', title: '부록 - 용어사전', path: '부수적_고유기능/콘텐츠/학습용_Books_New/2권_풀스택_웹사이트_개발_기초지식/부록_용어사전.md' },
            { category: '프로젝트 관리 방법', title: '1편 - SAL Grid 개요와 핵심 개념', path: '부수적_고유기능/콘텐츠/학습용_Books_New/3권_프로젝트_관리_방법/01편_SAL_Grid_개요와_핵심_개념.md' },
            { category: '프로젝트 관리 방법', title: '2편 - 22개 속성 정의', path: '부수적_고유기능/콘텐츠/학습용_Books_New/3권_프로젝트_관리_방법/02편_22개_속성_정의.md' },
            { category: '프로젝트 관리 방법', title: '3편 - 5x11 Matrix', path: '부수적_고유기능/콘텐츠/학습용_Books_New/3권_프로젝트_관리_방법/03편_5x11_Matrix.md' },
            { category: '프로젝트 관리 방법', title: '4편 - Task 생성과 의존성 관리', path: '부수적_고유기능/콘텐츠/학습용_Books_New/3권_프로젝트_관리_방법/04편_Task_생성과_의존성_관리.md' },
            { category: '프로젝트 관리 방법', title: '5편 - Task Instruction 작성법', path: '부수적_고유기능/콘텐츠/학습용_Books_New/3권_프로젝트_관리_방법/05편_Task_Instruction_작성법.md' },
            { category: '프로젝트 관리 방법', title: '6편 - Verification Instruction 작성법', path: '부수적_고유기능/콘텐츠/학습용_Books_New/3권_프로젝트_관리_방법/06편_Verification_Instruction_작성법.md' },
            { category: '프로젝트 관리 방법', title: '7편 - 검증 시스템과 Stage Gate', path: '부수적_고유기능/콘텐츠/학습용_Books_New/3권_프로젝트_관리_방법/07편_검증_시스템과_Stage_Gate.md' },
            { category: '프로젝트 관리 방법', title: '8편 - Supabase HTML Viewer', path: '부수적_고유기능/콘텐츠/학습용_Books_New/3권_프로젝트_관리_방법/08편_Supabase_HTML_Viewer.md' },
            { category: '프로젝트 관리 방법', title: '9편 - SAL Grid 매뉴얼 활용법', path: '부수적_고유기능/콘텐츠/학습용_Books_New/3권_프로젝트_관리_방법/09편_SAL_Grid_매뉴얼_활용법.md' },
            { category: '프로젝트 관리 방법', title: '10편 - Order Sheet 제도', path: '부수적_고유기능/콘텐츠/학습용_Books_New/3권_프로젝트_관리_방법/10편_Order_Sheet_제도.md' },
            { category: '프로젝트 관리 방법', title: '11편 - AI 작업 6대 규칙', path: '부수적_고유기능/콘텐츠/학습용_Books_New/3권_프로젝트_관리_방법/11편_AI_작업_6대_규칙.md' },
            { category: '프로젝트 관리 방법', title: '12편 - Orders/Reports JSON 시스템', path: '부수적_고유기능/콘텐츠/학습용_Books_New/3권_프로젝트_관리_방법/12편_Orders_Reports_JSON_시스템.md' }
        ];

        // 로컬 검색 함수
        function searchLearningContentsLocal(query) {
            const resultsDiv = document.getElementById('learningSearchResults');

            if (!query || query.trim() === '') {
                resultsDiv.innerHTML = '';
                return;
            }

            const searchTerm = query.toLowerCase();
            const results = LEARNING_CONTENTS.filter(item =>
                item.name.toLowerCase().includes(searchTerm) ||
                item.category.toLowerCase().includes(searchTerm)
            );

            if (results.length === 0) {
                resultsDiv.innerHTML = '<div style="text-align: center; padding: 12px; color: #6c757d; font-size: 11px;">검색 결과가 없습니다</div>';
                return;
            }

            let html = '';
            results.forEach(item => {
                html += `
                    <div onclick="openLearningContent('${item.path}')" style="
                        padding: 10px 12px;
                        margin-bottom: 6px;
                        background: white;
                        border: 1px solid #dee2e6;
                        border-radius: 8px;
                        cursor: pointer;
                        transition: all 0.2s;
                    " onmouseover="this.style.borderColor='#667eea'; this.style.background='#f8f9ff';"
                       onmouseout="this.style.borderColor='#dee2e6'; this.style.background='white';">
                        <div style="font-size: 13px; font-weight: 600; color: #212529; margin-bottom: 2px;">${item.name}</div>
                        <div style="font-size: 11px; color: #6c757d;">📂 ${item.category}</div>
                    </div>
                `;
            });

            resultsDiv.innerHTML = `
                <div style="font-size: 11px; color: #667eea; margin-bottom: 8px; padding: 4px 0;">🔍 ${results.length}개 결과</div>
                ${html}
            `;
        }

        // 특정 콘텐츠 열기
        function openLearningContent(path) {
            window.open('/%EB%B6%80%EC%88%98%EC%A0%81_%EA%B3%A0%EC%9C%A0%EA%B8%B0%EB%8A%A5/%EC%BD%98%ED%85%90%EC%B8%A0/%ED%95%99%EC%8A%B5%EC%9A%A9_Books_New/viewer.html?path=' + encodeURIComponent(path), '_blank');
        }

        // ================================================
        // FAQ & Tip 로컬 데이터 및 검색
        // ================================================

        // FAQ & Tip 콘텐츠 배열 (로컬 관리) - 실제 개발 경험 기반
        const FAQ_CONTENTS = [
            // ========== FAQ (15개) ==========
            // 회원/로그인
            { type: 'FAQ', category: '회원/로그인', question: 'Google OAuth Redirect URL 설정 문제', answer: 'Google 로그인 시 다른 사이트로 리다이렉트되면 Supabase Dashboard → Authentication → URL Configuration에서 Redirect URLs를 설정하세요. 개발환경: http://localhost:8888/**, 프로덕션: https://ssalworks.com/**' },
            { type: 'FAQ', category: '회원/로그인', question: '로그인 후 닉네임이 표시되지 않아요', answer: 'users 테이블에서 닉네임을 조회하는 로직이 필요합니다. checkAuthStatus() 함수에서 supabase.from("users").select("nickname")으로 닉네임을 가져와 표시하세요.' },
            { type: 'FAQ', category: '회원/로그인', question: '비밀번호 재설정 이메일이 안 와요', answer: '스팸 메일함을 확인하세요. 발신자: noreply@mail.app.supabase.io입니다. 계속 안 오면 Resend API 설정을 확인하세요.' },

            // 구독/결제
            { type: 'FAQ', category: '구독/결제', question: '토스페이먼츠 빌링키 설정', answer: '프로토타입은 더미 빌링키(test_billing_key_001) 사용 중입니다. 본개발 시 토스 가맹점 등록(1-2주), 빌링키 발급 API, 자동결제 API 연동이 필요합니다.' },
            { type: 'FAQ', category: '구독/결제', question: '서비스 상태 관리 방법', answer: 'users 테이블의 subscription_status 컬럼 사용: active(정상), paused(일시정지), cancelled(해지), expired(만료). My Page > 서비스 이용 현황에서 관리합니다.' },
            { type: 'FAQ', category: '구독/결제', question: 'PG 이용약관 동의 구현', answer: '결제 시 전자금융거래 이용약관, 개인정보 제3자 제공 동의 체크박스가 법적 필수입니다. 프로토타입에는 미구현, 본개발 시 추가 필요합니다.' },

            // 크레딧
            { type: 'FAQ', category: '크레딧', question: '크레딧 사용처와 충전 방법', answer: 'AI 질문(1크레딧), 코드 생성(3-5크레딧), 문서 자동화(2크레딧). My Page > 크레딧 관리에서 카드 결제로 충전. 유효기간: 충전일로부터 1년.' },
            { type: 'FAQ', category: '크레딧', question: 'API 키 보안 관리', answer: 'API 키는 절대 코드에 하드코딩하지 마세요. 환경변수(process.env)로 관리하고, .env 파일은 .gitignore에 추가하세요. SERVICE_ROLE_KEY는 서버에서만 사용!' },

            // Claude Code
            { type: 'FAQ', category: 'Claude Code', question: 'Claude Code 설치 오류 해결', answer: 'Node.js 18 이상 필수! npm install -g @anthropic-ai/claude-code로 설치. 권한 오류 시 sudo 사용(Mac/Linux). API 키는 console.anthropic.com에서 발급.' },
            { type: 'FAQ', category: 'Claude Code', question: 'MCP 서버 설정 방법', answer: 'claude mcp add [서버명]으로 추가. 자주 사용: @modelcontextprotocol/server-filesystem(파일), server-memory(세션 기억), server-github(GitHub 연동).' },
            { type: 'FAQ', category: 'Claude Code', question: '세션이 끊어졌을 때 작업 복구', answer: '"이전 작업 이어서 해줘"라고 말하면 Claude Code가 이전 대화를 기억합니다. SSAL Works는 .claude/work_logs/current.md에 작업 로그가 저장되어 있어 더 정확한 복구가 가능합니다.' },

            // 기술지원
            { type: 'FAQ', category: '기술지원', question: 'Supabase RLS 정책 오류', answer: 'INSERT/UPDATE/DELETE 권한 오류는 RLS 정책 때문입니다. 개발용 _dev.sql은 anon 허용, 프로덕션은 authenticated만 허용. 배포 전 반드시 프로덕션 정책으로 교체!' },
            { type: 'FAQ', category: '기술지원', question: '환경변수 설정 순서', answer: '1순위: Supabase(URL, ANON_KEY), 2순위: Google OAuth, 3순위: 토스페이먼츠, 4순위: Resend. 클라이언트용(공개가능)과 서버용(비공개)을 구분하세요.' },
            { type: 'FAQ', category: '기술지원', question: 'Production vs Prototype 폴더 차이', answer: 'Production: 실제 배포용, Prototype: 개발/테스트용. OAuth Redirect URL 등 경로 설정 시 혼동 주의! 실제 오류 사례: Prototype 경로로 설정되어 Google 로그인 실패.' },
            { type: 'FAQ', category: '기술지원', question: '로컬 서버 실행 방법', answer: 'file:// 프로토콜로는 OAuth 작동 안 함! npx serve . -l 8888로 로컬 서버 실행 후 http://localhost:8888에서 테스트하세요.' },

            // ========== Tip (15개) ==========
            // Claude Code 활용
            { type: 'Tip', category: 'Claude Code 활용', question: 'CLAUDE.md로 프로젝트 컨텍스트 설정하기', answer: '💡 프로젝트 루트에 CLAUDE.md 파일을 만들어 프로젝트 규칙, 디렉토리 구조, 주의사항을 적어두세요. Claude Code가 자동으로 읽어 더 정확한 작업을 수행합니다.' },
            { type: 'Tip', category: 'Claude Code 활용', question: 'work_logs로 세션 연속성 유지하기', answer: '💡 .claude/work_logs/current.md에 작업 내용을 기록하면 세션이 끊어져도 "work_logs 확인하고 이어서 해줘"로 복구할 수 있습니다. 50KB 초과 시 자동 아카이브됩니다.' },
            { type: 'Tip', category: 'Claude Code 활용', question: '서브에이전트 효과적으로 활용하기', answer: '💡 backend-developer, frontend-developer, code-reviewer 등 서브에이전트를 활용하세요. 작업자와 검증자를 분리하면 품질이 향상됩니다.' },
            { type: 'Tip', category: 'Claude Code 활용', question: 'Slash Commands 활용하기', answer: '💡 .claude/commands/ 폴더에 커스텀 명령어를 만들 수 있습니다. /commit, /review, /test 등 자주 사용하는 작업을 명령어로 만들어두면 효율적입니다.' },

            // SAL Grid 활용
            { type: 'Tip', category: 'SAL Grid 활용', question: 'Task를 작게 나누는 기준', answer: '💡 하나의 Task는 2시간 이내에 완료할 수 있는 크기로! 너무 크면 진행 파악이 어렵고, 너무 작으면 관리 오버헤드가 커집니다. 예: "회원인증 시스템" → 회원가입 API, 로그인 API, OAuth API로 분리.' },
            { type: 'Tip', category: 'SAL Grid 활용', question: 'Phase Gate 검증 체크리스트', answer: '💡 Phase 완료 시 필수 검증: 1) Task ID 주석 있음 2) 테스트 80% 이상 통과 3) 린트 오류 없음 4) 문서 업데이트. 검증 결과는 stage-gates/ 폴더에 저장.' },
            { type: 'Tip', category: 'SAL Grid 활용', question: 'Task ID로 파일 관리하기', answer: '💡 모든 파일 첫 줄에 Task ID 주석을 넣으세요. /* Task ID: S2BA1 */ 형식으로. 나중에 어떤 작업에서 만든 파일인지 추적하기 쉽습니다.' },
            { type: 'Tip', category: 'SAL Grid 활용', question: '검증 완료 후 문서화하기', answer: '💡 작업 → 검증 → 문서화 → 보고 순서! outbox에 {task_id}_completed.json, {task_id}_verification.json 저장을 잊지 마세요.' },

            // 효율적인 질문법
            { type: 'Tip', category: '효율적인 질문법', question: '구체적으로 질문하는 방법', answer: '💡 "안 돼요" 대신 구체적으로! 1) 무엇을 하려 했는가 2) 실제로 무슨 일이 일어났는가 3) 오류 메시지 4) 파일 위치. 브라우저 콘솔(F12)에서 오류 확인 필수!' },
            { type: 'Tip', category: '효율적인 질문법', question: '코드 블록 활용하기', answer: '💡 코드 공유 시 ```javascript 처럼 언어 태그와 함께 코드 블록으로 감싸세요. 문법 강조가 되어 가독성이 좋아지고, 복사도 쉬워집니다.' },
            { type: 'Tip', category: '효율적인 질문법', question: '단계별로 요청하기', answer: '💡 한 번에 큰 작업보다 작은 단계로 나눠서 요청하세요. 중간에 방향 수정이 쉽고, 각 단계별로 검증할 수 있습니다. "먼저 API 설계해줘" → "구현해줘" → "테스트해줘"' },

            // 개발 생산성
            { type: 'Tip', category: '개발 생산성', question: 'Git 커밋 메시지 작성법', answer: '💡 Conventional Commits 형식: feat(새기능), fix(버그수정), docs(문서), refactor(리팩토링). 예: "feat: Google OAuth 로그인 구현". Claude Code에게 "커밋해줘"라고 하면 자동 작성!' },
            { type: 'Tip', category: '개발 생산성', question: '파일 저장 위치 확인하기', answer: '💡 파일 생성 전 PROJECT_DIRECTORY_STRUCTURE.md 확인 필수! Stage+Area 기반으로 저장 (S2BA1 → S2_개발-1차/Backend_APIs/). 모르겠으면 Claude Code에게 물어보세요.' },
            { type: 'Tip', category: '개발 생산성', question: '환경변수 관리 베스트 프랙티스', answer: '💡 .env.example(템플릿, Git 커밋), .env.local(실제 값, Git 무시). Vercel에서는 Dashboard > Environment Variables에서 환경별로 설정. SECRET_KEY는 절대 클라이언트 노출 금지!' },
            { type: 'Tip', category: '개발 생산성', question: 'Supabase 쿼리 최적화', answer: '💡 select("*") 대신 필요한 컬럼만! 페이지네이션(.range(0,9)), 서버 필터링(.eq("status","active")) 활용. 자주 검색하는 컬럼에 인덱스 추가하면 성능 향상.' }
        ];

        // FAQ 로컬 검색 함수
        function searchFaqLocal(query) {
            const resultsDiv = document.getElementById('faqSearchResults');

            if (!query || query.trim() === '') {
                resultsDiv.innerHTML = '';
                return;
            }

            const searchTerm = query.toLowerCase();
            const results = FAQ_CONTENTS.filter(item =>
                item.question.toLowerCase().includes(searchTerm) ||
                item.answer.toLowerCase().includes(searchTerm) ||
                item.category.toLowerCase().includes(searchTerm)
            );

            if (results.length === 0) {
                resultsDiv.innerHTML = '<div style="text-align: center; padding: 12px; color: #6c757d; font-size: 11px;">검색 결과가 없습니다</div>';
                return;
            }

            let html = '';
            results.forEach((item, index) => {
                html += `
                    <div onclick="showFaqAnswer(${index}, '${searchTerm}')" style="
                        padding: 10px 12px;
                        margin-bottom: 6px;
                        background: white;
                        border: 1px solid #dee2e6;
                        border-radius: 8px;
                        cursor: pointer;
                        transition: all 0.2s;
                    " onmouseover="this.style.borderColor='#F59E0B'; this.style.background='#fffbeb';"
                       onmouseout="this.style.borderColor='#dee2e6'; this.style.background='white';">
                        <div style="font-size: 13px; font-weight: 600; color: #212529; margin-bottom: 2px;">${item.question}</div>
                        <div style="font-size: 11px; color: #6c757d;">📂 ${item.category}</div>
                    </div>
                `;
            });

            resultsDiv.innerHTML = `
                <div style="font-size: 11px; color: #F59E0B; margin-bottom: 8px; padding: 4px 0;">🔍 ${results.length}개 결과</div>
                ${html}
            `;
        }

        // FAQ 답변 모달 표시
        function showFaqAnswer(index, searchTerm) {
            const item = FAQ_CONTENTS.filter(faq =>
                faq.question.toLowerCase().includes(searchTerm) ||
                faq.answer.toLowerCase().includes(searchTerm) ||
                faq.category.toLowerCase().includes(searchTerm)
            )[index];

            if (!item) return;

            // 모달 생성
            const overlay = document.createElement('div');
            overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.5);
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
            `;

            const modal = document.createElement('div');
            modal.style.cssText = `
                background: white;
                border-radius: 12px;
                max-width: 500px;
                width: 90%;
                max-height: 80vh;
                overflow-y: auto;
                box-shadow: var(--shadow-lg);
            `;

            modal.innerHTML = `
                <div style="padding: 20px; border-bottom: 1px solid #dee2e6;">
                    <div style="font-size: 11px; color: #F59E0B; margin-bottom: 8px;">📂 ${item.category}</div>
                    <h3 style="margin: 0; font-size: 18px; color: #212529;">
                        🙋 ${item.question}
                    </h3>
                </div>
                <div style="padding: 20px; line-height: 1.7; color: #495057; font-size: 14px;">
                    ${item.answer}
                </div>
                <div style="padding: 16px 20px; border-top: 1px solid #dee2e6; text-align: right;">
                    <button onclick="this.closest('div').parentElement.parentElement.remove()"
                            style="padding: 8px 20px; background: #6c757d; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 14px;">
                        닫기
                    </button>
                </div>
            `;

            overlay.appendChild(modal);
            overlay.onclick = (e) => {
                if (e.target === overlay) {
                    overlay.remove();
                }
            };

            document.body.appendChild(overlay);
        }

        // FAQ & Tip 전체 보기 (모달)
        function openFaqViewer() {
            // 카테고리별로 그룹화
            const faqItems = FAQ_CONTENTS.filter(item => item.type === 'FAQ');
            const tipItems = FAQ_CONTENTS.filter(item => item.type === 'Tip');

            const faqByCategory = {};
            faqItems.forEach(item => {
                if (!faqByCategory[item.category]) faqByCategory[item.category] = [];
                faqByCategory[item.category].push(item);
            });

            const tipByCategory = {};
            tipItems.forEach(item => {
                if (!tipByCategory[item.category]) tipByCategory[item.category] = [];
                tipByCategory[item.category].push(item);
            });

            // 모달 생성
            const overlay = document.createElement('div');
            overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.6);
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
            `;

            const modal = document.createElement('div');
            modal.style.cssText = `
                background: white;
                border-radius: 12px;
                width: 90%;
                max-width: 800px;
                max-height: 85vh;
                overflow-y: auto;
                box-shadow: var(--shadow-lg);
            `;

            let faqHtml = '';
            Object.keys(faqByCategory).forEach(category => {
                faqHtml += `<div style="margin-bottom: 10px;">
                    <div style="font-weight: 600; color: #F59E0B; margin-bottom: 6px; font-size: 14px;">📂 ${category}</div>`;
                faqByCategory[category].forEach((item, idx) => {
                    faqHtml += `<div style="padding: 8px 12px; margin-bottom: 4px; background: #f8f9fa; border-radius: 8px; cursor: pointer; font-size: 13px;"
                        onclick="this.nextElementSibling.style.display = this.nextElementSibling.style.display === 'none' ? 'block' : 'none'">
                        ❓ ${item.question}
                    </div>
                    <div style="display: none; padding: 12px; margin-bottom: 8px; background: #fff3cd; border-radius: 8px; font-size: 13px; line-height: 1.6;">
                        ${item.answer.replace(/\n/g, '<br>')}
                    </div>`;
                });
                faqHtml += `</div>`;
            });

            let tipHtml = '';
            Object.keys(tipByCategory).forEach(category => {
                tipHtml += `<div style="margin-bottom: 10px;">
                    <div style="font-weight: 600; color: #10B981; margin-bottom: 6px; font-size: 14px;">📂 ${category}</div>`;
                tipByCategory[category].forEach((item, idx) => {
                    tipHtml += `<div style="padding: 8px 12px; margin-bottom: 4px; background: #f0fdf4; border-radius: 8px; cursor: pointer; font-size: 13px;"
                        onclick="this.nextElementSibling.style.display = this.nextElementSibling.style.display === 'none' ? 'block' : 'none'">
                        💡 ${item.question}
                    </div>
                    <div style="display: none; padding: 12px; margin-bottom: 8px; background: #d1fae5; border-radius: 8px; font-size: 13px; line-height: 1.6;">
                        ${item.answer.replace(/\n/g, '<br>')}
                    </div>`;
                });
                tipHtml += `</div>`;
            });

            modal.innerHTML = `
                <div style="padding: 20px; border-bottom: 1px solid #dee2e6; display: flex; justify-content: space-between; align-items: center;">
                    <h2 style="margin: 0; font-size: 20px; color: #212529;">🙋 FAQ & Tip 전체 보기</h2>
                    <button onclick="this.closest('div').parentElement.parentElement.remove()"
                            style="background: none; border: none; font-size: 24px; cursor: pointer; color: #6c757d;">&times;</button>
                </div>
                <div style="padding: 20px;">
                    <div style="display: flex; gap: 20px; margin-bottom: 10px;">
                        <button id="faqTabBtn" onclick="showFaqTab('faq')" style="flex: 1; padding: 10px; background: #F59E0B; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">
                            ❓ FAQ (${faqItems.length}개)
                        </button>
                        <button id="tipTabBtn" onclick="showFaqTab('tip')" style="flex: 1; padding: 10px; background: #e5e7eb; color: #374151; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">
                            💡 Tips (${tipItems.length}개)
                        </button>
                    </div>
                    <div id="faqTabContent" style="display: block;">
                        ${faqHtml}
                    </div>
                    <div id="tipTabContent" style="display: none;">
                        ${tipHtml}
                    </div>
                </div>
            `;

            overlay.appendChild(modal);
            overlay.onclick = (e) => {
                if (e.target === overlay) {
                    overlay.remove();
                }
            };

            document.body.appendChild(overlay);
        }

        // FAQ/Tip 탭 전환
        function showFaqTab(tab) {
            const faqContent = document.getElementById('faqTabContent');
            const tipContent = document.getElementById('tipTabContent');
            const faqBtn = document.getElementById('faqTabBtn');
            const tipBtn = document.getElementById('tipTabBtn');

            if (tab === 'faq') {
                faqContent.style.display = 'block';
                tipContent.style.display = 'none';
                faqBtn.style.background = '#F59E0B';
                faqBtn.style.color = 'white';
                tipBtn.style.background = '#e5e7eb';
                tipBtn.style.color = '#374151';
            } else {
                faqContent.style.display = 'none';
                tipContent.style.display = 'block';
                faqBtn.style.background = '#e5e7eb';
                faqBtn.style.color = '#374151';
                tipBtn.style.background = '#10B981';
                tipBtn.style.color = 'white';
            }
        }

        // Viewer 열기 (SSALWORKS 예시 - Supabase DB)
        function openViewer() {
            // SSALWorks 관리자용 - DB 기반 Viewer
            // 모바일이면 모바일 버전으로
            const isMobile = window.innerWidth <= 768;
            const url = isMobile ? '/S0_Project-SAL-Grid_%EC%83%9D%EC%84%B1/viewer_mobile_database.html' : '/S0_Project-SAL-Grid_%EC%83%9D%EC%84%B1/viewer_database.html';
            window.open(url, '_blank');
        }

        // 내 프로젝트 Viewer 열기 (CSV 기반)
        async function openMyViewer() {
            // 로그인 체크
            const { data: { session } } = await window.supabaseClient.auth.getSession();
            if (!session) {
                alert('로그인이 필요합니다.');
                window.location.href = '/pages/auth/login.html';
                return;
            }

            // CSV 기반 Viewer 열기 (모바일/데스크톱)
            const isMobile = window.innerWidth <= 768;
            const url = isMobile ? '/S0_Project-SAL-Grid_%EC%83%9D%EC%84%B1/viewer/viewer_mobile_csv.html' : '/S0_Project-SAL-Grid_%EC%83%9D%EC%84%B1/viewer/viewer_csv.html';
            window.open(url, '_blank');
        }

        // 내 프로젝트 Manual 열기
        function openMyManual() {
            // TODO: 사용자별 Manual 구현 후 경로 변경
            // 현재는 동일한 Manual 열기 (공통 매뉴얼)
            const isMobile = window.innerWidth <= 768;
            const url = isMobile ? '/S0_Project-SAL-Grid_%EC%83%9D%EC%84%B1/manual/manual_mobile.html' : '/S0_Project-SAL-Grid_%EC%83%9D%EC%84%B1/manual/manual.html';
            window.open(url, '_blank');
        }

        // 현재 프로젝트 이름 업데이트
        function updateCurrentProjectName(projectName) {
            const element = document.getElementById('currentProjectName');
            if (element) {
                element.textContent = projectName;
            }
        }

        // 폴더 열기 함수 (비활성화됨 - 폴더 편집 안내 기능 제거)
        function openFolder(folderPath) {
            // 기능 제거됨 - 아무 동작 안 함
        }

        // Claude Code 소식 펼치기/접기
        function toggleClaudeNews(element) {
            const newsList = element.nextElementSibling;
            const arrow = element.querySelector('.knowledge-arrow');

            if (newsList.style.display === 'none') {
                newsList.style.display = 'block';
                arrow.textContent = '▼';
            } else {
                newsList.style.display = 'none';
                arrow.textContent = '▶';
            }
        }

        // 예시 Project 펼치기/접기
        function toggleExampleProjects() {
            const list = document.getElementById('exampleProjectsList');
            const arrow = document.getElementById('exampleProjectsArrow');

            if (list.style.display === 'none') {
                list.style.display = 'flex';
                arrow.textContent = '▼';
                // 안내문 표시
                showExampleProjectGuide();
            } else {
                list.style.display = 'none';
                arrow.textContent = '▶';
            }
        }

        // 예시 Project 안내문 표시 - GUIDE_CONTENTS 사용
        function showExampleProjectGuide() {
            // GUIDE_CONTENTS['Project_Example']에서 안내문 로드
            openGuideModalFromUrl('예시 프로젝트', 'guides/Project_Example.html', '', false);
        }

        // 새 프로젝트 등록 - 빌더 계정 확인 후 바로 모달 열기
        async function registerNewProject() {
            // 1. 로그인 확인
            const { data: { session } } = await window.supabaseClient.auth.getSession();
            if (!session) {
                alert('로그인이 필요합니다.');
                return;
            }

            // 2. 빌더 계정 확인
            const { data: userData } = await window.supabaseClient
                .from('users')
                .select('installation_fee_paid')
                .eq('id', session.user.id)
                .single();

            if (!userData || !userData.installation_fee_paid) {
                alert('빌더 계정 개설 후 프로젝트를 등록할 수 있습니다.\n\n빌더 계정을 아직 개설하지 않으셨다면, 먼저 빌더 계정을 개설해 주세요.');
                return;
            }

            // 3. 바로 프로젝트 등록 모달 열기
            openAddProjectModal();
        }

        // 프로젝트 등록 후 패키지 설치 안내 표시
        function showPackageInstallGuide() {
            openGuideModalFromUrl('개발 패키지 설치 안내', 'guides/Project_Registration.html', '', false);
        }

        // 완료 프로젝트 펼치기/접기
        function toggleCompletedProjects() {
            const list = document.getElementById('completedProjectsList');
            const arrow = document.getElementById('completedProjectsArrow');

            if (list.style.display === 'none') {
                list.style.display = 'flex';
                arrow.textContent = '▼';
            } else {
                list.style.display = 'none';
                arrow.textContent = '▶';
            }
        }

        // 진행중 프로젝트 펼치기/접기
        function toggleCurrentProject() {
            const list = document.getElementById('currentProjectList');
            const arrow = document.getElementById('currentProjectArrow');

            if (list.style.display === 'none') {
                list.style.display = 'flex';
                arrow.textContent = '▼';
            } else {
                list.style.display = 'none';
                arrow.textContent = '▶';
            }
        }

        // 프로젝트 선택

        // 예시 프로젝트 보기
        function showExampleProject() {
            const workspace = document.getElementById('textEditor');
            
            workspace.value = `📚 SSAL Works (예시) 프로젝트

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

SSAL Works를 실제로 개발하면서 작성된 
모든 폴더와 파일을 그대로 저장해 놓았습니다.

참고용으로 자유롭게 둘러보세요!

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📥 전체 파일 다운로드

Google Drive에서 프로젝트 전체를 다운로드하실 수 있습니다.

🔗 다운로드 링크: [준비 중]

※ 링크를 클릭하면 Google Drive 폴더가 열립니다.
   우측 상단 ⋮ 버튼 → "다운로드"를 클릭하면 
   ZIP 파일로 자동 압축되어 다운로드됩니다.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📂 포함 내용:

• 전체 프로젝트 디렉토리 구조
• 모든 Order Sheet
• 개발 과정 문서
• 작업 결과물
• 설정 파일

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

💡 TIP: 이 예시를 참고하여 
    자신만의 프로젝트를 시작해보세요!
`;
        }

        function selectProject(projectName) {
            const workspace = document.getElementById('textEditor');
            const projectConfig = PROJECT_CONFIGS[projectName];

            // 선택된 프로젝트 전역 변수에 저장
            currentSelectedProject = projectName;

            // 모든 프로젝트에서 selected 클래스 제거
            document.querySelectorAll('.project-list-item').forEach(item => {
                item.classList.remove('selected');
            });

            // 클릭된 프로젝트에 selected 클래스 추가
            event.currentTarget.classList.add('selected');

            workspace.value = `📋 Project: ${projectName}\n\n`;
            workspace.value += `⚠️ 프로젝트 설정 확인\n\n`;
            workspace.value += `1. ${projectName} 프로젝트의 Inbox/ 폴더가 설치되어 있는지 확인하세요\n`;
            workspace.value += `   경로: ${projectConfig.inboxPath}\n\n`;
            workspace.value += `2. Inbox/ 폴더가 있다면 아래에 Order Sheet를 작성하세요\n\n`;
            workspace.value += `3. 작성 완료 후 "Download Order Sheet" 버튼을 클릭하면\n`;
            workspace.value += `   자동으로 해당 프로젝트의 Inbox/에 저장됩니다\n\n`;
            workspace.value += `━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\n`;
            workspace.value += `여기에 Order Sheet를 작성하세요:\n\n`;

            console.log('Selected project:', projectName, 'Inbox path:', projectConfig.inboxPath);
        }

        // 프로젝트 목록에 새 프로젝트 추가
        function addProjectToList(name) {
            const projectList = document.getElementById('projectList');

            const newProject = document.createElement('div');
            newProject.className = 'project-list-item';
            newProject.onclick = function () { selectProject(name); };

            newProject.innerHTML = `
                <span class="project-name">${name}</span>
                <span class="project-status">진행중</span>
            `;

            projectList.appendChild(newProject);
        }

        // 프로젝트 추가 모달 열기
        function openAddProjectModal() {
            // 진행 중인 프로젝트가 있는지 확인
            const projectItems = document.querySelectorAll('.project-list-item');
            let hasInProgress = false;

            projectItems.forEach(item => {
                const status = item.querySelector('.project-status');
                if (status && status.textContent === '진행중') {
                    hasInProgress = true;
                }
            });

            if (hasInProgress) {
                alert('⚠️ 이미 진행 중인 Project가 있습니다!\n\n현재 Project를 완료한 후 새로운 Project를 등록할 수 있습니다.');
                return;
            }

            const modal = document.getElementById('addProjectModal');
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // 프로젝트 추가 모달 닫기
        function closeAddProjectModal() {
            const modal = document.getElementById('addProjectModal');
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';

            // 폼 초기화
            document.getElementById('newProjectForm').reset();
        }

        // ========== 내 문의 내역 모달 함수 ==========

        // 내 문의 내역 모달 열기
        async function openMyInquiriesModal() {
            const modal = document.getElementById('myInquiriesModal');
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';

            // 고객센터 문의 탭을 기본으로 표시
            switchInquiryTab('customer');

            // 데이터 로드
            await loadMyInquiries();
        }

        // 내 문의 내역 모달 닫기
        function closeMyInquiriesModal() {
            const modal = document.getElementById('myInquiriesModal');
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // 탭 전환
        function switchInquiryTab(tab) {
            const customerTab = document.getElementById('customerInquiryTab');
            const sunnyTab = document.getElementById('sunnyInquiryTab');
            const customerBtn = document.getElementById('tabCustomerInquiry');
            const sunnyBtn = document.getElementById('tabSunnyInquiry');

            // CSS 변수 값 가져오기
            const styles = getComputedStyle(document.documentElement);
            const primary = styles.getPropertyValue('--primary').trim() || '#10B981';
            const secondary = styles.getPropertyValue('--secondary').trim() || '#F59E0B';
            const bgLight = styles.getPropertyValue('--bg-light').trim() || '#f8f9fa';
            const neutral = styles.getPropertyValue('--neutral').trim() || '#64748B';

            if (tab === 'customer') {
                customerTab.style.display = 'block';
                sunnyTab.style.display = 'none';
                customerBtn.style.background = primary;
                customerBtn.style.color = 'white';
                sunnyBtn.style.background = bgLight;
                sunnyBtn.style.color = neutral;
            } else {
                customerTab.style.display = 'none';
                sunnyTab.style.display = 'block';
                customerBtn.style.background = bgLight;
                customerBtn.style.color = neutral;
                sunnyBtn.style.background = secondary;
                sunnyBtn.style.color = 'white';
            }
        }

        // 내 문의 내역 로드
        async function loadMyInquiries() {
            if (!window.supabaseClient) {
                console.error('Supabase 클라이언트가 초기화되지 않았습니다.');
                return;
            }

            try {
                const { data: { session } } = await window.supabaseClient.auth.getSession();
                if (!session) {
                    document.getElementById('customerInquiryList').innerHTML = '<div style="text-align: center; color: #9ca3af; padding: 40px;">로그인이 필요합니다.</div>';
                    document.getElementById('sunnyInquiryList').innerHTML = '<div style="text-align: center; color: #9ca3af; padding: 40px;">로그인이 필요합니다.</div>';
                    return;
                }

                const userEmail = session.user.email;
                const userId = session.user.id;

                // 고객센터 문의 로드 (inquiries 테이블)
                const { data: customerData, error: customerError } = await window.supabaseClient
                    .from('inquiries')
                    .select('*')
                    .eq('email', userEmail)
                    .order('created_at', { ascending: false });

                if (customerError) {
                    console.error('고객센터 문의 로드 실패:', customerError);
                }
                renderCustomerInquiries(customerData || []);

                // 써니에게 묻기 로드 (sunny_inquiries 테이블)
                const { data: sunnyData, error: sunnyError } = await window.supabaseClient
                    .from('sunny_inquiries')
                    .select('*')
                    .or(`user_id.eq.${userId},user_email.eq.${userEmail}`)
                    .order('created_at', { ascending: false });

                if (sunnyError) {
                    console.error('써니 문의 로드 실패:', sunnyError);
                }
                renderSunnyInquiries(sunnyData || []);

            } catch (error) {
                console.error('문의 내역 로드 오류:', error);
            }
        }

        // 고객센터 문의 렌더링
        function renderCustomerInquiries(inquiries) {
            const container = document.getElementById('customerInquiryList');

            if (inquiries.length === 0) {
                container.innerHTML = '<div style="text-align: center; color: var(--neutral); padding: 40px;">문의 내역이 없습니다.</div>';
                return;
            }

            // 프로젝트 디자인 규칙에 맞는 상태 색상
            const statusLabels = {
                'pending': { text: '대기중', color: 'var(--danger)', bg: 'rgba(239, 68, 68, 0.1)' },
                'in_progress': { text: '처리중', color: 'var(--secondary)', bg: 'rgba(245, 158, 11, 0.1)' },
                'answered': { text: '답변완료', color: 'var(--success)', bg: 'rgba(16, 185, 129, 0.1)' },
                'closed': { text: '종료', color: 'var(--neutral)', bg: 'var(--bg-light)' }
            };

            container.innerHTML = inquiries.map(inquiry => {
                const status = statusLabels[inquiry.status] || statusLabels['pending'];
                const date = new Date(inquiry.created_at).toLocaleDateString('ko-KR');

                return `
                    <div style="background: var(--bg-light); border-radius: var(--border-radius); padding: 16px; border-left: 4px solid ${status.color};">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 8px;">
                            <div style="font-weight: 600; color: #1f2937; font-size: 14px;">${escapeHtml(inquiry.title)}</div>
                            <span style="background: ${status.bg}; color: ${status.color}; padding: 4px 10px; border-radius: 12px; font-size: 11px; font-weight: 600;">${status.text}</span>
                        </div>
                        <div style="color: var(--neutral); font-size: 12px; margin-bottom: 8px;">${date}</div>
                        <div style="color: #4b5563; font-size: 13px; line-height: 1.5; white-space: pre-wrap;">${escapeHtml(inquiry.content?.substring(0, 150) || '')}${inquiry.content?.length > 150 ? '...' : ''}</div>
                        ${inquiry.answer ? `
                            <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--border-color);">
                                <div style="font-size: 11px; color: var(--success); font-weight: 600; margin-bottom: 6px;">💬 답변</div>
                                <div style="color: #374151; font-size: 13px; line-height: 1.5; background: rgba(16, 185, 129, 0.08); padding: 12px; border-radius: var(--border-radius); white-space: pre-wrap;">${escapeHtml(inquiry.answer)}</div>
                            </div>
                        ` : ''}
                    </div>
                `;
            }).join('');
        }

        // 써니에게 묻기 렌더링
        function renderSunnyInquiries(inquiries) {
            const container = document.getElementById('sunnyInquiryList');

            if (inquiries.length === 0) {
                container.innerHTML = '<div style="text-align: center; color: var(--neutral); padding: 40px;">문의 내역이 없습니다.</div>';
                return;
            }

            // 프로젝트 디자인 규칙에 맞는 상태 색상
            const statusLabels = {
                'pending': { text: '대기중', color: 'var(--danger)', bg: 'rgba(239, 68, 68, 0.1)' },
                'in_progress': { text: '처리중', color: 'var(--secondary)', bg: 'rgba(245, 158, 11, 0.1)' },
                'answered': { text: '답변완료', color: 'var(--success)', bg: 'rgba(16, 185, 129, 0.1)' },
                'closed': { text: '종료', color: 'var(--neutral)', bg: 'var(--bg-light)' }
            };

            container.innerHTML = inquiries.map(inquiry => {
                const status = statusLabels[inquiry.status] || statusLabels['pending'];
                const date = new Date(inquiry.created_at).toLocaleDateString('ko-KR');

                return `
                    <div style="background: rgba(245, 158, 11, 0.05); border-radius: var(--border-radius); padding: 16px; border-left: 4px solid var(--secondary);">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 8px;">
                            <div style="font-weight: 600; color: #1f2937; font-size: 14px;">${escapeHtml(inquiry.title || '(제목 없음)')}</div>
                            <span style="background: ${status.bg}; color: ${status.color}; padding: 4px 10px; border-radius: 12px; font-size: 11px; font-weight: 600;">${status.text}</span>
                        </div>
                        <div style="color: var(--neutral); font-size: 12px; margin-bottom: 8px;">${date}</div>
                        <div style="color: #4b5563; font-size: 13px; line-height: 1.5; white-space: pre-wrap;">${escapeHtml(inquiry.content?.substring(0, 150) || '')}${inquiry.content?.length > 150 ? '...' : ''}</div>
                        ${inquiry.admin_answer ? `
                            <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid rgba(245, 158, 11, 0.3);">
                                <div style="font-size: 11px; color: var(--secondary-dark); font-weight: 600; margin-bottom: 6px;">☀️ 써니의 답변</div>
                                <div style="color: #374151; font-size: 13px; line-height: 1.5; background: rgba(245, 158, 11, 0.08); padding: 12px; border-radius: var(--border-radius); white-space: pre-wrap;">${escapeHtml(inquiry.admin_answer)}</div>
                            </div>
                        ` : ''}
                    </div>
                `;
            }).join('');
        }

        // HTML 이스케이프 함수 (XSS 방지)
        function escapeHtml(text) {
            if (!text) return '';
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // 프로젝트 완료 여부 확인 함수
        function isProjectCompleted() {
            // 모든 진행 프로세스의 완료율 확인
            const processItems = document.querySelectorAll('.process-major');
            let allCompleted = true;

            processItems.forEach(item => {
                const progress = item.getAttribute('data-progress');
                if (progress && parseInt(progress) < 100) {
                    allCompleted = false;
                }
            });

            return allCompleted;
        }

        // 새 프로젝트 추가 처리 (DOM 로드 후 실행)
        document.addEventListener('DOMContentLoaded', function() {
            // DOMContentLoaded 스코프에서 사용할 Supabase 클라이언트
            const SUPABASE_URL_LOCAL = 'https://zwjmfewyshhwpgwdtrus.supabase.co';
            const SUPABASE_KEY_LOCAL = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp3am1mZXd5c2hod3Bnd2R0cnVzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM1NzE1NTEsImV4cCI6MjA3OTE0NzU1MX0.AJy34h5VR8QS6WFEcUcBeJJu8I3bBQ6UCk1I84Wb7y4';
            const localSupabase = supabase.createClient(SUPABASE_URL_LOCAL, SUPABASE_KEY_LOCAL);

            document.getElementById('newProjectForm')?.addEventListener('submit', async function (e) {
            e.preventDefault();

            const name = document.getElementById('projectName').value;
            const description = document.getElementById('projectDescription').value;

            if (!name) {
                alert('Project명을 입력해주세요!');
                return;
            }

            // 진행 중인 프로젝트가 있는지 확인
            const projectItems = document.querySelectorAll('.project-list-item');
            let hasInProgress = false;
            projectItems.forEach(item => {
                const status = item.querySelector('.project-status');
                if (status && status.textContent === '진행중') {
                    hasInProgress = true;
                }
            });

            if (hasInProgress) {
                // 현재 프로젝트의 개발이 완료되었는지 확인
                if (!isProjectCompleted()) {
                    alert('⚠️ 현재 Project의 개발이 완료되지 않았습니다!\n\n모든 진행 프로세스가 100%가 되어야 새로운 Project를 시작할 수 있습니다.\n현재 진행 중인 Project를 먼저 완료해주세요.');
                    return;
                }
                alert('⚠️ 진행 중인 Project가 이미 있습니다!\n\n한 번에 하나의 Project만 진행할 수 있습니다.\n현재 Project를 완료한 후 새로운 Project를 시작해주세요.\n\n💡 여러 Project를 동시에 진행하시려면 새로운 계정으로 로그인하세요.');
                return;
            }

            // Project 구조 생성 중 표시
            showStatus('🚀 표준 Project 구조 생성 중...', 'info');

            try {
                // Supabase 세션에서 토큰 가져오기
                const { data: { session } } = await localSupabase.auth.getSession();
                if (!session) {
                    alert('로그인이 필요합니다.');
                    showStatus('❌ 로그인이 필요합니다', 'error');
                    return;
                }

                // 서버에 프로젝트 생성 요청
                const response = await fetch('/api/projects/create', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${session.access_token}`
                    },
                    body: JSON.stringify({
                        projectName: name,
                        description: description
                    })
                });

                const result = await response.json();

                if (result.success) {
                    // 진행중 프로젝트 목록 업데이트 (사이드바)
                    const currentProjectList = document.getElementById('currentProjectList');
                    currentProjectList.innerHTML = `
                        <div class="project-list-item selected" onclick="selectProject('${name}')">
                            <span class="project-name">${name}</span>
                            <span class="project-status">진행중</span>
                        </div>
                    `;

                    // 프로젝트가 currentProjectList에 이미 추가됨

                    // 성공 안내 메시지를 에디터에 표시
                    const editor = document.getElementById('textEditor');
                    editor.value = `# ✅ 새로운 Project 생성 완료!

## Project 정보
- **Project명**: ${name}
- **생성 경로**: ${result.projectPath}
- **상태**: 진행중

---

## 🎉 생성된 표준 Project 구조

표준 Project 디렉토리가 자동으로 생성되었습니다!

### 📁 생성된 폴더 및 파일:

\`\`\`
${name}/
├── .claude/
│   └── CLAUDE.md               (Claude Code 프로젝트 설정)
│
├── P1_사업계획/
│   ├── 0-1_Vision_Mission/
│   ├── 0-2_Market_Analysis/
│   └── 0-3_Business_Model/
│
├── 1_기획/
│   ├── 1-1_Project_Plan/
│   ├── 1-2_UI_UX_Design/
│   └── 1-3_Database_Design/
│
├── 2_개발준비/
│   ├── 2-1_Tech_Stack/
│   ├── 2-2_Architecture/
│   ├── 2-3_Development_Setup/
│   └── 2-4_Project_Grid/
│
├── 3_개발/
│   ├── 3-1_Frontend/
│   ├── 3-2_Engines/
│   ├── 3-3_Authentication/
│   ├── 3-4_Backend_Infrastructure/
│   ├── 3-5_Backend_APIs/
│   ├── 3-6_Database/
│   ├── 3-7_External_Services/
│   ├── 3-8_Test/
│   ├── 3-9_Deployment/
│   └── 3-10_Stabilization/
│
├── 4_개발_마무리/
│   ├── 4-1_Deployment/
│   ├── 4-2_QA/
│   ├── 4-3_Stabilization/
│   └── 4-4_Security/
│
├── Human_ClaudeCode_Bridge/
│   ├── Inbox/                  (대시보드 → Claude Code)
│   ├── Outbox/                 (Claude Code → 대시보드)
│   ├── inbox_server.js
│   ├── package.json
│   └── .env.example
│
├── .gitignore
├── README.md
└── PROJECT_STRUCTURE.md
\`\`\`

---

## 💡 중요: 표준 구조는 자유롭게 수정 가능합니다!

위에 생성된 표준 프로젝트 구조는 **기본 템플릿**입니다.

### ✏️ 자유롭게 변경하세요:
- **폴더 추가/삭제**: 프로젝트 성격에 맞게 폴더를 추가하거나 불필요한 폴더를 삭제하세요
- **폴더 이름 변경**: 팀의 용어나 표준에 맞게 폴더명을 변경하세요
- **구조 재구성**: 프로젝트 규모와 복잡도에 따라 폴더 계층을 조정하세요
- **파일 수정**: README.md, GUIDE.md 등 모든 파일을 프로젝트에 맞게 수정하세요

**이 구조는 시작점일 뿐입니다!** 프로젝트의 특성과 팀의 워크플로우에 맞게 자유롭게 커스터마이징하세요.

---

## 🚀 다음 단계

### 1. 프로젝트 폴더로 이동
\`\`\`bash
cd "${result.projectPath}"
\`\`\`

### 2. Human_ClaudeCode_Bridge 설정
\`\`\`bash
cd Human_ClaudeCode_Bridge
npm install
\`\`\`

### 3. 환경 변수 설정
\`\`\`bash
cp .env.example .env
# .env 파일을 열어서 API 키 등을 설정하세요
\`\`\`

### 4. Inbox Server 시작
\`\`\`bash
node inbox_server.js
\`\`\`

### 5. Claude Code CLI 실행
프로젝트 루트 폴더에서:
\`\`\`bash
claude
\`\`\`

---

## 📬 Inbox/Outbox를 통한 Claude Code 대화

### Inbox (대시보드 → Claude Code)
이 대시보드에서 Order Sheet를 작성하고 "전송" 버튼을 누르면:
- \`Inbox/\` 폴더에 마크다운 파일로 저장됩니다
- Claude Code가 이 파일을 읽고 작업을 수행합니다

### Outbox (Claude Code → 대시보드)
Claude Code가 작업을 완료하면:
- 결과물을 \`Outbox/\` 폴더에 저장합니다
- 대시보드의 "📭 Outbox" 탭에서 확인할 수 있습니다

---

## 📚 참고 문서

각 폴더에는 다음 문서들이 자동 생성되어 있습니다:
- **README.md**: 해당 단계/카테고리의 목적과 개요
- **GUIDE.md**: 구체적인 작업 가이드 (소분류 폴더)
- **CLAUDE.md**: Claude Code 프로젝트 설정 (.claude/ 폴더)

---

## 🎯 지금 바로 시작하세요!

1. 왼쪽 사이드바에서 작업하려는 프로세스를 선택하세요
2. Order Sheet 템플릿이 자동으로 로드됩니다
3. 작업 내용을 작성하고 "Claude Code로 전송" 버튼을 클릭하세요
4. Claude Code가 자동으로 작업을 시작합니다!

**행운을 빕니다! 🚀**
`;

                    showStatus('✅ 프로젝트 생성 완료!', 'success');
                    closeAddProjectModal();

                    // 프로젝트 등록 완료 후 패키지 설치 안내 표시
                    setTimeout(() => {
                        showPackageInstallGuide();
                    }, 500);

                } else {
                    throw new Error(result.error || '프로젝트 생성 실패');
                }

            } catch (error) {
                console.error('프로젝트 생성 오류:', error);
                showStatus('❌ 프로젝트 생성 실패', 'error');
                alert('프로젝트 생성 중 오류가 발생했습니다.\n\n잠시 후 다시 시도해주세요.');
            }
            });
        }); // DOMContentLoaded 끝

        // ==================== Service Introduction Modal ====================
        function openServiceIntro() {
            const modal = document.getElementById('serviceIntroModal');
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeServiceIntro() {
            const modal = document.getElementById('serviceIntroModal');
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // 우측 사이드바 학습용 콘텐츠로 스크롤
        function scrollToLearningContent() {
            const rightSidebar = document.querySelector('.right-sidebar');
            const learningSection = document.querySelector('.right-sidebar .sidebar-section h3');
            if (rightSidebar && learningSection) {
                // 학습용 콘텐츠 섹션 찾기 (📚 학습용 Books)
                const sections = rightSidebar.querySelectorAll('.sidebar-section');
                sections.forEach(section => {
                    const h3 = section.querySelector('h3');
                    if (h3 && h3.textContent.includes('학습용 Books')) {
                        section.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                });
            }
        }

        // 우측 사이드바 FAQ로 스크롤
        function scrollToFaq() {
            const rightSidebar = document.querySelector('.right-sidebar');
            if (rightSidebar) {
                const sections = rightSidebar.querySelectorAll('.sidebar-section');
                sections.forEach(section => {
                    const h3 = section.querySelector('h3');
                    if (h3 && h3.textContent.includes('FAQ')) {
                        section.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                });
            }
        }

        // ESC 키로 닫기
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeGridFullscreen();
            }
        });

        // ==================== Multi-AI 질문 시스템 ====================

        // 현재 선택된 AI (기본값: chatgpt)
        let selectedAI = 'chatgpt';

        // AI 선택 함수
        function selectAI(aiType, event) {
            selectedAI = aiType;

            // 모든 버튼에서 active 클래스 제거
            document.querySelectorAll('.ai-selector-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            // 클릭된 버튼에 active 클래스 추가
            if (event && event.target) {
                event.target.classList.add('active');
            }
        }

        // 크레딧 충전 함수
        function rechargeCredit() {
            const currentBalance = parseInt(document.getElementById('perplexityCreditBalance').textContent.replace(/,/g, ''));
            const rechargeAmount = prompt('충전할 금액을 입력하세요 (원):', '10000');

            if (rechargeAmount === null) {
                return; // 취소
            }

            const amount = parseInt(rechargeAmount);

            if (isNaN(amount) || amount <= 0) {
                alert('올바른 금액을 입력해주세요!');
                return;
            }

            // 크레딧 충전
            const newBalance = currentBalance + amount;
            document.getElementById('perplexityCreditBalance').textContent = newBalance.toLocaleString();

            showStatus(`✅ ₩${amount.toLocaleString()} 충전 완료! 현재 잔액: ₩${newBalance.toLocaleString()}`, 'success');
        }

        // AI에게 질문하기 (통합 함수)
        async function askAI() {
            const questionInput = document.getElementById('aiQuestion');
            const question = questionInput.value.trim();
            const button = document.getElementById('askAIButton');
            const loadingDiv = document.getElementById('aiLoading');
            const loadingText = document.getElementById('aiLoadingText');

            if (!question) {
                alert('질문을 입력해주세요!');
                return;
            }

            // AI 이름 매핑
            const aiNames = {
                'chatgpt': 'ChatGPT',
                'gemini': 'Gemini',
                'perplexity': 'Perplexity'
            };

            // AI 아이콘 매핑
            const aiIcons = {
                'chatgpt': '💬',
                'gemini': '🔷',
                'perplexity': '🔍'
            };

            const aiName = aiNames[selectedAI];
            const aiIcon = aiIcons[selectedAI];

            // 버튼 비활성화 및 로딩 표시 (null 체크 포함)
            let originalButtonText = '제출하기';
            if (button) {
                originalButtonText = button.textContent;
                button.disabled = true;
                button.textContent = '⏳ 질문 중...';
                button.style.opacity = '0.6';
                button.style.cursor = 'not-allowed';
            }

            try {
                // Vercel API 엔드포인트 사용
                const response = await fetch('/api/ai/qa', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        question: question,
                        provider: selectedAI
                    })
                });

                const result = await response.json();

                if (result.success) {
                    // Workspace에 질문과 답변 표시
                    const workspace = document.getElementById('textEditor');
                    const workspaceGuide = document.getElementById('workspaceGuide');

                    // Control Desk: 안내문 숨기고 텍스트 에디터 표시
                    if (workspaceGuide) workspaceGuide.style.display = 'none';
                    if (workspace) {
                        workspace.style.display = 'block';
                        workspace.value = `${aiIcon} ${aiName}에게 질문:
${question}

✅ ${aiName}의 답변:
${result.answer}`;
                    }

                    // 질문 이력 저장 (localStorage) - 에러가 나도 무시
                    try {
                        saveQuestionHistory(aiName, aiIcon, question, result.answer);
                    } catch (historyError) {
                        console.warn('질문 이력 저장 실패:', historyError);
                    }

                    // 입력창 초기화
                    if (questionInput) questionInput.value = '';
                } else {
                    alert(`❌ 오류: ${result.error || result.details || '알 수 없는 오류'}`);
                }
            } catch (error) {
                console.error('AI API Error:', error);
            } finally {
                // 버튼 복원 (null 체크 포함)
                if (button) {
                    button.disabled = false;
                    button.textContent = originalButtonText;
                    button.style.opacity = '1';
                    button.style.cursor = 'pointer';
                }
            }
        }

        // ==================== 질문 이력 기능 (localStorage) ====================

        // 질문 이력 저장
        function saveQuestionHistory(aiName, aiIcon, question, answer) {
            // 기존 이력 불러오기
            const history = getQuestionHistory();

            // 새 항목 추가 (최신 항목이 맨 위)
            const newItem = {
                date: new Date().toISOString(),
                ai: aiName,
                icon: aiIcon,
                question: question,
                answer: answer
            };

            history.unshift(newItem); // 맨 앞에 추가

            // 최대 50개까지만 저장
            if (history.length > 50) {
                history.pop();
            }

            // localStorage에 저장
            localStorage.setItem('ai_question_history', JSON.stringify(history));

            // 질문 이력 UI 업데이트
            if (document.getElementById('questionHistoryList').style.display !== 'none') {
                renderQuestionHistory();
            }
        }

        // 질문 이력 불러오기
        function getQuestionHistory() {
            const data = localStorage.getItem('ai_question_history');
            return data ? JSON.parse(data) : [];
        }

        // 질문 이력 모달 열기
        function openQuestionHistoryModal() {
            const history = getQuestionHistory();
            const modalList = document.getElementById('questionHistoryModalList');

            if (history.length === 0) {
                modalList.innerHTML = `
                    <div style="text-align: center; padding: 60px 20px; color: #6c757d;">
                        <div style="font-size: 48px; margin-bottom: 13px;">📋</div>
                        <div style="font-size: 18px; font-weight: 600; margin-bottom: 8px;">질문 / 답변 이력이 없습니다</div>
                        <div style="font-size: 14px;">AI에게 질문을 하면 질문과 답변이 이곳에 저장됩니다.</div>
                    </div>
                `;
            } else {
                modalList.innerHTML = history.map((item, index) => {
                    const date = new Date(item.date);
                    const dateStr = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')} ${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`;

                    return `
                        <div class="outbox-file-item" style="display: block; cursor: default;">
                            <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 10px;">
                                <div class="outbox-file-icon" style="font-size: 32px;">${item.icon}</div>
                                <div class="outbox-file-info" style="flex: 1;">
                                    <div class="outbox-file-name" style="font-size: 16px; font-weight: 700; color: var(--primary);">${item.ai}에게 질문한 이력</div>
                                    <div class="outbox-file-meta" style="font-size: 11px; color: #6c757d;">${dateStr}</div>
                                </div>
                                <button onclick="deleteHistoryItem(${index})"
                                    style="padding: 8px 16px; background: #6c757d; color: white; border: none; border-radius: 8px; font-size: 13px; font-weight: 600; cursor: pointer; transition: all 0.2s;">
                                    삭제
                                </button>
                            </div>
                            <div style="margin-bottom: 10px; padding: 15px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid var(--primary);">
                                <div style="font-size: 13px; font-weight: 600; color: #495057; margin-bottom: 8px;">${item.ai}에게 질문:</div>
                                <div style="font-size: 14px; color: #212529; white-space: pre-wrap; line-height: 1.6;">${item.question}</div>
                            </div>
                            <div style="padding: 15px; background: #e3f2fd; border-radius: 8px; border-left: 4px solid #2196F3;">
                                <div style="font-size: 13px; font-weight: 600; color: #1565C0; margin-bottom: 8px;">${item.ai}의 답변:</div>
                                <div style="font-size: 14px; color: #212529; white-space: pre-wrap; line-height: 1.6;">${item.answer}</div>
                            </div>
                        </div>
                    `;
                }).join('');
            }

            // 모달 열기
            const modal = document.getElementById('questionHistoryModal');
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // 질문 이력 모달 닫기
        function closeQuestionHistoryModal() {
            const modal = document.getElementById('questionHistoryModal');
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // 질문 이력 삭제
        function deleteHistoryItem(index) {
            if (!confirm('이 질문 이력을 삭제하시겠습니까?')) return;

            const history = getQuestionHistory();
            history.splice(index, 1);
            localStorage.setItem('ai_question_history', JSON.stringify(history));

            // 모달이 열려있으면 다시 렌더링
            const modal = document.getElementById('questionHistoryModal');
            if (modal.classList.contains('active')) {
                openQuestionHistoryModal();
            }
        }

        // ==================== Outbox 알림 시스템 ====================

        // Outbox 알림 박스 표시
        function showOutboxNotification(fileCount, files) {
            const notification = document.getElementById('outboxNotification');
            const message = document.getElementById('outboxNotificationMessage');

            const filenames = files.map(f => f.filename).join(', ');
            message.textContent = `새 파일 ${fileCount}개: ${filenames}`;

            notification.style.display = 'block';

            // 10초 후 자동 숨김
            setTimeout(() => {
                closeOutboxNotification();
            }, 10000);
        }

        // Outbox 알림 박스 닫기
        function closeOutboxNotification() {
            const notification = document.getElementById('outboxNotification');
            notification.style.display = 'none';
        }

        // 알림 박스에서 "열기" 버튼 클릭
        function loadFromOutboxNotification() {
            closeOutboxNotification();
            loadFromOutbox();
        }

        // Outbox 파일 개수 추적
        let lastOutboxCount = 0;
        let outboxCheckerInterval = null;

        // Outbox 감시 시작
        async function startOutboxWatcher() {
            // 배포 환경에서는 실행하지 않음
            if (IS_PRODUCTION) return;

            try {
                // 초기 파일 개수 로드
                const response = await fetch(BRIDGE_SERVER_URL + '/outbox/files');
                const result = await response.json();
                if (result.success) {
                    lastOutboxCount = result.count;
                    console.log(`Outbox Watcher 시작 - 현재 파일 ${lastOutboxCount}개`);
                }
            } catch (error) {
                console.log('Outbox 서버 연결 실패 - 서버가 실행 중인지 확인하세요');
            }

            // 5초마다 Outbox 체크
            outboxCheckerInterval = setInterval(async () => {
                try {
                    const response = await fetch(BRIDGE_SERVER_URL + '/outbox/files');
                    const result = await response.json();

                    if (result.success && result.count > lastOutboxCount) {
                        const newFilesCount = result.count - lastOutboxCount;
                        const allNewFiles = result.files.slice(0, newFilesCount);

                        // _ack.json 파일은 알림에서 제외
                        const newFiles = allNewFiles.filter(file => !file.filename.includes('_ack.json'));

                        // 실제 알림할 파일이 있을 때만 콘솔 로그 표시
                        if (newFiles.length > 0) {
                            // 콘솔 로그만 표시 (알림 박스 제거)
                            console.log(`\n✨ Claude Code 작업 완료! 새 파일 ${newFiles.length}개 감지됨!`);
                            newFiles.forEach(file => {
                                console.log(`   📄 ${file.filename}`);
                            });
                            console.log(`\n👉 "Load from Outbox" 버튼을 클릭하세요!\n`);
                        }

                        lastOutboxCount = result.count;
                    }
                } catch (error) {
                    // 조용히 무시 (서버가 꺼져있을 수 있음)
                }
            }, 5000); // 5초마다 체크
        }

        // Outbox 감시 중지
        function stopOutboxWatcher() {
            if (outboxCheckerInterval) {
                clearInterval(outboxCheckerInterval);
                outboxCheckerInterval = null;
                console.log('📤 Outbox Watcher 중지됨');
            }
        }

        // 페이지 로드 시 자동 시작
        window.addEventListener('load', () => {
            startOutboxWatcher();
        });

        // 페이지 종료 시 감시 중지
        window.addEventListener('beforeunload', () => {
            stopOutboxWatcher();
        });

        // ============================================
        // Order 상태 추적 시스템
        // ============================================

        let orderStatusIntervals = {}; // Order ID별 polling interval 저장

        // Order 상태 추적 시작
        function startOrderStatusTracking(orderId) {
            console.log(`🔍 Order 상태 추적 시작: ${orderId}`);

            // 이미 추적 중이면 중지
            if (orderStatusIntervals[orderId]) {
                clearInterval(orderStatusIntervals[orderId]);
            }

            // 즉시 한 번 확인
            checkOrderStatus(orderId);

            // 3초마다 상태 확인
            orderStatusIntervals[orderId] = setInterval(() => {
                checkOrderStatus(orderId);
            }, 3000);
        }

        // Order 상태 확인
        async function checkOrderStatus(orderId) {
            try {
                const response = await fetch(`http://localhost:3030/order-status/${orderId}`);

                if (!response.ok) {
                    throw new Error(`Status check failed: ${response.status}`);
                }

                const result = await response.json();

                if (result.success) {
                    console.log(`📊 Order ${orderId} 상태:`, result.status);

                    // 상태에 따라 UI 업데이트
                    updateOrderStatus(orderId, result.status, result.message);

                    // 완료되면 polling 중지
                    if (result.status === '✅ 완료') {
                        stopOrderStatusTracking(orderId);

                        // 완료 알림
                        showStatus(`✅ Order ${orderId} 완료!`, 'success');

                        // 사용자에게 알림 (선택적)
                        if (Notification.permission === 'granted') {
                            new Notification('Order 완료!', {
                                body: `Order ${orderId}이(가) 완료되었습니다.`,
                                icon: '📬'
                            });
                        }
                    }
                }

            } catch (error) {
                console.error(`❌ Order ${orderId} 상태 확인 실패:`, error);
            }
        }

        // Order 상태 추적 중지
        function stopOrderStatusTracking(orderId) {
            if (orderStatusIntervals[orderId]) {
                clearInterval(orderStatusIntervals[orderId]);
                delete orderStatusIntervals[orderId];
                console.log(`⏹️  Order ${orderId} 상태 추적 중지`);
            }
        }

        // Order 상태 UI 업데이트
        function updateOrderStatus(orderId, status, message) {
            // Status 바에 표시 (#serverStatus 활용)
            const statusElement = document.querySelector('#serverStatus');
            if (statusElement) {
                statusElement.textContent = `📬 ${status} ${orderId}: ${message}`;
                statusElement.style.display = 'block';

                // 상태에 따라 색상 변경
                if (status === '✅ 완료') {
                    statusElement.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                } else if (status === '⏳ 처리 중') {
                    statusElement.style.background = 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)';
                } else {
                    statusElement.style.background = 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)';
                }
            }

            // Console에 로그
            console.log(`📬 ${orderId}: ${status} - ${message}`);
        }

        // 페이지 로드 시 알림 권한 요청 (선택적)
        if ('Notification' in window && Notification.permission === 'default') {
            Notification.requestPermission();
        }

        // ============================================
        // 인증 상태에 따른 안내문 로드 시스템
        // ============================================

        // 워크스페이스에 안내문 로드 (GUIDE_CONTENTS에서)
        function loadGuideToWorkspace(guideName) {
            const workspaceGuide = document.getElementById('workspaceGuide');
            const textEditor = document.getElementById('textEditor');

            if (!workspaceGuide) {
                console.warn('워크스페이스 안내문 영역을 찾을 수 없습니다');
                return;
            }

            if (typeof GUIDE_CONTENTS !== 'undefined' && GUIDE_CONTENTS[guideName]) {
                const htmlContent = GUIDE_CONTENTS[guideName];

                // 워크스페이스에 안내문 직접 표시
                workspaceGuide.innerHTML = htmlContent;
                window.currentLoadedGuide = guideName;
                workspaceGuide.style.display = 'block';
                if (textEditor) textEditor.style.display = 'none';

                console.log(`✅ ${guideName} 안내문 워크스페이스에 로드 완료`);
            } else {
                console.warn(`안내문을 찾을 수 없습니다: ${guideName}`);
            }
        }

        
        // Order Sheet 로딩 버튼 클릭 시 호출
        function loadOrderSheetForCurrentGuide() {
            // 현재 표시 중인 안내문에 해당하는 Order Sheet 로드
            const currentGuide = window.currentLoadedGuide || '';
            console.log('Order Sheet 로딩 요청:', currentGuide);

            // Guide 이름에서 Order Sheet 이름 추출
            // 예: P0-1_Briefing -> P0-1_OrderSheet
            const orderSheetName = currentGuide.replace('_Briefing', '_OrderSheet');

            if (typeof ORDER_SHEET_TEMPLATES !== 'undefined' && ORDER_SHEET_TEMPLATES[orderSheetName]) {
                const editor = document.getElementById('textEditor');
                const markdown = ORDER_SHEET_TEMPLATES[orderSheetName];

                // 마크다운을 일반 텍스트로 변환하여 로드
                editor.value = convertMarkdownToPlainText(markdown);

                // 안내문 팝업 닫기
                closeGuidePopup();

                showStatus('Order Sheet 로드 완료: ' + orderSheetName, 'success');
            } else {
                showStatus('Order Sheet를 찾을 수 없습니다: ' + orderSheetName, 'error');
            }
        }

        // Order Sheet 작성 모드로 전환
        function showOrderSheetEditor() {
            const workspaceGuide = document.getElementById('workspaceGuide');
            const textEditor = document.getElementById('textEditor');
            if (workspaceGuide) workspaceGuide.style.display = 'none';
            if (textEditor) textEditor.style.display = 'block';
            textEditor.focus();
        }

        // 페이지 로드 시 Default 안내문 표시 (로그인 여부 무관하게 항상 동일)
        window.addEventListener('DOMContentLoaded', () => {
            console.log('ℹ️ 페이지 로드 - Default 안내문 표시');
            loadGuideToWorkspace('Default');
        });

    </script>

    <!-- Project SAL Grid Fullscreen Modal -->
    <div id="gridFullscreenModal" class="grid-fullscreen-modal">
        <div class="grid-fullscreen-header">
            <div class="grid-fullscreen-title">📋 Project SAL Grid - Full View</div>
            <div class="view-toggle">
                <button class="view-btn active" onclick="switchView('2d')">2D Card</button>
                <button class="view-btn" onclick="switchView('3d')">3D Block</button>
            </div>
            <button class="grid-fullscreen-close" onclick="closeGridFullscreen()">✕ 닫기</button>
        </div>
        <div class="grid-fullscreen-content" id="fullscreenGridContent">
            <!-- 그리드 콘텐츠가 여기에 복사됩니다 -->
        </div>
    </div>

    <!-- Translation Fullview Modal -->
    <div id="translationFullviewModal" class="grid-fullscreen-modal">
        <div class="grid-fullscreen-header">
            <div class="grid-fullscreen-title">🌐 English Translation - Full View</div>
            <button class="grid-fullscreen-close" onclick="closeTranslationFullview()">✕ 닫기</button>
        </div>
        <div class="grid-fullscreen-content" style="padding: 40px;">
            <pre id="fullviewTranslatedText"
                style="font-family: 'Consolas', 'Monaco', monospace; font-size: 14px; line-height: 1.8; color: #495057; white-space: pre-wrap; word-wrap: break-word;"></pre>
        </div>
    </div>

    <!-- Service Introduction Modal -->
    <div id="serviceIntroModal" class="grid-fullscreen-modal" style="background: #F3F4F6;">
        <!-- Navigation Bar -->
        <nav style="background: linear-gradient(135deg, #2C4A8A 0%, #1F3563 100%); padding: 0 32px; height: 70px; display: flex; justify-content: space-between; align-items: center; box-shadow: var(--shadow-sm);">
            <a href="#" onclick="closeServiceIntro(); return false;" style="display: flex; align-items: center; gap: 12px; text-decoration: none;">
                <div style="display: flex; align-items: center; gap: 3px; transform: rotate(-15deg);">
                    <span style="width: 10px; height: 18px; background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%); border-radius: 40%; transform: rotate(-5deg);"></span>
                    <span style="width: 10px; height: 18px; background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%); border-radius: 40%; transform: rotate(5deg); margin-top: 2px;"></span>
                    <span style="width: 10px; height: 18px; background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%); border-radius: 40%; transform: rotate(-3deg); margin-top: -1px;"></span>
                </div>
                <span style="font-size: 28px; font-weight: 800; color: white;">SSAL Works</span>
            </a>
            <button onclick="closeServiceIntro()" style="padding: 10px 20px; background: #6B7280; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600; font-family: inherit; transition: all 0.2s;">✕ 닫기</button>
        </nav>
        <div class="grid-fullscreen-content" style="padding: 40px; max-width: 900px; margin: 0 auto; background: white; border-radius: 12px; box-shadow: var(--shadow-sm);">
            <div style="line-height: 1.9; color: #333;">


                <!-- 목차 -->
                <nav style="background: #f8f9fa; padding: 20px 24px; border-radius: 12px; margin-bottom: 32px; border: 1px solid #e9ecef;">
                    <h3 style="font-size: 20px; font-weight: 800; color: #1F3563; margin: 0 0 16px 0;">목차</h3>

                    <div style="font-size: 14px; line-height: 2.2;">
                        <a href="#section0" style="color: #1F3563; text-decoration: none; font-weight: 600;">→ SSAL Works 소개</a><br>
                        <a href="#section1" style="color: #1F3563; text-decoration: none; font-weight: 600;">→ 상세 안내</a>
                        <div style="padding-left: 20px; font-size: 13px; line-height: 1.8; margin-top: 6px;">
                            <a href="#section1" style="color: #495057; text-decoration: none;">1. SSAL Works란 무엇인가</a><br>
                            <a href="#section2" style="color: #495057; text-decoration: none;">2. 왜 SSAL Works를 만들었는가</a><br>
                            <a href="#section3" style="color: #495057; text-decoration: none;">3. SSAL Works가 제공하는 것</a><br>
                            <a href="#section4" style="color: #495057; text-decoration: none;">4. 이용 프로세스</a><br>
                            <a href="#section5" style="color: #495057; text-decoration: none;">5. 일반 회원에게 제공되는 기능</a><br>
                            <a href="#section6" style="color: #495057; text-decoration: none;">6. 빌더 계정 개설자 전용 기능</a><br>
                            <a href="#section7" style="color: #495057; text-decoration: none;">7. 가격 정책 상세</a><br>
                            <a href="#section8" style="color: #495057; text-decoration: none;">8. 문의 및 지원</a><br>
                            <a href="#section9" style="color: #495057; text-decoration: none;">9. 향후 계획</a><br>
                            <a href="#section10" style="color: #495057; text-decoration: none;">10. 용어 정리</a>
                        </div>
                    </div>
                </nav>

                <!-- Section 0: SSAL Works 소개 -->
                <section id="section0" style="margin-bottom: 48px;">
                    <h2 style="font-size: 20px; font-weight: 800; color: #1F3563; margin-bottom: 18px; padding-bottom: 10px; border-bottom: 3px solid #F59E0B;">SSAL Works 소개</h2>
                    <h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">SSAL Works가 뭔가요?</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>"개발 지식이 없어도 AI와 함께 풀스택 웹사이트를 만들 수 있는 곳"</strong></p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">SSAL Works는 개발 지식이 없는 분들이 AI의 도움을 받아서 직접 웹사이트를 만들 수 있도록 돕는 플랫폼입니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">보통 웹사이트를 만들려면 개발자를 고용하거나 외주를 맡겨야 합니다. 비용도 많이 들고, 원하는 대로 구현하기가 어렵습니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">SSAL Works는 <strong>AI가 제대로 일할 수 있도록 체계를 갖춰놓은 곳</strong>입니다. 표준화된 Order Sheet, 프로젝트 관리 시스템(SAL Grid), 미리 설정된 개발 환경(Dev Package)이 준비되어 있어서, 이 체계를 따라가기만 하면 풀스택 웹사이트를 개발할 수 있습니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">SSAL Works는 누구를 위한 플랫폼인가요?</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">SSAL Works는 두 가지 유형의 사람들을 위한 플랫폼입니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>첫째, 풀스택 웹사이트로 창업하려는 사람</strong></p>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>스타트업</strong>: 아이디어는 있지만 개발 역량이 없는 예비/초기 창업가</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>직장인 부업</strong>: 퇴근 후 자신만의 웹사이트 기반 부업을 시작하고 싶은 사람</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>은퇴자 새로운 일거리</strong>: 경력과 지식을 활용하여 웹사이트로 사업화를 하려는 시니어</li></ul>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>둘째, 기존 사업에 풀스택 웹사이트를 도입하려는 사람</strong></p>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>오프라인 사업을 온라인으로 확장하려는 사업자</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>업무 자동화나 고객 관리 웹시스템이 필요한 사람</li></ul>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>빌더(Builder)란?</strong></p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">SSAL Works에서는 사용자를 빌더(Builder)라고 부릅니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">빌더는 단순히 웹사이트만을 만드는 사람이 아니라, 웹사이트를 통해 비즈니스를 실현하는 사람입니다. 빌더는 기획하고, 의사결정하고, 방향을 정합니다. AI는 빌더의 지시에 따라 코딩을 수행합니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">SSAL Works에서 무엇을 얻을 수 있나요?</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>1) 혼자서도 웹사이트를 만들 수 있습니다</strong></p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">개발팀을 꾸리거나 외주를 맡기지 않아도 됩니다. SSAL Works의 개발 방법론을 따라가면 AI와 함께 로그인, 결제, 데이터베이스가 있는 진짜 웹사이트를 만들 수 있습니다. </p>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Project SAL Grid</strong>: 3차원 좌표계(Stage, Area, Level)로 모든 개발 작업을 관리하고, 진행 상황 추적과 AI 작업 지시를 체계화합니다.</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Order Sheet</strong>: AI에게 작업을 지시하는 32개 표준 양식입니다.</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>진행 프로세스</strong>: P0~S5 단계별로 체계적으로 개발을 진행합니다.</li></ul>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>2) 2,500시간의 시행착오를 건너뜁니다</strong></p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">SSAL Works 창업자 Sunny가 직접 겪은 시행착오와 노하우가 모두 정리되어 있습니다. 같은 실수를 반복하지 않고 웹사이트 개발을 진행할 수 있습니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>3) 3개월간 1:1 코칭을 받습니다</strong></p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">SSAL Works에 빌더 계정을 개설하면 3개월간 Sunny의 맞춤형 코칭을 받습니다. 개발뿐 아니라 창업 전반에 대한 멘토링도 포함됩니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>4) 풍부한 학습 콘텐츠가 제공됩니다</strong></p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">SSAL Works에는 Claude/Claude Code 사용법, 풀스택 웹사이트 개발, 프로젝트 관리 방법을 다루는 Books 80편, 18개 카테고리의 실전 팁 65개, 외부 연동 가이드 5개가 준비되어 있습니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>5) 예시 프로젝트의 문서와 소스코드를 제공합니다</strong></p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">SSAL Works 등 Sunny가 직접 진행한 개발 관련 문서 및 소스코드 파일을 제공합니다. 실제 작동하는 소스코드를 활용해서 내 프로젝트를 개발할 수 있습니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>6) 작업을 하다 막히면 언제든지 질문할 수 있습니다</strong></p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">ChatGPT, Gemini, Perplexity 3개 AI에게 질문할 수 있고, Sunny에게 수시로 직접 질문할 수 있습니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">SSAL Works를 어떻게 시작하나요?</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>1단계: 회원가입 (무료)</strong> - 먼저 회원가입을 합니다. 무료이고, 부담 없이 둘러볼 수 있습니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>2단계: 콘텐츠 확인</strong> - Books, Tips, Order Sheet 등을 둘러보면서 "이게 나한테 맞겠다" 싶은지 판단합니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>3단계: 빌더 계정 개설</strong> - 유용하다고 판단되면 빌더 계정을 개설합니다. 결제 후 바로 모든 기능을 이용할 수 있습니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>4단계: 프로젝트 시작</strong> - 내 프로젝트를 등록하고, AI와 함께 개발을 시작합니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">※ 모바일에서는 콘텐츠 조회가 가능하며, 개발 작업은 PC 환경을 권장합니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">SSAL Works 사용 비용은 어떻게 책정되어 있나요?</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>빌더 계정 개설비: 300만원 (얼리버드, 부가세 포함)</strong></p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">이 금액에는 플랫폼 평생 접근권(월 이용료 별도), AI 크레딧 5만원, 3개월간 1:1 코칭이 포함됩니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>50% 환불 조건이 있습니다.</strong> 3개월 내에 웹사이트를 완성하고 고객 30명을 확보하면 150만원을 돌려받습니다. 실질적으로 150만원에 시작하는 셈입니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>월 이용료는 5만원 (부가세 포함)</strong>이며, 처음 3개월은 무료입니다. 4개월차부터 월 5만원이 발생합니다. 서버 유지, 기능 업데이트, 지속적인 지원이 포함됩니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>AI 크레딧</strong>은 AI를 사용할 때마다 차감됩니다. 초기 5만원이 제공되고, 부족하면 1만원 단위로 충전합니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">SSAL Works를 왜 지금 시작하면 좋은가요?</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>지금은 얼리버드 가격입니다.</strong> 현재 300만원인 빌더 계정 개설비는 앞으로 단계적으로 인상될 예정입니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>예시 프로젝트가 늘어날수록 가치가 올라갑니다.</strong> 지금은 예시 프로젝트가 1개(SSAL Works)이지만, 50개, 100개로 늘어나면 웹사이트 제작 기간이 3개월에서 1주일로 단축됩니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>빌더 계정은 양도할 수 있습니다.</strong> 나중에 사용하지 않게 되면 타인에게 시가로 양도할 수 있습니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">SSAL Works에 대해 궁금한 게 있으면요?</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>고객센터 문의하기</strong>로 일반적인 문의사항을, <strong>Sunny에게 질문하기</strong>로 개발, 코칭, 사업 관련 상담을 할 수 있습니다. 24시간 언제든 문의 가능하며, 보통 당일 내 답변드립니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">지금 시작하세요</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">현재 얼리버드 가격 <strong>300만원</strong>에 빌더 계정을 개설할 수 있습니다. 3개월 내 목표 달성 시 <strong>150만원 환불</strong>됩니다. 회원가입 후 빌더 계정을 신청하세요. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">상세 안내 보기</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">개요에서 다룬 내용을 더 깊이 있게 설명합니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">

                </section>

                <!-- Section 1: SSAL Works란 무엇인가 -->
                <section id="section1" style="margin-bottom: 48px;">
                    <h2 style="font-size: 20px; font-weight: 800; color: #1F3563; margin-bottom: 18px; padding-bottom: 10px; border-bottom: 3px solid #F59E0B;">1. SSAL Works란 무엇인가</h2>
                    <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">1-1. SSAL Works의 정체성</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">SSAL Works는 <strong>Claude Code를 활용한 3차원 SAL Grid 기반 풀스택 웹사이트 개발 실행 및 관리 플랫폼</strong>입니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">이 정의를 하나씩 풀어서 설명하겠습니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">Claude Code란?</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">Claude Code는 Anthropic이 개발한 AI 도구입니다. 터미널에서 실행되며, 사용자의 지시를 받아 코드를 작성하고, 파일을 만들고, 프로젝트를 관리합니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>Claude Code의 역할:</strong></p>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>코드 작성</strong>: HTML, CSS, JavaScript, TypeScript, Python 등</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>파일 생성 및 수정</strong>: 프로젝트 파일 자동 생성</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Git 버전 관리</strong>: 커밋, 푸시, 브랜치 관리</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>터미널 명령 실행</strong>: npm, git, 배포 명령 등</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>프로젝트 구조 관리</strong>: 폴더 생성, 파일 정리</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>코드 리뷰</strong>: 작성한 코드 검토</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>버그 수정</strong>: 에러 분석 및 해결</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>테스트 실행</strong>: 자동화 테스트 수행</li></ul>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>Claude Code vs 일반 Claude:</strong></p>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Claude (웹/앱)</strong>: 브라우저/앱에서 실행, 파일 접근 불가, 코드 실행 불가, Git/배포 작업 불가, 대화/질문/문서 작성 용도</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Claude Code (터미널)</strong>: 터미널(CLI)에서 실행, 로컬 파일 직접 접근 가능, 코드 직접 실행 가능, Git/배포 작업 직접 수행, 실제 개발 작업 용도</li></ul>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">SSAL Works는 이 Claude Code를 핵심 도구로 사용하여, 비개발자도 풀스택 웹사이트를 개발할 수 있게 합니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">3차원 SAL Grid란?</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">SAL Grid는 SSAL Works가 개발한 프로젝트 관리 방법론입니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>SAL = Stage(단계) + Area(영역) + Level(레벨)</strong></p>
<pre style="background: #f8f9fa; color: #1f2937; padding: 16px 20px; border-radius: 8px; margin: 16px 0; font-family: 'Consolas', 'Monaco', monospace; font-size: 13px; overflow-x: auto; white-space: pre; line-height: 1.6; border: 1px solid #e5e7eb;"><code>Area (Y축: 11개 개발 영역)&#10;                ↑&#10;                │    ┌───┬───┬───┬───┬───┐&#10;                │    │   │   │   │   │   │&#10;                │    ├───┼───┼───┼───┼───┤&#10;                │    │   │ Task │   │   │  ← Level (Z축)&#10;                │    ├───┼───┼───┼───┼───┤&#10;                │    │   │   │   │   │   │&#10;                │    └───┴───┴───┴───┴───┘&#10;                └──────────────────────────→ Stage (X축: 5개 개발 단계)</code></pre>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>Stage (X축 - 개발 단계):</strong></p>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>S1 (Development Setup, 개발 준비)</strong>: 환경설정, DB 스키마, Auth 설정</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>S2 (Auth & Registration, 개발 1차)</strong>: OAuth, 이메일, 회원가입</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>S3 (AI Integration, 개발 2차)</strong>: AI 연동, AI Q&A</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>S4 (Payment & Admin, 개발 3차)</strong>: 결제, 관리자, 크레딧</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>S5 (Development Stabilization, 개발 마무리)</strong>: 배포, QA, 안정화</li></ul>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>Area (Y축 - 개발 영역):</strong></p>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>M (Documentation, 문서화)</strong>: 기획서, 명세서 등</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>U (Design, UI/UX 디자인)</strong>: 화면 설계, 디자인</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>F (Frontend, 프론트엔드)</strong>: 사용자가 보는 화면</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>BI (Backend Infrastructure, 백엔드 기반)</strong>: 서버 설정, 라이브러리</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>BA (Backend APIs, 백엔드 API)</strong>: API 엔드포인트</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>D (Database, 데이터베이스)</strong>: DB 스키마, 쿼리</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>S (Security, 보안/인증)</strong>: 로그인, 권한 관리</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>T (Testing, 테스트)</strong>: 단위/통합 테스트</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>O (DevOps, 운영/배포)</strong>: 배포, CI/CD</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>E (External, 외부 연동)</strong>: 외부 서비스 연동</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>C (Content System, 콘텐츠 시스템)</strong>: 콘텐츠 관리</li></ul>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>Level (Z축 - 작업 순서):</strong></p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">Level은 각 Task의 Stage별, Area별 순서를 나타냅니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">예: S2F1, S2F2, S2F3 → Stage 2, Frontend Area의 1번, 2번, 3번 Task </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">Task의 22개 속성</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">SAL Grid에서 각 Task는 22개의 속성으로 관리됩니다. </p>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>#1 task_id</strong>: Task 고유 ID (예: S2F1)</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>#2 task_name</strong>: Task 이름</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>#3 stage</strong>: Stage 번호 (1~5)</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>#4 area</strong>: Area 코드 (M, U, F, BI, BA, D, S, T, O, E, C)</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>#5 level</strong>: Level 번호</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>#6 task_status</strong>: 작업 상태 (Pending → In Progress → Executed → Completed)</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>#7 task_progress</strong>: 진행률 (0~100)</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>#8 dependencies</strong>: 선행 Task</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>#9 task_instruction</strong>: Task 수행 지침</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>#10 task_agent</strong>: Task 수행 Agent</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>#11 generated_files</strong>: 생성된 파일</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>#12 duration</strong>: 소요 시간</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>#13 build_result</strong>: 빌드 결과</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>#14 verification_instruction</strong>: 검증 지침</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>#15 verification_agent</strong>: 검증 Agent</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>#16 test_result</strong>: 테스트 결과</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>#17 build_verification</strong>: 빌드 검증</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>#18 integration_verification</strong>: 통합 검증</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>#19 blockers</strong>: 차단 요소</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>#20 comprehensive_verification</strong>: 종합 검증</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>#21 ai_verification_note</strong>: AI 검증 의견</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>#22 stage_gate_status</strong>: Stage Gate 상태</li></ul>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">왜 SAL Grid가 필요한가?</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>체계 없는 코딩은 시행착오가 많습니다.</strong></p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">AI가 아무리 뛰어나도 관리 시스템 없이 방치하면: </p>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>여기저기에 폴더와 파일을 만듭니다</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>일관성 없이 코드를 작성합니다</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>수정 작업이 매우 어려워집니다</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>어떤 파일이 어디에 있는지 찾기 힘듭니다</li></ul>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>AI도 관리 시스템이 필요합니다.</strong></p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">SAL Grid는 모든 개발 작업(Task)을 3차원 좌표계 위에 배치하여: </p>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>체계적으로 관리합니다</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>모든 작업을 추적합니다 (Audit Trail)</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>작업자와 검증자를 분리합니다</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>단계별 품질을 보장합니다</li></ul>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">풀스택 웹사이트란?</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">프론트엔드(사용자가 보는 화면)와 백엔드(서버, 데이터베이스, API)가 모두 갖춰진 완전한 웹사이트입니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>풀스택 웹사이트의 구성:</strong></p>
<pre style="background: #f8f9fa; color: #1f2937; padding: 16px 20px; border-radius: 8px; margin: 16px 0; font-family: 'Consolas', 'Monaco', monospace; font-size: 13px; overflow-x: auto; white-space: pre; line-height: 1.6; border: 1px solid #e5e7eb;"><code>┌─────────────────────────────────────────────────────────┐&#10;│                    풀스택 웹사이트                        │&#10;├─────────────────────────────────────────────────────────┤&#10;│                                                         │&#10;│   ┌──────────────────────────────────────┐              │&#10;│   │          Frontend (프론트엔드)         │              │&#10;│   │   - HTML (구조)                       │              │&#10;│   │   - CSS (스타일)                      │              │&#10;│   │   - JavaScript (동작)                 │              │&#10;│   │   - 사용자가 보고 상호작용하는 화면     │              │&#10;│   └──────────────────────────────────────┘              │&#10;│                         ↓↑                              │&#10;│   ┌──────────────────────────────────────┐              │&#10;│   │          Backend (백엔드)              │              │&#10;│   │   - API 서버                          │              │&#10;│   │   - 비즈니스 로직                      │              │&#10;│   │   - 인증/권한 관리                     │              │&#10;│   └──────────────────────────────────────┘              │&#10;│                         ↓↑                              │&#10;│   ┌──────────────────────────────────────┐              │&#10;│   │          Database (데이터베이스)        │              │&#10;│   │   - 데이터 저장                        │              │&#10;│   │   - 데이터 조회                        │              │&#10;│   └──────────────────────────────────────┘              │&#10;│                                                         │&#10;└─────────────────────────────────────────────────────────┘</code></pre>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">단순한 랜딩 페이지가 아니라, 회원가입, 로그인, 결제, 데이터 저장, 관리자 기능 등 실제 비즈니스를 운영할 수 있는 웹사이트입니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">1-2. SSAL이라는 이름의 의미</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">SSAL이라는 이름은 두 가지 의미가 결합되어 있습니다. </p>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">첫째, S + SAL</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">S는 개발자 Sunny의 성씨 첫 글자이고, SAL은 3차원 좌표계(Stage, Area, Level)의 약자입니다. 따라서 SSAL = Sunny + Stage + Area + Level입니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">둘째, 쌀</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">SSAL의 한글 발음은 "쌀"입니다. 쌀이 한국인의 핵심 먹을거리이듯, 웹사이트는 사업의 핵심 먹을거리입니다. 쌀이 있어야 밥을 먹듯, 웹사이트가 있어야 수익을 냅니다. SSAL Works에서 만드는 웹사이트는 사용자에게 돈을 벌어다주는 핵심 먹을거리가 됩니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">1-3. 황금쌀 방앗간</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">SSAL Works를 비유적으로 표현하면 <strong>"황금쌀 방앗간"</strong>입니다. </p>
<pre style="background: #f8f9fa; color: #1f2937; padding: 16px 20px; border-radius: 8px; margin: 16px 0; font-family: 'Consolas', 'Monaco', monospace; font-size: 13px; overflow-x: auto; white-space: pre; line-height: 1.6; border: 1px solid #e5e7eb;"><code>┌─────────────────────────────────────────────────────────┐&#10;│                    황금쌀 방앗간                         │&#10;├─────────────────────────────────────────────────────────┤&#10;│                                                         │&#10;│   농부 (사람)                                            │&#10;│      │                                                  │&#10;│      │ 벼 (창의적 아이디어)                              │&#10;│      ↓                                                  │&#10;│   ┌──────────────────────────────┐                      │&#10;│   │      방앗간 (SSAL Works)      │                      │&#10;│   │                              │                      │&#10;│   │   방아 (Claude Code + SAL Grid)│                     │&#10;│   │                              │                      │&#10;│   └──────────────────────────────┘                      │&#10;│      │                                                  │&#10;│      │ 쌀 (풀스택 웹사이트)                              │&#10;│      ↓                                                  │&#10;│   황금쌀 (돈을 버는 웹사이트)                             │&#10;│                                                         │&#10;└─────────────────────────────────────────────────────────┘</code></pre>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">농부(빌더)가 벼(창의적 아이디어)를 가져오면, 방앗간(SSAL Works)에서 방아(AI)가 찧어서 쌀(풀스택 웹사이트)을 만들어냅니다. 그리고 그 쌀은 황금쌀, 즉 돈을 버는 웹사이트가 됩니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">방앗간에서 농부가 직접 방아를 찧지 않아도 쌀이 나오듯이, SSAL Works에서 사용자가 직접 코딩을 하지 않아도 웹사이트가 만들어집니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">1-4. 인간과 AI의 역할 분담</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">SSAL Works에서 인간과 AI는 각자의 역할이 명확하게 분담되어 있습니다. </p>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">AI(Claude Code)가 담당하는 것</h4>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>코딩</strong>: HTML, CSS, JavaScript, TypeScript 등 작성</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>문법과 문서 형식</strong>: 올바른 문법, 표준 형식 준수</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>도구 사용</strong>: Git, npm, Vercel CLI 등 도구 활용</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>반복적인 작업</strong>: 파일 생성, 코드 수정 반복</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>기술적인 구현</strong>: 알고리즘, 로직 구현</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>에러 해결</strong>: 버그 분석 및 수정</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>테스트</strong>: 자동화 테스트 수행</li></ul>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">인간(빌더)이 담당하는 것</h4>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>기획</strong>: 무엇을 만들 것인지 결정</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>의사결정</strong>: 어떤 방향으로 갈 것인지 결정</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>비즈니스 모델</strong>: 어떻게 수익을 낼 것인지 설계</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Order Sheet 작성</strong>: AI에게 지시할 내용 정리</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>최종 승인</strong>: 결과물 검토 및 승인</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>외부 서비스 설정</strong>: API 키 발급, OAuth 설정 등</li></ul>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">1-5. 브랜드 메시지</h3>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">슬로건</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>"AI와 함께 풀스택 웹사이트를 만드는 곳"</strong></p>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">비전</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>"창의적 아이디어를 가진 누구나, AI와 함께 풀스택 웹사이트를 만들고, 돈을 버는 세상"</strong></p>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">미션</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>"비개발자도 풀스택 웹사이트를 개발할 수 있는 환경과 방법론을 제공한다"</strong></p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">1-6. 우리의 비전</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">> <strong>대한민국인 500만명 이상이 아이디어ㆍ염원ㆍ의지만 있다면, 말로만 하여 자기가 원하는 풀스택 웹사이트를 만들어서 국내는 물론 전세계를 상대로 서비스를 제공하는 그날까지 Go. Go.</strong> </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">

                </section>

                <!-- Section 2: 왜 SSAL Works를 만들었는가 -->
                <section id="section2" style="margin-bottom: 48px;">
                    <h2 style="font-size: 20px; font-weight: 800; color: #1F3563; margin-bottom: 18px; padding-bottom: 10px; border-bottom: 3px solid #F59E0B;">2. 왜 SSAL Works를 만들었는가</h2>
                    <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">2-1. Sunny의 10년간 3번의 시도 (2013-2022)</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">SSAL Works의 개발자 Sunny는 2013년부터 2022년까지 10년간 3개의 IT 플랫폼 개발을 시도했습니다. </p>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>첫 번째 시도 (2013)</strong>: 기업 지원 서비스 거래 플랫폼 → 미완</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>두 번째 시도 (2018)</strong>: 온라인 엑셀러레이터 플랫폼 → 미완</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>세 번째 시도 (2022)</strong>: 스타트업 지식 제공 플랫폼 → 미완</li></ul>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">세 가지 모두 미완으로 끝난 이유</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">원인은 매번 같았습니다: </p>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>개발자 구인 어려움</strong>: 실력 있는 개발자를 찾기가 너무 어려움</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>높은 개발 비용</strong>: 외주 개발 비용이 수천만원~수억원</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>의사소통 한계</strong>: 원하는 것을 개발자에게 정확히 전달하기 어려움</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>결과물 불일치</strong>: 만들어진 결과물이 원하던 것과 다름</li></ul>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">매번 같은 생각이 들었습니다: </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">> <strong>"내가 직접 개발할 수 있다면..."</strong> </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">2-2. Sunny의 배경</h3>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">학력 및 자격</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">경영학과를 졸업하고 공인회계사 자격증을 취득했습니다. 경영학 과목 수석으로 합격했으며, 만 19세 이전에 18개월 만에 합격했습니다. </p>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">회계감사 경험</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">합격 후 회계감사 업무를 담당했습니다. 회계감사는 여러 가지 자료를 체계적으로 분류하고, 정리하고, 평가하는 업무입니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">이 경험이 SAL Grid 방법론을 만드는 데 결정적인 역할을 했습니다. </p>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>회계감사의 감사 계획서</strong> → <strong>SAL Grid의 Order Sheet</strong></li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>회계감사의 감사 절차서</strong> → <strong>SAL Grid의 Task Instruction</strong></li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>회계감사의 내부통제 테스트</strong> → <strong>SAL Grid의 Verification Instruction</strong></li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>회계감사의 Working Paper</strong> → <strong>SAL Grid의 Task Results</strong></li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>회계감사의 Review Process</strong> → <strong>SAL Grid의 Stage Gate 검증</strong></li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>회계감사의 파트너 승인</strong> → <strong>SAL Grid의 PO 승인</strong></li></ul>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">스타트업 엑셀러레이터 경험</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">또한 Sunny는 10년 이상 스타트업 엑셀러레이터로 활동했습니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">수많은 스타트업들이 같은 진입장벽에 막히는 것을 목격했습니다: </p>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>아이디어는 있지만 웹사이트가 없다</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>개발자를 구하지 못한다</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>외주 비용이 너무 비싸다</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>기술적 역량이 부족하다</li></ul>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">2-3. AI와의 만남 (2025년 5월)</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">2025년 5월, Sunny는 AI를 발견했습니다. </p>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">발견의 순간</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">직접 해보니까 놀라운 사실을 깨달았습니다: </p>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>개발팀 없이 혼자서 개발할 수 있다</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>외주 비용이 필요 없다</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>원하는 것을 직접 만들 수 있다</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>AI에게 직접 설명하면 된다</li></ul>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">10년간 갈망했던 것의 해결 실마리를 발견한 순간이었습니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">2-4. 7개월간의 몰입 (2025년 5월 ~ 12월)</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">2025년 5월부터 12월까지 7개월간, Sunny는 하루 평균 12시간 이상을 AI와 함께 개발에 투입했습니다. </p>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">투입 리소스</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">7개월간(2025년 5월~12월) 2,500시간 이상을 투입했고, 토큰 비용만 수천만원이 들었습니다. 공인회계사 합격 이후 처음 느끼는 몰입도였습니다. </p>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">2,500시간 안에 담긴 것들</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">웹개발 기초부터 고급 기술까지 공부하고, Claude, ChatGPT, Gemini, Perplexity 등 다양한 AI를 사용했습니다. 수많은 에러와 버그를 해결하고, 무수한 삽질과 재시도를 거쳐 실전에서 검증된 노하우를 축적했습니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">2-5. 3개월 만에 만든 웹사이트</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">7개월간 이 모든 일을 하면서, 실제 웹사이트 개발은 10월부터 시작해서 12월에 완료했습니다. 3개월 미만 만에 풀스택 웹사이트(SSAL Works)를 완성한 것입니다. </p>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">10년 vs 3개월</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">과거 10년간은 3번 시도해서 모두 미완이었습니다. 개발팀이 필요했지만 구하지 못했고, 비용만 들고 결과가 없었습니다. 기획만 가능했습니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">이제 3개월 만에 1번 시도로 완성했습니다. 개발팀 없이 토큰 비용만으로, 전체 개발을 직접 할 수 있게 되었습니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">Sunny는 이제 풀스택 웹사이트를 일주일에 하나씩 만들 수 있는 능력이 생겼습니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">2-6. SSAL Works를 만든 이유</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">이 능력을 다른 사람들에게 공유하고 싶습니다. </p>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">Sunny가 바라는 것</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">> <strong>"많은 사람들이 SSAL Works를 통해 같은 능력을 갖게 되기를 바랍니다."</strong> </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">개발 능력이 없어도 웹사이트를 만들 수 있게 진입장벽을 제거하고, 2,500시간의 노하우로 삽질을 줄여주고, 웹사이트로 돈을 벌 수 있게 도와주고 싶습니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">2-7. AI에 대한 현실적 인식</h3>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">체계 없는 코딩은 시행착오가 많습니다</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">개발 기술을 조금 공부해서 AI에게 시키면 된다고요? </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">비개발자가 체계 없이 시도하면: </p>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>토큰 비용만 낭비됩니다</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>엉터리 결과물이 나옵니다</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>나중에 수정이 불가능합니다</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>시간만 허비합니다</li></ul>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">AI도 관리 시스템이 필요합니다</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">AI가 아무리 뛰어나도 관리/통제/검증 시스템이 준비되어 있지 않으면: </p>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>파일과 폴더가 난립해서 어디에 뭐가 있는지 모르게 됨</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>코드 스타일이 제각각이 됨</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>한 곳을 고치면 다른 곳이 망가져서 수정이 불가능해짐</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>무엇이 왜 그렇게 되었는지 추적이 불가능해짐</li></ul>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">필요한 것은 기술이 아니라 방법론</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">개발 기술을 몰라도 웹사이트를 만들 수 있는 방법론. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">그 방법론을 만들어서 제공하려는 것이 SSAL Works입니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">별도 학습 없이 바로 시작할 수 있습니다</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">웹사이트를 만들고 싶은 의지가 있다면, 공부부터 하지 말고 바로 시작하세요. 강의 듣거나 책으로 배우지 말고, SSAL Works를 활용해서 실전에서 배우세요. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">개발하는 과정에서 필요한 지식은 SSAL Works에 다 정리해놓았습니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">

                </section>

                <!-- Section 3: SSAL Works가 제공하는 것 -->
                <section id="section3" style="margin-bottom: 48px;">
                    <h2 style="font-size: 20px; font-weight: 800; color: #1F3563; margin-bottom: 18px; padding-bottom: 10px; border-bottom: 3px solid #F59E0B;">3. SSAL Works가 제공하는 것</h2>
                    <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">3-1. PROJECT SAL Grid 방법론</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">3차원 좌표계(Stage, Area, Level)로 프로젝트 전체를 관리합니다. </p>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">SAL Grid의 핵심 특징</h4>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>각 Task를 22개 속성으로 체계적으로 관리</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>Task Agent(작업자)와 Verification Agent(검증자) 분리</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>모든 작업의 Audit Trail 보장으로 추적 가능</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>단계별 Stage Gate 승인 절차</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>철저한 문서화 및 기록</li></ul>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">SAL Grid View 옵션</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">2D Card View(카드 형태로 Task 목록 표시)와 3D Block View(3차원 블록 형태로 시각화) 중 선택할 수 있습니다. </p>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">Task 상태 전이</h4>
<pre style="background: #f8f9fa; color: #1f2937; padding: 16px 20px; border-radius: 8px; margin: 16px 0; font-family: 'Consolas', 'Monaco', monospace; font-size: 13px; overflow-x: auto; white-space: pre; line-height: 1.6; border: 1px solid #e5e7eb;"><code>┌─────────┐    ┌─────────────┐    ┌──────────┐    ┌───────────┐&#10;│ Pending │ →  │ In Progress │ →  │ Executed │ →  │ Completed │&#10;└─────────┘    └─────────────┘    └──────────┘    └───────────┘&#10;                                       ↑              ↑&#10;                                   작업 완료      검증 후만 가능</code></pre>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">Pending(대기) → In Progress(진행) → Executed(완료, 검증 전) → Completed(검증까지 완료) 순서로 진행됩니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">검증 상태 전이</h4>
<pre style="background: #f8f9fa; color: #1f2937; padding: 16px 20px; border-radius: 8px; margin: 16px 0; font-family: 'Consolas', 'Monaco', monospace; font-size: 13px; overflow-x: auto; white-space: pre; line-height: 1.6; border: 1px solid #e5e7eb;"><code>┌──────────────┐    ┌───────────┐    ┌──────────┐&#10;│ Not Verified │ →  │ In Review │ →  │ Verified │&#10;└──────────────┘    └───────────┘    └──────────┘&#10;                                           │&#10;                                           ↓&#10;                                      Needs Fix (문제 발견 시)</code></pre>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">Not Verified(검증 전) → In Review(검증 중) → Verified(통과) 또는 Needs Fix(수정 필요)로 진행됩니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">Stage Gate 검증</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">각 Stage가 완료될 때마다 Stage Gate 검증을 수행합니다. S1은 개발 환경, S2는 인증/회원가입, S3는 AI 연동, S4는 결제/관리자, S5는 전체 QA 및 배포 준비를 확인합니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">3-2. Order Sheet 체계</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">AI에게 체계적으로 작업을 지시하는 표준화된 양식입니다. </p>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">Order Sheet가 무엇인가</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">AI에게 "이거 해줘"라고만 하면 엉터리가 됩니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">Order Sheet는: </p>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>AI가 지켜야 할 규칙을 명확하게 정의합니다</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>작업 내용을 구체적으로 기술합니다</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>기대 결과물을 명시합니다</li></ul>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">Order Sheet 구성</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>Part A</strong>는 모든 프로젝트에 공통으로 적용되는 표준 규칙입니다. 7대 작업 규칙(파일명, 저장위치, Area/Stage 등), 5대 절대 규칙, 상태 전이 규칙, Supabase CRUD 방법, 6단계 실행 프로세스가 포함됩니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>Part B</strong>는 프로젝트별로 커스터마이징하는 부분입니다. 프로젝트 정보, 작업 지시, 참고 파일, 기대 결과물을 작성합니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">Order Sheet 활용법</h4>
<pre style="background: #f8f9fa; color: #1f2937; padding: 16px 20px; border-radius: 8px; margin: 16px 0; font-family: 'Consolas', 'Monaco', monospace; font-size: 13px; overflow-x: auto; white-space: pre; line-height: 1.6; border: 1px solid #e5e7eb;"><code>┌─────────────────────────────────────────────────────────┐&#10;│                Order Sheet 사용 프로세스                  │&#10;├─────────────────────────────────────────────────────────┤&#10;│                                                         │&#10;│   1. 대시보드에서 Order Sheet 템플릿 선택                 │&#10;│        ↓                                                │&#10;│   2. 프로젝트에 맞게 Part B 작성                         │&#10;│        ↓                                                │&#10;│   3. "복사하기" 버튼으로 클립보드에 복사                  │&#10;│        ↓                                                │&#10;│   4. Claude Code 터미널에 붙여넣기                       │&#10;│        ↓                                                │&#10;│   5. AI가 Order Sheet를 읽고 작업 수행                   │&#10;│        ↓                                                │&#10;│   6. 결과 확인 및 검증                                   │&#10;│                                                         │&#10;└─────────────────────────────────────────────────────────┘</code></pre>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">Order Sheet 템플릿 (32개)</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">총 32개의 템플릿이 준비되어 있습니다. P0~P3 기획 단계 19개, S0~S5 개발 단계 12개, 완료된 프로젝트 수정용 1개입니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">3-3. Briefing (안내문) 체계</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">각 개발 단계마다 무엇을 해야 하는지 상세히 안내합니다. </p>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">Briefing이 무엇인가</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">각 단계에서 해야 할 일을 명확하게 안내하는 문서입니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>"뭘 해야 할지 몰라서 멍하니 있는 시간"</strong>을 없앱니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">Briefing 구성</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">회원가입 후 환영 메시지, 프로젝트 등록 후 플랫폼 사용법, P0~P3 기획 단계별 안내, S0~S5 개발 단계별 안내, 완료된 프로젝트 수정 등 상황별 안내문이 준비되어 있습니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">Briefing 활용법</h4>
<pre style="background: #f8f9fa; color: #1f2937; padding: 16px 20px; border-radius: 8px; margin: 16px 0; font-family: 'Consolas', 'Monaco', monospace; font-size: 13px; overflow-x: auto; white-space: pre; line-height: 1.6; border: 1px solid #e5e7eb;"><code>┌─────────────────────────────────────────────────────────┐&#10;│                Briefing 사용 프로세스                    │&#10;├─────────────────────────────────────────────────────────┤&#10;│                                                         │&#10;│   1. 현재 단계의 Briefing 확인                           │&#10;│        ↓                                                │&#10;│   2. 안내에 따라 작업 내용 파악                          │&#10;│        ↓                                                │&#10;│   3. 해당 단계의 Order Sheet 템플릿 활용                 │&#10;│        ↓                                                │&#10;│   4. 작업 수행                                          │&#10;│        ↓                                                │&#10;│   5. 다음 단계로 이동                                    │&#10;│                                                         │&#10;└─────────────────────────────────────────────────────────┘</code></pre>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">3-4. SSAL Works Dev Package</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">AI 협업 웹 개발을 위한 올인원 통합 패키지입니다. </p>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">Dev Package란?</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">Claude Code(AI)와 함께 웹 프로젝트를 처음부터 끝까지 수행할 수 있도록 설계된 <strong>통합 개발 환경 패키지</strong>입니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">AI 협업 웹 개발을 위한 표준화된 프로젝트 템플릿으로, 비개발자도 AI와 함께 웹 서비스를 만들 수 있게 합니다. 프로세스, 자동화, AI 설정이 하나로 통합되어 있습니다. </p>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">한 문장 정의</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">> <strong>"다운로드 → 압축 해제 → Claude Code 실행" 3단계로 프로젝트 개발 환경이 완성되는 패키지</strong> </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">Dev Package 구성 요소</h4>
<h5 style="font-size: 13px; font-weight: 600; color: #374151; margin: 14px 0 6px 0;">1) 프로젝트 디렉토리 구조 (P0~S5)</h5>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>P0 (작업_디렉토리_구조_생성)</strong>: 프로젝트 초기 설정</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>P1 (사업계획)</strong>: 비즈니스 모델 정의</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>P2 (프로젝트_기획)</strong>: 기능 명세, UI/UX 설계</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>P3 (프로토타입_제작)</strong>: 화면 프로토타입 개발</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>S0 (Project-SAL-Grid_생성)</strong>: Task 관리 체계 구축</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>S1 (개발_준비)</strong>: 개발 환경, DB 스키마</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>S2 (개발-1차)</strong>: 인증, 회원가입</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>S3 (개발-2차)</strong>: AI 연동, 핵심 기능</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>S4 (개발-3차)</strong>: 결제, 관리자 기능</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>S5 (개발_마무리)</strong>: 배포, QA, 안정화</li></ul>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>총 10단계</strong>의 체계적인 프로젝트 수행 구조 제공 </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h5 style="font-size: 13px; font-weight: 600; color: #374151; margin: 14px 0 6px 0;">2) AI 협업 설정</h5>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">Claude Code 실행 즉시 모든 규칙과 설정이 자동 적용됩니다. AI가 지켜야 할 7대 작업 규칙, 5대 절대 규칙이 미리 설정되어 있어 별도의 설정 없이 바로 작업을 시작할 수 있습니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h5 style="font-size: 13px; font-weight: 600; color: #374151; margin: 14px 0 6px 0;">3) 자동화 시스템</h5>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">코드 저장부터 배포까지 반복적인 작업이 자동화되어 있습니다. 수작업 오류를 방지하고 일관된 품질을 유지합니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h5 style="font-size: 13px; font-weight: 600; color: #374151; margin: 14px 0 6px 0;">4) SAL Grid 시스템</h5>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">모든 Task의 상태와 진행률을 한눈에 관리합니다. 각 Task별 수행 지침과 검증 기준이 준비되어 있어 체계적으로 프로젝트를 진행할 수 있습니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h5 style="font-size: 13px; font-weight: 600; color: #374151; margin: 14px 0 6px 0;">5) 배포 구조</h5>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">Vercel 배포 준비가 완료된 상태로 제공됩니다. 별도의 서버 설정 없이 바로 웹사이트를 배포할 수 있습니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">Dev Package 사용 효과</h4>
<h5 style="font-size: 13px; font-weight: 600; color: #374151; margin: 14px 0 6px 0;">시간 절약</h5>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>프로젝트 구조 설계</strong>: 직접 구축 시 1~2주 → 패키지 사용 시 <strong>즉시</strong></li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>AI 협업 규칙 정의</strong>: 직접 구축 시 1주 → 패키지 사용 시 <strong>즉시</strong></li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>자동화 스크립트 개발</strong>: 직접 구축 시 3~5일 → 패키지 사용 시 <strong>즉시</strong></li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Order Sheet 작성</strong>: 직접 구축 시 2주 → 패키지 사용 시 <strong>즉시</strong> (32개 제공)</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>배포 구조 설정</strong>: 직접 구축 시 2~3일 → 패키지 사용 시 <strong>즉시</strong></li></ul>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>예상 절약 시간: 4~6주</strong></p>
<h5 style="font-size: 13px; font-weight: 600; color: #374151; margin: 14px 0 6px 0;">품질 향상</h5>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">모든 프로젝트가 동일한 구조와 규칙을 적용받아 일관성이 유지됩니다. SAL Grid로 모든 Task 상태를 추적할 수 있고, Task별 검증 지침과 Stage Gate 검증 체계가 갖춰져 있습니다. 수작업 오류가 제거되고 반복 작업이 자동화됩니다. </p>
<h5 style="font-size: 13px; font-weight: 600; color: #374151; margin: 14px 0 6px 0;">학습 곡선 최소화</h5>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">비개발자는 프로세스만 따라가면 웹 서비스를 완성할 수 있습니다. 주니어 개발자는 시니어 수준의 프로젝트 구조를 즉시 적용할 수 있고, 팀은 표준화된 협업 체계로 커뮤니케이션 비용을 절감할 수 있습니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">Dev Package 시작하기</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>다운로드 → 압축 해제 → Claude Code 실행</strong>, 단 3단계로 개발 환경이 완성됩니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">빌더 계정 개설자에게 제공되는 Dev Package를 다운로드하면, 복잡한 환경 설정 없이 바로 AI와 함께 웹 개발을 시작할 수 있습니다. 모든 규칙과 설정이 미리 적용되어 있어, Order Sheet만 전달하면 AI가 체계적으로 작업을 수행합니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">3-5. 학습용 콘텐츠</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">개발에 필요한 지식을 완전히 집대성해놓았습니다. </p>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">Books (3권, 80편)</h4>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>1권</strong>: Claude/Claude Code 사용법 (34편)</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>2권</strong>: 풀스택 웹사이트 개발 (34편)</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>3권</strong>: 프로젝트 관리 방법 (12편)</li></ul>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h5 style="font-size: 13px; font-weight: 600; color: #374151; margin: 14px 0 6px 0;">제1권: Claude/Claude Code 사용법 (34편)</h5>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">Anthropic 소개(창업 배경, 철학, AI 안전성), Claude 소개(탄생과 진화), Claude Code 기초(설치, 실행, 기본 사용법), Claude Code 심화(MCP, Skills, Subagents, Hooks), 프롬프트 엔지니어링, 토큰과 비용, 트러블슈팅 등을 다룹니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h5 style="font-size: 13px; font-weight: 600; color: #374151; margin: 14px 0 6px 0;">제2권: 풀스택 웹사이트 개발 기초지식 (34편)</h5>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">웹 기초(작동 원리), Git/GitHub(버전 관리), 기술스택(Language, Framework, Library), Frontend(HTML, CSS, JavaScript), Backend(API, 서버), Database(Supabase 심화), 배포(Vercel 심화), 이메일(Resend 심화) 등을 다룹니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h5 style="font-size: 13px; font-weight: 600; color: #374151; margin: 14px 0 6px 0;">제3권: 프로젝트 관리 방법 (12편)</h5>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">SAL Grid 개요(핵심 개념, 구조), 22개 속성(정의와 사용법), Task Instruction(작성법, 템플릿), Verification(검증 시스템), Order Sheet(제도, 활용법), Stage Gate(검증 프로세스) 등을 다룹니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">Tips (18개 카테고리, 65개)</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">7개월간 AI와 함께 개발하면서 발견한 소중한 실전 노하우입니다. 웹개발 기초개념, AI 준수사항, 프로젝트 시작, 설치 & 실행, Claude Code 사용법, 입력 편의, 도구 활용, 작업 기록 & 백업, 세션 관리, 검증 & 문서화, 개발 실무, 개발 마무리 점검, 효율적인 소통, 데이터베이스, SAL Grid, 트러블슈팅, Git/GitHub, 보안 등 18개 카테고리로 분류되어 있습니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">3-6. 외부 연동 설정 가이드</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">외부 서비스 연동은 AI가 할 수 없습니다. 사람이 직접 해야 하는데, 굉장히 어렵고 복잡합니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">SSAL Works는 이미 성공한 외부 연동 설정 가이드 5가지를 제공합니다. </p>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">5가지 외부 연동 가이드</h4>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Supabase</strong> (난이도 ★★★): 데이터베이스 + 인증 기반</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Google OAuth</strong> (난이도 ★★★★): 소셜 로그인</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Resend</strong> (난이도 ★★): 이메일 발송</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Vercel</strong> (난이도 ★★★): 배포 + 도메인 연결</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>TossPayments</strong> (난이도 ★★★★★): 결제 시스템</li></ul>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">이 가이드를 따라하면 작업 시간이 획기적으로 줄어듭니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">각 서비스 설명</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>Supabase</strong>: 데이터베이스, 인증, 스토리지, API를 제공하는 Firebase의 오픈소스 대안입니다. 무료 티어가 충분하고 PostgreSQL 기반입니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>Google OAuth</strong>: 가장 많이 사용되는 소셜 로그인으로, 사용자 편의성을 향상시킵니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>Resend</strong>: 개발자 친화적 이메일 서비스로, 간단한 API와 합리적 가격이 장점입니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>Vercel</strong>: 배포와 도메인 연결을 담당하며, Git 연동 자동 배포와 Serverless Functions를 지원합니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>TossPayments</strong>: 한국 결제 환경에 최적화된 국내 결제 서비스입니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">3-7. 예시 프로젝트</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">AI가 가장 잘하는 것은 베끼는 것입니다. 참고할 수 있는 실제 프로젝트가 많으면 많을수록, AI는 더 잘 만듭니다. </p>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">현재 제공</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>SSAL Works 자체가 예시 프로젝트입니다.</strong></p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">빌더 계정 개설자에게 SSAL Works 전체 소스코드(Frontend, Backend, Database, 설정 파일 전체)를 Google Drive로 열람 및 다운로드 제공합니다. 실제로 작동하는 풀스택 웹사이트의 모든 것을 볼 수 있습니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">예시 프로젝트 활용법</h4>
<pre style="background: #f8f9fa; color: #1f2937; padding: 16px 20px; border-radius: 8px; margin: 16px 0; font-family: 'Consolas', 'Monaco', monospace; font-size: 13px; overflow-x: auto; white-space: pre; line-height: 1.6; border: 1px solid #e5e7eb;"><code>┌─────────────────────────────────────────────────────────┐&#10;│              예시 프로젝트 활용 프로세스                   │&#10;├─────────────────────────────────────────────────────────┤&#10;│                                                         │&#10;│   1. Google Drive에서 소스코드 다운로드                   │&#10;│        ↓                                                │&#10;│   2. 구조 및 코드 분석                                   │&#10;│        ↓                                                │&#10;│   3. 내 프로젝트에 맞게 수정 지시                         │&#10;│        ↓                                                │&#10;│   4. Claude Code에게 "이 코드 참고해서 만들어줘"          │&#10;│        ↓                                                │&#10;│   5. 수정된 결과물 확인                                  │&#10;│                                                         │&#10;└─────────────────────────────────────────────────────────┘</code></pre>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">향후 예시 프로젝트 확대 계획</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">현재 1개(SSAL Works)에서 시작해서, 조만간 +2개 추가, 내년 50개, 장기 비전 100개까지 확대할 계획입니다. 베낄 수 있는 것이 수십 개가 있으면, 어떤 웹사이트든 만들 수 있습니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">3-8. 1:1 코칭 서비스</h3>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">Sunny 소개</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">Sunny는 인간(AI 아님)이며, SSAL Works 창업자입니다. Professional AI User로서 AI와 함께 일하는 전문성을 갖추고 있습니다. 공인회계사이자 스타트업 엑셀러레이터 출신으로, 7개월간 2,500시간 AI 협업 개발 경험이 있습니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">코칭 내용</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">처음 3개월간 Sunny가 1:1로 맞춤형 코칭을 제공합니다. </p>
<h5 style="font-size: 13px; font-weight: 600; color: #374151; margin: 14px 0 6px 0;">개발 코칭</h5>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">Claude Code 사용법, 표준 디렉토리 구조, Order Sheet 작성법, SAL Grid 관리법, AI 에러 대응법, 프론트엔드/백엔드/DB/외부연동/배포 전 과정을 지원합니다. </p>
<h5 style="font-size: 13px; font-weight: 600; color: #374151; margin: 14px 0 6px 0;">창업 멘토링</h5>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">사업 아이디어 검증, 비즈니스 모델(수익 구조) 설계, 사업계획서 작성 및 리뷰, 투자 유치 준비 및 전략을 도와드립니다. </p>
<h5 style="font-size: 13px; font-weight: 600; color: #374151; margin: 14px 0 6px 0;">경영 자문</h5>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">법인 설립(종류, 절차), 세금 신고(이해, 신고 방법), 재무제표(이해 및 분석), 경영 전략(성장 전략 수립)을 자문합니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">코칭 기간 및 방식</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">3개월간 수시 이용 가능하며, "Sunny에게 질문하기" 채널을 통해 진행합니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">50% 환불 인센티브</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">3개월간의 코칭 기간 중 다음 조건을 모두 달성하면 150만원을 환불합니다: 풀스택 웹사이트 개발 완료 + 실제 서비스 오픈 + 고객 30명 이상 확보(증빙 제출). </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">3-9. AI Q&A 서비스</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">개발 중 궁금한 사항이 생겼을 때, 다양한 AI에게 문의할 수 있습니다. </p>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">이용 가능한 AI</h4>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>ChatGPT</strong>: 코드 작성, 문서 생성, 일반 개발 질문</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Gemini</strong>: 코드 리뷰, 설계 관련 질문</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Perplexity</strong>: 검색 기반 정보, 최신 기술 동향</li></ul>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">장점</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">각 AI 서비스를 별도 구독할 필요 없이 통합 이용 가능하고, 크레딧 방식으로 필요할 때만 사용해 비용을 절약할 수 있습니다. 여러 AI의 답변을 비교할 수도 있습니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">3-10. Sunny에게 질문하기</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">빌더 계정 개설자 전용 실시간 1:1 질의응답 서비스입니다. </p>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">질문 가능 범위</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">개발(에러 해결, 코드 리뷰, 기능 구현), 코칭(Order Sheet 작성, SAL Grid 관리), 창업(사업 아이디어, 비즈니스 모델), 회계/세무(법인 설립, 세금, 재무제표) 등 모든 분야에 질문할 수 있습니다. </p>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">특징</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">실시간으로 빠른 답변을 제공하며, 코드나 스크린샷 등 파일 첨부가 가능합니다. 프로젝트 맥락을 이해한 맞춤형 답변을 드립니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">

                </section>

                <!-- Section 4: 이용 프로세스 -->
                <section id="section4" style="margin-bottom: 48px;">
                    <h2 style="font-size: 20px; font-weight: 800; color: #1F3563; margin-bottom: 18px; padding-bottom: 10px; border-bottom: 3px solid #F59E0B;">4. 이용 프로세스</h2>
                    <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">4-1. 전체 프로세스 흐름</h3>
<pre style="background: #f8f9fa; color: #1f2937; padding: 16px 20px; border-radius: 8px; margin: 16px 0; font-family: 'Consolas', 'Monaco', monospace; font-size: 13px; overflow-x: auto; white-space: pre; line-height: 1.6; border: 1px solid #e5e7eb;"><code>┌─────────────────────────────────────────────────────────┐&#10;│                    SSAL Works 이용 프로세스              │&#10;├─────────────────────────────────────────────────────────┤&#10;│                                                         │&#10;│   1단계: 회원가입 (무료)                                 │&#10;│   - 이메일 또는 Google 계정                              │&#10;│   - 일반 회원 등급                                       │&#10;│        ↓                                                │&#10;│   2단계: 둘러보기                                        │&#10;│   - Books, Tips 열람                                    │&#10;│   - SAL Grid 예시 확인                                  │&#10;│   - Order Sheet 템플릿 확인                             │&#10;│        ↓                                                │&#10;│   3단계: 빌더 계정 개설 (선택)                           │&#10;│   - 개설비 300만원 납부                                  │&#10;│   - 빌더 계정 활성화                                     │&#10;│        ↓                                                │&#10;│   4단계: 프로젝트 등록 및 개발 시작                       │&#10;│   - 새 프로젝트 등록                                     │&#10;│   - SAL Grid 활용                                       │&#10;│   - Order Sheet로 작업 지시                             │&#10;│   - Claude Code와 협업 개발                             │&#10;│                                                         │&#10;└─────────────────────────────────────────────────────────┘</code></pre>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">4-2. 1단계: 회원가입 (무료)</h3>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">가입 방법</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">이메일 또는 Google 계정으로 가입할 수 있습니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">4-3. 2단계: 둘러보기</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">회원가입 후 플랫폼을 둘러봅니다. </p>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">추천 탐색 순서</h4>
<ol style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li value="1"><strong>Books 1권</strong>: Claude/Claude Code 이해</li></ol>
<ol style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li value="2"><strong>Books 3권</strong>: SAL Grid 이해</li></ol>
<ol style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li value="3"><strong>Tips</strong>: 실전 노하우 확인</li></ol>
<ol style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li value="4"><strong>SAL Grid 예시</strong>: 실제 프로젝트 구조 확인</li></ol>
<ol style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li value="5"><strong>Order Sheet</strong>: 작업 지시 방법 확인</li></ol>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">4-4. 3단계: 빌더 계정 개설</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">유용하겠다고 판단되면 빌더 계정을 개설합니다. </p>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">개설 절차</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">"빌더 계정 개설" 버튼을 클릭하고 개설비 300만원을 결제하면 즉시 빌더 계정이 활성화되어 모든 기능을 이용할 수 있습니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">4-5. 4단계: 프로젝트 등록 및 개발 시작</h3>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">개발 프로세스</h4>
<pre style="background: #f8f9fa; color: #1f2937; padding: 16px 20px; border-radius: 8px; margin: 16px 0; font-family: 'Consolas', 'Monaco', monospace; font-size: 13px; overflow-x: auto; white-space: pre; line-height: 1.6; border: 1px solid #e5e7eb;"><code>┌─────────────────────────────────────────────────────────┐&#10;│                    개발 프로세스                         │&#10;├─────────────────────────────────────────────────────────┤&#10;│                                                         │&#10;│   1. Dev Package 다운로드                               │&#10;│        ↓                                                │&#10;│   2. 프로젝트 폴더 설정                                  │&#10;│        ↓                                                │&#10;│   3. Claude Code 실행                                   │&#10;│        ↓                                                │&#10;│   4. Briefing 확인 (현재 단계)                          │&#10;│        ↓                                                │&#10;│   5. Order Sheet 작성                                   │&#10;│        ↓                                                │&#10;│   6. Claude Code에 전달                                 │&#10;│        ↓                                                │&#10;│   7. 작업 결과 확인                                      │&#10;│        ↓                                                │&#10;│   8. SAL Grid 업데이트                                  │&#10;│        ↓                                                │&#10;│   9. 다음 Task로 이동                                   │&#10;│        ↓                                                │&#10;│   (반복)                                                │&#10;│        ↓                                                │&#10;│   10. Stage Gate 검증                                   │&#10;│        ↓                                                │&#10;│   11. 다음 Stage로 이동                                 │&#10;│                                                         │&#10;└─────────────────────────────────────────────────────────┘</code></pre>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">

                </section>

                <!-- Section 5: 일반 회원에게 제공되는 기능 -->
                <section id="section5" style="margin-bottom: 48px;">
                    <h2 style="font-size: 20px; font-weight: 800; color: #1F3563; margin-bottom: 18px; padding-bottom: 10px; border-bottom: 3px solid #F59E0B;">5. 일반 회원에게 제공되는 기능</h2>
                    <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">5-1. 콘텐츠 열람 (무제한)</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">일반 회원(무료 가입)도 다음 콘텐츠를 무제한으로 열람할 수 있습니다. </p>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Books 80편</strong>: 1권 Claude/Claude Code 사용법 (34편), 2권 풀스택 웹사이트 개발 (34편), 3권 프로젝트 관리 방법 (12편)</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Tips 65개</strong>: 18개 카테고리별 실무 팁</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>외부 연동 가이드 5가지</strong>: Supabase, Google OAuth, Resend, Vercel, TossPayments</li></ul>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">5-2. 주요 기능</h3>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>공지사항</strong>: 플랫폼 공지사항 열람</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>My Page</strong>: 프로필, 계정 정보 관리</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>인앱 알림</strong>: 시스템 알림 수신</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>SAL Grid 예시 열람</strong>: SSAL Works 예시 프로젝트의 SAL Grid 구조 열람 (웹에서)</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Stage별 안내문 열람</strong>: 각 Stage의 안내문 확인</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Order Sheet 템플릿 보기</strong>: Order Sheet 양식 열람</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>매뉴얼 보기</strong>: 플랫폼 사용 매뉴얼 웹에서 열람</li></ul>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">

                </section>

                <!-- Section 6: 빌더 계정 개설자 전용 기능 -->
                <section id="section6" style="margin-bottom: 48px;">
                    <h2 style="font-size: 20px; font-weight: 800; color: #1F3563; margin-bottom: 18px; padding-bottom: 10px; border-bottom: 3px solid #F59E0B;">6. 빌더 계정 개설자 전용 기능</h2>
                    <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">6-1. 기능 요약</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>일반 회원과 빌더 계정 비교:</strong></p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>일반 회원 ✅ / 빌더 계정 ✅:</strong></p>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>콘텐츠 열람 (Books, Tips)</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>SAL Grid 예시 열람 (웹)</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>Order Sheet 템플릿 보기</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>Briefing 열람</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>매뉴얼 보기 (웹)</li></ul>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>일반 회원 ❌ / 빌더 계정 ✅:</strong></p>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>프로젝트 관리</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>Order Sheet 전달하기</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>Reports 불러오기</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>예시 프로젝트 소스코드</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>매뉴얼 다운로드</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>Sunny에게 질문하기</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>1:1 코칭</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>Dev Package 다운로드</li></ul>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">6-2. 대시보드 레이아웃</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">빌더 계정 개설자가 사용하는 대시보드의 UI 배치입니다. </p>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>프로젝트 실행 및 관리</strong>: 좌측 사이드바</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Order Sheet 발행</strong>: 중앙 상단 (Control Space)</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>PROJECT SAL GRID</strong>: 중앙 하단</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>학습용 Books</strong>: 우측 사이드바 (3권 80편)</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>외부 연동 가이드</strong>: 우측 사이드바 (5가지)</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Tips</strong>: 우측 사이드바 (18개 카테고리 65개)</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>다른 AI에게 묻기</strong>: 우측 사이드바 (3개 AI)</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Sunny에게 묻기</strong>: 우측 사이드바</li></ul>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">6-3. 프로젝트 관리</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">빌더 계정 개설자만 이용 가능한 프로젝트 관리 기능입니다. </p>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>새로운 프로젝트 등록</strong>: 본인의 웹사이트 프로젝트 생성. 프로젝트명, 설명, 기술스택 입력 시 SAL Grid 자동 생성</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>진행 프로세스 관리</strong>: P0~S5 단계별 진행 상황 추적. 현재 단계, 진행률, 완료 Task 수 표시</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>프로젝트 목록 관리</strong>: 등록한 프로젝트 현황 확인. 진행 중/완료/보관 분류</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Project SAL Grid 생성</strong>: 본인 프로젝트용 SAL Grid 생성 및 관리. 2D Card View / 3D Block View 선택 가능</li></ul>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">SAL Grid 22개 속성 관리</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">모든 Task는 22개 속성으로 관리됩니다: </p>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>기본 정보 (task_id, task_name, stage, area, level)</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>작업 정보 (status, progress, dependencies, instruction, agent)</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>결과 정보 (generated_files, duration, build_result)</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li>검증 정보 (verification_*, test_result, blockers)</li></ul>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">6-4. 개발 도구</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">빌더 계정 개설자만 이용 가능한 개발 도구입니다. </p>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Order Sheet 전달하기</strong>: 32개 표준 템플릿 제공. Part B 편집 후 클립보드 복사하여 Claude Code에 전달</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Reports 불러오기</strong>: Claude Code 작업 결과 리포트를 JSON 형식으로 열람. 작업 결과, 생성 파일, 에러 포함</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Dev Package 다운로드</strong>: SSAL Works Dev Package 전체를 ZIP 파일로 다운로드. 새 프로젝트 시작 시 사용</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>매뉴얼 다운로드</strong>: PDF 또는 MD(Markdown) 형식으로 플랫폼 사용 가이드 전체 다운로드. 오프라인 활용</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>예시 프로젝트 소스코드</strong>: SSAL Works 전체 소스코드 Google Drive 열람 및 ZIP 다운로드</li></ul>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">Order Sheet 활용 흐름</h4>
<pre style="background: #f8f9fa; color: #1f2937; padding: 16px 20px; border-radius: 8px; margin: 16px 0; font-family: 'Consolas', 'Monaco', monospace; font-size: 13px; overflow-x: auto; white-space: pre; line-height: 1.6; border: 1px solid #e5e7eb;"><code>템플릿 선택 → Part B 작성 → 복사 → Claude Code에 붙여넣기 → 작업 수행</code></pre>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">6-5. AI Q&A 서비스</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">빌더 계정 개설자만 이용 가능한 AI Q&A 서비스입니다. 크레딧 차감 방식으로 이용합니다. </p>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>ChatGPT</strong>: 코드 작성, 문서 생성, 일반 개발 질문</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Gemini</strong>: 코드 리뷰, 설계 관련 질문</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Perplexity</strong>: 검색 기반 정보, 최신 기술 동향</li></ul>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">6-6. 코칭 서비스</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">빌더 계정 개설자만 이용 가능한 코칭 서비스입니다. </p>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Sunny에게 질문하기</strong>: 개발/코칭/자문에 대해 실시간 1:1 질의응답. 텍스트와 파일 첨부로 질문하면 Sunny가 직접 답변</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>3개월 1:1 맞춤형 코칭</strong>: 빌더 계정 개설 후 3개월간 Sunny가 직접 코칭 (개발 + 창업 + 경영 자문)</li></ul>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">

                </section>

                <!-- Section 7: 가격 정책 상세 -->
                <section id="section7" style="margin-bottom: 48px;">
                    <h2 style="font-size: 20px; font-weight: 800; color: #1F3563; margin-bottom: 18px; padding-bottom: 10px; border-bottom: 3px solid #F59E0B;">7. 가격 정책 상세</h2>
                    <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">7-1. 빌더 계정 개설비</h3>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">현재 가격</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>300만원 (얼리버드, 부가세 포함)</strong>, 최초 1회 납부입니다. </p>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">포함 내역</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">플랫폼 모든 기능 이용권, AI 크레딧 5만원, Sunny 1:1 코칭 3개월, Books/Tips/가이드 전체 접근, Dev Package 다운로드 권한, 예시 프로젝트 소스코드 접근 권한이 포함됩니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">50% 환불 인센티브</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">3개월 내에 다음 조건을 모두 달성하면 150만원을 환불합니다: 풀스택 웹사이트 완성 + 실제 서비스 런칭 + 고객 30명 이상 확보(증빙 제출). </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">가치 상승 예고</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">빌더 계정의 가치는 지속적으로 상승할 예정입니다. 현재 얼리버드 300만원에서 단계적으로 인상될 예정입니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>왜 가치가 상승하는가?</strong></p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">예시 프로젝트 100개가 제공되면, 1주일 안에 풀스택 웹사이트를 만들 수 있게 됩니다. </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>외주 개발 vs SSAL Works 비교:</strong></p>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>비용</strong>: 외주 개발 수천만원~수억원 / SSAL Works 300만원 (현재)</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>기간</strong>: 외주 개발 수개월~1년 / SSAL Works 1주일</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>결과</strong>: 외주 개발은 의도와 다를 수 있음 / SSAL Works는 직접 통제 가능</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>수정</strong>: 외주 개발은 추가 비용 / SSAL Works는 직접 수정 가능</li></ul>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">그때 빌더 계정의 가치는 지금과 비교할 수 없을 것입니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">빌더 계정 양도</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">빌더 계정을 타인에게 시가로 양도하는 것을 공식 인정합니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">7-2. 월 이용료</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">월 5만원 (부가세 포함)이며, 처음 3개월은 무료입니다. 4개월차부터 과금이 시작됩니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">7-3. AI 크레딧</h3>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">기본 제공</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">빌더 계정 개설 시 5만원이 초기 제공됩니다. </p>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">추가 충전</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">1만원, 2만원, 3만원, 5만원 단위로 충전 가능합니다. </p>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">가격 책정</h4>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">API 원가를 기반으로 가격을 책정하며, 마진을 최소화하여 합리적 가격을 제공합니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">7-4. 수익 활용</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">빌더 계정 개설비 수입의 50%는 창업자들에게 투자하는 재원으로 사용되고, 50%는 운영비로 사용됩니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">

                </section>

                <!-- Section 8: 문의 및 지원 -->
                <section id="section8" style="margin-bottom: 48px;">
                    <h2 style="font-size: 20px; font-weight: 800; color: #1F3563; margin-bottom: 18px; padding-bottom: 10px; border-bottom: 3px solid #F59E0B;">8. 문의 및 지원</h2>
                    <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">8-1. 문의 채널</h3>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">고객센터 문의하기</h4>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>대상</strong>: 모든 회원</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>용도</strong>: 일반 문의, 기술 지원, 불편 사항</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>응답 시간</strong>: 24시간 내</li></ul>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">Sunny에게 질문하기</h4>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>대상</strong>: 빌더 계정 개설자</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>용도</strong>: 개발 코칭, 창업 멘토링, 경영 자문</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>특징</strong>: Sunny가 직접 답변</li></ul>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">8-2. 24시간 문의 가능</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">평일, 주말, 공휴일 관계없이 24시간 언제든지 문의하실 수 있습니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">

                </section>

                <!-- Section 9: 향후 계획 -->
                <section id="section9" style="margin-bottom: 48px;">
                    <h2 style="font-size: 20px; font-weight: 800; color: #1F3563; margin-bottom: 18px; padding-bottom: 10px; border-bottom: 3px solid #F59E0B;">9. 향후 계획</h2>
                    <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">9-1. 예시 프로젝트 확대</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">현재 1개(SSAL Works)에서 시작하여 조만간 3개, 내년 50개, 장기적으로 100개까지 확대할 계획입니다. </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">9-2. 기능 추가</h3>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">지속적인 기능 추가 예정입니다. </p>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>더 많은 Order Sheet</strong>: 다양한 상황별 템플릿</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>더 많은 Tips</strong>: 실전 노하우 추가</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>기능 개선</strong>: 사용성 향상</li></ul>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">

                </section>

                <!-- Section 10: 용어 정리 -->
                <section id="section10" style="margin-bottom: 48px;">
                    <h2 style="font-size: 20px; font-weight: 800; color: #1F3563; margin-bottom: 18px; padding-bottom: 10px; border-bottom: 3px solid #F59E0B;">10. 용어 정리</h2>
                    <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">10-1. 주요 용어</h3>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>SSAL Works</strong>: Claude Code 활용 3차원 SAL Grid 기반 풀스택 웹사이트 개발 플랫폼</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>SAL Grid</strong>: Stage, Area, Level 3차원 좌표계 프로젝트 관리 방법론</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>회원</strong>: SSAL Works에 무료 가입한 사용자</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>빌더 계정 개설자</strong>: 개설비를 납부하고 빌더 계정을 활성화한 사용자</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>PO (Project Owner)</strong>: 빌더 계정을 개설하여 프로젝트를 진행하는 사람. 빌더 계정 개설자와 동일</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>프로젝트</strong>: 빌더가 등록한 웹사이트 개발 프로젝트</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>개발</strong>: AI와 협업하여 웹사이트를 만드는 과정</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Task</strong>: SAL Grid의 개별 작업 단위</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Order Sheet</strong>: AI에게 작업을 지시하는 표준화된 양식</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Briefing</strong>: 각 단계별 안내문</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Dev Package</strong>: AI 협업 웹 개발 올인원 패키지</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Stage Gate</strong>: 각 Stage 완료 시 수행하는 품질 검증 시스템</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Sunny</strong>: SSAL Works 개발자 겸 창업자</li></ul>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">10-2. Stage 용어</h3>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>S1 (Development Setup)</strong>: 개발 준비</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>S2 (Auth & Registration)</strong>: 개발 1차</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>S3 (AI Integration)</strong>: 개발 2차</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>S4 (Payment & Admin)</strong>: 개발 3차</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>S5 (Development Stabilization)</strong>: 개발 마무리</li></ul>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">10-3. Area 용어</h3>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>M (Documentation)</strong>: 문서화</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>U (Design)</strong>: UI/UX 디자인</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>F (Frontend)</strong>: 프론트엔드</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>BI (Backend Infrastructure)</strong>: 백엔드 기반</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>BA (Backend APIs)</strong>: 백엔드 API</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>D (Database)</strong>: 데이터베이스</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>S (Security)</strong>: 보안/인증</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>T (Testing)</strong>: 테스트</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>O (DevOps)</strong>: 운영/배포</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>E (External)</strong>: 외부 연동</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>C (Content System)</strong>: 콘텐츠 시스템</li></ul>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<h3 style="font-size: 16px; font-weight: 700; color: #1F3563; margin: 20px 0 10px 0;">10-4. 상태 용어</h3>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">Task 상태</h4>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Pending</strong>: 대기 중</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>In Progress</strong>: 진행 중</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Executed</strong>: 작업 완료, 검증 전</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Completed</strong>: 검증까지 완료</li></ul>
<h4 style="font-size: 14px; font-weight: 600; color: #1F3563; margin: 16px 0 8px 0;">검증 상태</h4>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Not Verified</strong>: 검증 전</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>In Review</strong>: 검증 중</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Verified</strong>: 검증 통과</li></ul>
<ul style="font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;"><li><strong>Needs Fix</strong>: 수정 필요</li></ul>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"># 🚀 지금 시작하세요 </p>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;">여기까지 읽으셨다면, SSAL Works에 관심이 있으신 겁니다. </p>
<pre style="background: #f8f9fa; color: #1f2937; padding: 16px 20px; border-radius: 8px; margin: 16px 0; font-family: 'Consolas', 'Monaco', monospace; font-size: 13px; overflow-x: auto; white-space: pre; line-height: 1.6; border: 1px solid #e5e7eb;"><code>┌─────────────────────────────────────────────────────────────┐&#10;│                                                             │&#10;│   현재 가격: 300만원 (얼리버드)                              │&#10;│                                                             │&#10;│   ⚠️ 이후 단계적으로 인상됩니다                              │&#10;│                                                             │&#10;│   ✅ 지금이 가장 저렴한 가격입니다                           │&#10;│                                                             │&#10;│   → 회원가입 후 빌더 계정을 신청하세요                       │&#10;│                                                             │&#10;└─────────────────────────────────────────────────────────────┘</code></pre>
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><strong>문의:</strong> 고객센터 또는 Sunny에게 질문하기 (24시간) </p>
<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 16px 0;">
<p style="font-size: 14px; margin-bottom: 14px; line-height: 1.8;"><em>버전: v4.5</em> <br><em>작성일: 2025-12-27</em> </p>
                </section>

                <!-- Footer -->
                <div style="text-align: center; padding-top: 28px; border-top: 2px solid #e9ecef;">
                    <div style="display: flex; align-items: center; justify-content: center; gap: 8px; margin-bottom: 10px;">
                        <div style="display: flex; gap: 3px;">
                            <span style="width: 7px; height: 12px; background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%); border-radius: 40%; transform: rotate(-10deg);"></span>
                            <span style="width: 7px; height: 12px; background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%); border-radius: 40%;"></span>
                            <span style="width: 7px; height: 12px; background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%); border-radius: 40%; transform: rotate(10deg);"></span>
                        </div>
                        <span style="font-size: 18px; font-weight: 800; color: #1F3563;">SSAL Works</span>
                    </div>
                    <p style="font-size: 12px; color: #6c757d; margin: 0;">AI와 함께 풀스택 웹사이트를 만드는 곳</p>
                </div>

            </div>
        </div>
    </div>

    <!-- 안내문 드래그 가능 팝업 -->
    <div id="guidePopup" style="display: none; position: fixed; top: 80px; right: 50px; width: 748px; max-height: calc(100vh - 150px); background: white; border-radius: 12px; box-shadow: var(--shadow-lg); z-index: 1000; overflow: hidden; font-family: 'Malgun Gothic', '맑은 고딕', 'Apple SD Gothic Neo', 'Noto Sans KR', sans-serif;">
        <div id="guidePopupHeader" style="background: linear-gradient(135deg, var(--tertiary) 0%, var(--tertiary-dark) 100%); color: white; padding: 12px 16px; cursor: move; display: flex; justify-content: space-between; align-items: center; user-select: none;">
            <span id="guidePopupTitle" style="font-weight: 700; font-size: 14px;">📖 안내문</span>
            <button onclick="closeGuidePopup()" style="padding: 6px 14px; border-radius: 4px; border: 1px solid rgba(255,255,255,0.5); background: rgba(255,255,255,0.15); color: white; cursor: pointer; font-size: 12px; font-weight: 500; display: flex; align-items: center; gap: 4px; transition: all 0.2s;" onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.15)'">✕ 닫기</button>
        </div>
        <div id="guidePopupContent" style="padding: 20px; max-height: calc(100vh - 210px); overflow-y: auto; font-size: 11px; font-weight: 400; line-height: 1.6; color: #212529;">
            <!-- 안내문 내용이 여기에 로드됩니다 -->
        </div>
    </div>


    <!-- 서약서 모달 -->
    <div id="agreementModal" class="popup-modal-overlay" onclick="if(event.target===this)closeAgreementModal()">
        <div class="popup-modal-box" style="max-width: 600px;">
            <div class="popup-modal-header" style="background: linear-gradient(135deg, #10B981 0%, #059669 100%);">
                <h3 style="color: white;">📋 예시 프로젝트 관련 서약서</h3>
                <button class="popup-modal-close" onclick="closeAgreementModal()" style="color: white;">&times;</button>
            </div>
            <div class="popup-modal-body" style="padding: 24px; font-size: 14px; line-height: 1.8;">
                <div style="background: #d1fae5; border: 1px solid #10B981; border-radius: 8px; padding: 14px; margin-bottom: 20px;">
                    <p style="margin: 0; color: #065f46; font-weight: 500;">
                        💡 SSAL Works 예시 프로젝트의 소스 코드 및 문서를 열람하고 복사하시려면 아래 서약서에 동의해주세요.
                    </p>
                </div>

                <p style="margin-bottom: 20px; color: #333;">
                    본인은 SSAL Works 예시 프로젝트의 문서 및 소스 코드 파일을 제공받음에 있어서 아래의 사항을 준수하기로 서약합니다.
                </p>

                <div style="background: #f8f9fa; border-radius: 8px; padding: 16px; margin-bottom: 20px;">
                    <p style="margin-bottom: 12px;"><strong>1.</strong> 제공받은 파일은 본인의 프로젝트 개발을 위한 참고자료로만 활용할 것이며, 타인(배우자 및 직계존비속 포함)에게는 제공하지 않을 것입니다. 다만 부득이하게 타인에게 제공을 해야 하는 사유가 발생할 경우에는 사전에 SSAL Works 관리자의 승인을 받을 것입니다.</p>

                    <p style="margin-bottom: 12px;"><strong>2.</strong> 제공받은 파일은 SSAL Works 프로젝트와 유사한 프로젝트를 개발하는데 사용하지 않을 것이며, 부득이하게 그렇게 해야 하는 사유가 발생하는 경우에는 SSAL Works 관리자와 사전 협의를 하여 진행할 것입니다.</p>

                    <p style="margin-bottom: 0;"><strong>3.</strong> 제공받은 파일은 Sunny가 500시간 이상의 시간을 투입하여 만든 것으로서, 이것을 활용하여 세상에 도움이 되는 서비스를 효율적으로 신속하게 만들어서 사업화 할 것입니다.</p>
                </div>

                <div style="border-top: 2px solid #10B981; padding-top: 16px; margin-top: 20px;">
                    <p style="margin-bottom: 8px;"><strong>일자:</strong> <span id="agreementDate"></span></p>
                    <p style="margin-bottom: 8px;"><strong>서약자:</strong> <span id="agreementUserName"></span></p>
                    <p style="margin-bottom: 8px;"><strong>빌더 계정 ID:</strong> <span id="agreementBuilderId"></span></p>
                    <p style="margin-bottom: 0;"><strong>이메일:</strong> <span id="agreementUserEmail"></span></p>
                </div>

                <div style="display: flex; gap: 12px; margin-top: 24px;">
                    <button onclick="submitAgreement()" style="flex: 1; padding: 14px 20px; background: #10B981; color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 14px;">위와 같이 서약합니다</button>
                    <button onclick="closeAgreementModal()" style="flex: 1; padding: 14px 20px; background: #6c757d; color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 14px;">다음에 하기</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 서약 완료 안내 모달 -->
    <div id="agreementSuccessModal" class="popup-modal-overlay" onclick="if(event.target===this)closeAgreementSuccessModal()">
        <div class="popup-modal-box" style="max-width: 450px;">
            <div class="popup-modal-header" style="background: linear-gradient(135deg, #10B981 0%, #059669 100%);">
                <h3 style="color: white;">✅ 서약 완료</h3>
                <button class="popup-modal-close" onclick="closeAgreementSuccessModal()" style="color: white;">&times;</button>
            </div>
            <div class="popup-modal-body" style="padding: 24px; text-align: center;">
                <div style="text-align: left; margin-bottom: 20px;">
                    <p style="font-size: 15px; margin-bottom: 12px;" id="agreementSuccessMessage">① 동의하신 서약서가 이메일로 발송되었습니다.</p>
                    <p style="font-size: 15px; color: #333;">② 지정된 Google Drive가 연결되었으니, 연결된 Google Drive 내의 파일을 복사하여 본인 드라이브에 저장하세요.</p>
                </div>
                <div style="display: flex; gap: 12px; justify-content: center;">
                    <button onclick="window.open('https://drive.google.com/drive/folders/1PoMIExSALUcCHTwkNZDC8sPTW9ZsWVQf?usp=sharing', '_blank')" style="padding: 12px 24px; background: #10B981; color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 14px;">📁 Google Drive 열기</button>
                    <button onclick="closeAgreementSuccessModal()" style="padding: 12px 24px; background: #6c757d; color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 14px;">닫기</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 이미 연결됨 안내 모달 -->
    <div id="alreadyConnectedModal" class="popup-modal-overlay" onclick="if(event.target===this)closeAlreadyConnectedModal()">
        <div class="popup-modal-box" style="max-width: 400px;">
            <div class="popup-modal-header" style="background: linear-gradient(135deg, #10B981 0%, #059669 100%);">
                <h3 style="color: white;">ℹ️ 알림</h3>
                <button class="popup-modal-close" onclick="closeAlreadyConnectedModal()" style="color: white;">&times;</button>
            </div>
            <div class="popup-modal-body" style="padding: 24px; text-align: center;">
                <p style="font-size: 15px; margin-bottom: 12px;">이미 연결하셨습니다.</p>
                <p style="font-size: 14px; color: #555; margin-bottom: 20px;">연결 기회는 1회만 제공됩니다.</p>
                <button onclick="closeAlreadyConnectedModal()" style="padding: 12px 32px; background: #10B981; color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 14px;">확인</button>
            </div>
        </div>
    </div>

    <!-- 로그인 필요 안내 모달 -->
    <div id="loginRequiredModal" class="popup-modal-overlay" onclick="if(event.target===this)closeLoginRequiredModal()">
        <div class="popup-modal-box" style="max-width: 400px;">
            <div class="popup-modal-header" style="background: linear-gradient(135deg, #10B981 0%, #059669 100%);">
                <h3 style="color: white;">🔐 로그인 필요</h3>
                <button class="popup-modal-close" onclick="closeLoginRequiredModal()" style="color: white;">&times;</button>
            </div>
            <div class="popup-modal-body" style="padding: 24px; text-align: center;">
                <p style="font-size: 15px; margin-bottom: 20px;">SSAL Works 예시 프로젝트를 열람하려면 로그인이 필요합니다.</p>
                <div style="display: flex; gap: 12px; justify-content: center;">
                    <button onclick="closeLoginRequiredModal(); window.location.href='/pages/auth/login.html';" style="padding: 12px 24px; background: #10B981; color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 14px;">로그인하기</button>
                    <button onclick="closeLoginRequiredModal()" style="padding: 12px 24px; background: #e5e7eb; color: #374151; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 14px;">닫기</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 빌더 계정 필요 모달 -->
    <div id="builderRequiredModal" class="popup-modal-overlay" onclick="if(event.target===this)closeBuilderRequiredModal()">
        <div class="popup-modal-box" style="max-width: 420px;">
            <div class="popup-modal-header" style="background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);">
                <h3 style="color: white;">🏠 빌더 계정 필요</h3>
                <button class="popup-modal-close" onclick="closeBuilderRequiredModal()" style="color: white;">&times;</button>
            </div>
            <div class="popup-modal-body" style="padding: 24px; text-align: center;">
                <p style="font-size: 15px; margin-bottom: 12px; color: #333;">빌더 계정이 확인되지 않습니다.</p>
                <p style="font-size: 14px; margin-bottom: 20px; color: #666;">SSAL Works 예시 프로젝트를 열람하고 복사하시려면<br><strong>빌더 계정 개설</strong>을 먼저 진행해주세요.</p>
                <div style="display: flex; gap: 12px; justify-content: center;">
                    <button onclick="closeBuilderRequiredModal(); window.location.href='/pages/mypage/subscription.html';" style="padding: 12px 24px; background: #F59E0B; color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 14px;">빌더 계정 개설하기</button>
                    <button onclick="closeBuilderRequiredModal()" style="padding: 12px 24px; background: #e5e7eb; color: #374151; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 14px;">닫기</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add New Project Modal (Popup) -->
    <div id="addProjectModal" class="popup-modal-overlay" onclick="if(event.target===this)closeAddProjectModal()">
        <div class="popup-modal-box">
            <div class="popup-modal-header">
                <h3>➕ 새로운 Project 등록</h3>
                <button class="popup-modal-close" onclick="closeAddProjectModal()">&times;</button>
            </div>
            <div class="popup-modal-body">
                <form id="newProjectForm" style="display: flex; flex-direction: column; gap: 20px;">
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #333; font-size: 14px;">프로젝트명 <span style="color: #EF4444;">*</span></label>
                        <input type="text" id="projectName" placeholder="예: My Awesome Project" required
                            style="width: 100%; padding: 14px 16px; border: 2px solid #dee2e6; border-radius: 8px; font-size: 15px; box-sizing: border-box; transition: border-color 0.2s;"
                            onfocus="this.style.borderColor='#10B981'" onblur="this.style.borderColor='#dee2e6'">
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #333; font-size: 14px;">설명 <span style="color: #6c757d; font-weight: 400;">(선택)</span></label>
                        <textarea id="projectDescription" placeholder="프로젝트에 대한 간단한 설명을 입력하세요..."
                            style="width: 100%; padding: 14px 16px; border: 2px solid #dee2e6; border-radius: 8px; font-size: 15px; min-height: 120px; font-family: inherit; box-sizing: border-box; resize: vertical; transition: border-color 0.2s;"
                            onfocus="this.style.borderColor='#10B981'" onblur="this.style.borderColor='#dee2e6'"></textarea>
                    </div>
                    <div style="display: flex; gap: 12px; justify-content: flex-end; margin-top: 8px; padding-top: 16px; border-top: 1px solid #dee2e6;">
                        <button type="button" onclick="closeAddProjectModal()"
                            style="padding: 12px 24px; background: #6c757d; border: none; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600; color: white;">취소</button>
                        <button type="submit"
                            style="padding: 12px 24px; background: #10B981; border: none; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600; color: white;">등록하기</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- My Inquiries Modal (내 문의 내역) -->
    <div id="myInquiriesModal" class="popup-modal-overlay" onclick="if(event.target===this)closeMyInquiriesModal()">
        <div class="popup-modal-box" style="width: 700px; max-width: 95vw;">
            <div class="popup-modal-header" style="background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);">
                <h3>내 문의 내역</h3>
                <button class="popup-modal-close" onclick="closeMyInquiriesModal()">&times;</button>
            </div>
            <div class="popup-modal-body" style="padding: 0;">
                <!-- 탭 버튼 -->
                <div style="display: flex; border-bottom: 2px solid var(--border-color);">
                    <button id="tabCustomerInquiry" onclick="switchInquiryTab('customer')" style="flex: 1; padding: 14px; background: var(--primary); color: white; border: none; font-weight: 600; font-size: 14px; cursor: pointer; transition: all 0.2s;">
                        💬 고객센터 문의
                    </button>
                    <button id="tabSunnyInquiry" onclick="switchInquiryTab('sunny')" style="flex: 1; padding: 14px; background: var(--bg-light); color: var(--neutral); border: none; font-weight: 600; font-size: 14px; cursor: pointer; transition: all 0.2s;">
                        ☀️ 써니에게 질문하기
                    </button>
                </div>

                <!-- 고객센터 문의 탭 -->
                <div id="customerInquiryTab" style="padding: 20px; max-height: 400px; overflow-y: auto;">
                    <div id="customerInquiryList" style="display: flex; flex-direction: column; gap: 12px;">
                        <div style="text-align: center; color: #9ca3af; padding: 40px;">
                            로딩 중...
                        </div>
                    </div>
                </div>

                <!-- 써니에게 묻기 탭 -->
                <div id="sunnyInquiryTab" style="padding: 20px; max-height: 400px; overflow-y: auto; display: none;">
                    <div id="sunnyInquiryList" style="display: flex; flex-direction: column; gap: 12px;">
                        <div style="text-align: center; color: #9ca3af; padding: 40px;">
                            로딩 중...
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Outbox Files Modal -->
    <div id="outboxFilesModal" class="grid-fullscreen-modal">
        <div class="grid-fullscreen-header">
            <div class="grid-fullscreen-title">📤 Outbox - 파일 선택</div>
            <button class="grid-fullscreen-close" onclick="closeOutboxModal()">✕ 닫기</button>
        </div>
        <div class="grid-fullscreen-content" style="padding: 40px;">
            <div id="outboxFilesList" style="display: grid; gap: 12px;"></div>
        </div>
    </div>

    <!-- Question History Modal -->
    <div id="questionHistoryModal" class="grid-fullscreen-modal">
        <div class="grid-fullscreen-header">
            <div class="grid-fullscreen-title">📋 질문 / 답변 이력</div>
            <button class="grid-fullscreen-close" onclick="closeQuestionHistoryModal()">✕ 닫기</button>
        </div>
        <div class="grid-fullscreen-content" style="padding: 40px;">
            <div id="questionHistoryModalList" style="display: grid; gap: 12px;"></div>
        </div>
    </div>

    <style>
        .outbox-file-item {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .outbox-file-item:hover {
            border-color: var(--primary);
            background: #f8f9ff;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(107, 92, 204, 0.15);
        }

        .outbox-file-icon {
            font-size: 40px;
            flex-shrink: 0;
        }

        .outbox-file-info {
            flex: 1;
        }

        .outbox-file-name {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 4px;
        }

        .outbox-file-meta {
            font-size: 13px;
            color: #666;
        }

        .outbox-file-badge {
            background: var(--primary);
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }

        .outbox-file-badge.html {
            background: #3B82F6;
        }

        .outbox-file-badge.json {
            background: #F59E0B;
        }

        .outbox-file-badge.markdown {
            background: #10B981;
        }
    </style>


    <!-- Custom Confirm Dialog -->
    <div id="customConfirmDialog" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 9999; align-items: center; justify-content: center;">
        <div style="background: white; border-radius: 12px; padding: 32px; max-width: 400px; box-shadow: var(--shadow-lg);">
            <h3 id="confirmDialogTitle" style="margin: 0 0 16px 0; font-size: 18px; font-weight: 600; color: #212529;">확인</h3>
            <p id="confirmDialogMessage" style="margin: 0 0 24px 0; font-size: 14px; color: #495057; line-height: 1.6;"></p>
            <div style="display: flex; gap: 12px; justify-content: flex-end;">
                <button id="confirmDialogCancel" 
                    style="padding: 12px 24px; background: #6c757d; border: none; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600; color: white; transition: background 0.2s;"
                    onmouseover="this.style.background='#5a6268'" 
                    onmouseout="this.style.background='#6c757d'">취소</button>
                <button id="confirmDialogConfirm" 
                    style="padding: 12px 24px; background: var(--tertiary); border: none; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600; color: white; transition: background 0.2s;"
                    onmouseover="this.style.background='var(--tertiary-dark)'" 
                    onmouseout="this.style.background='var(--tertiary)'">확인</button>
            </div>
        </div>
    </div>

    <script>
        // Custom confirm dialog function
        function customConfirm(message, title = '확인') {
            return new Promise((resolve) => {
                const dialog = document.getElementById('customConfirmDialog');
                const titleEl = document.getElementById('confirmDialogTitle');
                const messageEl = document.getElementById('confirmDialogMessage');
                const confirmBtn = document.getElementById('confirmDialogConfirm');
                const cancelBtn = document.getElementById('confirmDialogCancel');

                titleEl.textContent = title;
                messageEl.textContent = message;
                dialog.style.display = 'flex';

                const handleConfirm = () => {
                    dialog.style.display = 'none';
                    cleanup();
                    resolve(true);
                };

                const handleCancel = () => {
                    dialog.style.display = 'none';
                    cleanup();
                    resolve(false);
                };

                const cleanup = () => {
                    confirmBtn.removeEventListener('click', handleConfirm);
                    cancelBtn.removeEventListener('click', handleCancel);
                };

                confirmBtn.addEventListener('click', handleConfirm);
                cancelBtn.addEventListener('click', handleCancel);
            });
        }

        // ================================================================
        // Phase 진행률 JSON 파일에서 로드
        // P0~S5 모든 진행률을 빌드 시 생성된 JSON 파일에서 로드
        // 빌드 스크립트: node Development_Process_Monitor/build-progress.js
        // - P0~S0: 폴더/파일 존재 여부 기반
        // - S1~S5: SAL Grid CSV의 Task 완료율 기반
        // ================================================================
        async function loadPhaseProgressFromDB(projectId = null) {
            try {
                // JSON 파일에서 진행률 데이터 로드
                const response = await fetch('Development_Process_Monitor/data/phase_progress.json');
                if (!response.ok) {
                    console.warn('📊 phase_progress.json 로드 실패:', response.status);
                    resetAllProgressToZero();
                    return;
                }

                const jsonData = await response.json();

                // 프로젝트 이름 업데이트
                updateCurrentProjectName(jsonData.project_id || 'SSALWORKS');
                console.log('📊 프로젝트:', jsonData.project_id, '/ 업데이트:', jsonData.updated_at);

                // phases 객체에서 진행률 적용
                if (jsonData.phases) {
                    Object.entries(jsonData.phases).forEach(([code, phaseData]) => {
                        const progress = phaseData.progress || 0;

                        // P0, S0는 특별단계
                        if (code === 'P0' || code === 'S0') {
                            updateSpecialProgress(code, progress);
                        }
                        // P1, P2, P3는 예비단계
                        else if (code.startsWith('P')) {
                            updatePrepProgressByCode(code, progress);
                        }
                        // S1~S5는 개발단계
                        else if (code.startsWith('S')) {
                            updateStageProgress(code, progress);
                        }
                    });
                    console.log('📊 Phase 진행률 JSON 로드 완료:', Object.keys(jsonData.phases).length + '개 단계');
                } else {
                    console.log('📊 Phase 진행률 데이터 없음');
                    resetAllProgressToZero();
                }
            } catch (e) {
                console.warn('Phase 진행률 로드 오류:', e);
                resetAllProgressToZero();
            }
        }

        // P1, P2, P3 진행률 업데이트 (phase_code로)
        // updateStageProgress가 .process-icon 텍스트 매칭으로 P1-P3도 처리 가능
        function updatePrepProgressByCode(phaseCode, progress) {
            updateStageProgress(phaseCode, progress);
        }

        function updateSpecialProgress(stageId, progress) {
            // P0. 또는 S0. 아이콘을 가진 요소 찾기
            const iconText = stageId + '.';
            document.querySelectorAll('.process-special-major').forEach(el => {
                const iconEl = el.querySelector('.process-icon');
                if (iconEl && iconEl.textContent === iconText) {
                    el.setAttribute('data-progress', progress);
                    const fillEl = el.querySelector('.process-progress-fill');
                    if (fillEl) fillEl.style.width = `${progress}%`;
                    const percentEl = el.querySelector('.process-percent');
                    if (percentEl) percentEl.textContent = `${progress}%`;
                    if (progress === 100) {
                        el.classList.add('completed');
                    } else {
                        el.classList.remove('completed');
                    }
                }
            });
        }

        // 페이지 로드 시 진행률 자동 업데이트 (JSON 파일에서 로드)
        window.addEventListener('load', () => {
            setTimeout(() => {
                loadPhaseProgressFromDB();
            }, 500);  // JSON 파일은 빠르게 로드 가능
        });
    </script>

    <!-- Socket.io for real-time Order Sheet notifications -->
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script>
        // Socket.io 연결 (로컬 개발 환경에서만)
        let notificationSocket = null;

        if (!IS_PRODUCTION) {
            notificationSocket = io('http://localhost:3030', {
                reconnection: true,
                reconnectionDelay: 1000,
                reconnectionAttempts: 10
            });

            notificationSocket.on('connect', () => {
                console.log('✅ Notification server connected');
            });

            notificationSocket.on('disconnect', () => {
                console.log('❌ Notification server disconnected');
            });

            // 새 Order 알림 수신
            notificationSocket.on('new-order-alert', (data) => {
                console.log('📩 New order notification:', data);
                showOrderNotification(data);
            });
        } else {
            console.log('ℹ️ Production mode: Bridge server connection skipped');
        }

        // 팝업 알림 표시 (중앙 모달 스타일)
        function showOrderNotification(data) {
            // 중앙 모달 팝업 생성
            const popup = document.createElement('div');
            popup.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 420px;
                background: white;
                border-radius: 16px;
                box-shadow: var(--shadow-lg);
                z-index: 10001;
                overflow: hidden;
                font-family: 'Malgun Gothic', '맑은 고딕', 'Apple SD Gothic Neo', 'Noto Sans KR', sans-serif;
                animation: modalZoomIn 0.3s ease-out;
            `;

            popup.innerHTML = `
                <div style="padding: 32px 24px 24px 24px; text-align: center;">
                    <div style="margin-bottom: 20px; font-size: 14px; font-weight: 400; line-height: 1.7; color: #333;">
                        <strong style="display: block; margin-bottom: 10px; font-size: 15px; color: #111;">이 페이지 내용:</strong>
                        <div style="text-align: left; background: #f8f9fa; padding: 14px; border-radius: 8px; margin-bottom: 10px;">
                            Order Sheet가 Inbox에 저장되었습니다.
                        </div>
                        <div style="text-align: left; background: #fff3cd; padding: 14px; border-radius: 8px; margin-bottom: 10px; border-left: 4px solid #ffc107;">
                            <div style="margin-bottom: 8px;">원하는 Claude Code 세션에 가서</div>
                            <div style="font-weight: 600; color: #856404;">"Inbox에 저장된 Order Sheet를 확인해줘"</div>
                            <div style="margin-top: 8px;">라고 말씀해주세요.</div>
                        </div>
                        <div style="text-align: left; background: #f8f9fa; padding: 14px; border-radius: 8px;">
                            <strong>Order ID:</strong> <span style="color: #3B82F6; font-family: monospace;">${data.orderId}</span>
                        </div>
                    </div>
                    <button class="order-confirm-btn"
                        style="width: 100%; padding: 12px 24px; border: none; border-radius: 8px; background: #3B82F6; color: white; font-size: 14px; font-weight: 600; cursor: pointer; transition: background 0.2s;"
                        onmouseover="this.style.background='#0056b3';"
                        onmouseout="this.style.background='#3B82F6';">
                        확인
                    </button>
                </div>
            `;

            // 오버레이 (반투명 배경)
            const overlay = document.createElement('div');
            overlay.className = 'order-notification-overlay';
            overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.5);
                z-index: 10000;
                animation: fadeIn 0.3s ease-out;
            `;

            function closeModal() {
                overlay.style.animation = 'fadeOut 0.2s ease-in';
                popup.style.animation = 'modalZoomOut 0.2s ease-in';
                setTimeout(() => {
                    if (document.body.contains(overlay)) overlay.remove();
                    if (document.body.contains(popup)) popup.remove();
                }, 200);
            }

            overlay.onclick = (e) => {
                if (e.target === overlay) {
                    closeModal();
                }
            };

            document.body.appendChild(overlay);
            document.body.appendChild(popup);

            // 확인 버튼 클릭 시
            popup.querySelector('.order-confirm-btn').addEventListener('click', closeModal);

            // 사운드 재생
            playNotificationSound();

            // 10초 후 자동 닫기
            setTimeout(() => {
                if (document.body.contains(overlay)) {
                    closeModal();
                }
            }, 10000);
        }

        function playNotificationSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                oscillator.frequency.value = 800;
                oscillator.type = 'sine';

                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);

                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.5);
            } catch (e) {
                console.log('Sound play failed:', e);
            }
        }

        // CSS 애니메이션 추가
        const style = document.createElement('style');
        style.textContent = `
            @keyframes modalZoomIn {
                from {
                    transform: translate(-50%, -50%) scale(0.7);
                    opacity: 0;
                }
                to {
                    transform: translate(-50%, -50%) scale(1);
                    opacity: 1;
                }
            }
            @keyframes modalZoomOut {
                from {
                    transform: translate(-50%, -50%) scale(1);
                    opacity: 1;
                }
                to {
                    transform: translate(-50%, -50%) scale(0.7);
                    opacity: 0;
                }
            }
            @keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }
            @keyframes fadeOut {
                from { opacity: 1; }
                to { opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // ========================================
        // 공지사항 기능 (Supabase 연동)
        // ========================================

        // Supabase 설정
        const SUPABASE_URL = 'https://zwjmfewyshhwpgwdtrus.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp3am1mZXd5c2hod3Bnd2R0cnVzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM1NzE1NTEsImV4cCI6MjA3OTE0NzU1MX0.AJy34h5VR8QS6WFEcUcBeJJu8I3bBQ6UCk1I84Wb7y4';

        // window.supabaseClient를 window 객체에 명시적으로 선언 (크로스 스크립트 블록 접근 보장)
        window.supabaseClient = null;

        // Supabase 클라이언트 초기화
        function initSupabase() {
            if (typeof supabase !== 'undefined') {
                window.supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
                console.log('✅ Supabase 클라이언트 초기화 완료 (Frontend)');
                loadNotices();
                loadAndRenderLearningContents(); // 학습 콘텐츠도 로드
                // FAQ는 로컬 배열 사용 (Supabase 로드 제거)
                checkAuthStatus(); // 로그인 상태 확인
                loadStageGateStatus(); // Stage Gate 상태 확인 및 진행률 업데이트
                loadGridStats(); // SSAL Grid 통계 로드
                setInterval(loadGridStats, 30000); // 30초마다 자동 갱신
                loadPhaseProgressFromDB(); // P0~S5 진행률 로드
            } else {
                console.warn('⚠️ Supabase 라이브러리가 로드되지 않았습니다.');
                setTimeout(initSupabase, 1000); // 1초 후 재시도
            }
        }

        // ========================================
        // 🔔 인앱 알림 시스템
        // ========================================

        let userNotifications = [];

        // 알림 드롭다운 토글
        function toggleNotificationDropdown() {
            const dropdown = document.getElementById('notificationDropdown');
            if (dropdown.style.display === 'none' || dropdown.style.display === '') {
                dropdown.style.display = 'block';
                loadUserNotifications();
            } else {
                dropdown.style.display = 'none';
            }
        }

        // 드롭다운 외부 클릭 시 닫기
        document.addEventListener('click', function(e) {
            const wrapper = document.querySelector('.notification-wrapper');
            const dropdown = document.getElementById('notificationDropdown');
            if (wrapper && dropdown && !wrapper.contains(e.target)) {
                dropdown.style.display = 'none';
            }
        });

        // 알림 로드
        async function loadUserNotifications() {
            try {
                if (!window.supabaseClient) return;

                const { data: { session } } = await window.supabaseClient.auth.getSession();
                if (!session) return;

                const userId = session.user.id;

                // user_notifications 테이블에서 조회
                const { data, error } = await window.supabaseClient
                    .from('user_notifications')
                    .select('*')
                    .eq('user_id', userId)
                    .order('created_at', { ascending: false })
                    .limit(20);

                if (error) {
                    console.log('알림 테이블 없음 또는 오류:', error.message);
                    renderNotificationList([]);
                    return;
                }

                userNotifications = data || [];
                renderNotificationList(userNotifications);
                updateNotificationBadge();

            } catch (error) {
                console.error('알림 로드 실패:', error);
            }
        }

        // 알림 목록 렌더링
        function renderNotificationList(notifications) {
            const listEl = document.getElementById('notificationList');

            if (!notifications || notifications.length === 0) {
                listEl.innerHTML = `
                    <div style="padding: 40px; text-align: center; color: #6c757d;">
                        알림이 없습니다.
                    </div>
                `;
                return;
            }

            const icons = {
                'credit_low': '⚠️',
                'credit_charged': '💰',
                'deposit_confirmed': '✅',
                'free_period_ending': '📅',
                'system': '📢'
            };

            listEl.innerHTML = notifications.map(n => `
                <div class="notification-item" style="padding: 12px 16px; border-bottom: 1px solid #f0f0f0; cursor: pointer; background: ${n.is_read ? 'white' : '#f8f9ff'};" onclick="markNotificationRead('${n.id}')">
                    <div style="display: flex; gap: 10px; align-items: flex-start;">
                        <span style="font-size: 18px;">${icons[n.notification_type] || '🔔'}</span>
                        <div style="flex: 1;">
                            <div style="font-weight: ${n.is_read ? '400' : '600'}; color: #333; font-size: 13px; margin-bottom: 4px;">
                                ${DOMPurify.sanitize(n.title)}
                            </div>
                            <div style="color: #6c757d; font-size: 12px; margin-bottom: 4px;">
                                ${DOMPurify.sanitize(n.message)}
                            </div>
                            <div style="color: #adb5bd; font-size: 11px;">
                                ${formatTimeAgo(n.created_at)}
                            </div>
                        </div>
                        ${!n.is_read ? '<span style="width: 8px; height: 8px; background: #3B82F6; border-radius: 50%;"></span>' : ''}
                    </div>
                </div>
            `).join('');
        }

        // 시간 표시 (몇 분 전, 몇 시간 전)
        function formatTimeAgo(dateStr) {
            const date = new Date(dateStr);
            const now = new Date();
            const diffMs = now - date;
            const diffMin = Math.floor(diffMs / 60000);
            const diffHour = Math.floor(diffMs / 3600000);
            const diffDay = Math.floor(diffMs / 86400000);

            if (diffMin < 1) return '방금 전';
            if (diffMin < 60) return `${diffMin}분 전`;
            if (diffHour < 24) return `${diffHour}시간 전`;
            if (diffDay < 7) return `${diffDay}일 전`;
            return date.toLocaleDateString('ko-KR');
        }

        // 알림 배지 업데이트
        function updateNotificationBadge() {
            const badge = document.getElementById('notificationBadge');
            const unreadCount = userNotifications.filter(n => !n.is_read).length;

            if (unreadCount > 0) {
                badge.textContent = unreadCount > 9 ? '9+' : unreadCount;
                badge.style.display = 'flex';
            } else {
                badge.style.display = 'none';
            }
        }

        // 개별 알림 읽음 처리
        async function markNotificationRead(notificationId) {
            try {
                if (!window.supabaseClient) return;

                const { error } = await window.supabaseClient
                    .from('user_notifications')
                    .update({ is_read: true })
                    .eq('id', notificationId);

                if (error) console.log('읽음 처리 실패:', error.message);

                // UI 업데이트
                const notification = userNotifications.find(n => n.id === notificationId);
                if (notification) notification.is_read = true;
                renderNotificationList(userNotifications);
                updateNotificationBadge();

            } catch (error) {
                console.error('읽음 처리 오류:', error);
            }
        }

        // 모든 알림 읽음 처리
        async function markAllNotificationsRead() {
            try {
                if (!window.supabaseClient) return;

                const { data: { session } } = await window.supabaseClient.auth.getSession();
                if (!session) return;

                const { error } = await window.supabaseClient
                    .from('user_notifications')
                    .update({ is_read: true })
                    .eq('user_id', session.user.id)
                    .eq('is_read', false);

                if (error) console.log('전체 읽음 처리 실패:', error.message);

                // UI 업데이트
                userNotifications.forEach(n => n.is_read = true);
                renderNotificationList(userNotifications);
                updateNotificationBadge();

            } catch (error) {
                console.error('전체 읽음 처리 오류:', error);
            }
        }

        // Stage Gate 상태 확인 및 진행 프로세스 업데이트 (SSAL Works 관리자만)
        async function loadStageGateStatus() {
            try {
                // 1. 현재 사용자 확인
                const { data: { session } } = await window.supabaseClient.auth.getSession();
                if (!session) {
                    console.log('ℹ️ 비로그인 - Stage Gate 로드 스킵');
                    return;
                }

                // 2. 사용자 정보 확인 (installation_fee_paid 체크)
                const { data: userData } = await window.supabaseClient
                    .from('users')
                    .select('user_id, installation_fee_paid')
                    .eq('id', session.user.id)
                    .single();

                if (!userData || !userData.installation_fee_paid) {
                    console.log('ℹ️ 일반회원 - Stage Gate 로드 스킵');
                    return;
                }

                // 3. SSAL Works 프로젝트 소유자인지 확인
                const { data: projects } = await window.supabaseClient
                    .from('projects')
                    .select('project_name')
                    .eq('user_id', userData.user_id)
                    .eq('project_name', 'SSAL Works');

                if (!projects || projects.length === 0) {
                    console.log('ℹ️ SSAL Works 프로젝트 없음 - Stage Gate 로드 스킵');
                    return;
                }

                // 4. Stage Gate 상태 조회 (SSAL Works 관리자만 여기까지 옴)
                const { data, error } = await window.supabaseClient
                    .from('stage_verification')
                    .select('stage_name, stage_gate_status')
                    .eq('stage_gate_status', 'Approved');

                if (error) {
                    console.warn('Stage Gate 조회 오류:', error);
                    return;
                }

                if (data && data.length > 0) {
                    data.forEach(stage => {
                        updateProcessProgress(stage.stage_name);
                    });
                    console.log('✅ Stage Gate 상태 반영 완료:', data.map(s => s.stage_name));
                }
            } catch (e) {
                console.warn('Stage Gate 로드 실패:', e);
            }
        }

        // SSAL Grid 통계 로드 (Supabase에서 실시간 조회)
        async function loadGridStats() {
            try {
                const { data, error } = await window.supabaseClient
                    .from('project_ssal_grid_tasks')
                    .select('task_status, verification_status');

                if (error) {
                    console.warn('Grid 통계 조회 오류:', error);
                    return;
                }

                // 실행 상태 집계
                const taskStatus = { Pending: 0, 'In Progress': 0, Executed: 0, Completed: 0, Fixing: 0 };

                data.forEach(t => {
                    if (t.task_status === 'Completed') taskStatus['Completed']++;
                    else if (t.task_status === 'Executed') taskStatus['Executed']++;
                    else if (t.task_status === 'In Progress') taskStatus['In Progress']++;
                    else if (t.task_status === 'Fixing') taskStatus['Fixing']++;
                    else taskStatus['Pending']++;
                });

                // DOM 업데이트
                document.getElementById('grid-stat-pending').textContent = taskStatus['Pending'];
                document.getElementById('grid-stat-inprogress').textContent = taskStatus['In Progress'];
                document.getElementById('grid-stat-executed').textContent = taskStatus['Executed'];
                document.getElementById('grid-stat-completed').textContent = taskStatus['Completed'];
                document.getElementById('grid-stat-fixing').textContent = taskStatus['Fixing'];

                console.log('✅ Grid 통계 로드 완료:', taskStatus);
            } catch (e) {
                console.warn('Grid 통계 로드 실패:', e);
            }
        }

        // 특정 Stage의 진행률을 100%로 업데이트하고 completed 클래스 추가
        function updateProcessProgress(stageName) {
            // Stage Name을 HTML 요소 ID로 매핑
            const stageMapping = {
                'Stage 1': 'process-s1',
                'Stage 2': 'process-s2',
                'Stage 3': 'process-s3',
                'Stage 4': 'process-s4',
                'Stage 5': 'process-s5'
            };

            const elementId = stageMapping[stageName];
            if (!elementId) return;

            const processElement = document.getElementById(elementId);
            if (!processElement) return;

            // 이미 completed면 스킵
            if (processElement.classList.contains('completed')) return;

            // completed 클래스 추가 (CSS에서 스타일 처리)
            processElement.classList.add('completed');
            processElement.setAttribute('data-progress', '100');
            // inline style 사용하지 않음 - CSS !important로 처리

            // 진행률 바 업데이트
            const progressFill = processElement.querySelector('.process-progress-fill');
            if (progressFill) {
                progressFill.style.width = '100%';
            }

            // 퍼센트 텍스트 업데이트
            const percentText = processElement.querySelector('.process-percent');
            if (percentText) {
                percentText.textContent = '100%';
            }

            console.log(`✅ ${stageName} 진행률 100%로 업데이트 완료`);
        }

        // ========================================
        // 외부 연동 설정 Guide 메뉴 토글
        // ========================================
        function toggleServiceGuideMenu() {
            const links = document.getElementById('serviceGuideLinks');
            const btn = document.getElementById('serviceGuideMoreBtn');

            if (!links) {
                console.error('serviceGuideLinks 요소를 찾을 수 없습니다.');
                return;
            }

            const currentDisplay = window.getComputedStyle(links).display;

            if (currentDisplay === 'none') {
                links.style.display = 'block';
                if (btn) btn.textContent = '접기 ←';
            } else {
                links.style.display = 'none';
                if (btn) btn.textContent = '더보기 →';
            }
        }

        // ========================================
        // Claude Code 업데이트 메뉴 토글
        // ========================================
        function toggleClaudeCodeMenu() {
            const links = document.getElementById('claudeCodeLinks');
            const btn = document.getElementById('claudeCodeMoreBtn');

            if (!links) {
                console.error('claudeCodeLinks 요소를 찾을 수 없습니다.');
                return;
            }

            const currentDisplay = window.getComputedStyle(links).display;

            if (currentDisplay === 'none') {
                links.style.display = 'block';
                if (btn) btn.textContent = '접기 ←';
            } else {
                links.style.display = 'none';
                if (btn) btn.textContent = '더보기 →';
            }
        }

        // ========================================
        // My Page 메뉴 토글
        // ========================================
        function toggleMypageMenu() {
            console.log('My Page 메뉴 토글 클릭');
            const links = document.getElementById('mypageLinks');
            const btn = document.getElementById('mypageMoreBtn');

            if (!links) {
                console.error('mypageLinks 요소를 찾을 수 없습니다.');
                return;
            }

            // 현재 display 상태 확인 (computed style 사용)
            const currentDisplay = window.getComputedStyle(links).display;
            console.log('현재 display:', currentDisplay);

            if (currentDisplay === 'none') {
                links.style.display = 'block';
                if (btn) btn.textContent = '접기 ←';
            } else {
                links.style.display = 'none';
                if (btn) btn.textContent = '더보기 →';
            }
        }

        // ========================================
        // 진행중 프로젝트 로드 (로그인 시 호출)
        // ========================================
        function loadInProgressProject(authUserId) {
            // 일반 회원 모드로 시작 - 사용자별 프로젝트 로드
            if (!isAdminMode) {
                loadUserProject();
                loadCompletedProjects();
            }
        }

        // ========================================
        // 로그인 상태 관리
        // ========================================
        async function checkAuthStatus() {
            try {
                const { data: { session }, error } = await window.supabaseClient.auth.getSession();

                if (session && session.user) {
                    console.log('✅ 로그인 상태:', session.user.email);

                    // 사용자 이름 및 크레딧 잔액 가져오기
                    const { data: userData, error: userError } = await window.supabaseClient
                        .from('users')
                        .select('name, nickname, credit_balance')
                        .eq('id', session.user.id)
                        .single();

                    let displayName = '사용자';
                    if (userData && userData.nickname) {
                        displayName = userData.nickname;
                    } else if (userData && userData.name) {
                        displayName = userData.name;
                    } else if (session.user.user_metadata?.name) {
                        displayName = session.user.user_metadata.name;
                    } else if (session.user.email) {
                        displayName = session.user.email.split('@')[0];
                    }

                    // 크레딧 잔액 표시 업데이트
                    const creditBalanceEl = document.getElementById('perplexityCreditBalance');
                    if (creditBalanceEl && userData) {
                        const balance = userData.credit_balance || 0;
                        creditBalanceEl.textContent = balance.toLocaleString();
                    }

                    showLoggedInUI(displayName, session.user.email);
                    // 진행중 프로젝트 로드
                    loadInProgressProject(session.user.id);
                } else {
                    console.log('ℹ️ 로그인되지 않은 상태');
                    showLoggedOutUI();
                }
            } catch (error) {
                console.error('❌ 인증 상태 확인 실패:', error);
                showLoggedOutUI();
            }
        }

        const ADMIN_EMAIL = 'wksun999@gmail.com'; // 관리자 이메일

        function showLoggedInUI(nickname = '사용자', email = '') {
            const guestBtns = document.getElementById('headerGuestBtns');
            const userBtns = document.getElementById('headerUserBtns');
            const nicknameEl = document.getElementById('userNickname');
            const adminModeBtn = document.getElementById('adminModeBtn');

            if (guestBtns) guestBtns.style.display = 'none';
            if (userBtns) userBtns.style.display = 'flex';
            if (nicknameEl) nicknameEl.textContent = nickname + '님';

            // 관리자 이메일만 버튼 표시
            if (adminModeBtn) {
                adminModeBtn.style.display = (email === ADMIN_EMAIL) ? 'inline-block' : 'none';
            }

            // 모바일 로그인 상태 표시 - 버튼 안에 닉네임 2글자 표시
            const mobileLoginBtn = document.getElementById('mobileLoginBtn');
            const mobileUserBadge = document.getElementById('mobileUserBadge');
            if (mobileLoginBtn) {
                mobileLoginBtn.classList.add('logged-in');
                // 닉네임 2글자만 표시 (버튼 안에)
                const shortName = nickname.length > 2 ? nickname.substring(0, 2) : nickname;
                mobileLoginBtn.textContent = shortName;
                mobileLoginBtn.href = 'pages/mypage.html';
                mobileLoginBtn.style.fontSize = '12px';
                mobileLoginBtn.style.fontWeight = '700';
            }
            // 뱃지는 사용 안 함 (버튼 안에 닉네임 표시)
            if (mobileUserBadge) {
                mobileUserBadge.style.display = 'none';
            }

            // 알림 로드
            loadUserNotifications();
        }

        function showLoggedOutUI() {
            const guestBtns = document.getElementById('headerGuestBtns');
            const userBtns = document.getElementById('headerUserBtns');
            if (guestBtns) guestBtns.style.display = 'flex';
            if (userBtns) userBtns.style.display = 'none';

            // 모바일 로그아웃 상태 표시
            const mobileLoginBtn = document.getElementById('mobileLoginBtn');
            const mobileUserBadge = document.getElementById('mobileUserBadge');
            if (mobileLoginBtn) {
                mobileLoginBtn.classList.remove('logged-in');
                mobileLoginBtn.textContent = '👤';
                mobileLoginBtn.href = '/pages/auth/login.html';
                mobileLoginBtn.style.fontSize = '18px';
                mobileLoginBtn.style.fontWeight = 'normal';
            }
            if (mobileUserBadge) {
                mobileUserBadge.style.display = 'none';
            }
        }

        async function logoutFromMain() {
            try {
                await window.supabaseClient.auth.signOut();
                console.log('✅ 로그아웃 완료');
                showLoggedOutUI();
                exitAdminMode(); // 로그아웃 시 관리자 모드 해제
            } catch (error) {
                console.error('❌ 로그아웃 실패:', error);
                alert('로그아웃에 실패했습니다.');
            }
        }

        // ========================================
        // 관리자 모드 관리
        // ========================================
        const ADMIN_PASSWORD = 'admin261226';
        let isAdminMode = false;

        function showAdminPasswordModal() {
            const modal = document.createElement('div');
            modal.id = 'adminPasswordModal';
            modal.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: flex; justify-content: center; align-items: center; z-index: 10000;';
            modal.innerHTML = `
                <div style="background: white; padding: 24px; border-radius: 12px; width: 320px; box-shadow: 0 4px 20px rgba(0,0,0,0.3);">
                    <h3 style="margin: 0 0 16px 0; font-size: 18px;">🔐 관리자 비밀번호</h3>
                    <input type="password" id="adminPasswordInput" placeholder="비밀번호 입력"
                           style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 14px; box-sizing: border-box;"
                           onkeypress="if(event.key==='Enter') verifyAdminPassword()">
                    <div style="display: flex; gap: 8px; margin-top: 16px;">
                        <button onclick="closeAdminPasswordModal()"
                                style="flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 8px; background: white; cursor: pointer;">취소</button>
                        <button onclick="verifyAdminPassword()"
                                style="flex: 1; padding: 10px; border: none; border-radius: 8px; background: #3B82F6; color: white; cursor: pointer; font-weight: 600;">확인</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            document.getElementById('adminPasswordInput').focus();
        }

        function closeAdminPasswordModal() {
            const modal = document.getElementById('adminPasswordModal');
            if (modal) modal.remove();
        }

        function verifyAdminPassword() {
            const input = document.getElementById('adminPasswordInput');
            if (input && input.value === ADMIN_PASSWORD) {
                isAdminMode = true;
                closeAdminPasswordModal();
                enterAdminMode();
                console.log('✅ 관리자 모드 활성화');
            } else {
                alert('비밀번호가 틀렸습니다.');
                input.value = '';
                input.focus();
            }
        }

        let savedNickname = ''; // 원래 닉네임 저장용

        function enterAdminMode() {
            // 관리자 대시보드로 이동
            window.location.href = 'pages/admin-dashboard.html';
        }

        function exitAdminMode() {
            isAdminMode = false;
            const nicknameEl = document.getElementById('userNickname');
            const adminModeBtn = document.getElementById('adminModeBtn');

            // 닉네임 복원
            if (nicknameEl && savedNickname) {
                nicknameEl.textContent = savedNickname;
                nicknameEl.style.color = 'var(--primary)';
            }
            if (adminModeBtn) {
                adminModeBtn.textContent = '관리자 모드 전환';
                adminModeBtn.style.background = '#6c757d';
                adminModeBtn.onclick = showAdminPasswordModal;
            }
            // 일반 모드: 사용자별 프로젝트 로드
            loadUserProject();
            loadCompletedProjects();
            console.log('ℹ️ 일반 모드 전환');
        }

        async function loadUserProject() {
            const currentProjectList = document.getElementById('currentProjectList');
            if (!currentProjectList) return;

            try {
                // 현재 로그인한 사용자 확인
                const { data: { session } } = await window.supabaseClient.auth.getSession();
                if (!session) {
                    currentProjectList.innerHTML = `
                        <div style="padding: 8px; font-size: 11px; color: #6c757d; text-align: center;">
                            로그인이 필요합니다
                        </div>
                    `;
                    return;
                }

                // 사용자 정보 조회
                const { data: userData } = await window.supabaseClient
                    .from('users')
                    .select('user_id, installation_fee_paid')
                    .eq('id', session.user.id)
                    .single();

                if (!userData || !userData.installation_fee_paid) {
                    currentProjectList.innerHTML = `
                        <div style="padding: 8px; font-size: 11px; color: #6c757d; text-align: center;">
                             빌더 계정 개설비 납부 후 이용 가능
                        </div>
                    `;
                    // 진행 프로세스 모두 0%로 초기화 (새 사용자)
                    resetAllProgressToZero();
                    return;
                }

                // 사용자의 진행중 프로젝트 조회
                const { data: projects, error } = await window.supabaseClient
                    .from('projects')
                    .select('*')
                    .eq('user_id', userData.user_id)
                    .eq('status', 'in_progress')
                    .order('created_at', { ascending: false });

                if (error) throw error;

                if (!projects || projects.length === 0) {
                    currentProjectList.innerHTML = `
                        <div style="padding: 8px; font-size: 11px; color: #6c757d; text-align: center;">
                            진행중인 프로젝트 없음
                        </div>
                    `;
                    // 진행 프로세스 모두 0%로 초기화 (프로젝트 없음)
                    resetAllProgressToZero();
                    return;
                }

                // 진행중 프로젝트 표시
                const project = projects[0];
                currentProjectList.innerHTML = `
                    <div class="project-list-item selected" onclick="completeProject('${project.project_id}', '${project.project_name}')">
                        <span class="project-name">${project.project_name}</span>
                        <span class="project-status">진행중</span>
                    </div>
                `;
                console.log('✅ 프로젝트 로드:', project.project_name);

                // 프로젝트 진행률 로드
                await loadProjectProgress(project.project_name);

            } catch (error) {
                console.error('프로젝트 로드 실패:', error);
                currentProjectList.innerHTML = `
                    <div style="padding: 8px; font-size: 11px; color: #6c757d; text-align: center;">
                        프로젝트 로드 실패
                    </div>
                `;
            }
        }


        // 프로젝트 완료 처리
        async function completeProject(projectId, projectName) {
            if (!confirm(`"${projectName}" 프로젝트를 완료 처리하시겠습니까?\n\n완료된 프로젝트는 '완료 Project' 섹션으로 이동됩니다.`)) {
                return;
            }

            try {
                const { error } = await window.supabaseClient
                    .from('projects')
                    .update({
                        status: 'completed',
                        progress: 100,
                        completed_at: new Date().toISOString()
                    })
                    .eq('project_id', projectId);

                if (error) throw error;

                alert(`"${projectName}" 프로젝트가 완료되었습니다!`);
                await loadCurrentProject();
                await loadCompletedProjects();
            } catch (error) {
                console.error('프로젝트 완료 처리 실패:', error);
                alert('프로젝트 완료 처리 중 오류가 발생했습니다.');
            }
        }

        async function loadCompletedProjects() {
            const completedProjectsList = document.getElementById('completedProjectsList');
            const completedProjectsCount = document.getElementById('completedProjectsCount');
            if (!completedProjectsList) return;

            try {
                const { data: { session } } = await window.supabaseClient.auth.getSession();
                if (!session) {
                    completedProjectsCount.textContent = '0';
                    return;
                }

                const { data: userData } = await window.supabaseClient
                    .from('users')
                    .select('user_id')
                    .eq('id', session.user.id)
                    .single();

                if (!userData) {
                    completedProjectsCount.textContent = '0';
                    return;
                }

                const { data: projects, error } = await window.supabaseClient
                    .from('projects')
                    .select('*')
                    .eq('user_id', userData.user_id)
                    .eq('status', 'completed')
                    .order('updated_at', { ascending: false });

                if (error) throw error;

                completedProjectsCount.textContent = projects?.length || 0;

                // 완료 프로젝트: PoliticianFinder (항상 표시)
                const portfolioHTML = `
                    <div class="project-list-item" style="opacity: 0.7; flex-direction: column; align-items: stretch; gap: 6px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span class="project-name">PoliticianFinder</span>
                            <span class="project-status" style="background: var(--success); color: white;">완료</span>
                        </div>
                        <div style="display: flex; gap: 4px;">
                            <button onclick="window.open('https://www.politicianfinder.ai.kr/', '_blank')" style="flex: 1; padding: 4px 6px; font-size: 9px; background: var(--success); color: white; border: none; border-radius: 3px; cursor: pointer; line-height: 1.2;">
                                <span style="display: block;">웹사이트</span>
                                <span style="display: block;">바로가기</span>
                            </button>
                            <button onclick="loadProcessStage('politician_finder', 'PoliticianFinder', '완료 프로젝트')" style="flex: 1; padding: 4px 6px; font-size: 9px; background: #6b7280; color: white; border: none; border-radius: 3px; cursor: pointer; line-height: 1.2;">
                                <span style="display: block;">수정작업</span>
                                <span style="display: block;">안내문</span>
                            </button>
                        </div>
                    </div>
                `;

                if (!projects || projects.length === 0) {
                    // 사용자 프로젝트 없어도 포트폴리오는 표시
                    completedProjectsList.innerHTML = portfolioHTML;
                    return;
                }

                // 사용자 완료 프로젝트
                const userProjectsHTML = projects.map(p => `
                    <div class="project-list-item" onclick="loadProcessStage('completed_project_revision', '${p.project_name}', '완료 프로젝트'); selectProject('${p.project_name}')" style="opacity: 0.7;">
                        <span class="project-name">${p.project_name}</span>
                        <span class="project-status" style="background: var(--success); color: white;">완료</span>
                    </div>
                `).join('');

                completedProjectsList.innerHTML = portfolioHTML + userProjectsHTML;

            } catch (error) {
                console.error('완료 프로젝트 로드 실패:', error);
                completedProjectsCount.textContent = '0';
            }
        }

        // 공지사항 로드
        async function loadNotices() {
            console.log('📋 공지사항 로드 시작 (Frontend)');
            console.log('  - window.supabaseClient:', window.supabaseClient);
            console.log('  - URL:', SUPABASE_URL);

            try {
                if (!window.supabaseClient) {
                    throw new Error('Supabase 클라이언트가 초기화되지 않았습니다.');
                }

                console.log('📤 Supabase 쿼리 시작...');

                const { data, error } = await window.supabaseClient
                    .from('notices')
                    .select('*')
                    .order('important', { ascending: false })
                    .order('created_at', { ascending: false })
                    .limit(3);

                console.log('📥 Supabase 응답:');
                console.log('  - data:', data);
                console.log('  - error:', error);

                if (error) {
                    console.error('❌ Supabase 오류 상세:');
                    console.error('  - code:', error.code);
                    console.error('  - message:', error.message);
                    console.error('  - details:', error.details);
                    console.error('  - hint:', error.hint);
                    throw error;
                }

                console.log('✅ 공지사항 로드 성공:', data.length, '개');
                renderNotices(data);

            } catch (error) {
                console.error('❌ 공지사항 로드 오류:', error);
                const noticesList = document.getElementById('noticesList');
                if (noticesList) {
                    noticesList.innerHTML = `
                        <div style="text-align: center; padding: 20px; color: #EF4444; font-size: 11px;">
                            공지사항을 불러오는데 실패했습니다.<br>
                            <span style="font-size: 11px; color: #6c757d;">콘솔(F12)에서 오류를 확인하세요.</span>
                        </div>
                    `;
                }
            }
        }

        // 공지사항 렌더링 (최신 1개만 표시, 더보기는 h3 헤더에 있음)
        function renderNotices(notices) {
            const noticesList = document.getElementById('noticesList');

            if (!noticesList) {
                console.error('❌ noticesList 요소를 찾을 수 없습니다.');
                return;
            }

            if (!notices || notices.length === 0) {
                noticesList.innerHTML = `
                    <div style="text-align: center; padding: 20px; color: #6c757d; font-size: 14px;">
                        등록된 공지사항이 없습니다.
                    </div>
                `;
                return;
            }

            // 최신 1개만 표시
            const latestNotice = notices[0];
            const safeTitle = typeof DOMPurify !== 'undefined'
                ? DOMPurify.sanitize(latestNotice.title, { ALLOWED_TAGS: [] })
                : latestNotice.title.replace(/</g, '&lt;').replace(/>/g, '&gt;');

            const createdDate = new Date(latestNotice.created_at);
            const formattedDate = `${createdDate.getFullYear()}.${String(createdDate.getMonth() + 1).padStart(2, '0')}.${String(createdDate.getDate()).padStart(2, '0')} ${String(createdDate.getHours()).padStart(2, '0')}:${String(createdDate.getMinutes()).padStart(2, '0')}`;

            noticesList.innerHTML = `
                <div class="notice-item" onclick="showNoticeDetail('${latestNotice.id}', this)">
                    <div class="notice-title">
                        ${safeTitle}
                    </div>
                    <span class="notice-date">${formattedDate}</span>
                </div>
            `;
        }

        // 공지사항 상세 보기
        async function showNoticeDetail(noticeId, clickedElement) {
            console.log('📄 공지사항 상세 보기:', noticeId);

            try {
                if (!window.supabaseClient) {
                    throw new Error('Supabase 클라이언트가 초기화되지 않았습니다.');
                }

                const { data: notice, error } = await window.supabaseClient
                    .from('notices')
                    .select('*')
                    .eq('id', noticeId)
                    .single();

                if (error) throw error;

                // DOMPurify가 있으면 사용, 없으면 기본 텍스트만
                const safeTitle = typeof DOMPurify !== 'undefined'
                    ? DOMPurify.sanitize(notice.title, { ALLOWED_TAGS: [] })
                    : notice.title.replace(/</g, '&lt;').replace(/>/g, '&gt;');

                const safeContent = typeof DOMPurify !== 'undefined'
                    ? DOMPurify.sanitize(notice.content.replace(/\n/g, '<br>'), { ALLOWED_TAGS: ['br'] })
                    : notice.content.replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\n/g, '<br>');

                const createdDate = new Date(notice.created_at).toLocaleDateString('ko-KR');
                const importanceBadge = notice.important
                    ? '<span style="display: inline-block; background: #EF4444; color: white; padding: 2px 8px; border-radius: 4px; font-size: 11px; margin-left: 8px;">중요</span>'
                    : '';

                // 클릭한 공지사항 항목 위치 계산
                const rect = clickedElement.getBoundingClientRect();

                console.log('📍 클릭한 요소 위치:', {
                    top: rect.top,
                    left: rect.left,
                    width: rect.width,
                    height: rect.height
                });

                // 모달 생성
                const overlay = document.createElement('div');
                overlay.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.5);
                    z-index: 10000;
                `;

                const modal = document.createElement('div');

                // 모달 위치 계산
                const modalWidth = 600;

                // 가로: 공지사항 항목과 같은 위치 (왼쪽 정렬)
                let modalLeft = rect.left;

                // 오른쪽으로 화면 벗어나면 왼쪽으로 조정
                if (modalLeft + modalWidth > window.innerWidth - 20) {
                    modalLeft = window.innerWidth - modalWidth - 20;
                }

                // 왼쪽으로 너무 벗어나면 최소 여백 확보
                if (modalLeft < 20) {
                    modalLeft = 20;
                }

                // 세로: 공지사항 바로 옆(아래 또는 위)에 표시
                const idealModalHeight = 500; // 팝업 이상적인 높이
                const spaceBelow = window.innerHeight - rect.bottom - 20; // 아래쪽 여유 공간
                const spaceAbove = rect.top - 20; // 위쪽 여유 공간

                let modalTop;
                let modalMaxHeight;

                if (spaceBelow >= 300) {
                    // 아래쪽에 공간 있음 → 공지사항 바로 아래에 표시
                    modalTop = rect.bottom + 10;
                    modalMaxHeight = Math.min(idealModalHeight, spaceBelow - 10);
                } else if (spaceAbove >= 300) {
                    // 위쪽에 공간 있음 → 공지사항 바로 위에 표시
                    modalMaxHeight = Math.min(idealModalHeight, spaceAbove - 10);
                    modalTop = rect.top - modalMaxHeight - 10;
                } else {
                    // 양쪽 다 부족 → 더 큰 쪽에 표시
                    if (spaceBelow >= spaceAbove) {
                        modalTop = rect.bottom + 10;
                        modalMaxHeight = spaceBelow - 10;
                    } else {
                        modalMaxHeight = spaceAbove - 10;
                        modalTop = rect.top - modalMaxHeight - 10;
                    }
                }

                // 최소 높이 보장 (너무 작으면 화면 중앙)
                if (modalMaxHeight < 200) {
                    modalMaxHeight = 400;
                    modalTop = (window.innerHeight - modalMaxHeight) / 2;
                }

                console.log('📍 팝업 위치:', {
                    '클릭한 요소 top': rect.top,
                    '클릭한 요소 left': rect.left,
                    'modalLeft': modalLeft,
                    'modalTop': modalTop,
                    'modalWidth': modalWidth,
                    'modalMaxHeight': modalMaxHeight,
                    'window.innerHeight': window.innerHeight
                });

                modal.style.cssText = `
                    position: fixed;
                    left: ${modalLeft}px;
                    top: ${modalTop}px;
                    background: white;
                    border-radius: 12px;
                    max-width: 800px;
                    width: 90%;
                    max-height: 80vh;
                    overflow-y: auto;
                    box-shadow: var(--shadow-lg);
                `;

                modal.innerHTML = `
                    <div style="padding: 24px; border-bottom: 1px solid #dee2e6;">
                        <h3 style="margin: 0; font-size: 20px; color: #212529;">
                            📢 ${safeTitle}${importanceBadge}
                        </h3>
                        <div style="margin-top: 8px; font-size: 13px; color: #6c757d;">
                            작성일: ${createdDate}
                        </div>
                    </div>
                    <div style="padding: 24px; line-height: 1.6; color: #495057; font-size: 14px;">
                        ${safeContent}
                    </div>
                    <div style="padding: 16px 24px; border-top: 1px solid #dee2e6; text-align: right;">
                        <button onclick="this.closest('.notice-modal-overlay').remove()"
                                style="padding: 8px 24px; background: #6c757d; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 500;">
                            닫기
                        </button>
                    </div>
                `;

                overlay.className = 'notice-modal-overlay';
                overlay.appendChild(modal);
                overlay.onclick = (e) => {
                    if (e.target === overlay) {
                        overlay.remove();
                    }
                };

                document.body.appendChild(overlay);

            } catch (error) {
                console.error('❌ 공지사항 상세 조회 오류:', error);
                alert('공지사항을 불러오는데 실패했습니다.');
            }
        }

        // ================================================
        // 학습용 콘텐츠 관련 기능
        // ================================================

        // 전역 변수: 학습 콘텐츠 데이터
        let allLearningContents = [];

        /**
         * 학습 콘텐츠 로드 및 렌더링
         */
        async function loadAndRenderLearningContents() {
            console.log('📚 학습 콘텐츠 로드 시작 (Frontend)');

            try {
                if (!window.supabaseClient) {
                    console.warn('⚠️ Supabase 클라이언트가 아직 초기화되지 않았습니다. 재시도 중...');
                    setTimeout(loadAndRenderLearningContents, 1000);
                    return;
                }

                const { data, error } = await window.supabaseClient
                    .from('learning_contents')
                    .select('*')
                    .order('depth1')
                    .order('depth2')
                    .order('display_order');

                if (error) throw error;

                console.log('✅ 학습 콘텐츠 로드 성공:', data.length, '개');

                // 전역 변수에 저장
                allLearningContents = data;

                // 트리 렌더링
                renderLearningContentsTree(data);

            } catch (error) {
                console.error('❌ 학습 콘텐츠 로드 오류:', error);
                // 오류 시 기존 하드코딩된 데이터 유지
            }
        }

        /**
         * 학습 콘텐츠 트리 렌더링
         */
        function renderLearningContentsTree(contents) {
            const treeContainer = document.getElementById('learningContentsTree');
            if (!treeContainer) return;

            // depth1별로 그룹화
            const depth1Groups = {};
            contents.forEach(item => {
                if (!depth1Groups[item.depth1]) {
                    depth1Groups[item.depth1] = [];
                }
                depth1Groups[item.depth1].push(item);
            });

            let html = '';

            Object.keys(depth1Groups).sort().forEach(depth1Name => {
                const depth1Items = depth1Groups[depth1Name];

                // depth2별로 그룹화
                const depth2Groups = {};
                depth1Items.forEach(item => {
                    if (item.depth2) {
                        if (!depth2Groups[item.depth2]) {
                            depth2Groups[item.depth2] = [];
                        }
                        depth2Groups[item.depth2].push(item);
                    }
                });

                html += `
                    <div class="knowledge-item">
                        <div class="knowledge-major" onclick="toggleKnowledge(this)">
                            <span class="knowledge-icon"></span>
                            <span class="knowledge-name">${depth1Name}</span>
                            <span class="knowledge-arrow">▶</span>
                        </div>
                        <div class="knowledge-medium-list">
                `;

                // depth2 렌더링
                Object.keys(depth2Groups).sort().forEach(depth2Name => {
                    const depth2Items = depth2Groups[depth2Name];

                    html += `
                        <div class="knowledge-medium" onclick="toggleKnowledgeSmall(this)">
                            <div class="knowledge-medium-content">
                                <span class="knowledge-medium-bullet">●</span>
                                <span>${depth2Name}</span>
                            </div>
                            <span class="knowledge-medium-arrow">▶</span>
                        </div>
                        <div class="knowledge-small-list">
                    `;

                    // depth3 렌더링
                    depth2Items
                        .filter(item => item.depth3)
                        .sort((a, b) => (a.display_order || 0) - (b.display_order || 0))
                        .forEach(item => {
                            const url = item.url || '#';
                            html += `
                                <div class="knowledge-small">
                                    <span class="knowledge-small-bullet">●</span>
                                    <span><a href="${url}" target="_blank" style="color: inherit; text-decoration: none;">${item.depth3}</a></span>
                                </div>
                            `;
                        });

                    html += `
                        </div>
                    `;
                });

                html += `
                        </div>
                    </div>
                `;
            });

            treeContainer.innerHTML = html;
        }

        /**
         * 학습 콘텐츠 검색 (실시간)
         */
        function searchLearningContents(query) {
            const searchInput = document.getElementById('learningSearchInput');
            const searchResults = document.getElementById('learningSearchResults');
            const contentsTree = document.getElementById('learningContentsTree');

            if (!query || query.trim() === '') {
                // 검색어 없으면 원래 트리 표시
                searchResults.style.display = 'none';
                contentsTree.style.display = 'block';

                // 검색창 스타일 초기화
                searchInput.style.borderColor = '#dee2e6';
                searchInput.style.boxShadow = 'none';
                return;
            }

            // 검색창 스타일 변경
            searchInput.style.borderColor = '#F59E0B';
            searchInput.style.boxShadow = '0 0 0 2px rgba(245, 158, 11, 0.1)';

            // 검색어로 필터링
            const searchTerm = query.toLowerCase();
            const results = allLearningContents.filter(item => {
                return (item.depth1 && item.depth1.toLowerCase().includes(searchTerm)) ||
                       (item.depth2 && item.depth2.toLowerCase().includes(searchTerm)) ||
                       (item.depth3 && item.depth3.toLowerCase().includes(searchTerm)) ||
                       (item.description && item.description.toLowerCase().includes(searchTerm));
            });

            // 검색 결과 렌더링
            if (results.length === 0) {
                searchResults.innerHTML = `
                    <div style="text-align: center; padding: 20px; color: #6c757d; font-size: 13px;">
                        검색 결과가 없습니다.
                    </div>
                `;
            } else {
                let html = `
                    <div style="margin-bottom: 10px; padding: 8px; background: rgba(245, 158, 11, 0.08); border-radius: 8px; font-size: 11px; color: #495057;">
                        🔍 검색 결과 (${results.length}개)
                        <button onclick="clearSearch()" style="float: right; background: none; border: none; cursor: pointer; color: #6c757d; font-size: 16px;">×</button>
                    </div>
                    <div style="max-height: 400px; overflow-y: auto;">
                `;

                results.forEach(item => {
                    if (item.depth3) {
                        const url = item.url || '#';
                        html += `
                            <div style="padding: 8px; margin-bottom: 6px; background: white; border: 1px solid #dee2e6; border-radius: 4px; font-size: 11px;">
                                <div style="font-weight: 700; color: #212529; margin-bottom: 2px;">
                                    <a href="${url}" target="_blank" style="color: inherit; text-decoration: none;">${item.depth3}</a>
                                </div>
                                <div style="font-size: 11px; color: #6c757d;">
                                    📂 ${item.depth1} > ${item.depth2}
                                </div>
                            </div>
                        `;
                    }
                });

                html += `</div>`;
                searchResults.innerHTML = html;
            }

            // 검색 결과 표시, 트리 숨김
            searchResults.style.display = 'block';
            contentsTree.style.display = 'none';
        }

        /**
         * 검색 초기화
         */
        function clearSearch() {
            const searchInput = document.getElementById('learningSearchInput');
            searchInput.value = '';
            searchLearningContents('');
        }

        // ================================================
        // FAQ 관련 기능
        // ================================================

        /**
         * FAQ 검색 기능
         */
        function searchFaqs(query) {
            const searchResults = document.getElementById('faqSearchResults');
            const faqContainer = document.getElementById('faqContainer');

            // 검색어가 비어있으면 기본 트리 표시
            if (!query || query.trim() === '') {
                searchResults.style.display = 'none';
                faqContainer.style.display = 'block';
                searchResults.innerHTML = '';
                return;
            }

            const searchTerm = query.toLowerCase().trim();

            // allFaqs에서 검색
            const results = allFaqs.filter(faq => {
                const depth1Match = faq.depth1 && faq.depth1.toLowerCase().includes(searchTerm);
                const depth2Match = faq.depth2 && faq.depth2.toLowerCase().includes(searchTerm);
                const depth3Match = faq.depth3 && faq.depth3.toLowerCase().includes(searchTerm);
                const answerMatch = faq.answer && faq.answer.toLowerCase().includes(searchTerm);
                return depth1Match || depth2Match || depth3Match || answerMatch;
            });

            // 검색 결과 렌더링
            if (results.length === 0) {
                searchResults.innerHTML = `
                    <div style="padding: 15px; text-align: center; color: #666; font-size: 13px;">
                        🔍 "${query}"에 대한 검색 결과가 없습니다.
                    </div>
                `;
            } else {
                let html = `
                    <div style="padding: 8px 12px; background: #f0f0f0; border-radius: 8px; margin-bottom: 8px; font-size: 11px; color: #666;">
                        🔍 검색 결과: ${results.length}개
                    </div>
                `;

                results.forEach(faq => {
                    // 검색어 하이라이트
                    const highlightedTitle = faq.depth3.replace(
                        new RegExp(`(${searchTerm})`, 'gi'),
                        '<span style="background: #FEF08A; padding: 0 2px; border-radius: 4px;">$1</span>'
                    );

                    html += `
                        <div class="knowledge-small"
                             style="padding: 10px 12px; margin-bottom: 6px; background: white; border-radius: 8px; cursor: pointer; border: 1px solid #e5e7eb; transition: all 0.2s;"
                             onclick="showFaqAnswer(${faq.id})"
                             onmouseover="this.style.borderColor='#2C4A8A'; this.style.background='#f8fafc';"
                             onmouseout="this.style.borderColor='#e5e7eb'; this.style.background='white';">
                            <div style="font-size: 13px; font-weight: 500; color: #333; margin-bottom: 4px;">
                                ${highlightedTitle}
                            </div>
                            <div style="font-size: 11px; color: #888;">
                                📂 ${faq.depth1} > ${faq.depth2}
                            </div>
                        </div>
                    `;
                });

                searchResults.innerHTML = html;
            }

            // 검색 결과 표시, 트리 숨김
            searchResults.style.display = 'block';
            faqContainer.style.display = 'none';
        }

        /**
         * FAQ 검색 초기화
         */
        function clearFaqSearch() {
            const searchInput = document.getElementById('faqSearchInput');
            searchInput.value = '';
            searchFaqs('');
        }

        // 전역 변수: FAQ 데이터
        let allFaqs = [];

        /**
         * FAQ 로드 및 렌더링
         */
        async function loadAndRenderFaqs() {
            console.log('🙋 FAQ 로드 시작 (Frontend)');

            const loadingEl = document.getElementById('faqLoading');
            const containerEl = document.getElementById('faqContainer');

            try {
                if (!window.supabaseClient) {
                    console.warn('⚠️ Supabase 클라이언트가 아직 초기화되지 않았습니다. 재시도 중...');
                    setTimeout(loadAndRenderFaqs, 1000);
                    return;
                }

                const { data, error } = await window.supabaseClient
                    .from('faqs')
                    .select('*')
                    .order('depth1')
                    .order('depth2')
                    .order('depth3');

                if (error) throw error;

                console.log('✅ FAQ 로드 성공:', data.length, '개');

                // 전역 변수에 저장
                allFaqs = data;

                // 트리 렌더링
                renderFaqTree(data);

                // 로딩 메시지 숨기기
                if (loadingEl) loadingEl.style.display = 'none';

            } catch (error) {
                console.error('❌ FAQ 로드 오류:', error);

                // 오류 메시지 표시
                if (containerEl) {
                    containerEl.innerHTML = `
                        <div style="padding: 12px; text-align: center; color: #EF4444; font-size: 13px;">
                            ❌ FAQ를 불러오는데 실패했습니다.<br/>
                            <small>${error.message}</small>
                        </div>
                    `;
                }
                if (loadingEl) loadingEl.style.display = 'none';
            }
        }

        /**
         * FAQ 트리 렌더링
         */
        function renderFaqTree(faqs) {
            const containerEl = document.getElementById('faqContainer');
            if (!containerEl) return;

            // depth1별로 그룹화
            const depth1Groups = {};
            faqs.forEach(item => {
                if (!depth1Groups[item.depth1]) {
                    depth1Groups[item.depth1] = [];
                }
                depth1Groups[item.depth1].push(item);
            });

            let html = '';

            Object.keys(depth1Groups).sort().forEach(depth1Name => {
                const depth1Items = depth1Groups[depth1Name];

                // depth2별로 그룹화
                const depth2Groups = {};
                depth1Items.forEach(item => {
                    if (item.depth2) {
                        if (!depth2Groups[item.depth2]) {
                            depth2Groups[item.depth2] = [];
                        }
                        depth2Groups[item.depth2].push(item);
                    }
                });

                html += `
                    <div class="knowledge-item">
                        <div class="knowledge-major" onclick="toggleKnowledge(this)">
                            <span class="knowledge-icon"></span>
                            <span class="knowledge-name">${depth1Name}</span>
                            <span class="knowledge-arrow">▶</span>
                        </div>
                        <div class="knowledge-medium-list">
                `;

                // depth2 렌더링
                Object.keys(depth2Groups).sort().forEach(depth2Name => {
                    const depth2Items = depth2Groups[depth2Name];

                    html += `
                        <div class="knowledge-medium" onclick="toggleKnowledgeSmall(this)">
                            <div class="knowledge-medium-content">
                                <span class="knowledge-medium-bullet">●</span>
                                <span>${depth2Name}</span>
                            </div>
                            <span class="knowledge-medium-arrow">▶</span>
                        </div>
                        <div class="knowledge-small-list">
                    `;

                    // depth3 렌더링 (질문 클릭 시 답변 모달)
                    depth2Items
                        .filter(item => item.depth3)
                        .sort((a, b) => (a.depth3 || '').localeCompare(b.depth3 || ''))
                        .forEach(item => {
                            html += `
                                <div class="knowledge-small" onclick="showFaqAnswer('${item.id}')" style="cursor: pointer;">
                                    <span class="knowledge-small-bullet">●</span>
                                    <span>${item.depth3}</span>
                                </div>
                            `;
                        });

                    html += `
                        </div>
                    `;
                });

                html += `
                        </div>
                    </div>
                `;
            });

            containerEl.innerHTML = html;
        }

        /**
         * FAQ 답변 모달 표시
         */
        async function showFaqAnswer(faqId) {
            try {
                // 전역 변수에서 FAQ 찾기
                const faq = allFaqs.find(f => f.id === faqId);

                if (!faq) {
                    alert('FAQ를 찾을 수 없습니다.');
                    return;
                }

                // DOMPurify로 HTML 정화
                const safeAnswer = DOMPurify.sanitize(faq.answer);

                // 모달 생성
                const overlay = document.createElement('div');
                const modal = document.createElement('div');

                modal.innerHTML = `
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px 24px; display: flex; justify-content: space-between; align-items: center; border-radius: 12px 12px 0 0;">
                        <div>
                            <div style="font-size: 18px; font-weight: 700; color: white; margin-bottom: 4px;">
                                ${faq.depth3}
                            </div>
                            <div style="font-size: 11px; color: rgba(255, 255, 255, 0.9);">
                                📂 ${faq.depth1} > ${faq.depth2}
                            </div>
                        </div>
                        <button onclick="this.closest('.faq-modal-overlay').remove()"
                                style="background: rgba(255, 255, 255, 0.2); border: none; color: white; font-size: 24px; cursor: pointer; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: all 0.2s;"
                                onmouseover="this.style.background='rgba(255, 255, 255, 0.3)'"
                                onmouseout="this.style.background='rgba(255, 255, 255, 0.2)'">
                            ×
                        </button>
                    </div>
                    <div style="padding: 24px; line-height: 1.8; color: #495057; font-size: 14px; max-height: 60vh; overflow-y: auto;">
                        ${safeAnswer}
                    </div>
                    <div style="padding: 16px 24px; border-top: 1px solid #dee2e6; text-align: right; background: #f8f9fa;">
                        <button onclick="this.closest('.faq-modal-overlay').remove()"
                                style="padding: 10px 24px; background: #6c757d; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 500; transition: all 0.2s;"
                                onmouseover="this.style.background='#5a6268'"
                                onmouseout="this.style.background='#6c757d'">
                            닫기
                        </button>
                    </div>
                `;

                overlay.className = 'faq-modal-overlay';
                overlay.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.6); display: flex; align-items: center; justify-content: center; z-index: 10000;';

                modal.style.cssText = 'background: white; border-radius: 12px; max-width: 700px; width: 90%; box-shadow: var(--shadow-lg);';

                overlay.appendChild(modal);
                overlay.onclick = (e) => {
                    if (e.target === overlay) {
                        overlay.remove();
                    }
                };

                document.body.appendChild(overlay);

            } catch (error) {
                console.error('❌ FAQ 답변 표시 오류:', error);
                alert('FAQ 답변을 불러오는데 실패했습니다.');
            }
        }

        // ================================================
        // 💡 Tips 로컬 배열 기반 시스템
        // ================================================

        // Tips 콘텐츠 배열 (54개, 13개 카테고리) - path 기반으로 MD 파일에서 로드
        const TIPS_CONTENTS = [
            { category: '웹개발 기초개념', title: '풀스택 웹사이트란 무엇인가', path: 'Tips/웹개발_기초개념/풀스택_웹사이트란_무엇인가.md' },
            { category: 'AI 준수사항', title: 'AI 12대 준수사항', path: 'Tips/AI_준수사항/AI_12대_준수사항.md' },
            { category: '프로젝트 시작', title: 'SSAL Works Dev Package란 무엇인가', path: 'Tips/프로젝트_시작/SSAL_Works_Dev_Package란_무엇인가.md' },
            { category: '프로젝트 시작', title: '작업 디렉터리 구조 먼저 생성하기', path: 'Tips/프로젝트_시작/작업_디렉터리_구조_먼저_생성하기.md' },
            { category: '프로젝트 시작', title: '디렉터리 구조 문서 만들기', path: 'Tips/프로젝트_시작/디렉터리_구조_문서_만들기.md' },
            { category: '프로젝트 시작', title: '프로젝트 진행 상황 문서 만들기', path: 'Tips/프로젝트_시작/프로젝트_진행_상황_문서_만들기.md' },
            { category: '프로젝트 시작', title: 'CLAUDE.md로 작업 참고사항 정리하기', path: 'Tips/프로젝트_시작/CLAUDE.md로_작업_참고사항_정리하기.md' },
            { category: 'Claude Code 설치 & 실행', title: 'Claude Code 설치 방법 및 오류 해결', path: 'Tips/Claude_Code_설치_실행/Claude_Code_설치_방법_및_오류_해결.md' },
            { category: 'Claude Code 설치 & 실행', title: '폴더에서 터미널 열어 실행하기', path: 'Tips/Claude_Code_설치_실행/폴더에서_터미널_열어_실행하기.md' },
            { category: 'Claude Code 사용법', title: '/status 명령어로 모든 것 확인하기', path: 'Tips/Claude_Code_사용법/status_명령어로_모든_것_확인하기.md' },
            { category: 'Claude Code 사용법', title: '5회 반복 디버깅 기법', path: 'Tips/Claude_Code_사용법/5회_반복_디버깅_기법.md' },
            { category: '편의 기능', title: '음성으로 지시하기 - AI 활용', path: 'Tips/편의_기능/음성으로_지시하기_-_AI_활용.md' },
            { category: '편의 기능', title: '음성으로 지시하기 - Windows 기본', path: 'Tips/편의_기능/음성으로_지시하기_-_Windows_기본.md' },
            { category: '도구 활용', title: 'MCP 서버 설정 방법', path: 'Tips/도구_활용/MCP_서버_설정_방법.md' },
            { category: '도구 활용', title: 'Skills 활용하기', path: 'Tips/도구_활용/Skills_활용하기.md' },
            { category: '도구 활용', title: '서브에이전트 효과적으로 활용하기', path: 'Tips/도구_활용/서브에이전트_효과적으로_활용하기.md' },
            { category: '도구 활용', title: 'Slash Commands 활용하기', path: 'Tips/도구_활용/Slash_Commands_활용하기.md' },
            { category: '도구 활용', title: 'Multi-Role AI 시스템과 Multi-Agent 시스템 비교', path: 'Tips/도구_활용/Multi-Role_AI_시스템과_Multi-Agent_시스템_비교.md' },
            { category: '도구 활용', title: 'Pre-commit Hook으로 반복작업 자동화하기', path: 'Tips/도구_활용/Pre-commit_Hook으로_반복작업_자동화하기.md' },
            { category: '작업 기록 & 백업', title: 'work_logs로 작업 기록 관리하기', path: 'Tips/작업_기록_백업/work_logs로_작업_기록_관리하기.md' },
            { category: '작업 기록 & 백업', title: 'Orders Reports JSON으로 작업 요청하기', path: 'Tips/작업_기록_백업/Orders_Reports_JSON으로_작업_요청하기.md' },
            { category: '작업 기록 & 백업', title: 'outbox에 작업 결과 저장하기', path: 'Tips/작업_기록_백업/outbox에_작업_결과_저장하기.md' },
            { category: '작업 기록 & 백업', title: 'Git으로 버전 관리하기', path: 'Tips/작업_기록_백업/Git으로_버전_관리하기.md' },
            { category: '작업 기록 & 백업', title: '중요한 파일 주기적으로 백업하기', path: 'Tips/작업_기록_백업/중요한_파일_주기적으로_백업하기.md' },
            { category: '세션 관리', title: '세션 끊어졌을 때 복구하기', path: 'Tips/세션_관리/세션_끊어졌을_때_복구하기.md' },
            { category: '세션 관리', title: '헤매면 미련 없이 세션 정리하기', path: 'Tips/세션_관리/헤매면_미련_없이_세션_정리하기.md' },
            { category: '세션 관리', title: 'CLI 여러 개 동시 실행하기', path: 'Tips/세션_관리/CLI_여러_개_동시_실행하기.md' },
            { category: '세션 관리', title: 'Google Drive 동기화 문제 해결', path: 'Tips/세션_관리/Google_Drive_동기화_문제_해결.md' },
            { category: '검증 & 문서화', title: '별도 서브에이전트로 검증하기', path: 'Tips/검증_문서화/별도_서브에이전트로_검증하기.md' },
            { category: '검증 & 문서화', title: '수시로 문서화 지시하기', path: 'Tips/검증_문서화/수시로_문서화_지시하기.md' },
            { category: '검증 & 문서화', title: '작업 규칙 CLAUDE.md에 업데이트하기', path: 'Tips/검증_문서화/작업_규칙_CLAUDE.md에_업데이트하기.md' },
            { category: '검증 & 문서화', title: '개발 완료 후 디자인 완성도 체크', path: 'Tips/검증_문서화/개발_완료_후_디자인_완성도_체크.md' },
            { category: '개발 실무', title: '파일 저장 위치 확인하기', path: 'Tips/개발_실무/파일_저장_위치_확인하기.md' },
            { category: '개발 실무', title: '파일 위치 수시로 점검하기', path: 'Tips/개발_실무/파일_위치_수시로_점검하기.md' },
            { category: '개발 실무', title: '폴더 정리 및 임의 생성 금지 규칙', path: 'Tips/개발_실무/폴더_정리_및_임의_생성_금지_규칙.md' },
            { category: '개발 실무', title: '파일명 변경 시 참조도 함께 수정하기', path: 'Tips/개발_실무/파일명_변경_시_참조도_함께_수정하기.md' },
            { category: '개발 실무', title: '규칙은 코드에 직접 구현하기', path: 'Tips/개발_실무/규칙은_코드에_직접_구현하기.md' },
            { category: '개발 실무', title: '반응형 디자인은 별도로 요청하기', path: 'Tips/개발_실무/반응형_디자인은_별도로_요청하기.md' },
            { category: '개발 실무', title: '인증 코드는 숫자 6자리로', path: 'Tips/개발_실무/인증_코드는_숫자_6자리로.md' },
            { category: '개발 실무', title: '최적화 성능 개선 작업 시키기', path: 'Tips/개발_실무/최적화_성능_개선_작업_시키기.md' },
            { category: '개발 실무', title: '콘텐츠 작성부터 웹사이트 게시까지 자동화 프로세스', path: 'Tips/개발_실무/콘텐츠_작성부터_웹사이트_게시까지_자동화_프로세스.md' },
            { category: '개발 실무', title: 'Vanilla와 React란 무엇인가', path: 'Tips/개발_실무/Vanilla와_React란_무엇인가.md' },
            { category: '개발 실무', title: 'Vanilla에서 React로 전환하는 경우', path: 'Tips/개발_실무/Vanilla에서_React로_전환하는_경우.md' },
            { category: '개발 마무리 점검', title: '프로덕션 배포 전 체크리스트', path: 'Tips/개발_마무리_점검/프로덕션_배포_전_체크리스트.md' },
            { category: '효율적인 소통', title: '구체적으로 질문하는 방법', path: 'Tips/효율적인_소통/구체적으로_질문하는_방법.md' },
            { category: '효율적인 소통', title: '단계별로 요청하기', path: 'Tips/효율적인_소통/단계별로_요청하기.md' },
            { category: '효율적인 소통', title: '이해될 때까지 질문하기', path: 'Tips/효율적인_소통/이해될_때까지_질문하기.md' },
            { category: '효율적인 소통', title: '3가지 이상 대안 요청하기', path: 'Tips/효율적인_소통/3가지_이상_대안_요청하기.md' },
            { category: '효율적인 소통', title: 'Claude Code에게 사용법 물어보기', path: 'Tips/효율적인_소통/Claude_Code에게_사용법_물어보기.md' },
            { category: '데이터베이스', title: 'SQL 주석이란 무엇인가', path: 'Tips/데이터베이스/SQL_주석이란_무엇인가.md' },
            { category: '데이터베이스', title: 'Claude Code로 Supabase CRUD 하는 방법', path: 'Tips/데이터베이스/Claude_Code로_Supabase_CRUD_하는_방법.md' },
            { category: '데이터베이스', title: 'Supabase RLS 정책 관리', path: 'Tips/데이터베이스/Supabase_RLS_정책_관리.md' },
            { category: '데이터베이스', title: 'Supabase 쿼리 최적화', path: 'Tips/데이터베이스/Supabase_쿼리_최적화.md' },
            { category: 'SAL Grid', title: 'Task Plan 작성 전 User Flow 먼저', path: 'Tips/SAL_Grid/Task_Plan_작성_전_User_Flow_먼저.md' },
            { category: 'SAL Grid', title: 'Task를 작게 나누는 기준', path: 'Tips/SAL_Grid/Task를_작게_나누는_기준.md' },
            { category: 'SAL Grid', title: 'Task ID로 파일 관리하기', path: 'Tips/SAL_Grid/Task_ID로_파일_관리하기.md' },
            { category: 'SAL Grid', title: 'Phase Gate 검증 체크리스트', path: 'Tips/SAL_Grid/Phase_Gate_검증_체크리스트.md' },
            { category: 'SAL Grid', title: '검증 완료 후 문서화하기', path: 'Tips/SAL_Grid/검증_완료_후_문서화하기.md' },
            { category: '트러블슈팅', title: '로컬 서버 실행 방법', path: 'Tips/트러블슈팅/로컬_서버_실행_방법.md' },
            { category: '트러블슈팅', title: '브라우저 콘솔 에러 확인하기', path: 'Tips/트러블슈팅/브라우저_콘솔_에러_확인하기.md' },
            { category: '트러블슈팅', title: '에러 핸들링 패턴', path: 'Tips/트러블슈팅/에러_핸들링_패턴.md' },
            { category: 'Git & GitHub', title: 'GitHub Push Pull로 작업 반영하기', path: 'Tips/Git_GitHub/GitHub_Push_Pull로_작업_반영하기.md' },
            { category: 'Git & GitHub', title: 'Feature 브랜치로 Vercel Preview 테스트 후 병합하기', path: 'Tips/Git_GitHub/Feature_브랜치로_Vercel_Preview_테스트_후_병합하기.md' },
            { category: '보안', title: 'API 키 보안 관리', path: 'Tips/보안/API_키_보안_관리.md' },
            { category: '보안', title: '환경변수 관리 베스트 프랙티스', path: 'Tips/보안/환경변수_관리_베스트_프랙티스.md' }
        ];

        // 현재 선택된 카테고리 (전체 보기용)
        let currentTipsCategory = '전체';

        /**
         * Tips 사이드바 검색
         */
        function searchTipsLocal(query) {
            const resultsDiv = document.getElementById('tipsSearchResults');

            if (!query || query.trim() === '') {
                resultsDiv.innerHTML = '';
                return;
            }

            const searchTerm = query.toLowerCase();
            const results = TIPS_CONTENTS.filter(item =>
                item.title.toLowerCase().includes(searchTerm) ||
                
                item.category.toLowerCase().includes(searchTerm)
            );

            if (results.length === 0) {
                resultsDiv.innerHTML = `
                    <div style="padding: 15px; text-align: center; color: #666; font-size: 13px;">
                        🔍 "${query}"에 대한 검색 결과가 없습니다.
                    </div>
                `;
                return;
            }

            let html = `
                <div style="padding: 8px 12px; background: #F5F3FF; border-radius: 8px; margin-bottom: 8px; font-size: 11px; color: #7C3AED;">
                    🔍 검색 결과: ${results.length}개
                </div>
            `;

            results.forEach(item => {
                html += `
                    <div style="padding: 10px 12px; margin-bottom: 6px; background: white; border-radius: 8px; cursor: pointer; border: 1px solid #e5e7eb; transition: all 0.2s;"
                         onclick="showTipDetail('${item.category}', '${item.title.replace(/'/g, "\\'")}')"
                         onmouseover="this.style.borderColor='#8B5CF6'; this.style.background='#F5F3FF';"
                         onmouseout="this.style.borderColor='#e5e7eb'; this.style.background='white';">
                        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px;">
                            <span style="font-size: 14px;">💡</span>
                            <span style="font-size: 14px; font-weight: 500; color: #333;">${item.title}</span>
                        </div>
                        <div style="font-size: 11px; color: #8B5CF6;">
                            ${item.category}
                        </div>
                    </div>
                `;
            });

            resultsDiv.innerHTML = html;
        }

        /**
         * Tip 상세 보기 (MD 파일 fetch)
         */
        async function showTipDetail(category, title) {
            const item = TIPS_CONTENTS.find(i => i.category === category && i.title === title);
            if (!item) return;

            // 로딩 오버레이 먼저 표시
            const overlay = document.createElement('div');
            overlay.className = 'tips-modal-overlay';
            overlay.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.6); display: flex; align-items: center; justify-content: center; z-index: 10001;';

            const modal = document.createElement('div');
            modal.style.cssText = 'background: white; border-radius: 12px; max-width: 900px; width: 95%; max-height: 90vh; overflow: hidden; box-shadow: var(--shadow-lg);';

            // 로딩 상태 표시
            modal.innerHTML = `
                <div style="background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%); padding: 20px 24px; display: flex; justify-content: space-between; align-items: flex-start; border-radius: 12px 12px 0 0;">
                    <div>
                        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                            <span style="font-size: 20px;">💡</span>
                            <span style="background: rgba(255,255,255,0.2); padding: 2px 8px; border-radius: 4px; font-size: 11px; color: white;">${item.category}</span>
                        </div>
                        <div style="font-size: 16px; font-weight: 700; color: white; line-height: 1.3;">
                            ${item.title}
                        </div>
                    </div>
                    <button onclick="this.closest('.tips-modal-overlay').remove()"
                            style="background: rgba(255, 255, 255, 0.2); border: none; color: white; font-size: 20px; cursor: pointer; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                        ×
                    </button>
                </div>
                <style>
                    /* Tips 모달 전용 Markdown 스타일 */
                    #tipContentArea h1 { font-size: 24px; font-weight: 800; color: #7C3AED; margin: 0 0 16px; padding-bottom: 12px; border-bottom: 3px solid #8B5CF6; }
                    #tipContentArea h2 { font-size: 20px; font-weight: 700; color: #7C3AED; margin: 28px 0 12px; padding-bottom: 8px; border-bottom: 2px solid #E5E7EB; }
                    #tipContentArea h3 { font-size: 17px; font-weight: 700; color: #374151; margin: 24px 0 10px; }
                    #tipContentArea h4 { font-size: 15px; font-weight: 700; color: #374151; margin: 20px 0 8px; }
                    #tipContentArea h5 { font-size: 14px; font-weight: 600; color: #4B5563; margin: 16px 0 6px; }
                    #tipContentArea h6 { font-size: 13px; font-weight: 600; color: #6B7280; margin: 12px 0 4px; }
                    #tipContentArea p { margin-bottom: 14px; }
                    #tipContentArea blockquote { background: #FEF3C7; border-left: 4px solid #F59E0B; padding: 12px 16px; margin: 16px 0; border-radius: 0 8px 8px 0; }
                    #tipContentArea blockquote p { margin: 0; font-style: italic; }
                    #tipContentArea pre { background: #1E1E1E; color: #D4D4D4; padding: 16px; border-radius: 8px; overflow-x: auto; margin: 16px 0; font-size: 13px; }
                    #tipContentArea code { background: #F5F3FF; padding: 2px 6px; border-radius: 4px; font-family: Consolas, Monaco, monospace; font-size: 13px; color: #7C3AED; }
                    #tipContentArea pre code { background: none; padding: 0; color: inherit; }
                    #tipContentArea table { width: 100%; border-collapse: collapse; margin: 16px 0; font-size: 13px; }
                    #tipContentArea th, #tipContentArea td { padding: 10px 14px; text-align: left; border: 1px solid #E5E7EB; }
                    #tipContentArea th { background: #F5F3FF; font-weight: 600; }
                    #tipContentArea ul, #tipContentArea ol { margin: 14px 0; padding-left: 24px; }
                    #tipContentArea li { margin-bottom: 6px; }
                    #tipContentArea hr { border: none; border-top: 2px solid #E5E7EB; margin: 28px 0; }
                    #tipContentArea a { color: #8B5CF6; text-decoration: none; }
                    #tipContentArea a:hover { text-decoration: underline; }
                </style>
                <div id="tipContentArea" style="padding: 20px 24px; line-height: 1.7; color: #495057; font-size: 14px; overflow-y: auto; max-height: calc(90vh - 140px);">
                    <div style="text-align: center; padding: 40px;">
                        <div style="font-size: 24px; margin-bottom: 12px;">⏳</div>
                        <div>콘텐츠를 불러오는 중...</div>
                    </div>
                </div>
                <div style="padding: 12px 24px; border-top: 1px solid #dee2e6; text-align: right; background: #f8f9fa; border-radius: 0 0 12px 12px;">
                    <button onclick="this.closest('.tips-modal-overlay').remove()"
                            style="padding: 8px 20px; background: #8B5CF6; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 13px; font-weight: 500;">
                        닫기
                    </button>
                </div>
            `;

            overlay.appendChild(modal);
            overlay.onclick = (e) => {
                if (e.target === overlay) overlay.remove();
            };

            document.body.appendChild(overlay);

            // MD 파일 fetch
            try {
                const url = GITHUB_RAW_BASE + '/부수적_고유기능/콘텐츠/' + item.path;
                const response = await fetch(url);

                if (!response.ok) {
                    throw new Error('파일을 찾을 수 없습니다.');
                }

                const mdContent = await response.text();

                // marked.js로 MD를 HTML로 변환
                const htmlContent = marked.parse(mdContent);

                // 콘텐츠 영역 업데이트
                const contentArea = document.getElementById('tipContentArea');
                if (contentArea) {
                    contentArea.innerHTML = htmlContent;
                }
            } catch (error) {
                console.error('Tip 로드 오류:', error);
                const contentArea = document.getElementById('tipContentArea');
                if (contentArea) {
                    contentArea.innerHTML = `
                        <div style="text-align: center; padding: 40px; color: #EF4444;">
                            <div style="font-size: 24px; margin-bottom: 12px;">❌</div>
                            <div>콘텐츠를 불러올 수 없습니다.</div>
                            <div style="font-size: 11px; margin-top: 8px; color: #6c757d;">${error.message}</div>
                        </div>
                    `;
                }
            }
        }

        /**
         * 외부 연동 설정 Guide - MD 파일 경로 매핑
         */
        // GitHub Raw URL 베이스
        const GITHUB_RAW_BASE = 'https://raw.githubusercontent.com/SUNWOONGKYU/SSALWorks/master';

        const SERVICE_GUIDE_PATHS = {
            'database': `${GITHUB_RAW_BASE}/부수적_고유기능/콘텐츠/외부_연동_설정_Guide/01_데이터베이스_설정.md`,
            'auth': `${GITHUB_RAW_BASE}/부수적_고유기능/콘텐츠/외부_연동_설정_Guide/02_회원인증_설정.md`,
            'email': `${GITHUB_RAW_BASE}/부수적_고유기능/콘텐츠/외부_연동_설정_Guide/03_이메일_시스템_설정.md`,
            'deploy': `${GITHUB_RAW_BASE}/부수적_고유기능/콘텐츠/외부_연동_설정_Guide/04_배포_도메인_설정.md`,
            'payment': `${GITHUB_RAW_BASE}/부수적_고유기능/콘텐츠/외부_연동_설정_Guide/05_결제_시스템_설정.md`
        };

        const SERVICE_GUIDE_TITLES = {
            'database': '🗄️ 데이터베이스 설정 (Supabase DB + RLS)',
            'auth': '🔐 회원인증 설정 (Google OAuth + Supabase)',
            'email': '📧 이메일 시스템 설정 (Resend + SMTP)',
            'deploy': '🚀 배포/도메인 설정 (Vercel + Whois)',
            'payment': '💳 결제 시스템 설정 (토스페이먼츠)'
        };

        /**
         * 외부 연동 설정 Guide 전체 목록 뷰어
         */
        function openServiceGuideViewer() {
            const overlay = document.createElement('div');
            overlay.className = 'service-guide-viewer-overlay';
            overlay.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.6); display: flex; align-items: center; justify-content: center; z-index: 10000;';

            const modal = document.createElement('div');
            modal.className = 'service-guide-viewer-modal';
            modal.style.cssText = 'background: white; border-radius: 12px; max-width: 900px; width: 95%; max-height: 90vh; display: flex; flex-direction: column; box-shadow: var(--shadow-lg); position: relative;';

            const guideItems = [
                { id: 'database', icon: '🗄️', title: '데이터베이스 설정', desc: 'Supabase 프로젝트 + DB + RLS' },
                { id: 'auth', icon: '🔐', title: '회원인증 설정', desc: 'Google OAuth + Supabase Auth' },
                { id: 'email', icon: '📧', title: '이메일 시스템 설정', desc: 'Resend + SMTP + 템플릿' },
                { id: 'deploy', icon: '🚀', title: '배포/도메인 설정', desc: 'Vercel + Whois DNS' },
                { id: 'payment', icon: '💳', title: '결제 시스템 설정', desc: '토스페이먼츠 연동' }
            ];

            const itemsHtml = guideItems.map(item => `
                <div onclick="this.closest('.service-guide-viewer-overlay').remove(); openServiceGuide('${item.id}')"
                     style="padding: 14px 16px; border-bottom: 1px solid #E5E7EB; cursor: pointer; display: flex; align-items: center; gap: 12px; transition: background 0.2s;"
                     onmouseover="this.style.background='#FEF3C7'" onmouseout="this.style.background='transparent'">
                    <span style="font-size: 24px;">${item.icon}</span>
                    <div>
                        <div style="font-weight: 600; color: #1F2937; font-size: 14px;">${item.title}</div>
                        <div style="font-size: 11px; color: #6B7280; margin-top: 2px;">${item.desc}</div>
                    </div>
                    <span style="margin-left: auto; color: #9CA3AF;">▶</span>
                </div>
            `).join('');

            modal.innerHTML = `
                <div style="background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%); padding: 16px 20px; display: flex; justify-content: space-between; align-items: center; border-radius: 12px 12px 0 0;">
                    <div style="font-size: 18px; font-weight: 700; color: white;">🔗 외부 연동 설정 Guide</div>
                    <button onclick="this.closest('.service-guide-viewer-overlay').remove()"
                            style="background: rgba(255, 255, 255, 0.2); border: none; color: white; font-size: 20px; cursor: pointer; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                        ×
                    </button>
                </div>
                <div style="padding: 12px 16px; background: #FEF3C7; border-bottom: 1px solid #F59E0B; font-size: 13px; color: #92400E; line-height: 1.5;">
                    ⚠️ <strong>안내:</strong> 아래 항목들은 AI가 직접 수행할 수 없어 <strong>사용자가 직접 설정</strong>해야 합니다.<br>
                    각 가이드의 내용을 복사하여 Claude Code에 붙여넣고 안내에 따라 진행하세요.
                </div>
                <div style="flex: 1; overflow-y: auto;">
                    ${itemsHtml}
                </div>
            `;

            overlay.appendChild(modal);
            overlay.onclick = (e) => {
                if (e.target === overlay) overlay.remove();
            };

            document.body.appendChild(overlay);
        }

        /**
         * 서비스 가이드 마크다운 렌더링
         */
        function renderServiceGuideMarkdown(mdContent) {
            // marked.js로 마크다운을 HTML로 변환
            if (typeof marked !== 'undefined') {
                const html = marked.parse(mdContent);
                // DOMPurify로 XSS 방지
                if (typeof DOMPurify !== 'undefined') {
                    return DOMPurify.sanitize(html);
                }
                return html;
            }
            // fallback: 원본 텍스트
            return `<pre style="white-space: pre-wrap;">${escapeHtml(mdContent)}</pre>`;
        }

        /**
         * 외부 연동 설정 Guide 열기
         */
        async function openServiceGuide(serviceId) {
            const title = SERVICE_GUIDE_TITLES[serviceId];

            if (!title) {
                showStatus('⚠️ 해당 가이드는 아직 준비 중입니다.', 'warning');
                return;
            }

            let mdContent;

            // 1. 번들된 콘텐츠 우선 사용 (로컬/오프라인 지원)
            if (typeof SERVICE_GUIDE_CONTENTS !== 'undefined' && SERVICE_GUIDE_CONTENTS[serviceId]) {
                mdContent = SERVICE_GUIDE_CONTENTS[serviceId];
            }
            // 2. Fallback: GitHub Raw URL에서 로드
            else {
                try {
                    const fileUrl = SERVICE_GUIDE_PATHS[serviceId];
                    if (!fileUrl) {
                        showStatus('❌ 가이드를 찾을 수 없습니다.', 'error');
                        return;
                    }
                    const response = await fetch(fileUrl);
                    if (!response.ok) {
                        showStatus('❌ 가이드 파일을 불러올 수 없습니다.', 'error');
                        return;
                    }
                    mdContent = await response.text();
                } catch (error) {
                    showStatus('❌ 가이드 로드 실패. 번들 파일을 확인하세요.', 'error');
                    return;
                }
            }

                // 모달 생성
                const overlay = document.createElement('div');
                overlay.className = 'service-guide-overlay';
                overlay.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.6); display: flex; align-items: center; justify-content: center; z-index: 10000;';

                const modal = document.createElement('div');
                modal.className = 'service-guide-modal';
                modal.style.cssText = 'background: white; border-radius: 12px; max-width: 900px; width: 95%; max-height: 90vh; display: flex; flex-direction: column; box-shadow: var(--shadow-lg); position: relative;';

                modal.innerHTML = `
                    <div class="service-guide-modal-header" style="background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%); padding: 16px 20px; display: flex; justify-content: space-between; align-items: center; border-radius: 12px 12px 0 0; cursor: move; user-select: none;">
                        <div style="font-size: 18px; font-weight: 700; color: white; pointer-events: none;">${title} <span style="font-size: 11px; opacity: 0.8;">- 드래그하여 이동</span></div>
                        <div style="display: flex; gap: 8px;">
                            <button onclick="copyServiceGuideContent()" title="마크다운 복사"
                                    style="padding: 6px 14px; border-radius: 4px; border: 1px solid rgba(255,255,255,0.5); background: rgba(255,255,255,0.15); color: white; cursor: pointer; font-size: 12px; font-weight: 500; display: flex; align-items: center; gap: 4px;">
                                📋 MD 파일 복사하기
                            </button>
                            <button onclick="this.closest('.service-guide-overlay').remove()"
                                    style="padding: 6px 14px; border-radius: 4px; border: 1px solid rgba(255,255,255,0.5); background: rgba(255,255,255,0.15); color: white; cursor: pointer; font-size: 12px; font-weight: 500; display: flex; align-items: center; gap: 4px;">
                                ✕ 닫기
                            </button>
                        </div>
                    </div>
                    <div style="padding: 8px 16px; background: #FEF3C7; border-bottom: 1px solid #F59E0B; font-size: 11px; color: #92400E;">
                        💡 <strong>복사해서 사용하세요:</strong> 📋 버튼을 클릭하면 마크다운 원본이 클립보드에 복사됩니다.
                    </div>
                    <div id="serviceGuideContent" class="service-guide-content" style="flex: 1; overflow-y: auto; padding: 20px;">
                        ${renderServiceGuideMarkdown(mdContent)}
                    </div>
                `;

                // 마크다운 원본 저장 (복사용)
                modal.dataset.mdContent = mdContent;

                overlay.appendChild(modal);
                overlay.onclick = (e) => {
                    if (e.target === overlay) overlay.remove();
                };

                document.body.appendChild(overlay);

                // 드래그 기능 추가
                const header = modal.querySelector('.service-guide-modal-header');
                let isDragging = false;
                let startX, startY, initialX, initialY;

                header.addEventListener('mousedown', (e) => {
                    if (e.target.tagName === 'BUTTON') return;
                    isDragging = true;
                    startX = e.clientX;
                    startY = e.clientY;
                    const rect = modal.getBoundingClientRect();
                    initialX = rect.left;
                    initialY = rect.top;
                    overlay.style.alignItems = 'flex-start';
                    overlay.style.justifyContent = 'flex-start';
                    modal.style.position = 'fixed';
                    modal.style.left = initialX + 'px';
                    modal.style.top = initialY + 'px';
                    modal.style.margin = '0';
                    e.preventDefault();
                });

                document.addEventListener('mousemove', (e) => {
                    if (!isDragging) return;
                    const deltaX = e.clientX - startX;
                    const deltaY = e.clientY - startY;
                    let newX = initialX + deltaX;
                    let newY = initialY + deltaY;
                    const modalRect = modal.getBoundingClientRect();
                    newX = Math.max(0, Math.min(newX, window.innerWidth - modalRect.width));
                    newY = Math.max(0, Math.min(newY, window.innerHeight - modalRect.height));
                    modal.style.left = newX + 'px';
                    modal.style.top = newY + 'px';
                });

                document.addEventListener('mouseup', () => {
                    isDragging = false;
                });
        }

        /**
         * 서비스 가이드 마크다운 복사
         */
        function copyServiceGuideContent() {
            const modal = document.querySelector('.service-guide-modal');
            if (modal && modal.dataset.mdContent) {
                navigator.clipboard.writeText(modal.dataset.mdContent).then(() => {
                    showStatus('✅ 마크다운이 클립보드에 복사되었습니다!', 'success');
                }).catch(err => {
                    showStatus('❌ 복사 실패', 'error');
                });
            }
        }

        /**
         * HTML 이스케이프 (XSS 방지)
         */
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        /**
         * Tips 전체 보기 모달 (아코디언 방식)
         */
        function openTipsViewer() {
            // 카테고리 목록 추출
            const categories = [...new Set(TIPS_CONTENTS.map(item => item.category))];
            currentTipsCategory = '전체';

            const overlay = document.createElement('div');
            overlay.className = 'tips-viewer-overlay';
            overlay.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.6); display: flex; align-items: center; justify-content: center; z-index: 10000;';

            const modal = document.createElement('div');
            modal.className = 'tips-modal-draggable';
            modal.style.cssText = 'background: white; border-radius: 12px; max-width: 900px; width: 95%; max-height: 90vh; display: flex; flex-direction: column; box-shadow: var(--shadow-lg); position: relative;';

            // 카테고리 버튼 HTML 생성
            let categoryBtnsHtml = `<button class="tips-category-btn active" data-category="전체" onclick="filterTipsByCategory('전체')">전체</button>`;
            categories.forEach(cat => {
                categoryBtnsHtml += `<button class="tips-category-btn" data-category="${cat}" onclick="filterTipsByCategory('${cat}')">${cat}</button>`;
            });

            modal.innerHTML = `
                <div class="tips-modal-header" style="background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%); padding: 16px 20px; display: flex; justify-content: space-between; align-items: center; border-radius: 12px 12px 0 0; cursor: move; user-select: none;">
                    <div style="font-size: 18px; font-weight: 700; color: white; pointer-events: none;">💡 Tips (${TIPS_CONTENTS.length}개) <span style="font-size: 11px; opacity: 0.8;">- 드래그하여 이동</span></div>
                    <button onclick="this.closest('.tips-viewer-overlay').remove()"
                            style="background: rgba(255, 255, 255, 0.2); border: none; color: white; font-size: 13px; cursor: pointer; padding: 6px 14px; border-radius: 8px; display: flex; align-items: center; gap: 4px; font-weight: 500;">
                        ✕ 닫기
                    </button>
                </div>
                <div style="padding: 12px 16px; border-bottom: 1px solid #E5E7EB;">
                    <input type="text" id="tipsViewerSearch" placeholder="🔍 Tips 검색..."
                           oninput="filterTipsInViewer(this.value)"
                           style="width: 100%; padding: 10px 14px; border: 1px solid #DDD6FE; border-radius: 8px; font-size: 14px; outline: none; transition: border-color 0.2s;"
                           onfocus="this.style.borderColor='#8B5CF6'"
                           onblur="this.style.borderColor='#DDD6FE'">
                </div>
                <div style="padding: 8px 16px; border-bottom: 1px solid #E5E7EB; display: flex; gap: 6px; flex-wrap: wrap;">
                    ${categoryBtnsHtml}
                </div>
                <style>
                    .tips-category-btn {
                        padding: 5px 12px;
                        border: 1px solid #DDD6FE;
                        border-radius: 16px;
                        background: white;
                        color: #7C3AED;
                        font-size: 11px;
                        cursor: pointer;
                        transition: all 0.2s;
                    }
                    .tips-category-btn:hover {
                        background: #F5F3FF;
                    }
                    .tips-category-btn.active {
                        background: #8B5CF6;
                        color: white;
                        border-color: #8B5CF6;
                    }
                    .tip-accordion {
                        margin-bottom: 6px;
                        border: 1px solid #E5E7EB;
                        border-radius: 8px;
                        overflow: hidden;
                        transition: all 0.2s;
                    }
                    .tip-accordion:hover {
                        border-color: #8B5CF6;
                    }
                    .tip-accordion-header {
                        padding: 12px 14px;
                        background: #FAFAFA;
                        cursor: pointer;
                        display: flex;
                        align-items: center;
                        justify-content: space-between;
                        transition: background 0.2s;
                    }
                    .tip-accordion-header:hover {
                        background: #F5F3FF;
                    }
                    .tip-accordion.open .tip-accordion-header {
                        background: #F5F3FF;
                        border-bottom: 1px solid #E5E7EB;
                    }
                    .tip-accordion-title {
                        font-size: 14px;
                        font-weight: 500;
                        color: #374151;
                        display: flex;
                        align-items: center;
                        gap: 8px;
                    }
                    .tip-accordion-arrow {
                        
                        color: #8B5CF6;
                        transition: transform 0.2s;
                    }
                    .tip-accordion.open .tip-accordion-arrow {
                        transform: rotate(180deg);
                    }
                    .tip-accordion-content {
                        padding: 0;
                        max-height: 0;
                        overflow: hidden;
                        background: white;
                        transition: max-height 0.3s ease, padding 0.3s ease;
                    }
                    .tip-accordion.open .tip-accordion-content {
                        padding: 14px;
                        max-height: 200px;
                    }
                    .tip-accordion-text {
                        font-size: 14px;
                        line-height: 1.6;
                        color: #4B5563;
                    }
                </style>
                <div id="tipsViewerContent" style="flex: 1; overflow-y: auto; padding: 16px;">
                    <!-- Tips 목록이 여기에 렌더링됨 -->
                </div>
            `;

            overlay.appendChild(modal);
            overlay.onclick = (e) => {
                if (e.target === overlay) overlay.remove();
            };

            document.body.appendChild(overlay);

            // 드래그 기능 추가
            const header = modal.querySelector('.tips-modal-header');
            let isDragging = false;
            let startX, startY, initialX, initialY;

            header.addEventListener('mousedown', (e) => {
                if (e.target.tagName === 'BUTTON') return; // 닫기 버튼 클릭 시 드래그 안함

                isDragging = true;
                startX = e.clientX;
                startY = e.clientY;

                // 현재 모달 위치 계산
                const rect = modal.getBoundingClientRect();
                initialX = rect.left;
                initialY = rect.top;

                // 중앙 정렬 해제하고 절대 위치로 변경
                overlay.style.alignItems = 'flex-start';
                overlay.style.justifyContent = 'flex-start';
                modal.style.position = 'fixed';
                modal.style.left = initialX + 'px';
                modal.style.top = initialY + 'px';
                modal.style.margin = '0';

                e.preventDefault();
            });

            document.addEventListener('mousemove', (e) => {
                if (!isDragging) return;

                const deltaX = e.clientX - startX;
                const deltaY = e.clientY - startY;

                let newX = initialX + deltaX;
                let newY = initialY + deltaY;

                // 화면 밖으로 나가지 않도록 제한
                const modalRect = modal.getBoundingClientRect();
                newX = Math.max(0, Math.min(newX, window.innerWidth - modalRect.width));
                newY = Math.max(0, Math.min(newY, window.innerHeight - modalRect.height));

                modal.style.left = newX + 'px';
                modal.style.top = newY + 'px';
            });

            document.addEventListener('mouseup', () => {
                isDragging = false;
            });

            // 초기 렌더링
            renderTipsInViewer(TIPS_CONTENTS);
        }

        /**
         * Tips 뷰어 내 목록 렌더링 (아코디언 방식)
         */
        function renderTipsInViewer(tips) {
            const contentDiv = document.getElementById('tipsViewerContent');
            if (!contentDiv) return;

            if (tips.length === 0) {
                contentDiv.innerHTML = `
                    <div style="padding: 40px; text-align: center; color: #9CA3AF;">
                        검색 결과가 없습니다.
                    </div>
                `;
                return;
            }

            // 카테고리별로 그룹화
            const byCategory = {};
            tips.forEach(item => {
                if (!byCategory[item.category]) byCategory[item.category] = [];
                byCategory[item.category].push(item);
            });

            let html = '';
            let tipIndex = 0;
            Object.keys(byCategory).forEach(category => {
                html += `
                    <div style="margin-bottom: 10px;">
                        <div style="font-size: 11px; font-weight: 600; color: #8B5CF6; margin-bottom: 6px; padding-left: 4px;">
                            📂 ${category} (${byCategory[category].length})
                        </div>
                `;
                byCategory[category].forEach(item => {
                    const escapedCategory = item.category.replace(/'/g, "\\'");
                    const escapedTitle = item.title.replace(/'/g, "\\'");
                    html += `
                        <div class="tip-item" onclick="showTipDetail('${escapedCategory}', '${escapedTitle}')"
                             style="padding: 12px 16px; margin-bottom: 8px; background: white; border-radius: 8px; cursor: pointer; border: 1px solid #e5e7eb; transition: all 0.2s;"
                             onmouseover="this.style.borderColor='#8B5CF6'; this.style.background='#F5F3FF';"
                             onmouseout="this.style.borderColor='#e5e7eb'; this.style.background='white';">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <span style="color: #8B5CF6;">💡</span>
                                <span style="font-size: 14px; font-weight: 500; color: #333;">${item.title}</span>
                            </div>
                        </div>
                    `;
                    tipIndex++;
                });
                html += '</div>';
            });

            contentDiv.innerHTML = html;
        }

        /**
         * 아코디언 토글
         */
        function toggleTipAccordion(index) {
            const accordion = document.getElementById(`tipAccordion${index}`);
            if (accordion) {
                accordion.classList.toggle('open');
            }
        }

        /**
         * Tips 뷰어 내 검색
         */
        function filterTipsInViewer(query) {
            const searchTerm = query.toLowerCase().trim();
            let filtered = TIPS_CONTENTS;

            // 카테고리 필터 적용
            if (currentTipsCategory !== '전체') {
                filtered = filtered.filter(item => item.category === currentTipsCategory);
            }

            // 검색어 필터 적용
            if (searchTerm) {
                filtered = filtered.filter(item =>
                    item.title.toLowerCase().includes(searchTerm)
                );
            }

            renderTipsInViewer(filtered);
        }

        /**
         * 카테고리 필터
         */
        function filterTipsByCategory(category) {
            currentTipsCategory = category;

            // 버튼 활성화 상태 변경
            document.querySelectorAll('.tips-category-btn').forEach(btn => {
                if (btn.dataset.category === category) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });

            // 검색어도 함께 적용
            const searchInput = document.getElementById('tipsViewerSearch');
            const query = searchInput ? searchInput.value : '';
            filterTipsInViewer(query);
        }

        // 페이지 로드 시 Supabase 초기화
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initSupabase);
        } else {
            initSupabase();
        }

        // URL 파라미터로 섹션 이동 처리
        window.addEventListener('load', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const section = urlParams.get('section');

            if (section === 'learning') {
                setTimeout(scrollToLearningContent, 500);
            } else if (section === 'faq') {
                setTimeout(scrollToFaq, 500);
            }
        });
    </script>
<script src="/Briefings_OrderSheets/Briefings/guides.js"></script>
<script src="/Briefings_OrderSheets/OrderSheet_Templates/ordersheets.js"></script>
<script src="/%EB%B6%80%EC%88%98%EC%A0%81_%EA%B3%A0%EC%9C%A0%EA%B8%B0%EB%8A%A5/%EC%BD%98%ED%85%90%EC%B8%A0/%EC%99%B8%EB%B6%80_%EC%97%B0%EB%8F%99_%EC%84%A4%EC%A0%95_Guide/service-guides.js"></script>

<!-- 모바일 사이드바 토글 스크립트 -->
<script>
    // 사이드바 요소
    const leftSidebar = document.querySelector('.left-sidebar');
    const rightSidebar = document.querySelector('.right-sidebar');
    const sidebarOverlay = document.querySelector('.sidebar-overlay');

    // 왼쪽 사이드바 토글
    function toggleLeftSidebar() {
        leftSidebar.classList.toggle('open');
        sidebarOverlay.classList.toggle('active');
        // 오른쪽 닫기
        rightSidebar.classList.remove('open');
    }

    // 오른쪽 사이드바 토글
    function toggleRightSidebar() {
        rightSidebar.classList.toggle('open');
        sidebarOverlay.classList.toggle('active');
        // 왼쪽 닫기
        leftSidebar.classList.remove('open');
    }

    // 왼쪽 사이드바 닫기
    function closeLeftSidebar() {
        leftSidebar.classList.remove('open');
        sidebarOverlay.classList.remove('active');
    }

    // 오른쪽 사이드바 닫기
    function closeRightSidebar() {
        rightSidebar.classList.remove('open');
        sidebarOverlay.classList.remove('active');
    }

    // 모든 사이드바 닫기
    function closeAllSidebars() {
        leftSidebar.classList.remove('open');
        rightSidebar.classList.remove('open');
        sidebarOverlay.classList.remove('active');
    }

    // ESC 키로 닫기
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            closeAllSidebars();
        }
    });
</script>

    <!-- FAB 버튼 (모바일용) -->
    <!-- FAB 버튼 - 우측 하단 (앰버/골드, 우측 사이드바 전용) -->
    <div class="fab-container">
        <button class="fab-btn fab-info" onclick="toggleRightSidebar()" title="우측 정보 패널">≡</button>
    </div>
</body>

</html>