# 학습용 콘텐츠 제공 시스템

**확정일:** 2025-12-12
**버전:** 3.0
**방식:** Markdown → GitHub Push → GitHub Actions 자동 변환 → HTML → Supabase DB

---

## 1. 시스템 개요

### 1.1 목적
- 사용자에게 학습 콘텐츠(가이드, 튜토리얼, 문서)를 체계적으로 제공
- 콘텐츠 관리 및 배포 자동화
- 3단계 분류 체계를 통한 효율적인 콘텐츠 탐색

### 1.2 핵심 원칙
- **자동화 우선**: 수동 입력 최소화, GitHub Actions 기반 자동 처리
- **단일 소스**: MD 파일이 유일한 원본 (Single Source of Truth)
- **분리 저장**: 콘텐츠(GitHub) / 메타데이터(Supabase DB) 분리

---

## 2. 시스템 아키텍처

### 2.1 전체 흐름도

```
┌─────────────────────────────────────────────────────────────────┐
│  1단계: 콘텐츠 작성 (로컬)                                       │
│  └─ 학습용_콘텐츠/ 폴더에 .md 파일 작성                          │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│  2단계: Push 요청                                                │
│  └─ 사용자: "푸시해줘" → Claude Code가 git push 실행             │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│  3단계: GitHub Actions 자동 실행                                 │
│  └─ .md 파일 감지 → .html 파일 자동 변환 → 커밋                  │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│  4단계: DB 등록 (Claude Code)                                    │
│  └─ GitHub raw URL 생성 → Supabase learning_contents 테이블     │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│  5단계: Dashboard에서 조회                                       │
│  └─ 이용자가 학습용 콘텐츠 클릭 → HTML 파일 로드 → 화면 표시     │
└─────────────────────────────────────────────────────────────────┘
```

### 2.2 구성 요소

| 구성 요소 | 역할 | 위치 |
|----------|------|------|
| MD 파일 | 콘텐츠 원본 + 메타데이터 | `학습용_콘텐츠/` 폴더 |
| GitHub Actions | MD→HTML 자동 변환 | `.github/workflows/convert-md-to-html.yml` |
| 변환 스크립트 | HTML 변환 로직 | `scripts/convert-md-to-html.js` |
| GitHub | HTML 콘텐츠 호스팅 | GitHub Repository (raw URL) |
| Supabase DB | 메타데이터 저장 | learning_contents 테이블 |
| Frontend | 사용자 조회 인터페이스 | 프로토타입 웹앱 |

---

## 3. MD 파일 구조

### 3.1 Frontmatter 템플릿 (선택)

메타데이터를 포함할 경우 다음 형식 사용:

```yaml
---
depth1: "대분류명"          # 예: "웹개발 기초", "Claude 사용법"
depth2: "중분류명"          # 예: "HTML/CSS", "프롬프트 엔지니어링"
depth3: "소분류명"          # 예: "폼 요소" (없으면 생략)
title: "콘텐츠 제목"        # 예: "HTML 폼 태그 완벽 가이드"
description: "콘텐츠 설명"  # 예: "웹 폼의 기본 구조와 주요 속성"
display_order: 1            # 정렬 순서 (기본값: 0)
---

# 콘텐츠 제목

본문 내용...
```

### 3.2 폴더 구조

```
학습용_콘텐츠/
├── 1_Claude_사용법/
│   └── Claude&ClaudeCode사용법/
│       ├── 1편_Claude란_무엇인가.md
│       ├── 2편_프롬프트_엔지니어링_기초편.md
│       └── ... (25개)
├── 2_웹개발_지식/
│   ├── Web_Development/
│   │   └── 회원가입을_위한_이메일_인증_시스템_구축_방법.md
│   └── 웹개발 기초지식/
│       ├── 1편 웹개발 핵심 개념 & 용어 이해하기.md
│       └── ... (21개)
├── 3_AI_도구_활용/
│   └── Claude_Code/
│       └── 3_고급/
└── 학습용_콘텐츠_제공_프로세스.md  ← 이 문서
```

### 3.3 Frontmatter 필드 설명

| 필드 | 타입 | 필수 | 설명 |
|------|------|------|------|
| depth1 | string | O | 대분류 (메뉴 1단계) |
| depth2 | string | O | 중분류 (메뉴 2단계) |
| depth3 | string | X | 소분류 (메뉴 3단계) |
| title | string | O | 콘텐츠 제목 |
| description | string | X | 콘텐츠 설명 |
| display_order | number | X | 정렬 순서 (기본값: 0) |

---

## 4. GitHub Actions 자동화

### 4.1 설정 파일

**위치:** `.github/workflows/convert-md-to-html.yml`

**트리거:** `학습용_콘텐츠/**/*.md` 파일이 push되면 자동 실행

### 4.2 처리 과정

```
1. 저장소 체크아웃
       │
       ▼
2. Node.js 설정
       │
       ▼
3. marked 라이브러리 설치
       │
       ▼
4. 변환 스크립트 실행 (scripts/convert-md-to-html.js)
   - 학습용_콘텐츠/ 폴더 스캔
   - .md 파일 → .html 파일 변환
   - 스타일 적용된 완성된 HTML 생성
       │
       ▼
5. 변환된 .html 파일 자동 커밋 & push
```

### 4.3 변환 스크립트

**위치:** `scripts/convert-md-to-html.js`

**기능:**
- 학습용_콘텐츠/ 폴더 재귀 스캔
- 모든 .md 파일을 .html로 변환
- 스타일이 적용된 완성된 HTML 문서 생성
- 제목 자동 추출 (첫 번째 # 라인)

**HTML 템플릿 특징:**
- 반응형 디자인
- 코드 블록 스타일링
- 테이블 스타일링
- 뒤로 가기 버튼

---

## 5. 데이터베이스 스키마

### 5.1 learning_contents 테이블

```sql
CREATE TABLE learning_contents (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),

    -- 분류 체계
    depth1 VARCHAR(100) NOT NULL,       -- 대분류
    depth2 VARCHAR(100),                -- 중분류
    depth3 VARCHAR(100),                -- 소분류

    -- 콘텐츠 정보
    title VARCHAR(255) NOT NULL,        -- 제목
    description TEXT,                   -- 설명
    url VARCHAR(500) NOT NULL,          -- GitHub raw URL (.html)

    -- 정렬 및 관리
    display_order INT DEFAULT 0,        -- 표시 순서
    is_active BOOLEAN DEFAULT true,     -- 활성화 여부

    -- 원본 파일 추적
    source_path VARCHAR(500),           -- MD 파일 경로
    content_hash VARCHAR(64),           -- MD 파일 해시 (변경 감지용)

    -- 타임스탬프
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- 인덱스
CREATE INDEX idx_learning_contents_depth1 ON learning_contents(depth1);
CREATE INDEX idx_learning_contents_depth1_depth2 ON learning_contents(depth1, depth2);
```

### 5.2 GitHub URL 형식

```
https://raw.githubusercontent.com/{owner}/{repo}/main/학습용_콘텐츠/.../파일명.html
```

---

## 6. 프로세스 상세

### 6.1 새 콘텐츠 추가

```
1. 로컬에서 .md 파일 작성
   위치: 학습용_콘텐츠/{카테고리}/{파일명}.md
       │
       ▼
2. 사용자: "푸시해줘"
       │
       ▼
3. Claude Code 실행:
   git add 학습용_콘텐츠/
   git commit -m "학습용 콘텐츠 추가"
   git push
       │
       ▼
4. GitHub Actions 자동 실행
   .md → .html 변환 → 커밋
       │
       ▼
5. Claude Code가 DB에 등록
   INSERT INTO learning_contents (...)
       │
       ▼
6. Dashboard에서 조회 가능
```

### 6.2 기존 콘텐츠 수정

```
1. 로컬에서 .md 파일 수정
       │
       ▼
2. "푸시해줘"
       │
       ▼
3. GitHub Actions가 .html 자동 재변환
       │
       ▼
4. 끝! (URL 동일하므로 DB 수정 불필요)
```

### 6.3 콘텐츠 삭제

```
1. Admin Dashboard에서 삭제
   또는 DB에서 직접 DELETE
       │
       ▼
2. (선택) 로컬 및 GitHub에서 파일 삭제
```

---

## 7. 사용자 조회 흐름

### 7.1 조회 프로세스

```
사용자              Frontend             Supabase DB          GitHub
  │                    │                     │                  │
  │ 학습자료 클릭      │                     │                  │
  │───────────────────▶│                     │                  │
  │                    │ 목록 조회           │                  │
  │                    │────────────────────▶│                  │
  │                    │ 분류/제목/URL 반환  │                  │
  │                    │◀────────────────────│                  │
  │ 목록 표시          │                     │                  │
  │◀───────────────────│                     │                  │
  │                    │                     │                  │
  │ 콘텐츠 클릭        │                     │                  │
  │───────────────────▶│                     │                  │
  │                    │ URL로 HTML 요청     │                  │
  │                    │─────────────────────────────────────▶│
  │                    │ HTML 반환           │                  │
  │                    │◀─────────────────────────────────────│
  │ 콘텐츠 표시        │                     │                  │
  │◀───────────────────│                     │                  │
```

### 7.2 Frontend 표시 예시

```
┌────────────────────────────────────────────────────────────┐
│  학습 자료                                         🔍 검색  │
├────────────────────────────────────────────────────────────┤
│                                                            │
│  ▼ Claude 사용법                                          │
│    └─ ▼ Claude&ClaudeCode사용법                           │
│        ├─ 1편: Claude란 무엇인가                          │
│        ├─ 2편: 프롬프트 엔지니어링 기초                    │
│        ├─ 3편: 프롬프트 엔지니어링 고급                    │
│        └─ ... (20개)                                      │
│                                                            │
│  ▼ 웹개발 지식                                            │
│    ├─ ▼ Web_Development                                   │
│    │   └─ 회원가입을 위한 이메일 인증 시스템               │
│    └─ ▼ 웹개발 기초지식                                   │
│        ├─ 1편: 웹개발 핵심 개념 & 용어                     │
│        └─ ... (21개)                                      │
│                                                            │
│  ▶ AI 도구 활용                                           │
│                                                            │
└────────────────────────────────────────────────────────────┘
```

---

## 8. Admin Dashboard 관리

### 8.1 학습용 콘텐츠 관리 기능

| 기능 | 설명 |
|------|------|
| 조회 | 전체 콘텐츠 목록 확인 |
| 추가 | 새 콘텐츠 등록 (제목, 카테고리, URL 입력) |
| 수정 | 메타정보 수정 (제목, 카테고리, URL) |
| 삭제 | 콘텐츠 삭제 |
| 활성화/비활성화 | is_active 토글 |

### 8.2 관리 방식

```
콘텐츠 본문 수정:
  로컬 .md 파일 수정 → push → 자동 반영

메타정보 수정:
  Admin Dashboard에서 직접 수정 (제목, 분류, URL)
```

---

## 9. 현재 콘텐츠 현황

| 카테고리 | 하위 분류 | 파일 수 |
|----------|----------|---------|
| 1_Claude_사용법 | Claude&ClaudeCode사용법 | 25개 |
| 2_웹개발_지식 | Web_Development | 2개 |
| 2_웹개발_지식 | 웹개발 기초지식 | 26개 |
| 3_AI_도구_활용 | Claude_Code | 1개 |
| **총계** | | **54개** |

---

## 10. 관련 파일

| 파일 | 위치 | 용도 |
|------|------|------|
| GitHub Actions 설정 | `.github/workflows/convert-md-to-html.yml` | MD→HTML 자동 변환 트리거 |
| 변환 스크립트 | `scripts/convert-md-to-html.js` | HTML 변환 로직 |
| 콘텐츠 폴더 | `학습용_콘텐츠/` | .md 원본 파일들 |
| DB 스키마 | `P3_프로토타입_제작/Database/06_create_learning_contents.sql` | 테이블 정의 |

---

## 11. 장점

✅ **완전 자동화**
- .md 파일만 작성하면 끝
- HTML 변환 자동 (GitHub Actions)
- 별도 호스팅 불필요 (GitHub 무료)

✅ **유지보수 쉬움**
- .md 파일만 수정하면 자동 반영
- URL 변경 없음

✅ **백업 자동**
- GitHub에 모든 버전 기록
- 로컬 컴퓨터 고장나도 안전

✅ **검색 및 복사 가능**
- HTML 파일이므로 텍스트 검색 가능
- 코드 복사 가능 (PDF 대비 장점)

---

## 12. 버전 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| 1.0 | 2025-11-24 | 최초 작성 (Google Drive + PDF 방식) |
| 2.0 | 2025-12-12 | GitHub + HTML 자동 변환 방식으로 변경 |
| 3.0 | 2025-12-12 | 학습콘텐츠_제공_시스템.md 통합, 상세 내용 보강 |

---

**문서 위치:** `학습용_콘텐츠/학습용_콘텐츠_제공_프로세스.md`
**관련 문서:** (통합됨) `P2_프로젝트_기획/Content_System/학습콘텐츠_제공_시스템.md`
