<svg width="1200" height="800" viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
  <!-- 도 5: Scheduler/Leveler 모듈 구조도 -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="black"/>
    </marker>
  </defs>

  <!-- 제목 -->
  <text x="600" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold">Scheduler/Leveler 모듈 (70) 구조</text>

  <!-- 입력 1: DAG -->
  <rect x="50" y="80" width="180" height="70" fill="none" stroke="black" stroke-width="3" rx="5"/>
  <text x="140" y="115" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold">DAG</text>
  <text x="140" y="140" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">(Graph Builder 출력)</text>

  <!-- 입력 2: 자원 풀 (130) -->
  <rect x="50" y="180" width="180" height="70" fill="none" stroke="black" stroke-width="2" rx="5"/>
  <text x="140" y="215" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold">자원 풀 (130)</text>
  <text x="140" y="240" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">가용 자원 집합</text>

  <!-- 화살표: 입력 → 위상정렬 -->
  <line x1="230" y1="115" x2="300" y2="115" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="230" y1="215" x2="260" y2="215" stroke="black" stroke-width="2"/>
  <line x1="260" y1="215" x2="260" y2="115" stroke="black" stroke-width="2"/>

  <!-- 1단계: 위상정렬부 (71) -->
  <rect x="310" y="70" width="220" height="90" fill="none" stroke="black" stroke-width="2" rx="5"/>
  <text x="420" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold">위상정렬부 (71)</text>
  <text x="420" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">Kahn/DFS 알고리즘</text>
  <text x="420" y="150" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">의존 순서 결정</text>

  <!-- 화살표: 위상정렬 → 슬롯 할당 -->
  <line x1="530" y1="115" x2="600" y2="115" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- 2단계: 슬롯 할당부 (72) -->
  <rect x="610" y="70" width="220" height="90" fill="none" stroke="black" stroke-width="2" rx="5"/>
  <text x="720" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold">슬롯 할당부 (72)</text>
  <text x="720" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">자원 제약 기반 할당</text>
  <text x="720" y="150" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">병렬 슬롯팅</text>

  <!-- 화살표: 슬롯 할당 → 비용함수 최적화 -->
  <line x1="830" y1="115" x2="900" y2="115" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- 3단계: 비용함수 최적화부 (73) -->
  <rect x="910" y="60" width="250" height="110" fill="none" stroke="black" stroke-width="2" rx="5"/>
  <text x="1035" y="90" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold">비용함수 최적화부 (73)</text>
  <text x="1035" y="120" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">비용함수 J 최소화</text>
  <text x="1035" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="13">반복 최적화 수행</text>
  <text x="1035" y="165" text-anchor="middle" font-family="Arial, sans-serif" font-size="13">마감/우선순위 고려</text>

  <!-- 비용함수 박스 -->
  <rect x="300" y="220" width="650" height="120" fill="none" stroke="black" stroke-width="3" rx="5"/>
  <text x="625" y="260" text-anchor="middle" font-family="Arial, sans-serif" font-size="22" font-weight="bold">비용함수 J</text>
  <text x="625" y="300" text-anchor="middle" font-family="Courier New, monospace" font-size="24" font-weight="bold">J = α·makespan + β·대기시간 + γ·자원과부하 + δ·리스크</text>
  <text x="625" y="330" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">※ α, β, γ, δ 파라미터는 도메인/프로젝트에 따라 조정 가능</text>

  <!-- 화살표: 비용함수 → 레벨 재배치 -->
  <line x1="1035" y1="170" x2="1035" y2="410" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- 4단계: 레벨 재배치부 (74) -->
  <rect x="860" y="420" width="300" height="120" fill="none" stroke="black" stroke-width="2" rx="5"/>
  <text x="1010" y="460" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold">레벨 재배치부 (74)</text>
  <text x="1010" y="490" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">제약 위반 시 Level 조정</text>
  <text x="1010" y="515" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">필요시 SAL ID 업데이트</text>
  <text x="1010" y="535" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">→ ID Chain에 기록</text>

  <!-- 화살표: 레벨 재배치 → Critical Path -->
  <line x1="860" y1="480" x2="760" y2="480" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- 5단계: Critical Path 계산 -->
  <rect x="480" y="420" width="280" height="120" fill="none" stroke="black" stroke-width="2" rx="5"/>
  <text x="620" y="460" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold">Critical Path 계산</text>
  <text x="620" y="490" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">최장 경로 산출</text>
  <text x="620" y="515" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">프로젝트 완료 영향 경로</text>
  <text x="620" y="535" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">Critical 엣지 (112) 표시</text>

  <!-- 화살표: Critical Path → 스케줄 출력 -->
  <line x1="620" y1="540" x2="620" y2="600" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- 출력: 스케줄 (140) -->
  <rect x="470" y="610" width="300" height="100" fill="none" stroke="black" stroke-width="3" rx="5"/>
  <text x="620" y="650" text-anchor="middle" font-family="Arial, sans-serif" font-size="22" font-weight="bold">스케줄 (140)</text>
  <text x="620" y="680" text-anchor="middle" font-family="Arial, sans-serif" font-size="16">최종 실행 일정</text>
  <text x="620" y="700" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">시간 슬롯 + 자원 할당 + Critical Path</text>

  <!-- 좌측: Scheduler/Leveler 모듈 요약 -->
  <rect x="50" y="400" width="200" height="200" fill="none" stroke="black" stroke-width="2" rx="5"/>
  <text x="150" y="430" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold">Scheduler/Leveler</text>
  <text x="150" y="455" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold">(70)</text>
  <line x1="60" y1="465" x2="240" y2="465" stroke="black" stroke-width="1"/>
  <text x="150" y="490" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">71: 위상정렬부</text>
  <text x="150" y="510" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">72: 슬롯 할당부</text>
  <text x="150" y="530" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">73: 비용함수 최적화부</text>
  <text x="150" y="550" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">74: 레벨 재배치부</text>
  <text x="150" y="580" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">130: 자원 풀</text>
  <text x="150" y="595" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">140: 스케줄</text>

  <!-- 피드백 루프 (레벨 재배치 시 재처리) -->
  <path d="M 1100 540 Q 1150 600 1150 220 Q 1150 100 900 100" fill="none" stroke="black" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#arrowhead)"/>
  <text x="1130" y="380" font-family="Arial, sans-serif" font-size="12" fill="black">재최적화</text>

</svg>
