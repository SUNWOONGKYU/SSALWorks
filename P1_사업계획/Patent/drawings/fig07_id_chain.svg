<svg width="1400" height="800" viewBox="0 0 1400 800" xmlns="http://www.w3.org/2000/svg">
  <!-- 도 7: ID Chain 관리부 - 시간축 체인 시각화 -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="black"/>
    </marker>
  </defs>

  <!-- 제목 -->
  <text x="700" y="40" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold">ID Chain 관리부 (90) - 시간축 체인 구조</text>

  <!-- 시간 축 -->
  <line x1="100" y1="200" x2="1300" y2="200" stroke="black" stroke-width="3" marker-end="url(#arrowhead)"/>
  <text x="1320" y="205" font-family="Arial, sans-serif" font-size="16">Time</text>
  <text x="80" y="205" font-family="Arial, sans-serif" font-size="14" text-anchor="end">t₀</text>

  <!-- 블록체인 스타일 체인 시각화 -->
  <!-- Block 1: S1DE1a -->
  <rect x="150" y="130" width="180" height="140" fill="none" stroke="black" stroke-width="3" rx="5"/>
  <rect x="150" y="130" width="180" height="35" fill="none" stroke="black" stroke-width="1"/>
  <text x="240" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold">Block #1</text>
  <text x="240" y="190" text-anchor="middle" font-family="Courier New, monospace" font-size="20" font-weight="bold">S1DE1a</text>
  <text x="240" y="215" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">Stage:1, Area:DE</text>
  <text x="240" y="235" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">Level:1, Var:a</text>
  <text x="240" y="260" text-anchor="middle" font-family="Arial, sans-serif" font-size="11">prev: null</text>

  <!-- 연결 화살표 1 -->
  <line x1="330" y1="200" x2="420" y2="200" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="375" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">append</text>

  <!-- Block 2: S2DE2a -->
  <rect x="430" y="130" width="180" height="140" fill="none" stroke="black" stroke-width="3" rx="5"/>
  <rect x="430" y="130" width="180" height="35" fill="none" stroke="black" stroke-width="1"/>
  <text x="520" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold">Block #2</text>
  <text x="520" y="190" text-anchor="middle" font-family="Courier New, monospace" font-size="20" font-weight="bold">S2DE2a</text>
  <text x="520" y="215" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">Stage:2, Area:DE</text>
  <text x="520" y="235" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">Level:2, Var:a</text>
  <text x="520" y="260" text-anchor="middle" font-family="Arial, sans-serif" font-size="11">prev: S1DE1a</text>

  <!-- 연결 화살표 2 -->
  <line x1="610" y1="200" x2="700" y2="200" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="655" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">append</text>

  <!-- Block 3: S3QA3a (현재) -->
  <rect x="710" y="130" width="180" height="140" fill="none" stroke="black" stroke-width="4" rx="5"/>
  <rect x="710" y="130" width="180" height="35" fill="none" stroke="black" stroke-width="1"/>
  <text x="800" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold">Block #3 (current)</text>
  <text x="800" y="190" text-anchor="middle" font-family="Courier New, monospace" font-size="20" font-weight="bold">S3QA3a</text>
  <text x="800" y="215" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">Stage:3, Area:QA</text>
  <text x="800" y="235" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">Level:3, Var:a</text>
  <text x="800" y="260" text-anchor="middle" font-family="Arial, sans-serif" font-size="11">prev: S2DE2a</text>

  <!-- 미래 블록 (점선) -->
  <line x1="890" y1="200" x2="980" y2="200" stroke="black" stroke-width="2" stroke-dasharray="5,3" marker-end="url(#arrowhead)"/>
  <rect x="990" y="130" width="180" height="140" fill="none" stroke="black" stroke-width="2" stroke-dasharray="5,3" rx="5"/>
  <text x="1080" y="200" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" fill="gray">Next Block</text>
  <text x="1080" y="225" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="gray">(future)</text>

  <!-- chain_text 표현 (91) -->
  <rect x="200" y="320" width="800" height="60" fill="none" stroke="black" stroke-width="2" rx="5"/>
  <text x="600" y="340" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold">chain_text (91) - 문자열 표현</text>
  <text x="600" y="365" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold">"S1DE1a_S2DE2a_S3QA3a"</text>

  <!-- chain_list 표현 (92) -->
  <rect x="200" y="400" width="800" height="60" fill="none" stroke="black" stroke-width="2" rx="5"/>
  <text x="600" y="420" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold">chain_list (92) - 배열 표현</text>
  <text x="600" y="445" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold">["S1DE1a", "S2DE2a", "S3QA3a"]</text>

  <!-- current_id (93) -->
  <rect x="200" y="480" width="380" height="60" fill="none" stroke="black" stroke-width="2" rx="5"/>
  <text x="390" y="500" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold">current_id (93)</text>
  <text x="390" y="525" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold">"S3QA3a"</text>

  <!-- history (배열 슬라이스) -->
  <rect x="620" y="480" width="380" height="60" fill="none" stroke="black" stroke-width="2" rx="5"/>
  <text x="810" y="500" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold">history (chain_list[:-1])</text>
  <text x="810" y="525" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold">["S1DE1a", "S2DE2a"]</text>

  <!-- 하단: ID Chain 관리부 구성요소 -->
  <rect x="50" y="570" width="300" height="200" fill="none" stroke="black" stroke-width="2" rx="5"/>
  <text x="200" y="600" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold">ID Chain 관리부 (90)</text>
  <line x1="60" y1="615" x2="340" y2="615" stroke="black" stroke-width="1"/>
  <text x="200" y="645" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">91: chain_text (문자열)</text>
  <text x="200" y="670" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">92: chain_list (배열)</text>
  <text x="200" y="695" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">93: current_id (현재 ID)</text>
  <text x="200" y="720" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">94: Append부 (체인 추가)</text>
  <text x="200" y="745" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">95: Resolver (이력 해석)</text>

  <!-- Append부 (94) -->
  <rect x="400" y="590" width="280" height="100" fill="none" stroke="black" stroke-width="2" rx="5"/>
  <text x="540" y="620" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold">Append부 (94)</text>
  <text x="540" y="650" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">새 SAL ID 수신</text>
  <text x="540" y="675" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">→ 체인 끝에 추가 (Append-only)</text>

  <!-- Resolver (95) -->
  <rect x="720" y="590" width="280" height="100" fill="none" stroke="black" stroke-width="2" rx="5"/>
  <text x="860" y="620" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold">Resolver (95)</text>
  <text x="860" y="650" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">과거 ID 쿼리 시</text>
  <text x="860" y="675" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">→ 현재 위치로 해석</text>

  <!-- 우측: 특성 설명 -->
  <rect x="1050" y="570" width="300" height="200" fill="none" stroke="black" stroke-width="2" rx="5"/>
  <text x="1200" y="600" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold">ID Chain 특성</text>
  <line x1="1060" y1="615" x2="1340" y2="615" stroke="black" stroke-width="1"/>
  <text x="1200" y="645" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">✓ Append-only (추가 전용)</text>
  <text x="1200" y="670" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">✓ 블록체인 스타일 연결</text>
  <text x="1200" y="695" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">✓ 이력 추적 (Audit Trail)</text>
  <text x="1200" y="720" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">✓ 변경 이력 보존</text>
  <text x="1200" y="745" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">✓ 과거→현재 위치 해석</text>

</svg>
