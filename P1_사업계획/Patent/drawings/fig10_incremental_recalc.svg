<svg width="1600" height="900" viewBox="0 0 1600 900" xmlns="http://www.w3.org/2000/svg">
  <!-- 도 10: 증분 재계산 프로세스 플로우차트 -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="black"/>
    </marker>
  </defs>

  <rect width="1600" height="900" fill="white"/>

  <!-- 제목 -->
  <text x="800" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="28" font-weight="bold">증분 재계산 프로세스 (Incremental Recalculation)</text>

  <!-- Step 1: Task 변경 감지 -->
  <rect x="250" y="80" width="1100" height="80" rx="6" fill="white" stroke="black" stroke-width="3"/>
  <text x="800" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="28" font-weight="bold">1. Task 변경 감지</text>
  <line x1="800" y1="160" x2="800" y2="190" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- 변경 유형 분기 -->
  <polygon points="800,200 920,270 800,340 680,270" fill="white" stroke="black" stroke-width="2"/>
  <text x="800" y="265" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold">변경 유형?</text>
  <text x="800" y="290" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">(Task/좌표/의존)</text>

  <!-- 변경 유형 라벨 -->
  <text x="620" y="260" font-family="Arial, sans-serif" font-size="14">SAL ID 변경</text>
  <text x="920" y="260" font-family="Arial, sans-serif" font-size="14">속성만 변경</text>
  <text x="800" y="355" font-family="Arial, sans-serif" font-size="14">의존관계 변경</text>

  <!-- 속성만 변경 분기 (우측) -->
  <line x1="920" y1="270" x2="1050" y2="270" stroke="black" stroke-width="2"/>
  <line x1="1050" y1="270" x2="1050" y2="350" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <rect x="930" y="360" width="240" height="70" rx="5" fill="white" stroke="black" stroke-width="2"/>
  <text x="1050" y="395" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold">속성 직접 업데이트</text>
  <text x="1050" y="418" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">DAG 재구축 불필요</text>

  <line x1="1050" y1="430" x2="1050" y2="760" stroke="black" stroke-width="2"/>
  <line x1="1050" y1="760" x2="800" y2="760" stroke="black" stroke-width="2"/>

  <!-- SAL ID 변경 분기 (좌측) -->
  <line x1="680" y1="270" x2="550" y2="270" stroke="black" stroke-width="2"/>
  <line x1="550" y1="270" x2="550" y2="350" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <rect x="430" y="360" width="240" height="70" rx="5" fill="white" stroke="black" stroke-width="2"/>
  <text x="550" y="395" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold">Parser 재검증</text>
  <text x="550" y="418" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">새 SAL ID 유효성</text>

  <line x1="550" y1="430" x2="550" y2="470" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- ID Chain 업데이트 -->
  <rect x="430" y="480" width="240" height="70" rx="5" fill="white" stroke="black" stroke-width="2"/>
  <text x="550" y="515" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold">ID Chain Append</text>
  <text x="550" y="538" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">이력 기록 (94)</text>

  <line x1="550" y1="550" x2="550" y2="590" stroke="black" stroke-width="2"/>
  <line x1="550" y1="590" x2="800" y2="590" stroke="black" stroke-width="2"/>

  <!-- 의존관계 변경 분기 (중앙) -->
  <line x1="800" y1="340" x2="800" y2="400" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Step 2: 영향 범위 분석 -->
  <rect x="600" y="410" width="400" height="70" rx="5" fill="white" stroke="black" stroke-width="2"/>
  <text x="800" y="445" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold">2. 영향 범위 분석</text>
  <text x="800" y="468" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">후행 노드 집합 식별</text>

  <line x1="800" y1="480" x2="800" y2="520" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- 부분/전체 판단 분기 -->
  <polygon points="800,530 920,590 800,650 680,590" fill="white" stroke="black" stroke-width="2"/>
  <text x="800" y="580" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold">영향 범위</text>
  <text x="800" y="605" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">&lt; 30%?</text>

  <!-- 부분 재계산 (좌측) -->
  <text x="650" y="595" font-family="Arial, sans-serif" font-size="14">Yes</text>
  <line x1="680" y1="590" x2="450" y2="590" stroke="black" stroke-width="2"/>
  <line x1="450" y1="590" x2="450" y2="660" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <rect x="300" y="670" width="300" height="80" rx="5" fill="white" stroke="black" stroke-width="3"/>
  <text x="450" y="700" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold">3a. 부분 재계산</text>
  <text x="450" y="728" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">영향 받는 노드만 DAG 재구축</text>

  <line x1="600" y1="710" x2="700" y2="710" stroke="black" stroke-width="2"/>
  <line x1="700" y1="710" x2="700" y2="760" stroke="black" stroke-width="2"/>

  <!-- 전체 재계산 (우측) -->
  <text x="940" y="595" font-family="Arial, sans-serif" font-size="14">No</text>
  <line x1="920" y1="590" x2="1150" y2="590" stroke="black" stroke-width="2"/>
  <line x1="1150" y1="590" x2="1150" y2="660" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <rect x="1000" y="670" width="300" height="80" rx="5" fill="white" stroke="black" stroke-width="3"/>
  <text x="1150" y="700" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold">3b. 전체 재계산</text>
  <text x="1150" y="728" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">DAG 전체 재구축 (60)</text>

  <line x1="1000" y1="710" x2="900" y2="710" stroke="black" stroke-width="2"/>
  <line x1="900" y1="710" x2="900" y2="760" stroke="black" stroke-width="2"/>

  <!-- 합류점 -->
  <circle cx="800" cy="760" r="8" fill="black"/>

  <line x1="800" y1="768" x2="800" y2="800" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Step 4: 스케줄 재계산 -->
  <rect x="550" y="810" width="500" height="70" rx="5" fill="white" stroke="black" stroke-width="3"/>
  <text x="800" y="845" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold">4. Scheduler 재실행 (70)</text>
  <text x="800" y="868" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">스케줄 갱신 + Critical Path 재계산</text>

  <!-- 좌측: 판단 기준 박스 -->
  <rect x="50" y="500" width="280" height="180" fill="none" stroke="black" stroke-width="2" rx="5"/>
  <text x="190" y="530" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold">영향 범위 분석 기준</text>
  <line x1="60" y1="545" x2="320" y2="545" stroke="black" stroke-width="1"/>
  <text x="190" y="575" text-anchor="middle" font-family="Arial, sans-serif" font-size="13">영향 노드 / 전체 노드</text>
  <text x="190" y="600" text-anchor="middle" font-family="Arial, sans-serif" font-size="13">= 변경 비율</text>
  <line x1="60" y1="620" x2="320" y2="620" stroke="black" stroke-width="1"/>
  <text x="190" y="645" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">&lt; 30%: 부분 재계산 (효율적)</text>
  <text x="190" y="670" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">&gt;= 30%: 전체 재계산 (안전)</text>

  <!-- 우측: 증분 재계산 장점 박스 -->
  <rect x="1280" y="500" width="280" height="180" fill="none" stroke="black" stroke-width="2" rx="5"/>
  <text x="1420" y="530" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold">증분 재계산 장점</text>
  <line x1="1290" y1="545" x2="1550" y2="545" stroke="black" stroke-width="1"/>
  <text x="1420" y="575" text-anchor="middle" font-family="Arial, sans-serif" font-size="13">1. 연산 비용 절감</text>
  <text x="1420" y="600" text-anchor="middle" font-family="Arial, sans-serif" font-size="13">2. 실시간 반응성 향상</text>
  <text x="1420" y="625" text-anchor="middle" font-family="Arial, sans-serif" font-size="13">3. UI 지연 최소화</text>
  <text x="1420" y="650" text-anchor="middle" font-family="Arial, sans-serif" font-size="13">4. 대규모 DAG에서 효과적</text>
  <text x="1420" y="675" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">(1000+ 노드)</text>

  <!-- 하단: 변경 유형 설명 -->
  <rect x="50" y="750" width="280" height="130" fill="none" stroke="black" stroke-width="2" rx="5"/>
  <text x="190" y="780" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold">변경 유형 분류</text>
  <line x1="60" y1="795" x2="320" y2="795" stroke="black" stroke-width="1"/>
  <text x="190" y="820" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">SAL ID: 좌표 이동 (S2FE1→S3FE1)</text>
  <text x="190" y="840" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">속성: 이름/설명 변경</text>
  <text x="190" y="860" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">의존: predecessors 추가/삭제</text>

  <!-- 우측 하단: 관련 모듈 -->
  <rect x="1280" y="750" width="280" height="130" fill="none" stroke="black" stroke-width="2" rx="5"/>
  <text x="1420" y="780" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold">관련 모듈</text>
  <line x1="1290" y1="795" x2="1550" y2="795" stroke="black" stroke-width="1"/>
  <text x="1420" y="820" text-anchor="middle" font-family="Arial, sans-serif" font-size="13">50: Parser (ID 검증)</text>
  <text x="1420" y="845" text-anchor="middle" font-family="Arial, sans-serif" font-size="13">60: Graph Builder (DAG)</text>
  <text x="1420" y="870" text-anchor="middle" font-family="Arial, sans-serif" font-size="13">70: Scheduler (일정)</text>

</svg>
