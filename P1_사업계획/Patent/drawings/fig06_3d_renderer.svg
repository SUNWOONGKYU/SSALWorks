<svg width="1200" height="800" viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
  <!-- 도 6: 3D Renderer/UI 폐루프 상호작용 다이어그램 -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="black"/>
    </marker>
  </defs>

  <!-- 제목 -->
  <text x="600" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold">3D Renderer/UI 모듈 (80) - 폐루프 상호작용</text>

  <!-- 중앙 원형 배치를 위한 기준점: 600, 400 -->

  <!-- 1. 사용자 조작 (12시 방향) -->
  <rect x="450" y="70" width="300" height="90" fill="none" stroke="black" stroke-width="3" rx="5"/>
  <text x="600" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold">사용자 조작</text>
  <text x="600" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="16">Drag&Drop, 편집, 클릭</text>
  <text x="600" y="150" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">상호작용 처리부 (83)</text>

  <!-- 화살표: 사용자 조작 → SAL ID 수정 -->
  <line x1="750" y1="115" x2="850" y2="115" stroke="black" stroke-width="2"/>
  <line x1="850" y1="115" x2="850" y2="195" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- 2. SAL ID 수정/생성 (2시 방향) -->
  <rect x="780" y="200" width="200" height="80" fill="none" stroke="black" stroke-width="2" rx="5"/>
  <text x="880" y="235" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold">SAL ID 수정/생성</text>
  <text x="880" y="260" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">좌표 변경 반영</text>

  <!-- 화살표: SAL ID 수정 → Parser 재파싱 -->
  <line x1="880" y1="280" x2="880" y2="340" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- 3. Parser 재파싱 (4시 방향) -->
  <rect x="780" y="345" width="200" height="80" fill="none" stroke="black" stroke-width="2" rx="5"/>
  <text x="880" y="375" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold">Parser 재파싱</text>
  <text x="880" y="400" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">모듈 (50) 호출</text>
  <text x="880" y="420" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">유효성 재검증</text>

  <!-- 화살표: Parser → Graph Builder 재구성 -->
  <line x1="880" y1="425" x2="880" y2="485" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- 4. Graph Builder 재구성 (5시 방향) -->
  <rect x="750" y="490" width="260" height="80" fill="none" stroke="black" stroke-width="2" rx="5"/>
  <text x="880" y="520" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold">Graph Builder 재구성</text>
  <text x="880" y="545" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">모듈 (60) 호출</text>
  <text x="880" y="565" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">DAG 업데이트</text>

  <!-- 화살표: Graph Builder → Scheduler 재계산 -->
  <line x1="750" y1="530" x2="650" y2="530" stroke="black" stroke-width="2"/>
  <line x1="650" y1="530" x2="650" y2="595" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- 5. Scheduler 재계산 (7시 방향) -->
  <rect x="470" y="600" width="260" height="80" fill="none" stroke="black" stroke-width="2" rx="5"/>
  <text x="600" y="630" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold">Scheduler 재계산</text>
  <text x="600" y="655" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">모듈 (70) 호출</text>
  <text x="600" y="675" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">스케줄 업데이트</text>

  <!-- 화살표: Scheduler → 3D Renderer 재렌더링 -->
  <line x1="470" y1="640" x2="330" y2="640" stroke="black" stroke-width="2"/>
  <line x1="330" y1="640" x2="330" y2="555" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- 6. 3D Renderer 재렌더링 (9시 방향) -->
  <rect x="180" y="470" width="260" height="85" fill="none" stroke="black" stroke-width="2" rx="5"/>
  <text x="310" y="500" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold">3D Renderer 재렌더링</text>
  <text x="310" y="525" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">렌더링 엔진 (82)</text>
  <text x="310" y="545" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">3D Grid 시각화 갱신</text>

  <!-- 화살표: 3D Renderer → UI 업데이트 -->
  <line x1="310" y1="470" x2="310" y2="405" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- 7. UI 업데이트 (10시 방향) -->
  <rect x="180" y="320" width="260" height="85" fill="none" stroke="black" stroke-width="2" rx="5"/>
  <text x="310" y="350" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold">UI 업데이트</text>
  <text x="310" y="375" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">실시간 갱신부 (84)</text>
  <text x="310" y="395" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">화면 반영</text>

  <!-- 화살표: UI 업데이트 → 사용자 조작 (루프 완성) -->
  <line x1="310" y1="320" x2="310" y2="115" stroke="black" stroke-width="2"/>
  <line x1="310" y1="115" x2="450" y2="115" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- 중앙: 폐루프 표시 -->
  <ellipse cx="600" cy="380" rx="80" ry="80" fill="none" stroke="black" stroke-width="2" stroke-dasharray="5,3"/>
  <text x="600" y="370" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold">폐루프</text>
  <text x="600" y="395" text-anchor="middle" font-family="Arial, sans-serif" font-size="16">실시간 반영</text>

  <!-- 좌측 하단: 3D Renderer/UI 모듈 요약 -->
  <rect x="30" y="620" width="200" height="160" fill="none" stroke="black" stroke-width="2" rx="5"/>
  <text x="130" y="650" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold">3D Renderer/UI</text>
  <text x="130" y="675" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold">(80)</text>
  <line x1="40" y1="685" x2="220" y2="685" stroke="black" stroke-width="1"/>
  <text x="130" y="705" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">81: 좌표 매핑부</text>
  <text x="130" y="725" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">82: 렌더링 엔진</text>
  <text x="130" y="745" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">83: 상호작용 처리부</text>
  <text x="130" y="765" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">84: 실시간 갱신부</text>

  <!-- 우측 하단: 좌표 매핑 규칙 -->
  <rect x="970" y="620" width="200" height="160" fill="none" stroke="black" stroke-width="2" rx="5"/>
  <text x="1070" y="650" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold">좌표 매핑 (81)</text>
  <line x1="980" y1="665" x2="1160" y2="665" stroke="black" stroke-width="1"/>
  <text x="1070" y="690" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">Stage → X축</text>
  <text x="1070" y="715" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">Area → Y축</text>
  <text x="1070" y="740" text-anchor="middle" font-family="Arial, sans-serif" font-size="14">Level → Z축</text>
  <text x="1070" y="765" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">3D 공간 배치</text>

</svg>
