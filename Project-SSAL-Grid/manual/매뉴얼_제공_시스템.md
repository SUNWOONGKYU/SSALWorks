# 매뉴얼 제공 시스템

**확정일:** 2025-12-12
**버전:** 2.0
**방식:** Markdown → GitHub Push → GitHub Actions 자동 변환 → HTML → Supabase DB

---

## 1. 시스템 개요

### 1.1 목적
- 플랫폼 사용 매뉴얼을 체계적으로 제공
- 기능별/주제별로 분류된 도움말 제공
- 매뉴얼 작성 및 배포 자동화

### 1.2 학습용 콘텐츠와의 차이점

| 구분 | 학습용 콘텐츠 | 매뉴얼 |
|------|-------------|--------|
| 목적 | 웹개발 지식 습득 | 플랫폼 사용법 안내 |
| 대상 | 개발자/학습자 | 플랫폼 사용자 |
| 내용 | HTML, Supabase, Git 등 | 프로젝트 등록, 구독 관리 등 |
| 원본 위치 | `학습용_콘텐츠/` | `Project-SSAL-Grid/manual/` |
| DB 테이블 | learning_contents | manuals |

### 1.3 핵심 원칙
- **자동화 우선**: 학습용 콘텐츠와 동일하게 GitHub Actions 기반 처리
- **단일 소스**: MD 파일이 유일한 원본 (Single Source of Truth)
- **분리 저장**: 콘텐츠(GitHub) / 메타데이터(Supabase DB) 분리

---

## 2. 시스템 아키텍처

### 2.1 전체 흐름도

```
┌─────────────────────────────────────────────────────────────────┐
│  1단계: 매뉴얼 작성 (로컬)                                       │
│  └─ Project-SSAL-Grid/manual/ 폴더에 .md 파일 작성               │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│  2단계: Push 요청                                                │
│  └─ 사용자: "푸시해줘" → Claude Code가 git push 실행             │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│  3단계: GitHub Actions 자동 실행                                 │
│  └─ .md 파일 감지 → .html 파일 자동 변환 → 커밋                  │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│  4단계: DB 등록 (Claude Code)                                    │
│  └─ GitHub raw URL 생성 → Supabase manuals 테이블 INSERT         │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│  5단계: Dashboard에서 조회                                       │
│  └─ 이용자가 매뉴얼 클릭 → HTML 파일 로드 → 화면 표시            │
└─────────────────────────────────────────────────────────────────┘
```

### 2.2 구성 요소

| 구성 요소 | 역할 | 위치 |
|----------|------|------|
| MD 파일 | 매뉴얼 원본 + 메타데이터 | `Project-SSAL-Grid/manual/` 폴더 |
| GitHub Actions | MD→HTML 자동 변환 | `.github/workflows/convert-md-to-html.yml` |
| 변환 스크립트 | HTML 변환 로직 | `scripts/convert-md-to-html.js` |
| GitHub | HTML 매뉴얼 호스팅 | GitHub Repository (raw URL) |
| Supabase DB | 메타데이터 저장 | manuals 테이블 |
| Frontend | 매뉴얼 뷰어 인터페이스 | 프로토타입 웹앱 |

---

## 3. MD 파일 구조

### 3.1 Frontmatter 템플릿 (선택)

메타데이터를 포함할 경우 다음 형식 사용:

```yaml
---
category: "카테고리명"       # 예: "시작하기", "프로젝트 관리"
subcategory: "하위 카테고리" # 예: "기본 설정" (선택)
title: "매뉴얼 제목"         # 예: "프로젝트 등록 방법"
description: "매뉴얼 설명"   # 예: "새 프로젝트를 등록하는 방법"
display_order: 1             # 정렬 순서 (기본값: 0)
---

# 매뉴얼 제목

본문 내용...
```

### 3.2 폴더 구조

```
Project-SSAL-Grid/
└── manual/
    ├── PROJECT_SSAL_GRID_MANUAL.md    ← 메인 매뉴얼
    ├── 매뉴얼_제공_시스템.md           ← 이 문서
    ├── references/                     ← 참고 문서
    │   ├── TASK_SELECTION_MATRIX.md
    │   └── SSALWORKS_TASK_PLAN.md
    ├── 시작하기/                       ← 카테고리별 폴더 (추가 예정)
    │   ├── 01_플랫폼_소개.md
    │   └── 02_회원가입.md
    └── 프로젝트_관리/
        ├── 01_프로젝트_등록.md
        └── 02_프로젝트_수정.md
```

### 3.3 Frontmatter 필드 설명

| 필드 | 타입 | 필수 | 설명 |
|------|------|------|------|
| category | string | O | 대분류 (메뉴 1단계) |
| subcategory | string | X | 소분류 (메뉴 2단계) |
| title | string | O | 매뉴얼 제목 |
| description | string | X | 매뉴얼 설명 |
| display_order | number | X | 정렬 순서 (기본값: 0) |

---

## 4. GitHub Actions 자동화

### 4.1 설정 파일

**위치:** `.github/workflows/convert-md-to-html.yml`

**트리거:**
- `학습용_콘텐츠/**/*.md` 파일이 push되면 실행
- `Project-SSAL-Grid/manual/**/*.md` 파일이 push되면 실행

### 4.2 처리 과정

```
1. 저장소 체크아웃
       │
       ▼
2. Node.js 설정
       │
       ▼
3. marked 라이브러리 설치
       │
       ▼
4. 변환 스크립트 실행 (scripts/convert-md-to-html.js)
   - 학습용_콘텐츠/ 폴더 스캔
   - Project-SSAL-Grid/manual/ 폴더 스캔
   - .md 파일 → .html 파일 변환
       │
       ▼
5. 변환된 .html 파일 자동 커밋 & push
```

---

## 5. 데이터베이스 스키마

### 5.1 manuals 테이블

```sql
CREATE TABLE manuals (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),

    -- 분류 체계
    category VARCHAR(100) NOT NULL,     -- 대분류
    subcategory VARCHAR(100),           -- 소분류

    -- 매뉴얼 정보
    title VARCHAR(255) NOT NULL,        -- 제목
    description TEXT,                   -- 설명
    url VARCHAR(500) NOT NULL,          -- GitHub raw URL (.html)

    -- 정렬 및 관리
    display_order INT DEFAULT 0,        -- 표시 순서
    is_active BOOLEAN DEFAULT true,     -- 활성화 여부

    -- 원본 파일 추적
    source_path VARCHAR(500),           -- MD 파일 경로
    content_hash VARCHAR(64),           -- MD 파일 해시 (변경 감지용)

    -- 타임스탬프
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- 인덱스
CREATE INDEX idx_manuals_category ON manuals(category);
CREATE INDEX idx_manuals_display_order ON manuals(display_order);
```

### 5.2 GitHub URL 형식

```
https://raw.githubusercontent.com/{owner}/{repo}/main/Project-SSAL-Grid/manual/.../파일명.html
```

---

## 6. 프로세스 상세

### 6.1 새 매뉴얼 추가

```
1. 로컬에서 .md 파일 작성
   위치: Project-SSAL-Grid/manual/{카테고리}/{파일명}.md
       │
       ▼
2. 사용자: "푸시해줘"
       │
       ▼
3. Claude Code 실행:
   git add Project-SSAL-Grid/manual/
   git commit -m "매뉴얼 추가"
   git push
       │
       ▼
4. GitHub Actions 자동 실행
   .md → .html 변환 → 커밋
       │
       ▼
5. Claude Code가 DB에 등록
   INSERT INTO manuals (...)
       │
       ▼
6. Dashboard에서 조회 가능
```

### 6.2 기존 매뉴얼 수정

```
1. 로컬에서 .md 파일 수정
       │
       ▼
2. "푸시해줘"
       │
       ▼
3. GitHub Actions가 .html 자동 재변환
       │
       ▼
4. 끝! (URL 동일하므로 DB 수정 불필요)
```

---

## 7. 사용자 조회 흐름

### 7.1 Frontend 표시 예시

```
┌────────────────────────────────────────────────────────────┐
│  매뉴얼                                            🔍 검색  │
├────────────────────────────────────────────────────────────┤
│                                                            │
│  ▼ 시작하기                                                │
│    ├─ SSAL Works 플랫폼 소개                               │
│    ├─ 회원가입 방법                                        │
│    └─ 첫 로그인 가이드                                     │
│                                                            │
│  ▼ 프로젝트 관리                                           │
│    ├─ 프로젝트 등록 방법                                   │
│    ├─ 프로젝트 수정 및 삭제                                │
│    └─ 프로젝트 상태 관리                                   │
│                                                            │
│  ▶ 결제                                                    │
│  ▶ Project Grid 사용법                                     │
│                                                            │
└────────────────────────────────────────────────────────────┘
```

---

## 8. Admin Dashboard 관리

### 8.1 매뉴얼 관리 기능

| 기능 | 설명 |
|------|------|
| 조회 | 전체 매뉴얼 목록 확인 |
| 추가 | 새 매뉴얼 등록 (제목, 카테고리, URL 입력) |
| 수정 | 메타정보 수정 (제목, 카테고리, URL) |
| 삭제 | 매뉴얼 삭제 |
| 활성화/비활성화 | is_active 토글 |

### 8.2 관리 방식

```
매뉴얼 본문 수정:
  로컬 .md 파일 수정 → push → 자동 반영

메타정보 수정:
  Admin Dashboard에서 직접 수정 (제목, 분류, URL)
```

---

## 9. 관련 파일

| 파일 | 위치 | 용도 |
|------|------|------|
| GitHub Actions 설정 | `.github/workflows/convert-md-to-html.yml` | MD→HTML 자동 변환 |
| 변환 스크립트 | `scripts/convert-md-to-html.js` | HTML 변환 로직 |
| 매뉴얼 폴더 | `Project-SSAL-Grid/manual/` | .md 원본 파일들 |
| 메인 매뉴얼 | `Project-SSAL-Grid/manual/PROJECT_SSAL_GRID_MANUAL.md` | Project Grid 매뉴얼 |

---

## 10. 장점

✅ **학습용 콘텐츠와 동일한 방식**
- 일관된 프로세스
- 동일한 도구 사용
- 유지보수 용이

✅ **완전 자동화**
- .md 파일만 작성하면 끝
- HTML 변환 자동 (GitHub Actions)

✅ **백업 자동**
- GitHub에 모든 버전 기록

---

## 11. 버전 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| 1.0 | 2025-12-11 | 최초 작성 |
| 2.0 | 2025-12-12 | GitHub Actions 방식으로 변경, 문서 위치 이동 |

---

**문서 위치:** `Project-SSAL-Grid/manual/매뉴얼_제공_시스템.md`
**이전 위치:** (삭제됨) `P2_프로젝트_기획/Content_System/매뉴얼_제공_시스템.md`
