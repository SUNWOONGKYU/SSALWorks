<h2 style="color: var(--primary-dark); border-bottom: 2px solid var(--primary); padding-bottom: 8px;">S5 운영 (Operations) 안내문</h2>

<p style="margin-bottom: 12px;">> <strong>작성일</strong>: 2025-12-17</p>
<p style="margin-bottom: 12px;">> <strong>버전</strong>: 2.1 (Stage Context 추가)</p>

<hr style="margin: 20px 0; border: none; border-top: 1px solid #dee2e6;">

<h3 style="margin-top: 24px; color: #333;">1. Stage 맥락 (Context)</h3>

<h4 style="margin-top: 16px; color: #555;">현재 위치</h4>
<p style="margin-bottom: 12px;">```</p>
<p style="margin-bottom: 12px;">┌─────────────────────────────────────────────────────────────────────────┐</p>
<p style="margin-bottom: 12px;">│                        SSAL Works 개발 흐름                              │</p>
<p style="margin-bottom: 12px;">├─────────────────────────────────────────────────────────────────────────┤</p>
<p style="margin-bottom: 12px;">│                                                                         │</p>
<p style="margin-bottom: 12px;">│   P0~P3        ▶▶▶   S1   ▶▶▶   S2   ▶▶▶   S3   ▶▶▶   S4   ▶▶▶   [S5]  │</p>
<p style="margin-bottom: 12px;">│   예비단계           개발준비     개발1차     개발2차     개발3차       운영   │</p>
<p style="margin-bottom: 12px;">│   (기획/설계)        (기반구축)   (핵심기능)  (고급기능)  (QA/최적화)   (배포)  │</p>
<p style="margin-bottom: 12px;">│                                                                 ──────  │</p>
<p style="margin-bottom: 12px;">│                                                                 현재    │</p>
<p style="margin-bottom: 12px;">│                                                                 Stage   │</p>
<p style="margin-bottom: 12px;">└─────────────────────────────────────────────────────────────────────────┘</p>
<p style="margin-bottom: 12px;">```</p>

<h4 style="margin-top: 16px; color: #555;">Stage 간 관계</h4>

<p style="margin-bottom: 12px;">| 단계 | Stage | 설명 | 비고 |</p>
<p style="margin-bottom: 12px;">|------|-------|------|------|</p>
<p style="margin-bottom: 12px;">| 이전 | S4 | 개발 3차 - QA 및 최적화 완료 | ✅ 완료됨 |</p>
<p style="margin-bottom: 12px;">| <strong>현재</strong> | <strong>S5</strong> | <strong>운영 - 프로덕션 배포 및 운영</strong> | <strong>🔄 진행 중</strong> |</p>
<p style="margin-bottom: 12px;">| 다음 | - | 프로젝트 완료! 🎉 | - |</p>

<h4 style="margin-top: 16px; color: #555;">이전 단계에서 완료된 것 (S4)</h4>
<ul style="padding-left: 20px; margin-bottom: 15px;">
<li style="margin-bottom: 8px;">✅ 결제 시스템 연동 (토스 페이먼트)</li>
<li style="margin-bottom: 8px;">✅ 종합 테스트 (Unit, Integration, E2E)</li>
<li style="margin-bottom: 8px;">✅ 성능 최적화</li>
<li style="margin-bottom: 8px;">✅ 버그 수정 및 안정화</li>
<li style="margin-bottom: 8px;">✅ 결제 보안 검증</li>
<li style="margin-bottom: 8px;">✅ 테스트 문서화</li>
</ul>

<h4 style="margin-top: 16px; color: #555;">현재 단계에서 수행할 것 (S5)</h4>
<ul style="padding-left: 20px; margin-bottom: 15px;">
<li style="margin-bottom: 8px;">🔄 프로덕션 배포 (Vercel)</li>
<li style="margin-bottom: 8px;">🔄 도메인 연결 및 SSL 설정</li>
<li style="margin-bottom: 8px;">🔄 모니터링 시스템 구축 (Sentry)</li>
<li style="margin-bottom: 8px;">🔄 백업 및 복구 체계</li>
<li style="margin-bottom: 8px;">🔄 RLS 정책 프로덕션 적용</li>
<li style="margin-bottom: 8px;">🔄 보안 감사</li>
<li style="margin-bottom: 8px;">🔄 운영 문서화 및 사용자 가이드</li>
</ul>

<h4 style="margin-top: 16px; color: #555;">완료 후 상태</h4>
<ul style="padding-left: 20px; margin-bottom: 15px;">
<li style="margin-bottom: 8px;">🎉 <strong>프로젝트 런칭 완료!</strong></li>
<li style="margin-bottom: 8px;">🎉 프로덕션 환경에서 서비스 운영 시작</li>
<li style="margin-bottom: 8px;">🎉 사용자 접속 가능</li>
</ul>

<hr style="margin: 20px 0; border: none; border-top: 1px solid #dee2e6;">

<h3 style="margin-top: 24px; color: #333;">2. Stage 개요</h3>

<p style="margin-bottom: 12px;"><strong>S5 (운영)</strong>는 프로덕션 배포 및 운영 단계입니다.</p>

<h4 style="margin-top: 16px; color: #555;">Stage 목표</h4>
<ul style="padding-left: 20px; margin-bottom: 15px;">
<li style="margin-bottom: 8px;">프로덕션 배포 (Vercel)</li>
<li style="margin-bottom: 8px;">도메인 연결 및 SSL 설정</li>
<li style="margin-bottom: 8px;">모니터링 시스템 구축</li>
<li style="margin-bottom: 8px;">백업 및 복구 체계</li>
<li style="margin-bottom: 8px;">운영 문서화</li>
</ul>

<hr style="margin: 20px 0; border: none; border-top: 1px solid #dee2e6;">

<h3 style="margin-top: 24px; color: #333;">3. Task 목록 (예상 9개)</h3>

<p style="margin-bottom: 12px;">| Task ID | Task Name | Area | 유형 |</p>
<p style="margin-bottom: 12px;">|---------|-----------|------|------|</p>
<p style="margin-bottom: 12px;">| S5O1 | 프로덕션 배포 | DevOps | <strong>Human-AI</strong> |</p>
<p style="margin-bottom: 12px;">| S5O2 | 도메인 연결 | DevOps | <strong>Human-AI</strong> |</p>
<p style="margin-bottom: 12px;">| S5O3 | 모니터링 설정 | DevOps | <strong>Human-AI</strong> |</p>
<p style="margin-bottom: 12px;">| S5O4 | 백업 설정 | DevOps | <strong>Human-AI</strong> |</p>
<p style="margin-bottom: 12px;">| S5S1 | RLS 정책 프로덕션 적용 | Security | <strong>PO 실행</strong> |</p>
<p style="margin-bottom: 12px;">| S5S2 | 보안 감사 | Security | AI-Only |</p>
<p style="margin-bottom: 12px;">| S5D1 | DB 백업 설정 | Database | <strong>Human-AI</strong> |</p>
<p style="margin-bottom: 12px;">| S5M1 | 운영 문서화 | Documentation | AI-Only |</p>
<p style="margin-bottom: 12px;">| S5M2 | 사용자 가이드 | Documentation | AI-Only |</p>

<hr style="margin: 20px 0; border: none; border-top: 1px solid #dee2e6;">

<h3 style="margin-top: 24px; color: #333;">4. 작업 규칙</h3>

<h4 style="margin-top: 16px; color: #555;">파일 저장 규칙</h4>
<p style="margin-bottom: 12px;">S5는 운영 단계이므로 Production 폴더 이중 저장 불필요</p>
<ul style="padding-left: 20px; margin-bottom: 15px;">
<li style="margin-bottom: 8px;">모든 파일 → `S5_운영/` 하위 폴더에만 저장</li>
</ul>

<h4 style="margin-top: 16px; color: #555;">배포 전 필수 확인</h4>

<p style="margin-bottom: 12px;">```</p>
<p style="margin-bottom: 12px;">⚠️ CRITICAL: 배포 전 필수 체크리스트</p>

<ul style="padding-left: 20px; margin-bottom: 15px;">
<li style="margin-bottom: 8px;">[ ] RLS 정책 프로덕션 버전으로 교체</li>
<li style="margin-bottom: 8px;">[ ] 환경변수 프로덕션 값 설정</li>
<li style="margin-bottom: 8px;">[ ] 테스트 모드 API 키 → 프로덕션 키 교체</li>
<li style="margin-bottom: 8px;">[ ] 디버그 로그 비활성화</li>
<li style="margin-bottom: 8px;">[ ] 에러 메시지 사용자 친화적으로 변경</li>
</ul>
<p style="margin-bottom: 12px;">```</p>

<hr style="margin: 20px 0; border: none; border-top: 1px solid #dee2e6;">

<h3 style="margin-top: 24px; color: #333;">5. 검증 프로세스 (3단계)</h3>

<p style="margin-bottom: 12px;">```</p>
<p style="margin-bottom: 12px;">1단계: Task Agent → 작업 수행</p>
<p style="margin-bottom: 12px;">2단계: Verification Agent → 검증 (작성자 ≠ 검증자)</p>
<p style="margin-bottom: 12px;">3단계: Stage Gate → Main Agent 직접 수행</p>
<p style="margin-bottom: 12px;">4단계: PO 승인 → 최종 배포 승인</p>
<p style="margin-bottom: 12px;">```</p>

<hr style="margin: 20px 0; border: none; border-top: 1px solid #dee2e6;">

<h3 style="margin-top: 24px; color: #333;">6. PO(Project Owner) 필수 작업</h3>

<h4 style="margin-top: 16px; color: #555;">S5O1: 프로덕션 배포</h4>
<p style="margin-bottom: 12px;">```</p>
<p style="margin-bottom: 12px;">[배포 전 체크리스트]</p>
<p style="margin-bottom: 12px;">1. 모든 테스트 통과 확인</p>
<p style="margin-bottom: 12px;">2. 환경변수 프로덕션 값 설정</p>
<p style="margin-bottom: 12px;">3. RLS 정책 프로덕션 버전 적용 (S5S1)</p>
<p style="margin-bottom: 12px;">4. 빌드 테스트 성공</p>

<p style="margin-bottom: 12px;">[Vercel 배포]</p>
<p style="margin-bottom: 12px;">1. Vercel Dashboard → 프로젝트 선택</p>
<p style="margin-bottom: 12px;">2. Settings → Environment Variables 확인</p>
<p style="margin-bottom: 12px;">3. Deployments → Redeploy (프로덕션)</p>
<p style="margin-bottom: 12px;">4. 배포 완료 대기</p>
<p style="margin-bottom: 12px;">5. 프로덕션 URL 접속 테스트</p>
<p style="margin-bottom: 12px;">```</p>

<h4 style="margin-top: 16px; color: #555;">S5O2: 도메인 연결</h4>
<p style="margin-bottom: 12px;">```</p>
<p style="margin-bottom: 12px;">[Whois DNS 설정 - 네임서버 고급설정]</p>

<p style="margin-bottom: 12px;">1. A 레코드:</p>
<p style="margin-bottom: 12px;">   - 호스트명: @ 또는 www</p>
<p style="margin-bottom: 12px;">   - IP: 76.76.21.21</p>

<p style="margin-bottom: 12px;">2. CNAME 레코드:</p>
<p style="margin-bottom: 12px;">   - 호스트명: www</p>
<p style="margin-bottom: 12px;">   - 값: cname.vercel-dns.com</p>

<p style="margin-bottom: 12px;">3. TXT 레코드 (Vercel 검증용):</p>
<p style="margin-bottom: 12px;">   - 호스트명: _vercel</p>
<p style="margin-bottom: 12px;">   - 값: (Vercel Dashboard에서 제공)</p>

<p style="margin-bottom: 12px;">[Vercel 도메인 추가]</p>
<p style="margin-bottom: 12px;">1. Settings → Domains</p>
<p style="margin-bottom: 12px;">2. Add Domain → 도메인 입력</p>
<p style="margin-bottom: 12px;">3. DNS 레코드 확인</p>
<p style="margin-bottom: 12px;">4. SSL 인증서 발급 대기 (최대 24시간)</p>
<p style="margin-bottom: 12px;">```</p>

<h4 style="margin-top: 16px; color: #555;">S5S1: RLS 프로덕션 적용</h4>

<p style="margin-bottom: 12px;"><strong>⚠️ 매우 중요! 배포 전 필수 실행!</strong></p>

<p style="margin-bottom: 12px;">```</p>
<p style="margin-bottom: 12px;">[Supabase SQL Editor]</p>
<p style="margin-bottom: 12px;">1. 개발용 RLS 정책 (_dev.sql) 제거:</p>
<p style="margin-bottom: 12px;">   - 07_learning_contents_rls_dev.sql → 원래 파일로 교체</p>
<p style="margin-bottom: 12px;">   - 10_faqs_rls_dev.sql → 원래 파일로 교체</p>

<p style="margin-bottom: 12px;">2. 프로덕션 RLS 정책 실행:</p>
<p style="margin-bottom: 12px;">   - 07_learning_contents_rls.sql 실행</p>
<p style="margin-bottom: 12px;">   - 10_faqs_rls.sql 실행</p>

<p style="margin-bottom: 12px;">3. 테스트:</p>
<p style="margin-bottom: 12px;">   - anon 역할로 INSERT 시도 → 차단 확인</p>
<p style="margin-bottom: 12px;">   - authenticated 역할로 INSERT 시도 → 성공 확인</p>
<p style="margin-bottom: 12px;">```</p>

<h4 style="margin-top: 16px; color: #555;">S5O3: 모니터링 설정</h4>
<p style="margin-bottom: 12px;">```</p>
<p style="margin-bottom: 12px;">[Sentry 설정]</p>
<p style="margin-bottom: 12px;">1. https://sentry.io 접속</p>
<p style="margin-bottom: 12px;">2. 새 프로젝트 생성 (JavaScript)</p>
<p style="margin-bottom: 12px;">3. DSN 복사</p>
<p style="margin-bottom: 12px;">4. Vercel 환경변수 추가: SENTRY_DSN</p>
<p style="margin-bottom: 12px;">5. 알림 설정 (이메일/Slack)</p>
<p style="margin-bottom: 12px;">```</p>

<hr style="margin: 20px 0; border: none; border-top: 1px solid #dee2e6;">

<h3 style="margin-top: 24px; color: #333;">7. Stage Gate 완료 기준</h3>

<h4 style="margin-top: 16px; color: #555;">체크리스트</h4>
<ul style="padding-left: 20px; margin-bottom: 15px;">
<li style="margin-bottom: 8px;">[ ] S5O1: 프로덕션 배포 성공</li>
<li style="margin-bottom: 8px;">[ ] S5O2: 도메인 접속 가능 (HTTPS)</li>
<li style="margin-bottom: 8px;">[ ] S5S1: RLS 프로덕션 정책 적용 확인</li>
<li style="margin-bottom: 8px;">[ ] S5O3: 에러 발생 시 Sentry 알림 확인</li>
<li style="margin-bottom: 8px;">[ ] S5O4: 백업 동작 확인</li>
<li style="margin-bottom: 8px;">[ ] S5M1: 운영 문서 완성</li>
</ul>

<h4 style="margin-top: 16px; color: #555;">프로젝트 완료 기준</h4>

<p style="margin-bottom: 12px;">```</p>
<p style="margin-bottom: 12px;">S5 Stage 완료 = 프로젝트 런칭!</p>

<p style="margin-bottom: 12px;">필수 조건:</p>
<p style="margin-bottom: 12px;">1. 프로덕션 배포 완료</p>
<p style="margin-bottom: 12px;">2. 커스텀 도메인 연결 + SSL 활성화</p>
<p style="margin-bottom: 12px;">3. 모니터링 시스템 가동</p>
<p style="margin-bottom: 12px;">4. 백업 체계 구축</p>
<p style="margin-bottom: 12px;">5. 운영 문서 완성</p>
<p style="margin-bottom: 12px;">6. PO 최종 승인</p>
<p style="margin-bottom: 12px;">```</p>

<hr style="margin: 20px 0; border: none; border-top: 1px solid #dee2e6;">

<h3 style="margin-top: 24px; color: #333;">8. 주의사항</h3>

<p style="margin-bottom: 12px;">```</p>
<p style="margin-bottom: 12px;">⚠️ 배포 전 RLS 프로덕션 정책 필수 적용!</p>
<p style="margin-bottom: 12px;">⚠️ 테스트 API 키 → 프로덕션 키 교체 필수!</p>
<p style="margin-bottom: 12px;">⚠️ 도메인 SSL 인증서 발급까지 최대 24시간 소요!</p>
<p style="margin-bottom: 12px;">⚠️ 배포 후 즉시 기능 테스트 수행!</p>
<p style="margin-bottom: 12px;">```</p>

<hr style="margin: 20px 0; border: none; border-top: 1px solid #dee2e6;">

<p style="margin-bottom: 12px;"><strong>확인 버튼을 클릭하면 Workspace에 Order Sheet가 로드됩니다.</strong></p>
