# S3 개발 2차 (Advanced Features) 안내문

> **작성일**: 2025-12-17
> **버전**: 2.1 (Stage Context 추가)

---

## 1. Stage 맥락 (Context)

### 현재 위치
```
┌─────────────────────────────────────────────────────────────────────────┐
│                        SSAL Works 개발 흐름                              │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   P0~P3        ▶▶▶   S1   ▶▶▶   S2   ▶▶▶   [S3]   ▶▶▶   S4   ▶▶▶   S5  │
│   예비단계           개발준비     개발1차      개발2차     개발3차     운영  │
│   (기획/설계)        (기반구축)   (핵심기능)   (고급기능)  (QA/최적화) (배포) │
│                                              ────────                   │
│                                              현재 Stage                 │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### Stage 간 관계

| 단계 | Stage | 설명 | 비고 |
|------|-------|------|------|
| 이전 | S2 | 개발 1차 - 핵심 기능 완료 | ✅ 완료됨 |
| **현재** | **S3** | **개발 2차 - 고급 기능 구현** | **🔄 진행 중** |
| 다음 | S4 | 개발 3차 - QA 및 최적화 | ⏳ 대기 |

### 이전 단계에서 완료된 것 (S2)
- ✅ 인증/인가 시스템 구현 (Google OAuth, 세션 관리)
- ✅ 이메일 시스템 연동 (Resend)
- ✅ 구독 관리 API 개발
- ✅ 프론트엔드 인증 페이지 구현
- ✅ 인증 미들웨어 구축
- ✅ 테스트 인프라 구축
- ✅ API 문서화

### 현재 단계에서 수행할 것 (S3)
- 🔄 AI 서비스 연동 (OpenAI, Claude 등)
- 🔄 결제 시스템 기반 구축 (토스 페이먼트 준비)
- 🔄 대시보드 기능 고도화
- 🔄 알림 시스템 구축
- 🔄 크레딧 관리 기능
- 🔄 API Rate Limiting

### 다음 단계에서 수행할 것 (S4)
- ⏳ 결제 시스템 연동 (토스 페이먼트)
- ⏳ 종합 테스트 (Unit, Integration, E2E)
- ⏳ 성능 최적화
- ⏳ 버그 수정 및 안정화
- ⏳ 보안 감사

---

## 2. Stage 개요

**S3 (개발 2차)**는 고급 기능을 구현하는 단계입니다.

### Stage 목표
- AI 서비스 연동 (OpenAI, Claude 등)
- 결제 시스템 기반 구축 (토스 페이먼트 준비)
- 대시보드 기능 고도화
- 알림 시스템 구축
- 고급 사용자 관리 기능

---

## 3. Task 목록 (예상 11개)

| Task ID | Task Name | Area | 유형 |
|---------|-----------|------|------|
| S3F1 | 대시보드 고도화 | Frontend | AI-Only |
| S3F2 | 알림 센터 UI | Frontend | AI-Only |
| S3F3 | AI 서비스 UI | Frontend | AI-Only |
| S3BA1 | AI 서비스 API | Backend_APIs | AI-Only |
| S3BA2 | 크레딧 관리 API | Backend_APIs | AI-Only |
| S3BA3 | 알림 API | Backend_APIs | AI-Only |
| S3BI1 | OpenAI 연동 모듈 | Backend_Infra | **Human-AI** |
| S3D1 | AI 사용량 테이블 최적화 | Database | **PO 실행** |
| S3S1 | API Rate Limiting | Security | AI-Only |
| S3T1 | AI 서비스 테스트 | Testing | AI-Only |
| S3M1 | AI 서비스 문서화 | Documentation | AI-Only |

---

## 4. 작업 규칙

### 파일 저장 규칙 (이중 저장)
- Frontend, Backend_APIs, Database → Stage 폴더 + Production 폴더
- 문서 → Stage 폴더에만

### Task ID 코멘트
```javascript
// Task ID: S3BA1 - AI 서비스 API
```

---

## 5. 검증 프로세스 (3단계)

```
1단계: Task Agent → 작업 수행
2단계: Verification Agent → 검증 (작성자 ≠ 검증자)
3단계: Stage Gate → Main Agent 직접 수행
4단계: PO 승인 → 테스트 후 승인/거부
```

---

## 6. PO(Project Owner) 필수 작업

### S3BI1: OpenAI API 설정
1. https://platform.openai.com 접속
2. API Keys → Create new secret key
3. API Key 복사 (한 번만 표시됨!)
4. Vercel 환경변수에 OPENAI_API_KEY 추가
5. 사용량 제한 설정 (Cost Limit)

### S3D1: SQL 실행
1. Supabase SQL Editor 접속
2. S3D1 SQL 파일 실행
3. 테이블/인덱스 생성 확인

---

## 7. Stage Gate 완료 기준

### 체크리스트
- [ ] S3F1: 대시보드 차트/데이터 표시 확인
- [ ] S3F2: 알림 센터 동작 확인
- [ ] S3F3: AI 서비스 UI 동작 확인
- [ ] S3BA1: AI API 호출 테스트
- [ ] S3BA2: 크레딧 차감 테스트
- [ ] S3D1: DB 테이블 최적화 확인

### 다음 Stage 조건
S3 완료 → S4 시작 가능

---

## 8. 주의사항

```
⚠️ AI API 키 보안 철저히 관리!
⚠️ API Rate Limiting 필수 구현!
⚠️ 크레딧 차감 로직 정확성 검증!
⚠️ 비용 폭주 방지 장치 확인!
```

---

**확인 버튼을 클릭하면 Workspace에 Order Sheet가 로드됩니다.**
