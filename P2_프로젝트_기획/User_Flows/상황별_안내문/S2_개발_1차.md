# S2 개발 1차 (Core Development) 안내문

> **작성일**: 2025-12-18
> **버전**: 2.2 (Grid 동기화)

---

## 1. Stage 맥락 (Context)

### 현재 위치
```
┌─────────────────────────────────────────────────────────────────────────┐
│                        SSAL Works 개발 흐름                              │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   P0~P3        ▶▶▶   S1   ▶▶▶   [S2]   ▶▶▶   S3   ▶▶▶   S4   ▶▶▶   S5  │
│   예비단계           개발준비      개발1차     개발2차     개발3차     운영  │
│   (기획/설계)        (기반구축)    (핵심기능)  (고급기능)  (QA/최적화) (배포) │
│                                   ────────                              │
│                                   현재 Stage                            │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### Stage 간 관계

| 단계 | Stage | 설명 | 비고 |
|------|-------|------|------|
| 이전 | S1 | 개발 준비 - 기반 구축 완료 | ✅ 완료됨 |
| **현재** | **S2** | **개발 1차 - 핵심 기능 구현** | **🔄 진행 중** |
| 다음 | S3 | 개발 2차 - 고급 기능 구현 | ⏳ 대기 |

### 이전 단계에서 완료된 것 (S1)
- ✅ 프론트엔드 기본 구조 설정
- ✅ 디자인 시스템 구축 (SSAL Works 브랜딩)
- ✅ DB 스키마 확정 및 Supabase 적용
- ✅ Google OAuth Provider 설정
- ✅ Vercel 배포 환경 구축
- ✅ 기술 문서화

### 현재 단계에서 수행할 것 (S2)
- 🔄 인증/인가 시스템 구현 (Google OAuth, 세션 관리)
- 🔄 이메일 시스템 연동 (Resend) 및 도메인 인증
- 🔄 구독 관리 API 개발
- 🔄 프론트엔드 인증 페이지 구현
- 🔄 인증 미들웨어 구축
- 🔄 에러 핸들링 시스템 구축
- 🔄 테스트 인프라 구축
- 🔄 API 문서화

### 다음 단계에서 수행할 것 (S3)
- ⏳ AI 서비스 연동 (OpenAI, Claude 등)
- ⏳ 결제 시스템 기반 구축
- ⏳ 대시보드 고도화
- ⏳ 알림 시스템 구축

---

## 2. Stage 개요

**S2 (개발 1차)**는 핵심 기능을 구현하는 단계입니다.

### Stage 목표
- 인증/인가 시스템 구축 (Google OAuth, 세션 관리)
- 이메일 시스템 구축 (Resend 연동) 및 도메인 인증
- 구독 관리 API 구현
- 프론트엔드 인증 페이지 구현
- 에러 핸들링 시스템 구축
- 테스트 인프라 구축
- API 문서화

---

## 3. Task 목록 (13개)

| Task ID | Task Name | Area | 유형 |
|---------|-----------|------|------|
| S2M1 | API 문서화 | Documentation | AI-Only |
| S2F1 | Google 로그인 UI | Frontend | AI-Only |
| S2F2 | 비밀번호 재설정 UI | Frontend | AI-Only |
| S2BI1 | Resend 이메일 서비스 설정 | Backend_Infra | **Human-AI** |
| S2BI2 | 에러 핸들링 시스템 | Backend_Infra | AI-Only |
| S2BI3 | 이메일 도메인 인증 (Resend) | Backend_Infra | **Human-AI** |
| S2BA1 | Google OAuth API | Backend_APIs | AI-Only |
| S2BA2 | 이메일 발송 API | Backend_APIs | AI-Only |
| S2BA3 | 구독 관리 API | Backend_APIs | AI-Only |
| S2D1 | DB 인덱스 최적화 | Database | **PO 실행** |
| S2S1 | 인증 미들웨어 | Security | AI-Only |
| S2T1 | 인증 API 테스트 | Testing | AI-Only |
| S2C1 | 학습 콘텐츠 시드 | Content_System | **PO 실행** |

---

## 4. 작업 규칙

### 파일 저장 규칙 (이중 저장)
- Frontend, Backend_APIs, Database → Stage 폴더 + Production 폴더
- 문서 (Documentation, Testing) → Stage 폴더에만

### Task ID 코멘트
```javascript
// Task ID: S2BA1 - Google OAuth API
```

```html
<!-- Task ID: S2F1 - Google 로그인 UI -->
```

---

## 5. 실행 프로세스 (10단계)

```
[Step 0] Order Sheet 저장
[Step 1] SSAL Grid 확인 - Stage Task 목록 조회
[Step 2] Task 실행 순서 결정 - Dependencies 기반
[Step 3] 각 Task 실행 - Task Agent 서브에이전트 투입
[Step 3-1] Human-AI Task 처리 (해당 시)
[Step 4] 결과물 저장 - Stage/Area 폴더 + Production 이중 저장
[Step 5] 검증 - Verification Agent 서브에이전트로 검증
[Step 6] Grid 업데이트 - Status, Files, Progress 기록
[Step 7] Stage Gate - 모든 Task 완료 후 Stage Gate 검증
[Step 8] PO 기능 테스트 요청 - 최종 승인
```

**핵심 원칙**:
- Task Agent ≠ Verification Agent (작성자와 검증자 분리)
- Grid가 진실의 원천: 모든 Task 정보는 SSAL Grid에 있음
- 서브에이전트 투입: Task Agent(#7), Verification Agent(#15) 사용

---

## 6. PO(Project Owner) 필수 작업

### S2BI1: Resend 이메일 서비스 설정
1. https://resend.com 에서 계정 생성
2. API Key 발급
3. Vercel 환경변수에 RESEND_API_KEY 추가

### S2BI3: 이메일 도메인 인증 (Resend)
1. Whois DNS 설정 (네임서버 고급설정)
2. Resend에서 도메인 추가
3. DNS 레코드 설정 (DKIM, SPF, DMARC)
4. 인증 완료 확인

### S2D1: DB 인덱스 SQL 실행
1. Supabase SQL Editor 접속
2. S2D1_indexes.sql 실행
3. 인덱스 생성 확인

### S2C1: 학습 콘텐츠 시드 SQL 실행
1. Supabase SQL Editor 접속
2. seed SQL 실행
3. 데이터 확인

---

## 7. Stage Gate 완료 기준

### 체크리스트
- [ ] S2M1: API 문서 완성
- [ ] S2F1: Google 로그인 UI 동작 확인
- [ ] S2F2: 비밀번호 재설정 플로우 확인
- [ ] S2BI1: Resend 이메일 서비스 설정 완료
- [ ] S2BI2: 에러 핸들링 시스템 동작 확인
- [ ] S2BI3: 이메일 도메인 인증 완료
- [ ] S2BA1: Google OAuth API 동작 확인
- [ ] S2BA2: 이메일 발송 테스트 (실제 수신)
- [ ] S2BA3: 구독 관리 API 동작 확인
- [ ] S2D1: DB 인덱스 생성 확인
- [ ] S2S1: 인증 미들웨어 동작 확인
- [ ] S2T1: 인증 API 테스트 통과
- [ ] S2C1: 학습 콘텐츠 시드 데이터 확인

### 다음 Stage 조건
S2 완료 → S3 시작 가능

---

## 8. 주의사항

```
⚠️ 가이드 문서만 작성하고 "완료" 처리 금지!
⚠️ PO가 실제 설정을 완료해야 Task 완료!
⚠️ 실제 작동 테스트 성공 필수!
```

---

**확인 버튼을 클릭하면 Workspace에 Order Sheet가 로드됩니다.**
