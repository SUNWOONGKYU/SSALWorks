# S2 개발 1차 (Core Development) 안내문

> **작성일**: 2025-12-17
> **버전**: 2.0 (S2 실제 작업 경험 기반)

---

## Stage 개요

**S2 (개발 1차)**는 핵심 기능을 구현하는 단계입니다.

### Stage 목표
- 인증/인가 시스템 구축 (Google OAuth, 세션 관리)
- 이메일 시스템 구축 (Resend 연동)
- 구독 관리 API 구현
- 프론트엔드 인증 페이지 구현
- 테스트 인프라 구축
- API 문서화

---

## Task 목록 (13개)

| Task ID | Task Name | Area | 유형 |
|---------|-----------|------|------|
| S2F1 | Google 로그인 UI | Frontend | AI-Only |
| S2F2 | 비밀번호 재설정 UI | Frontend | AI-Only |
| S2BA1 | Google OAuth API | Backend_APIs | AI-Only |
| S2BA2 | 이메일 발송 API | Backend_APIs | AI-Only |
| S2BA3 | 구독 관리 API | Backend_APIs | AI-Only |
| S2S1 | 인증 미들웨어 | Security | AI-Only |
| S2BI1 | 이메일 모듈 | Backend_Infra | **Human-AI** |
| S2BI2 | 에러 처리/토스트 | Backend_Infra | AI-Only |
| S2C1 | 학습 콘텐츠 시드 | Content_System | **PO 실행** |
| S2D1 | DB 인덱스 최적화 | Database | **PO 실행** |
| S2M1 | API 문서화 | Documentation | AI-Only |
| S2T1 | 인증 API 테스트 | Testing | AI-Only |
| S2O1 | Vercel 환경변수 설정 | DevOps | **Human-AI** |

---

## 작업 규칙

### 파일 저장 규칙 (이중 저장)
- Frontend, Backend_APIs, Database → Stage 폴더 + Production 폴더
- 문서 (Documentation, Testing) → Stage 폴더에만

### Task ID 코멘트
```javascript
// Task ID: S2BA1 - Google OAuth API
```

```html
<!-- Task ID: S2F1 - Google 로그인 UI -->
```

---

## 검증 프로세스 (3단계)

```
1단계: Task Agent → 작업 수행
2단계: Verification Agent → 검증 (작성자 ≠ 검증자)
3단계: Stage Gate → Main Agent 직접 수행
4단계: PO 승인 → 테스트 후 승인/거부
```

---

## PO(Project Owner) 필수 작업

### S2BI1: Resend 설정
1. https://resend.com 에서 계정 생성
2. API Key 발급
3. Vercel 환경변수에 RESEND_API_KEY 추가

### S2D1: DB 인덱스 SQL 실행
1. Supabase SQL Editor 접속
2. S2D1_indexes.sql 실행
3. 인덱스 생성 확인

### S2C1: 학습 콘텐츠 시드 SQL 실행
1. Supabase SQL Editor 접속
2. seed SQL 실행
3. 데이터 확인

### S2O1: Vercel 환경변수
```
필수 환경변수:
- RESEND_API_KEY
- NEXT_PUBLIC_SUPABASE_URL
- NEXT_PUBLIC_SUPABASE_ANON_KEY
- SUPABASE_SERVICE_ROLE_KEY
```

### 도메인 연결
```
Whois DNS 설정 (네임서버 고급설정):
- A 레코드: 76.76.21.21
- CNAME: cname.vercel-dns.com
- TXT: Vercel 제공 값
```

---

## Stage Gate 완료 기준

### 체크리스트
- [ ] S2F1: Google 로그인 버튼 동작 확인
- [ ] S2F2: 비밀번호 재설정 플로우 확인
- [ ] S2BA2: 이메일 발송 테스트 (실제 수신)
- [ ] S2S1: 인증 미들웨어 동작 확인
- [ ] S2C1: 학습 콘텐츠 시드 데이터 확인
- [ ] S2D1: DB 인덱스 생성 확인

### 다음 Stage 조건
S2 완료 → S3 시작 가능

---

## 주의사항

```
⚠️ 가이드 문서만 작성하고 "완료" 처리 금지!
⚠️ PO가 실제 설정을 완료해야 Task 완료!
⚠️ 실제 작동 테스트 성공 필수!
```

---

**확인 버튼을 클릭하면 Workspace에 Order Sheet가 로드됩니다.**
